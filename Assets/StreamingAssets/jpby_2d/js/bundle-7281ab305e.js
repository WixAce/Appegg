var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}}()({1:[function(require,module,exports){"use strict";require("./framework/utils/polyfill");var _gtea2=_interopRequireDefault(require("./framework/gtea/gtea")),_config2=_interopRequireDefault(require("./framework/utils/config"));require("./app/uiReg");var _mainapp2=_interopRequireDefault(require("./app/mainapp"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}new function Main(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Main),_config2.default.ChkDesignResolution(),Laya.init(_config2.default.viewSize.width,_config2.default.viewSize.height,laya.webgl.WebGL),Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_AUTO,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.screenMode=Laya.Stage.SCREEN_HORIZONTAL,Laya.MouseManager.multiTouchEnabled=!1,_gtea2.default.utils.Init(!0),(new _mainapp2.default).InApp()}},{"./app/mainapp":48,"./app/uiReg":50,"./framework/gtea/gtea":127,"./framework/utils/config":145,"./framework/utils/polyfill":147}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_matchkind2=_interopRequireDefault(require("../../../framework/match/matchkind")),_matchdef2=_interopRequireDefault(require("../../../framework/match/matchdef")),_kindfree2=_interopRequireDefault(require("../../../framework/match/kindfree")),_InitMatch_Jcby2=_interopRequireDefault(require("./InitMatch_Jcby"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var InitMatch=function(){function InitMatch(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InitMatch)}return _createClass(InitMatch,null,[{key:"Init",value:function(){_matchkind2.default.Reg(_matchdef2.default.MATCH_MODE.MM_FREE,_kindfree2.default),_InitMatch_Jcby2.default.Init()}}]),InitMatch}();exports.default=InitMatch},{"../../../framework/match/kindfree":130,"../../../framework/match/matchdef":132,"../../../framework/match/matchkind":133,"./InitMatch_Jcby":3}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_kindfree=require("../../../framework/match/kindfree"),_kindfree2=(obj=_kindfree)&&obj.__esModule?obj:{default:obj};var InitMatch_Jcby=function(){function InitMatch_Jcby(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InitMatch_Jcby)}return _createClass(InitMatch_Jcby,null,[{key:"Load_Free",value:function(){var kindtdf=Laya.loader.getRes("data/match/jcby/free.json");if(kindtdf){var kindnum=0;for(var key in kindtdf){var value=kindtdf[key],kind=new _kindfree2.default(parseInt(key),_kindfree2.default);kind.DefParse(value,"jcby"),kind.enterGold=value["携带金额"][0],kind.maxGold=value["携带金额"][1],kind.fireGold=value["炮的倍数"][0],kind.canopenchest=value["开启宝箱"],kind.chestintor=value["宝箱说明"],kindnum+=1}console.log("金蟾捕鱼载入FREE类型"+kindnum+"个")}}},{key:"Init",value:function(){InitMatch_Jcby.Load_Free()}}]),InitMatch_Jcby}();exports.default=InitMatch_Jcby},{"../../../framework/match/kindfree":130}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_tdf2=_interopRequireDefault(require("../../framework/utils/tdf")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VipMgr=function(){function VipMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VipMgr)}return _createClass(VipMgr,null,[{key:"Init",value:function(){VipMgr.s_szData={},VipMgr.s_nMax=0;var tdf=_tdf2.default.LoadTDF("data/match/jcby/vip.tdf");if(tdf)for(var key in tdf){var value=tdf[key];VipMgr.s_szData[key]={lv:value["等级"],minexp:value["经验区间"][0],maxexp:value["经验区间"][1],hitadd:value["命中加成"],getgold:value["救济金"],intor:value["说明"]},VipMgr.s_nMax++}}},{key:"GetVipData",value:function(vipexp){if(isNaN(vipexp)){var vipexpdata=_playerdata_mgr2.default.getInstance().getMe().m_VIPExpData;if(!vipexpdata)return null;vipexp=vipexpdata.exp}for(var key in VipMgr.s_szData){var data=VipMgr.s_szData[key];if(vipexp>=data.minexp&&vipexp<=data.maxexp)return data}return null}},{key:"GetVipDataByLv",value:function(viplv){return VipMgr.s_szData[viplv.toString()]}},{key:"GetVipLv",value:function(vipexp){if(isNaN(vipexp)){var vipexpdata=_playerdata_mgr2.default.getInstance().getMe().m_VIPExpData;if(!vipexpdata)return 0;vipexp=vipexpdata.exp}for(var key in VipMgr.s_szData){var data=VipMgr.s_szData[key];if(vipexp>=data.minexp&&vipexp<=data.maxexp)return data.lv}return 0}}]),VipMgr}();exports.default=VipMgr},{"../../framework/data/playerdata_mgr":117,"../../framework/utils/tdf":148}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseConst3=_interopRequireDefault(require("../appbase/BaseConst")),_gamemodel2=_interopRequireDefault(require("../game/jcby/gamemodel")),_playerdata_mgr2=_interopRequireDefault(require("../framework/data/playerdata_mgr")),_comfunc2=_interopRequireDefault(require("../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameConst=function(_BaseConst){function GameConst(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameConst),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameConst.__proto__||Object.getPrototypeOf(GameConst)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameConst,_BaseConst3.default),_createClass(GameConst,null,[{key:"GetDayChargeData",value:function(){var nowtime=new Date,daycharge=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("daycharge"),bchg=!1;return daycharge?_comfunc2.default.isSameDay(nowtime,new Date(daycharge.chktime))||(daycharge.chktime=nowtime,daycharge.list={},bchg=!0):(daycharge={chktime:nowtime,list:{}},bchg=!0),bchg&&(_playerdata_mgr2.default.getInstance().setUserSetDataByKey("daycharge",daycharge),_playerdata_mgr2.default.getInstance().writeUserSetData()),daycharge}}]),GameConst}();exports.default=GameConst,GameConst.APPVERSION="1.0.0",GameConst.GAMEVERSION=".149",GameConst.CHANNEL="jcby",GameConst.SHOWAGREEMENT=!0,GameConst.DEBUG=!1,GameConst.GAMENAME="金牌捕鱼",GameConst.AGENT_NOTICE="欢迎来到<color=#ffff00>金牌捕鱼</color>,祝您游戏愉快!",GameConst.AESKEY="pgb&LcLxq^qf#2qF",GameConst.PLAYERINFOGOLD=!0,GameConst.AGENT_FEEDBACK="产品建议或举报请联系客服",GameConst.WeChatPub="糖猫游戏",GameConst.HELPTEXT="这是一款街机捕鱼游戏，在保留了传统街机版本的界面、玩法、奖励方式等基础上，增加了更多刺激的网络元素，更有神秘的海底生物，带给玩家们全新的捕鱼体验。\n\n游戏需要有足够的金币才能对鱼进行发炮操作，捕获不同的鱼有不同的金币及奖励。",GameConst.HELPTEXT2="算法：\n获得金币计算公式：所选炮值*捕获鱼类的倍数=总得金币。\n\n宝箱(红包场)：\n捕鱼过程中，发炮时间达到一定时长时即可获得时长福利宝箱，从宝箱中可获赠奖励！\n\n道具(金币场)：\n在捕鱼过程中有机率掉落捕鱼道具：青铜鱼雷、白银鱼雷、黄金鱼雷、核子鱼雷，使用鱼雷捕鱼100%得金币！",GameConst.SHAREMSG="一款可以赢红包的捕鱼游戏!",GameConst.GET_ITEM_PROMPT="兑换成功，请前往微信公众号领取！\n如未关注公众号请前往关注后，返回游戏\n在“我的背包”中领取",GameConst.CANUSEITEM=!0,GameConst.GAMECHARGE=!0,GameConst.LOCKTURRET=!0,GameConst.PICTYPE="high",_BaseConst3.default.GAMEMODELLIST=GameConst.GAMEMODELLIST=[{name:"金蟾捕鱼",group:"leisure",res:"jcby",modelclass:"GameModel_Jcby",szgame:[{name:"金蟾捕鱼",showname:"金牌捕鱼",gtype:"jcby"}]}],Laya.ClassUtils.regClass("GameModel_Jcby",_gamemodel2.default)},{"../appbase/BaseConst":51,"../framework/data/playerdata_mgr":117,"../framework/utils/comfunc":144,"../game/jcby/gamemodel":150}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_SetingUI2=_interopRequireDefault(require("../../appbase/lobby/SetingUI")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gameconst2=_interopRequireDefault(require("../gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SetingUI=function(_BaseSetingUI){function SetingUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SetingUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SetingUI.__proto__||Object.getPrototypeOf(SetingUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SetingUI,_SetingUI2.default),_createClass(SetingUI,[{key:"OnCreate",value:function(){_get(SetingUI.prototype.__proto__||Object.getPrototypeOf(SetingUI.prototype),"OnCreate",this).call(this),this.uiobj.highbtn.on(Laya.Event.CLICK,this,this.SelectPic),this.uiobj.lowbtn.on(Laya.Event.CLICK,this,this.SelectPic)}},{key:"OnOpen",value:function(){_get(SetingUI.prototype.__proto__||Object.getPrototypeOf(SetingUI.prototype),"OnOpen",this).call(this);var pictype=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("pictype","high");this.OnSelectPic(pictype)}},{key:"OnSelectPic",value:function(type){this.uiobj.highbtn.selected="high"==type,this.uiobj.highbtn.mouseEnabled="high"!=type,this.uiobj.lowbtn.selected="low"==type,this.uiobj.lowbtn.mouseEnabled="low"!=type,_gameconst2.default.PICTYPE=type}},{key:"SelectPic",value:function(event){event.target===this.uiobj.highbtn?this.OnSelectPic("high"):event.target===this.uiobj.lowbtn&&this.OnSelectPic("low"),_playerdata_mgr2.default.getInstance().setUserSetDataByKey("pictype",_gameconst2.default.PICTYPE),_playerdata_mgr2.default.getInstance().writeUserSetData(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),SetingUI}();exports.default=SetingUI},{"../../appbase/com/soundmgr":65,"../../appbase/lobby/SetingUI":70,"../../framework/data/playerdata_mgr":117,"../gameconst":5}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_activityui2=_interopRequireDefault(require("../../../appbase/lobby/activity/activityui")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_rollpage2=_interopRequireDefault(require("./rollpage")),_daysignpage2=_interopRequireDefault(require("./daysignpage")),_taskpage2=_interopRequireDefault(require("./taskpage")),_taskpage4=_interopRequireDefault(require("../../../appbase/lobby/activity/taskpage")),_daytimepage2=_interopRequireDefault(require("./daytimepage")),_imagepage2=_interopRequireDefault(require("../../../appbase/lobby/activity/imagepage")),_exchangecode2=_interopRequireDefault(require("./exchangecode"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ActivityUI=function(_BaseActivityUI){function ActivityUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ActivityUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ActivityUI.__proto__||Object.getPrototypeOf(ActivityUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ActivityUI,_activityui2.default),_createClass(ActivityUI,[{key:"InitPage",value:function(){this.m_szPage=[new _rollpage2.default(this.m_UI.Activity_bg),new _daysignpage2.default(this.m_UI.Activity_daysign),new _taskpage2.default(this.m_UI.Activity_task_honor),new _taskpage4.default(this.m_UI.Activity_task),new _daytimepage2.default(this.m_UI.Activity_daytime),new _imagepage2.default(this.m_UI.Activity_img),new _exchangecode2.default(this.m_UI.Activity_exchangecode)]}},{key:"RefreshTips",value:function(cell){var tipdata=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("tipdata",{}),nowtime=new Date,usergift=_playerdata_mgr2.default.getInstance().getMe().m_GiftData,cyclegiftdata=void 0,daytimegiftdata=void 0;usergift&&(cyclegiftdata=usergift["周期礼包"],daytimegiftdata=usergift["时段礼包"]);for(var honortask=_playerdata_mgr2.default.getInstance().getMe().m_HonorTask,daytask=_playerdata_mgr2.default.getInstance().getMe().m_DaliyTask,szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(item.dataSource&&(!cell||cell===item)&&(tipdata.acttip?tipdata.lasttime&&!_comfunc2.default.isSameDay(nowtime,new Date(tipdata.lasttime))?item.dataSource.page>1&&(item.tipvisible=!0):i+1!=this.m_nCurPage&&(2==item.dataSource.page?cyclegiftdata&&cyclegiftdata.iscan&&(item.tipvisible=!0):3==item.dataSource.page?honortask&&honortask.HasReachReward()&&(item.tipvisible=!0):4==item.dataSource.page?daytask&&daytask.HasReachReward()&&(item.tipvisible=!0):5==item.dataSource.page&&daytimegiftdata&&daytimegiftdata.iscan&&(item.tipvisible=!0)):item.tipvisible=!0,_comfunc2.default.isNil(item.tipvisible)||(item.tip.visible=item.tipvisible),cell))break}tipdata.acttip=!0,tipdata.lasttime=nowtime.getTime(),_playerdata_mgr2.default.getInstance().setUserSetDataByKey("tipdata",tipdata),_playerdata_mgr2.default.getInstance().writeUserSetData()}},{key:"GoTask",value:function(agv){var condition=agv[0];if("jcbycatchfish"==condition||"jcbyopenbox"==condition){var lobby=_UIMgr2.default.getInstance().GetUI("大厅界面");return lobby.OnClickBtn({target:lobby.uiobj.quickbtn,nosnd:!0}),void _UIMgr2.default.getInstance().CloseUI("活动界面")}(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(ActivityUI.prototype.__proto__||Object.getPrototypeOf(ActivityUI.prototype),"GoTask",this).call(this,agv)}}]),ActivityUI}();exports.default=ActivityUI},{"../../../appbase/lobby/activity/activityui":71,"../../../appbase/lobby/activity/imagepage":72,"../../../appbase/lobby/activity/taskpage":73,"../../../framework/data/playerdata_mgr":117,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"./daysignpage":8,"./daytimepage":10,"./exchangecode":11,"./rollpage":12,"./taskpage":13}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_tdf2=_interopRequireDefault(require("../../../framework/utils/tdf")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_gameconst2=_interopRequireDefault(require("../../gameconst")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Activity_DaySignPage=function(_BaseObj){function Activity_DaySignPage(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Activity_DaySignPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Activity_DaySignPage.__proto__||Object.getPrototypeOf(Activity_DaySignPage)).call(this));_this.m_BindObj=bindobj,_this.m_szItem=[];for(var tdf=_tdf2.default.LoadTDF("data/gift/daycycle.tdf"),i=0;i<7;i++){var item=bindobj["dailybonus_"+(i+1)],data=tdf[(i+1).toString()];if(data){item.highlight=item.getChildByName("highlight"),item.reward=item.getChildByName("reward"),item.markobj=item.getChildByName("mark"),item.maskobj=item.getChildByName("maskobj"),item.curmark=item.getChildByName("dailybonus_today"),item.goods=item.getChildByName("goods"),item.on(Laya.Event.CLICK,_this,_this.GetReward);var gold=data["金币"],vouchers2=data["红包碎片"];gold>0&&vouchers2>0?(item.reward.text=gold+"金币\n"+_comfunc2.default.getVouchers2Ratio(vouchers2)+_itemkindmgr2.default.VOUCHERS2_NAME,_gameconst2.default.SetIconImg(item.goods,"awards/dailybonus_hbsp.png")):gold>0?(item.reward.text=gold+"金币",_gameconst2.default.SetIconImg(item.goods,"awards/dailybonus_big_gold.png")):vouchers2>0&&(item.reward.text=_comfunc2.default.getVouchers2Ratio(vouchers2)+_itemkindmgr2.default.VOUCHERS2_NAME,_gameconst2.default.SetIconImg(item.goods,"awards/dailybonus_hbsp.png"))}item.visible=!1,_this.m_szItem[i]=item}return _this.m_GetBtn=bindobj.Button_get,_this.m_GetBtn.visible=!1,_this.m_GetBtn.on(Laya.Event.CLICK,_this,_this.GetReward),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Activity_DaySignPage,_BaseObj3.default),_createClass(Activity_DaySignPage,[{key:"Open",value:function(data){this.Refresh(),_playerdata_mgr2.default.getInstance().getMe().addEventListener("eve.DataChg",this,this.Refresh),this.m_BindObj.visible=!0}},{key:"Close",value:function(){_playerdata_mgr2.default.getInstance().getMe().removeEventListener("eve.DataChg",this,this.Refresh);for(var i=0;i<this.m_szItem.length;i++)this.m_szItem[i].visible=!1;this.m_bGet=!1,this.m_GetBtn.visible=!1,this.m_BindObj.visible=!1}},{key:"Refresh",value:function(){var usergift=_playerdata_mgr2.default.getInstance().getMe().m_GiftData;if(usergift){var giftdata=usergift["周期礼包"];if(giftdata){for(var hasreward=!1,i=0;i<giftdata.maxday;i++){var item=this.m_szItem[i];if(!item)break;i+1<giftdata.day?(item.markobj.visible=!0,item.maskobj.visible=!0,item.highlight.visible=!1,item.curmark.visible=!1):i+1==giftdata.day?(item.markobj.visible=!giftdata.iscan,item.maskobj.visible=!giftdata.iscan,item.highlight.visible=giftdata.iscan,hasreward=giftdata.iscan):(item.markobj.visible=!1,item.maskobj.visible=!1,item.highlight.visible=!1,item.curmark.visible=!1),item.visible=!0}this.m_GetBtn.disabled=!hasreward,this.m_GetBtn.visible=!0}}}},{key:"GetReward",value:function(event){this.m_bGet?_FlyText2.default.AddFlyText("正在领取奖励..."):_gtea2.default.rpc.Call("礼包服务","GetGift",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),name:"周期礼包",viplv:_playerdata_mgr2.default.getInstance().getMeVIPLv()},this,function(agv){this.m_BindObj.visible&&(_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"签到成功"},!0,!0),this.m_bGet=!1,this.Refresh())},function(errflag,errmsg){this.m_BindObj.visible&&(_FlyText2.default.AddFlyText(errmsg),this.m_bGet=!1)})}}]),Activity_DaySignPage}();exports.default=Activity_DaySignPage},{"../../../appbase/com/FlyText":52,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../framework/utils/tdf":148,"../../gameconst":5}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=(_interopRequireDefault(require("../../../framework/utils/tdf")),_interopRequireDefault(require("../../gameconst")),_interopRequireDefault(require("../../../framework/utils/comfunc")),_interopRequireDefault(require("../../../framework/data/playerdata_mgr"))),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DaySignUI=function(_BaseUI){function DaySignUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DaySignUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(DaySignUI.__proto__||Object.getPrototypeOf(DaySignUI)).call(this));return _this.m_szDataName=["m_GiftDaySign","m_GiftDaySign2"],_this.m_szItemID=[1800001,1800004],_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DaySignUI,_BaseUI3.default),_createClass(DaySignUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(DaySignUI.prototype.__proto__||Object.getPrototypeOf(DaySignUI.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClickBtn);for(var i=0;i<this.m_szDataName.length;i++)this.uiobj["buybtn_"+(i+1)].on(Laya.Event.CLICK,this,this.BuyItem),this.uiobj["getbtn_"+(i+1)].on(Laya.Event.CLICK,this,this.GetReward)}},{key:"OnOpen",value:function(){this.Refresh(),_playerdata_mgr2.default.getInstance().getMe().addEventListener("eve.DataChg",this,this.Refresh)}},{key:"OnClose",value:function(){_playerdata_mgr2.default.getInstance().getMe().removeEventListener("eve.DataChg",this)}},{key:"Refresh",value:function(){for(var i=0;i<this.m_szDataName.length;i++){var gift=_playerdata_mgr2.default.getInstance().getMe()[this.m_szDataName[i]];gift?0==gift.status?(this.uiobj["buybtn_"+(i+1)].visible=!0,this.uiobj["getbtn_"+(i+1)].visible=!1):(this.uiobj["buybtn_"+(i+1)].visible=!1,this.uiobj["getbtn_"+(i+1)].visible=!0,this.uiobj["getbtn_"+(i+1)].disabled=2==gift.status):(this.uiobj["buybtn_"+(i+1)].visible=!1,this.uiobj["getbtn_"+(i+1)].visible=!1)}}},{key:"GetReward",value:function(event){for(var i=0;i<this.m_szDataName.length;i++)if(this.uiobj["getbtn_"+(i+1)]===event.target){this.OnGetReward(i);break}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnGetReward",value:function(idx){this.uiobj["getbtn_"+(idx+1)].disabled=!0,_gtea2.default.rpc.Call(["每日签到","每日签到2"][idx],"Sign",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(data){this.IsOpen()&&(_playerdata_mgr2.default.getInstance().getMe().setTypeData(["GiftDaySign","GiftDaySign2"][idx],data),this.Refresh(),_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取成功!"},!0,!0))},function(errflag,errmsg){this.IsOpen()&&(this.uiobj["getbtn_"+(idx+1)].disabled=!1,_FlyText2.default.AddFlyText(errmsg))})}},{key:"BuyItem",value:function(event){for(var i=0;i<this.m_szDataName.length;i++)if(this.uiobj["buybtn_"+(i+1)]==event.target){_UIMgr2.default.getInstance().UIEvent("大厅界面","BuyGemsGold",{mode:1,item:{dataSource:{id:this.m_szItemID[i]}}},!0,!0);break}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnClickBtn",value:function(event){event.target===this.uiobj.closebtn&&_UIMgr2.default.getInstance().CloseUI("每日签到"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),DaySignUI}();exports.default=DaySignUI},{"../../../appbase/com/FlyText":52,"../../../appbase/com/soundmgr":65,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../framework/utils/tdf":148,"../../gameconst":5}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_tdf2=_interopRequireDefault(require("../../../framework/utils/tdf")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Activity_DayTimePage=function(_BaseObj){function Activity_DayTimePage(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Activity_DayTimePage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Activity_DayTimePage.__proto__||Object.getPrototypeOf(Activity_DayTimePage)).call(this));_this.m_BindObj=bindobj,_this.m_szItem=[];for(var tdf=_tdf2.default.LoadTDF("data/gift/daytime.tdf"),i=0;i<4;i++){var item=bindobj["dailybonus_"+(i+1)],data=tdf[(i+1).toString()];if(data){item.getChildByName("time").text=_comfunc2.default.stringformat("%02d:%02d-%02d:%02d",data["时段"][0]/100,data["时段"][0]%100,data["时段"][1]/100,data["时段"][1]%100),item.highlight=item.getChildByName("highlight"),item.reward=item.getChildByName("reward"),item.markobj=item.getChildByName("mark"),item.curmark=item.getChildByName("dailybonus_today"),item.taskbar=item.getChildByName("task_bar"),item.taskbar.progress=item.taskbar.getChildByName("progress"),item.taskbar.progress.rawwidth=item.taskbar.progress.width,item.taskbar.per=item.taskbar.getChildByName("per"),item.getbtn=item.getChildByName("getbtn"),item.getbtn.on(Laya.Event.CLICK,_this,_this.GetReward),item.getok=item.getChildByName("getok");var gold=data["金币"];item.reward.text=gold+"金币"}item.visible=!1,_this.m_szItem[i]=item}return _this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Activity_DayTimePage,_BaseObj3.default),_createClass(Activity_DayTimePage,[{key:"Open",value:function(data){this.Refresh(),_playerdata_mgr2.default.getInstance().getMe().addEventListener("eve.DataChg",this,this.Refresh),this.m_BindObj.visible=!0}},{key:"Close",value:function(){_playerdata_mgr2.default.getInstance().getMe().removeEventListener("eve.DataChg",this,this.Refresh);for(var i=0;i<this.m_szItem.length;i++)this.m_szItem[i].visible=!1;this.m_bGet=!1,this.m_BindObj.visible=!1}},{key:"Refresh",value:function(){var usergift=_playerdata_mgr2.default.getInstance().getMe().m_GiftData;if(usergift){var giftdata=usergift["时段礼包"];if(giftdata)for(var i=0;i<this.m_szItem.length;i++){var item=this.m_szItem[i];i+1<giftdata.gid?(item.markobj.visible=IsGet(i+1),item.highlight.visible=!1,item.curmark.visible=!1,item.getbtn.disabled=!0,item.getbtn.visible=!0,item.getok.visible=!1):i+1==giftdata.gid?(item.markobj.visible=2==giftdata.status,item.highlight.visible=giftdata.iscan,item.curmark.visible=3!=giftdata.status,item.getbtn.disabled=!giftdata.iscan,item.getbtn.visible=!(2==giftdata.status),item.getok.visible=2==giftdata.status):(item.markobj.visible=!1,item.highlight.visible=!1,item.curmark.visible=!1,item.getbtn.disabled=!0,item.getbtn.visible=!0,item.getok.visible=!1),item.markobj.visible?(item.taskbar.progress.width=item.taskbar.progress.rawwidth,item.taskbar.per.text="1/1"):(item.taskbar.progress.width=1,item.taskbar.per.text="0/1"),item.visible=!0}}function IsGet(gid){for(var i=0;i<giftdata.data.length;i++){if(giftdata.data[i].gid==gid)return!0}return!1}}},{key:"GetReward",value:function(event){this.m_bGet?_FlyText2.default.AddFlyText("正在领取奖励..."):_gtea2.default.rpc.Call("礼包服务","GetGift",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),name:"时段礼包",viplv:_playerdata_mgr2.default.getInstance().getMeVIPLv()},this,function(agv){this.m_BindObj.visible&&(_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取成功"},!0,!0),this.m_bGet=!1,this.Refresh())},function(errflag,errmsg){this.m_BindObj.visible&&(_FlyText2.default.AddFlyText(errmsg),this.m_bGet=!1)})}}]),Activity_DayTimePage}();exports.default=Activity_DayTimePage},{"../../../appbase/com/FlyText":52,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../framework/utils/tdf":148}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=(_interopRequireDefault(require("../../../framework/utils/tdf")),_interopRequireDefault(require("../../../framework/data/playerdata_mgr"))),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_gameconst2=_interopRequireDefault(require("../../gameconst"));_interopRequireDefault(require("../../../framework/utils/comfunc")),_interopRequireDefault(require("../../../framework/data/item/itemkindmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Activity_DaySignPage=function(_BaseObj){function Activity_DaySignPage(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Activity_DaySignPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Activity_DaySignPage.__proto__||Object.getPrototypeOf(Activity_DaySignPage)).call(this));return _this.m_BindObj=bindobj,_this.Input=bindobj.input,_this.m_GetBtn=bindobj.Button_get,_this.m_GetBtn.on(Laya.Event.CLICK,_this,_this.GetReward),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Activity_DaySignPage,_BaseObj3.default),_createClass(Activity_DaySignPage,[{key:"Open",value:function(data){this.Input.text="",this.m_BindObj.visible=!0}},{key:"Close",value:function(){this.m_bGet=!1,this.m_BindObj.visible=!1}},{key:"GetReward",value:function(event){var code=this.Input.text;""!=code?this.m_bGet?_FlyText2.default.AddFlyText("正在领取奖励..."):(this.m_bGet=!0,_gtea2.default.rpc.Call("com::礼包码兑换","Exchange",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),code:code,namespace:_gameconst2.default.NAMESPACE},this,function(agv){this.m_BindObj.visible&&(_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取成功,请注意查收！"},!0,!0),this.m_bGet=!1)},function(errflag,errmsg){this.m_BindObj.visible&&(_FlyText2.default.AddFlyText(errmsg),this.m_bGet=!1)})):_FlyText2.default.AddFlyText("请输入正确的兑换码...")}}]),Activity_DaySignPage}();exports.default=Activity_DaySignPage},{"../../../appbase/com/FlyText":52,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../framework/utils/tdf":148,"../../gameconst":5}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_PageView2=require("../../../appbase/com/PageView"),_PageView3=(obj=_PageView2)&&obj.__esModule?obj:{default:obj};var Activity_RollPage=function(_PageView){function Activity_RollPage(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Activity_RollPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Activity_RollPage.__proto__||Object.getPrototypeOf(Activity_RollPage)).call(this,bindobj));return _this.m_nAutoTime=3e3,_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Activity_RollPage,_PageView3.default),_createClass(Activity_RollPage,[{key:"Open",value:function(data){this.m_Data=data;for(var szImg=data.bgimg.split(","),i=0;i<szImg.length;i++){var image=new Laya.Image("lobby/activity/"+szImg[i]);this.AddPageItem(image)}this.ShowPage(0),this.m_BindObj.visible=!0}},{key:"Close",value:function(){this.m_Data=null,this.ClearPage(),this.m_BindObj.visible=!1}}]),Activity_RollPage}();exports.default=Activity_RollPage},{"../../../appbase/com/PageView":59}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_taskpage2=(_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_interopRequireDefault(require("../../../appbase/lobby/activity/taskpage"))),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_HonorTaskMgr2=_interopRequireDefault(require("../../../appbase/com/HonorTaskMgr")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Activity_HonorTaskPage=function(_Activity_TaskPage){function Activity_HonorTaskPage(bindobj){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Activity_HonorTaskPage),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Activity_HonorTaskPage.__proto__||Object.getPrototypeOf(Activity_HonorTaskPage)).call(this,bindobj))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Activity_HonorTaskPage,_taskpage2.default),_createClass(Activity_HonorTaskPage,[{key:"InitTask",value:function(){}},{key:"Open",value:function(data){_playerdata_mgr2.default.getInstance().getMe().m_HonorTask&&_playerdata_mgr2.default.getInstance().getMe().m_HonorTask.addEventListener("eve.DataChg",this,this.RefreshPage),_gtea2.default.rpc.Call("成就任务","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv){_playerdata_mgr2.default.getInstance().getMe().setTypeData("HonorTask",agv[0])},function(errflag,errmsg){}),this.m_BindObj.visible=!0}},{key:"Close",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(Activity_HonorTaskPage.prototype.__proto__||Object.getPrototypeOf(Activity_HonorTaskPage.prototype),"Close",this).call(this),_playerdata_mgr2.default.getInstance().getMe().m_HonorTask&&_playerdata_mgr2.default.getInstance().getMe().m_HonorTask.removeEventListener("eve.DataChg",this,this.RefreshPage)}},{key:"RefreshPage",value:function(){if(this.m_BindObj.visible){for(var usertask=_playerdata_mgr2.default.getInstance().getMe().m_HonorTask,szItem=[],i=0;i<_HonorTaskMgr2.default.getInstance().m_szTask.length;i++){var sub=_HonorTaskMgr2.default.getInstance().m_szTask[i];if(sub){for(var subdata=null,task=null,item=null,j=0;j<sub.length;j++)if(subdata=sub[j],(task=usertask.FindReachTask(subdata.id))&&0==task[2]){item={mode:3,task:task,data:subdata};break}if(null==item)for(var _j=0;_j<sub.length;_j++)if(subdata=sub[_j],task=usertask.FindTask(subdata.id)){item={mode:1,task:task,data:subdata};break}null==item&&(subdata=sub[sub.length-1],(task=usertask.FindReachTask(subdata.id))&&(item={mode:2,task:task,data:subdata})),null!=item&&szItem.push(item)}}szItem.sort(function(item1,item2){if(item1.mode>item2.mode)return-1;if(item1.mode<item2.mode)return 1;var kind1=parseInt(item1.data.kind),kind2=parseInt(item2.data.kind);return kind1<kind2?-1:kind1>kind2?1:0}),this.m_ListView.array=szItem}}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource;item.task_share.visible=!1,item.task_sign.visible=!1,item.task_game.visible=!0,item.task_game.gobtn.visible=!1;var markreward=item.task_game.getChildByName("gold");markreward.visible=!0;var rewardvalue=item.task_game.getChildByName("value");data.data.reward.gold>0?_gameconst2.default.SetIconImg(markreward,"item/shopitem_gold3.png"):data.data.reward.vouchers2>0?_gameconst2.default.SetIconImg(markreward,"lobby/icon_redpack.png"):markreward.visible=!1,rewardvalue.text=_itemkindmgr2.default.GetAddBagInfo(data.data.reward),item.task_game.getChildByName("Text_number").text=data.data.intor;var progress=item.task_game.taskbar.getChildByName("progress"),tasknum=item.task_game.taskbar.getChildByName("per"),per=0;1==data.mode?(per=data.task.m_szCondition[0][2]/data.data.condition[0][1]*100,tasknum.text=_gameconst2.default.MakeNumberSimple(data.task.m_szCondition[0][2])+"/"+_gameconst2.default.MakeNumberSimple(data.data.condition[0][1]),item.task_game.marksign.visible=!1,item.task_game.getbtn.visible=!0,item.task_game.getbtn.disabled=!0):2!=data.mode&&3!=data.mode||(per=100,tasknum.text=_gameconst2.default.MakeNumberSimple(data.data.condition[0][1])+"/"+_gameconst2.default.MakeNumberSimple(data.data.condition[0][1]),item.task_game.marksign.visible=2==data.mode,item.task_game.getbtn.visible=3==data.mode,item.task_game.getbtn.disabled=!1);var width=parseInt(progress.width*per/100);progress.mask.graphics.clear(),progress.mask.graphics.drawRect(0,0,width,progress.height,"#000000")}},{key:"GetTaskReward",value:function(event){if(this.m_bGetReward)_FlyText2.default.AddFlyText("正在领取中...");else{for(var i=0;i<this.m_ListView.cells.length;i++){var item=this.m_ListView.cells[i];if(item.dataSource&&event.target===item.task_game.getbtn){this.m_bGetReward=!0,_gtea2.default.rpc.Call("成就任务","GetReward",[_playerdata_mgr2.default.getInstance().getMeUID(),item.dataSource.data.id],this,GetOk,GetErr);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}function GetOk(agv){this.m_bGetReward=!1,_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取奖励成功"},!0,!0)}function GetErr(errflag,errmsg){this.RefreshPage(),this.m_bGetReward=!1,_FlyText2.default.AddFlyText(errmsg)}}}]),Activity_HonorTaskPage}();exports.default=Activity_HonorTaskPage},{"../../../appbase/com/FlyText":52,"../../../appbase/com/HonorTaskMgr":54,"../../../appbase/com/soundmgr":65,"../../../appbase/lobby/activity/taskpage":73,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142,"../../gameconst":5}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AgreeMent=function(_BaseUI){function AgreeMent(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AgreeMent),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(AgreeMent.__proto__||Object.getPrototypeOf(AgreeMent)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AgreeMent,_BaseUI3.default),_createClass(AgreeMent,[{key:"OnCreate",value:function(){this.uiobj.Btn_Close.on(Laya.Event.CLICK,this,this.OnClick);var str=Laya.loader.getRes("data/agreement.txt");this.uiobj.msg.text=str}},{key:"OnClick",value:function(event){event.target===this.uiobj.Btn_Close&&_UIMgr2.default.getInstance().CloseUI("同意协议")}}]),AgreeMent}();exports.default=AgreeMent},{"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BankPassUI=function(_BaseUI){function BankPassUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BankPassUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BankPassUI.__proto__||Object.getPrototypeOf(BankPassUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BankPassUI,_BaseUI3.default),_createClass(BankPassUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(BankPassUI.prototype.__proto__||Object.getPrototypeOf(BankPassUI.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.okbtn.on(Laya.Event.CLICK,this,this.OnClick)}},{key:"OnOpen",value:function(){this.uiobj.pass1.text="",this.uiobj.pass2.text="",this.uiobj.okbtn.disabled=!1}},{key:"SetPassWord",value:function(){var pass1=this.uiobj.pass1.text,pass2=this.uiobj.pass2.text;pass1.length<6||pass1.length>8?_FlyText2.default.AddFlyText("密码设置不正确"):pass1==pass2?(this.uiobj.okbtn.disabled=!0,_gtea2.default.rpc.Call("银行服务","ChgPWD",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),old_pwd:"",new_pwd:pass1},this,function(args){this.IsOpen()&&_UIMgr2.default.getInstance().CloseUI("银行密码界面")},function(errflag,errmsg){this.IsOpen()&&(this.uiobj.okbtn.disabled=!1,_FlyText2.default.AddFlyText(errmsg))})):_FlyText2.default.AddFlyText("2次输入的密码不一致")}},{key:"OnClick",value:function(event){event.target===this.uiobj.closebtn?(_UIMgr2.default.getInstance().CloseUI("银行密码界面"),_UIMgr2.default.getInstance().CloseUI("银行界面")):event.target===this.uiobj.okbtn&&this.SetPassWord(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),BankPassUI}();exports.default=BankPassUI},{"../../../appbase/com/FlyText":52,"../../../appbase/com/soundmgr":65,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BankUI=function(_BaseUI){function BankUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BankUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BankUI.__proto__||Object.getPrototypeOf(BankUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BankUI,_BaseUI3.default),_createClass(BankUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(BankUI.prototype.__proto__||Object.getPrototypeOf(BankUI.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.okbtn.on(Laya.Event.CLICK,this,this.OnClick),this.m_szBtn=[],this.m_szPage=[];for(var i=0;i<2;i++){var btn=this.uiobj["btn_"+(i+1)];btn.on(Laya.Event.CLICK,this,this.SelectPage);var page=this.uiobj["page_"+(i+1)];page.allbtn=page.getChildByName("allbtn"),page.allbtn.on(Laya.Event.CLICK,this,this.ClickAll),page.visible=!1,this.m_szBtn[i]=btn,this.m_szPage[i]=page}}},{key:"OnOpen",value:function(){_playerdata_mgr2.default.getInstance().getMe().m_UserBank.haspwd||_UIMgr2.default.getInstance().OpenUI("银行密码界面"),_playerdata_mgr2.default.getInstance().getMe().addEventListener("eve.UserBankChg",this,this.SetPageData),this.uiobj.okbtn.disabled=!1,this.OnSelectPage(1)}},{key:"OnClose",value:function(){_playerdata_mgr2.default.getInstance().getMe().removeEventListener("eve.UserBankChg",this,this.SetPageData)}},{key:"SetPageData",value:function(){var userbank=_playerdata_mgr2.default.getInstance().getMe().m_UserBank,page=this.m_szPage[this.m_nCurPage-1];page.getChildByName("value").text=_comfunc2.default.makenumberstr(userbank.gold),page.getChildByName("gold").text="",2==this.m_nCurPage&&(page.getChildByName("pass").text="")}},{key:"Deposit",value:function(){var gold=this.m_szPage[0].getChildByName("gold").text;gold.length<=0?_FlyText2.default.AddFlyText("请输入要存入的金额!"):(gold=parseInt(gold))<1e3||gold>_playerdata_mgr2.default.getInstance().getMeGold()?_FlyText2.default.AddFlyText("要存入的金额错误!"):(this.uiobj.okbtn.disabled=!0,_gtea2.default.rpc.Call("银行服务","Deposit",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),gold:gold},this,function(args){this.IsOpen()&&1==this.m_nCurPage&&(_FlyText2.default.AddFlyText("存款成功!"),this.uiobj.okbtn.disabled=!1)},function(errflag,errmsg){this.IsOpen()&&1==this.m_nCurPage&&(_FlyText2.default.AddFlyText(errmsg),this.uiobj.okbtn.disabled=!1)}))}},{key:"Checkout",value:function(){var page=this.m_szPage[1],gold=page.getChildByName("gold").text;if(gold.length<=0)_FlyText2.default.AddFlyText("请输入要取出的金额!");else if((gold=parseInt(gold))<1e3||gold>_playerdata_mgr2.default.getInstance().getMe().m_UserBank.gold)_FlyText2.default.AddFlyText("要取出的金额错误!");else{var pass=page.getChildByName("pass").text;pass.length<=0?_FlyText2.default.AddFlyText("请输入密码!"):(this.uiobj.okbtn.disabled=!0,_gtea2.default.rpc.Call("银行服务","Checkout",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),pwd:pass,gold:gold},this,function(args){this.IsOpen()&&2==this.m_nCurPage&&(this.uiobj.okbtn.disabled=!1,_FlyText2.default.AddFlyText("取款成功!"))},function(errflag,errmsg){this.IsOpen()&&2==this.m_nCurPage&&(this.uiobj.okbtn.disabled=!1,_FlyText2.default.AddFlyText(errmsg))}))}}},{key:"OnSelectPage",value:function(idx){for(var i=0;i<2;i++){var btn=this.m_szBtn[i],page=this.m_szPage[i];btn.selected=i+1==idx,btn.mouseEnabled=i+1!=idx,page.visible=i+1==idx}this.m_nCurPage=idx,this.SetPageData()}},{key:"SelectPage",value:function(event){for(var i=0;i<this.m_szBtn.length;i++){var btn=this.m_szBtn[i];if(event.target===btn){this.OnSelectPage(i+1);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"ClickAll",value:function(event){for(var i=0;i<this.m_szPage.length;i++){var page=this.m_szPage[i];if(page.allbtn===event.target){page.getChildByName("gold").text=0==i?_playerdata_mgr2.default.getInstance().getMeGold():_playerdata_mgr2.default.getInstance().getMe().m_UserBank.gold;break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnClick",value:function(event){event.target===this.uiobj.closebtn?_UIMgr2.default.getInstance().CloseUI("银行界面"):event.target===this.uiobj.okbtn&&(1==this.m_nCurPage?this.Deposit():this.Checkout()),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),BankUI}();exports.default=BankUI},{"../../../appbase/com/FlyText":52,"../../../appbase/com/soundmgr":65,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../appbase/com/FlyText")),_gameconst2=_interopRequireDefault(require("../gameconst")),_itemkindmgr2=_interopRequireDefault(require("../../framework/data/item/itemkindmgr")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_config2=_interopRequireDefault(require("../../framework/utils/config"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FruitUI=function(_BaseUI){function FruitUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FruitUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FruitUI.__proto__||Object.getPrototypeOf(FruitUI)).call(this));return _this.m_BetData={},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FruitUI,_BaseUI3.default),_createClass(FruitUI,[{key:"OnCreate",value:function(){this.uiobj.closebtn.rawx=this.uiobj.closebtn.x,this.uiobj.closebtn.rawy=this.uiobj.closebtn.y,this.uiobj.helpbtn.rawx=this.uiobj.helpbtn.x,this.uiobj.helpbtn.rawy=this.uiobj.helpbtn.y,this.uiobj.num_gold.rawx=this.uiobj.num_gold.x,this.uiobj.num_gold.rawy=this.uiobj.num_gold.y,this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.okbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.inputokbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.helpbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.helpclosebtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_szGrid=[];for(var i=0;i<24;i++){var grid=this.uiobj.getChildByName("grid_"+(i+1));grid.light=grid.getChildByName("light"),grid.light.visible=!1,this.m_szGrid[i]=grid}this.m_szBetArea=[];for(var _i=1001;_i<=1003;_i++){var btn=this.uiobj.getChildByName("fruit_"+_i);btn.selectmark=btn.getChildByName("selectmark"),btn.selectmark.visible=!1,btn.visible=!1,btn.on(Laya.Event.CLICK,this,this.SelectArea),this.m_szBetArea.push(btn)}this.m_szBetBtn=[];for(var _i2=0;_i2<8;_i2++){var _btn=this.uiobj.getChildByName("bet_"+(_i2+1));_btn.tip=_btn.getChildByName("tip"),_btn.tip.visible=!1,_btn.on(Laya.Event.MOUSE_DOWN,this,this.BetDown),_btn.on(Laya.Event.MOUSE_UP,this,this.Bet),this.m_szBetBtn[_i2]=_btn}this.uiobj.goldani.visible=!1,this.uiobj.inputnum.visible=!1,this.uiobj.help.visible=!1}},{key:"OnOpen",value:function(){this.uiobj.okbtn.disabled=!0,this.uiobj.reward.text="得分:0",this.m_nReward=0,this.RefreshMeGold();var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel());_gtea2.default.rpc.Call("捕鱼水果机","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),channel:channel},this,function(agv){this.IsOpen()&&this.Refresh(agv)},function(errflag,errmsg){this.IsOpen()&&_FlyText2.default.AddFlyText(errmsg)})}},{key:"OnClose",value:function(){this.ClearBet(!0),this.StopAni();for(var i=0;i<this.m_szBetArea.length;i++)this.m_szBetArea[i].visible=!1;this.uiobj.inputnum.visible=!1,this.m_nLastIdx=null,this.m_Data=null}},{key:"OnResize",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(FruitUI.prototype.__proto__||Object.getPrototypeOf(FruitUI.prototype),"OnResize",this).call(this),this.uiobj.bk.scaleX=this.uiobj.bk.scaleY=_config2.default.scale,this.uiobj.closebtn.pos(this.uiobj.closebtn.rawx+_config2.default.offset.x,this.uiobj.closebtn.rawy-_config2.default.offset.y),this.uiobj.helpbtn.pos(this.uiobj.helpbtn.rawx+_config2.default.offset.x,this.uiobj.helpbtn.rawy-_config2.default.offset.y),this.uiobj.num_gold.pos(this.uiobj.num_gold.rawx-_config2.default.offset.x,this.uiobj.num_gold.rawy-_config2.default.offset.y),this.uiobj.inputnum.width=_config2.default.viewSize.width,this.uiobj.inputnum.height=_config2.default.viewSize.height,this.uiobj.help.width=_config2.default.viewSize.width,this.uiobj.help.height=_config2.default.viewSize.height;var inputmask=this.uiobj.inputnum.getChildByName("maskobj");inputmask.graphics.clear(),inputmask.graphics.drawRect(0,0,this.uiobj.inputnum.width,this.uiobj.inputnum.height,"#000000");var helpmask=this.uiobj.help.getChildByName("maskobj");helpmask.graphics.clear(),helpmask.graphics.drawRect(0,0,this.uiobj.help.width,this.uiobj.help.height,"#000000"),this.uiobj.goldani.maskobj.width=_config2.default.viewSize.width,this.uiobj.goldani.maskobj.height=_config2.default.viewSize.height,this.uiobj.goldani.maskobj.graphics.clear(),this.uiobj.goldani.maskobj.graphics.drawRect(0,0,_config2.default.viewSize.width,_config2.default.viewSize.height,"#000000")}},{key:"ClearBet",value:function(bclear){for(var i=0;i<this.m_szBetBtn.length;i++)this.m_szBetBtn[i].tip.visible=!1;bclear&&(this.m_BetData={},this.m_CurPool=null)}},{key:"Refresh",value:function(args){this.m_Data=args,this.LockBtn(!1);for(var i=0;i<args.szpool.length;i++)for(var data=args.szpool[i],j=0;j<this.m_szBetArea.length;j++){var btn=this.m_szBetArea[j];btn.name==data.key&&(btn.visible=!0)}for(var _i3=0;_i3<args.szfriut.length;_i3++){for(var _data=args.szfriut[_i3],_j=0;_j<_data.pos.length;_j++){var grid=this.m_szGrid[_data.pos[_j]-1];_gameconst2.default.SetIconImg(grid,"lobby/fruit/fish_zp"+_data.id+".png")}this.m_szBetBtn[_data.id-1].getChildByName("ber").value="x"+_data.ber}this.PlayIdleAni(),this.OnSelectArea(1)}},{key:"RefreshMeGold",value:function(){var needgold=this.m_BetData.needgold||0;this.uiobj.num_gold.getChildByName("num").value=_playerdata_mgr2.default.getInstance().getMeGold()-needgold}},{key:"OnSelectArea",value:function(idx){this.ClearBet(!0);for(var i=0;i<this.m_szBetArea.length;i++){var btn=this.m_szBetArea[i];if(i+1==idx){if(this.m_BetData.key=btn.name,this.m_BetData.needgold=0,this.m_BetData.totalbetnum=0,this.m_BetData.list={},btn.selected=!0,btn.selectmark.visible=!0,btn.mouseEnabled=!1,this.m_Data)for(var j=0;j<this.m_Data.szpool.length;j++){var pool=this.m_Data.szpool[j];if(pool.key==btn.name){this.m_CurPool=pool;break}}}else btn.selected=!1,btn.selectmark.visible=!1,btn.mouseEnabled=!0}}},{key:"SelectArea",value:function(event){for(var i=0;i<this.m_szBetArea.length;i++){if(this.m_szBetArea[i]===event.target){this.OnSelectArea(i+1);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"BetDown",value:function(event){var _this2=this;if(this.m_Data&&this.m_CurPool){Laya.stage.once(Laya.Event.MOUSE_UP,this,function(){_this2.killTimer(_this2.m_BetTimer)});for(var i=0;i<this.m_szBetBtn.length;i++){var btn=this.m_szBetBtn[i];if(btn===event.target){this.m_InputBtn=btn;break}}this.m_BetTimer=this.timerCall(1e3,function(){_this2.uiobj.inputnum.getChildByName("num").text="",_this2.uiobj.inputnum.visible=!0})}}},{key:"Bet",value:function(event){if(this.m_Data&&this.m_CurPool){for(var i=0;i<this.m_szBetBtn.length;i++){var btn=this.m_szBetBtn[i];if(btn===event.target){var sid=btn.name.split("_")[1];if(!this.m_Data.szfriut[parseInt(sid)-1]){_FlyText2.default.AddFlyText("下注种类错误!");break}var num=this.m_BetData.list[sid]||0;num+1>this.m_Data.maxbetnum?_FlyText2.default.AddFlyText("超过单个最大下注数量!"):this.m_BetData.totalbetnum+1>this.m_Data.totalbetnum?_FlyText2.default.AddFlyText("超过总下注数量!"):this.m_BetData.needgold+this.m_CurPool.gold>_playerdata_mgr2.default.getInstance().getMeGold()?_FlyText2.default.AddFlyText(_itemkindmgr2.default.GOLD_NAME+"不足!"):(num+=1,this.m_BetData.needgold=this.m_BetData.needgold+this.m_CurPool.gold,this.m_BetData.totalbetnum=this.m_BetData.totalbetnum+1,this.m_BetData.list[sid]=num,btn.tip.getChildByName("num").text=num,btn.tip.visible=!0,this.RefreshMeGold());break}}_soundmgr2.default.getInstance().playSound("snd/fruit/chip.mp3")}}},{key:"StopAni",value:function(){this.m_AniTimer&&(this.killTimer(this.m_AniTimer),this.m_AniTimer=null),this.m_TweenKey&&(this.m_TweenKey=this.killTween(this.m_TweenKey),this.m_TweenKey=null);for(var i=0;i<this.m_szGrid.length;i++)this.m_szGrid[i].light.visible=!1;this.uiobj.lightani.stop()}},{key:"PlayIdleAni",value:function(){this.uiobj.lightani.play(0,!0)}},{key:"PlayFruitAni",value:function(data){function PlayEnd(idx){if(this.m_nLastIdx=idx,0==data.getgold)return _FlyText2.default.AddFlyText("很遗憾,您没有中奖!"),this.m_AniTimer=this.timerCall(1e3,this.DoFruiteEnd,[data.getgold]),void _soundmgr2.default.getInstance().playSound("snd/fruit/lose.mp3");data.ber>=10&&data.ber<=18?_soundmgr2.default.getInstance().playSound("snd/fruit/slot_win.mp3"):data.ber>=22&&data.ber<=33?_soundmgr2.default.getInstance().playSound("snd/fruit/slot_win2.mp3"):_soundmgr2.default.getInstance().playSound("snd/fruit/win.mp3"),this.uiobj.goldani.gold.value=data.getgold,this.uiobj.goldani.ani1.play(0,!1),this.uiobj.goldani.ani1.once("complete",this,this.DoFruiteEnd,[data.getgold]),this.uiobj.goldani.visible=!0}this.StopAni();for(var end=0,stop=0,i=0;i<this.m_Data.szfriut.length;i++){var item=this.m_Data.szfriut[i];if(item.id==data.id){(stop=(end=item.pos[Math.floor(Math.random()*item.pos.length)])-(Math.floor(3*Math.random())+8))<1&&(stop=this.m_szGrid.length-Math.abs(stop));break}}var start=(this.m_nLastIdx||0)+1;start>this.m_szGrid.length&&(start=1),function OnPlay(args){for(var i=0;i<this.m_szGrid.length;i++)this.m_szGrid[i].light.visible=i+1==args.idx;if(args.bstop&&args.end==args.idx)return _soundmgr2.default.getInstance().playSound("snd/fruit/slot_1.mp3"),void(this.m_AniTimer=this.timerCall(500,PlayEnd,[args.end]));args.idx=args.idx+1,args.num=args.num+1;var snd="snd/fruit/slot_3.mp3";args.idx>this.m_szGrid.length&&(args.idx=1,args.round=args.round+1);var time=30;args.num<8?(snd=args.num-1==1?"snd/fruit/slot_1.mp3":"snd/fruit/slot_2.mp3",time=Math.max(time,500-50*(args.num-1))):3==args.round&&args.idx==args.stop&&(args.bstop=!0),args.bstop&&(time+=50*((args.end>=args.stop?args.end-args.stop:args.end+this.m_szGrid.length-args.stop)-(args.end>=args.idx?args.end-args.idx:args.end+this.m_szGrid.length-args.idx)),snd="snd/fruit/slot_2.mp3");_soundmgr2.default.getInstance().playSound(snd),this.m_AniTimer=this.timerCall(time,OnPlay,[args])}.bind(this)({idx:start,time:50,round:1,stop:stop,end:end,num:1})}},{key:"DoFruiteEnd",value:function(getgold){this.uiobj.goldani.visible=!1,this.ClearBet(!1),this.PlayIdleAni(),this.LockBtn(!1),this.m_nReward=this.m_nReward+(getgold-this.m_BetData.needgold),this.uiobj.reward.text="得分:"+this.m_nReward,this.m_BetData.needgold=0,this.m_BetData.totalbetnum=0,this.m_BetData.list={},this.RefreshMeGold()}},{key:"DoFruit",value:function(){this.m_BetData.key&&0!=Object.keys(this.m_BetData.list).length?_playerdata_mgr2.default.getInstance().getMeGold()<this.m_BetData.needgold?_FlyText2.default.AddFlyText(_itemkindmgr2.default.GOLD_NAME+"不足!"):(this.LockBtn(!0),_gtea2.default.rpc.Call("捕鱼水果机","DoFruit",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),betdata:this.m_BetData},this,function(agv){this.IsOpen()&&this.PlayFruitAni(agv)},function(errflag,errmsg){this.IsOpen()&&this.LockBtn(!1)})):_FlyText2.default.AddFlyText("请先选择下注种类!")}},{key:"LockBtn",value:function(lock){for(var i=0;i<this.m_szBetArea.length;i++)this.m_szBetArea[i].disabled=lock;for(var _i4=0;_i4<this.m_szBetBtn.length;_i4++)this.m_szBetBtn[_i4].mouseEnabled=!lock;this.uiobj.okbtn.disabled=lock}},{key:"OnClickBtn",value:function(event){if(event.target===this.uiobj.closebtn)_UIMgr2.default.getInstance().CloseUI("金蟾贸易"),_soundmgr2.default.getInstance().playSound("snd/button.mp3");else if(event.target===this.uiobj.okbtn)this.DoFruit(),_soundmgr2.default.getInstance().playSound("snd/fruit/in.mp3");else if(event.target===this.uiobj.helpbtn)this.uiobj.help.visible=!0,_soundmgr2.default.getInstance().playSound("snd/button.mp3");else if(event.target===this.uiobj.helpclosebtn)this.uiobj.help.visible=!1,_soundmgr2.default.getInstance().playSound("snd/button.mp3");else if(event.target===this.uiobj.inputokbtn){var value=parseInt(this.uiobj.inputnum.getChildByName("num").text);if(!isNaN(value)&&value>=0){if(this.m_InputBtn){var sid=this.m_InputBtn.name.split("_")[1],lastnum=this.m_BetData.list[sid]||0,needgold=value*this.m_CurPool.gold,totalneedgold=this.m_BetData.needgold,totalbetnum=this.m_BetData.totalbetnum;lastnum>0&&(totalneedgold-=lastnum*this.m_CurPool.gold,totalbetnum-=lastnum),needgold+totalneedgold>_playerdata_mgr2.default.getInstance().getMeGold()?_FlyText2.default.AddFlyText(_itemkindmgr2.default.GOLD_NAME+"不足!"):totalbetnum+value>this.m_Data.totalbetnum?_FlyText2.default.AddFlyText("超过总下注数量!"):(totalneedgold=needgold+totalneedgold,totalbetnum+=value,this.m_InputBtn.tip.getChildByName("num").text=value,this.m_InputBtn.tip.visible=value>0,this.m_BetData.needgold=totalneedgold,this.m_BetData.totalbetnum=totalbetnum,this.m_BetData.list[sid]=value,0==value&&delete this.m_BetData.list[sid],this.RefreshMeGold())}_soundmgr2.default.getInstance().playSound("snd/fruit/chip.mp3")}else _soundmgr2.default.getInstance().playSound("snd/button.mp3");this.m_InputBtn=null,this.uiobj.inputnum.visible=!1}}}]),FruitUI}();exports.default=FruitUI},{"../../appbase/com/FlyText":52,"../../appbase/com/soundmgr":65,"../../framework/data/item/itemkindmgr":113,"../../framework/data/playerdata_mgr":117,"../../framework/gtea/gtea":127,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../../framework/utils/config":145,"../gameconst":5}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_gameconst2=(_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_interopRequireDefault(require("../../appbase/com/appmethod")),_interopRequireDefault(require("../gameconst"))),_chargeitemmgr2=_interopRequireDefault(require("../../appbase/lobby/shop/chargeitemmgr")),_itemkindmgr2=_interopRequireDefault(require("../../framework/data/item/itemkindmgr")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GiftChargeUI=function(_BaseUI){function GiftChargeUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GiftChargeUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GiftChargeUI.__proto__||Object.getPrototypeOf(GiftChargeUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GiftChargeUI,_BaseUI3.default),_createClass(GiftChargeUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(GiftChargeUI.prototype.__proto__||Object.getPrototypeOf(GiftChargeUI.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.buybtn.on(Laya.Event.CLICK,this,this.OnClick);for(var chargelist=_chargeitemmgr2.default.getInstance().GetChargeList("gold",!0),thlist=[],i=0;i<chargelist.length;i++){var data=chargelist[i];data.id>=1610001&&data.id<=1610005&&thlist.push(data)}for(var _i=0;_i<5;_i++){var btn=this.uiobj["btn_"+(_i+1)],_data=thlist[_i];_data?(btn.data=_data,btn.price=btn.getChildByName("Text_name"),btn.price.text=_data.price/100+"元",btn.on(Laya.Event.CLICK,this,this.SelectPage)):btn.visible=!1}}},{key:"OnOpen",value:function(){for(var daycharge=_gameconst2.default.GetDayChargeData(),i=1610001;i<=1610005;i++){var num=daycharge.list[i.toString()];if(_comfunc2.default.isNil(num)||0==num)return void this.OnSelectPage(i-161e4)}this.OnSelectPage(1)}},{key:"OnClose",value:function(){}},{key:"RefreshPage",value:function(data){this.m_nItemID=data.id,this.uiobj.gold_1.text=data.name,this.uiobj.gold_2.text=_gameconst2.default.MakeNumberSimple(data.addvalue)+"金币";var itemkind=_itemkindmgr2.default.getInstance().Find(data.additem[0][0]);_gameconst2.default.SetIconImg(this.uiobj.itemimg,itemkind.getImgName()),this.uiobj.item.text=data.additem[0][1];var num=_gameconst2.default.GetDayChargeData().list[data.id.toString()];!_comfunc2.default.isNil(num)&&num>0?(this.uiobj.buybtn.getChildByName("txt").text="今日已购买",this.uiobj.buybtn.disabled=!0):(this.uiobj.buybtn.getChildByName("txt").text="仅售"+data.price/100+"元",this.uiobj.buybtn.disabled=!1)}},{key:"OnSelectPage",value:function(idx){for(var i=0;i<5;i++){var btn=this.uiobj["btn_"+(i+1)];i+1==idx?(btn.price.color="#7e2d01",btn.selected=!0,btn.mouseEnabled=!1,this.RefreshPage(btn.data)):(btn.price.color="#024684",btn.selected=!1,btn.mouseEnabled=!0)}}},{key:"SelectPage",value:function(event){for(var i=0;i<5;i++){if(this.uiobj["btn_"+(i+1)]===event.target){this.OnSelectPage(i+1);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnClick",value:function(event){event.target===this.uiobj.closebtn?_UIMgr2.default.getInstance().CloseUI("特惠礼包界面"):event.target===this.uiobj.buybtn&&(_UIMgr2.default.getInstance().UIEvent("大厅界面","BuyGemsGold",{mode:1,item:{dataSource:{id:this.m_nItemID}}},!0,!0),_UIMgr2.default.getInstance().CloseUI("特惠礼包界面")),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),GiftChargeUI}();exports.default=GiftChargeUI},{"../../appbase/com/appmethod":63,"../../appbase/com/soundmgr":65,"../../appbase/lobby/shop/chargeitemmgr":90,"../../framework/data/item/itemkindmgr":113,"../../framework/data/playerdata_mgr":117,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../gameconst":5}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_appmethod2=_interopRequireDefault(require("../../appbase/com/appmethod")),_gameconst2=_interopRequireDefault(require("../gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GuideDlg=function(_BaseUI){function GuideDlg(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GuideDlg),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GuideDlg.__proto__||Object.getPrototypeOf(GuideDlg)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GuideDlg,_BaseUI3.default),_createClass(GuideDlg,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(GuideDlg.prototype.__proto__||Object.getPrototypeOf(GuideDlg.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.copybtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.okbtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.wechatname.text="搜索【"+_gameconst2.default.WeChatPub+"】"}},{key:"OnClose",value:function(){this.m_Data=null}},{key:"SetData",value:function(data){this.m_Data=data}},{key:"OnClick",value:function(event){event.target===this.uiobj.okbtn?(this.m_Data.data&&_UIMgr2.default.getInstance().UIEvent("兑换确认界面","SetData",this.m_Data,!0,!0),_playerdata_mgr2.default.getInstance().setUserSetDataByKey("isopenexchangered",!0),_playerdata_mgr2.default.getInstance().writeUserSetData(),_UIMgr2.default.getInstance().CloseUI("关注引导界面")):event.target==this.uiobj.copybtn?_appmethod2.default.copyOpenWeChat(_gameconst2.default.WeChatPub):event.target===this.uiobj.closebtn&&_UIMgr2.default.getInstance().CloseUI("关注引导界面"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),GuideDlg}();exports.default=GuideDlg},{"../../appbase/com/appmethod":63,"../../appbase/com/soundmgr":65,"../../framework/data/playerdata_mgr":117,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../gameconst":5}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_gameconst2=_interopRequireDefault(require("../gameconst")),_layaMaxUI=require("../../ui/layaMaxUI");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HelpUI=function(_BaseUI){function HelpUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HelpUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(HelpUI.__proto__||Object.getPrototypeOf(HelpUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(HelpUI,_BaseUI3.default),_createClass(HelpUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(HelpUI.prototype.__proto__||Object.getPrototypeOf(HelpUI.prototype),"OnCreate",this).call(this),this.index=0;for(var i=0;i<this.uiobj.tab.numChildren;i++){this.uiobj.tab.getChildAt(i).clickHandler=Laya.Handler.create(this,this.__switch,[i],!1)}var page=new _layaMaxUI.JJUI;page.text.text=_gameconst2.default.HELPTEXT,this.uiobj.cont.getChildAt(0).addChild(page),(page=new _layaMaxUI.SMUI).text.text=_gameconst2.default.HELPTEXT2,this.uiobj.cont.getChildAt(1).addChild(page),this.uiobj.cont.getChildAt(2).addChild(new _layaMaxUI.BSUI),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick)}},{key:"OnOpen",value:function(){this.__switch(0)}},{key:"__switch",value:function(index){this.index!==index&&(this.uiobj.tab.getChildAt(this.index).selected=!1,this.uiobj.cont.getChildAt(this.index).visible=!1,this.uiobj.tab.getChildAt(index).selected=!0,this.uiobj.cont.getChildAt(index).visible=!0,this.index=index)}},{key:"OnClick",value:function(event){event.target===this.uiobj.closebtn&&_UIMgr2.default.getInstance().CloseUI("游戏帮助"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),HelpUI}();exports.default=HelpUI},{"../../appbase/com/soundmgr":65,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../../ui/layaMaxUI":178,"../gameconst":5}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_tdf2=_interopRequireDefault(require("../../framework/utils/tdf")),_gameconst2=_interopRequireDefault(require("../gameconst")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_itemkindmgr2=_interopRequireDefault(require("../../framework/data/item/itemkindmgr")),_FlyText2=_interopRequireDefault(require("../../appbase/com/FlyText")),_appmethod2=_interopRequireDefault(require("../../appbase/com/appmethod")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var InviteTaskUI=function(_BaseUI){function InviteTaskUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InviteTaskUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(InviteTaskUI.__proto__||Object.getPrototypeOf(InviteTaskUI)).call(this));return _this.LoadTask(),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(InviteTaskUI,_BaseUI3.default),_createClass(InviteTaskUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(InviteTaskUI.prototype.__proto__||Object.getPrototypeOf(InviteTaskUI.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.rewardbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.sharebtn_1.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.sharebtn_2.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.sharebtn_3.on(Laya.Event.CLICK,this,this.OnClickBtn);for(var i=0;i<4;i++){var item=this.uiobj["condition_"+(i+1)];if(i>=this.m_szTask.length)item.visible=!1;else{var task=this.m_szTask[i];item.getChildByName("condition").text=task.intor,task.szreward.gold>0?item.getChildByName("value").text=_gameconst2.default.MakeNumberSimple(task.szreward.gold):(item.getChildByName("value").visible=!1,item.getChildByName("icon").visible=!1),task.szreward.vouchers2>0?item.getChildByName("value2").text=_comfunc2.default.getVouchers2Ratio(task.szreward.vouchers2):(item.getChildByName("value2").visible=!1,item.getChildByName("icon2").visible=!1)}}this.uiobj.ListView.vScrollBarSkin=" ",this.uiobj.ListView.array=[],this.uiobj.ListView.renderHandler=Laya.Handler.create(this,this.OnListRander,null,!1),this.uiobj.gold.text="",this.uiobj.vouchers2.text="",this.uiobj.rewardbtn.visible=!1}},{key:"LoadTask",value:function(){this.m_szTask=[];var tdfpath="data/task/invitetask.tdf";_gameconst2.default.szActivityTime.invite&&(tdfpath="data/task/invitetask_2020.tdf");var tdf=_tdf2.default.LoadTDF(tdfpath);for(var key in tdf){var value=tdf[key],task={id:key,name:value["名称"],condition:value["条件"],intor:value["说明"],icon:value["图标"],sort:value["排序"],szreward:{gems:value["钻石奖励"],gold:value["金币奖励"],vouchers1:value["奖券奖励"],vouchers2:value["现金券"],itemlist:value["物品奖励"],real_item:value["实物奖励"]}};this.m_szTask.push(task)}this.m_szTask.sort(function(task1,task2){return task1.sort<task2.sort?-1:task1.sort>task2.sort?1:0})}},{key:"OnOpen",value:function(){this.Refresh(),_playerdata_mgr2.default.getInstance().getMe().addEventListener("eve.DataChg",this,this.Refresh)}},{key:"OnClose",value:function(){_playerdata_mgr2.default.getInstance().getMe().removeEventListener("eve.DataChg",this),this.uiobj.gold.text="",this.uiobj.vouchers2.text="",this.uiobj.rewardbtn.visible=!1,this.uiobj.ListView.array=[]}},{key:"Refresh",value:function(){var invitetask=_playerdata_mgr2.default.getInstance().getMe().m_InviteTask;if(invitetask){this.uiobj.gold.text=_gameconst2.default.MakeNumberSimple(invitetask.reward.gold||0),this.uiobj.vouchers2.text=_comfunc2.default.getVouchers2Ratio(invitetask.reward.vouchers2||0).toString(),this.uiobj.rewardbtn.disabled=!invitetask.reward.hasreward,this.uiobj.rewardbtn.visible=!0;for(var recordlist=[],i=invitetask.reward.recordlist.length-1;i>=0;i--)recordlist.push(invitetask.reward.recordlist[i]);this.uiobj.ListView.array=recordlist}}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource;item.getChildByName("time").text=_comfunc2.default.formatDateTime(data.time),item.getChildByName("msg").text=data.nick+" 完成邀请任务,您获得了 "+_itemkindmgr2.default.GetAddBagInfo(data.reward)+" 的奖励"}},{key:"GetReward",value:function(){var invitetask=_playerdata_mgr2.default.getInstance().getMe().m_InviteTask;invitetask&&invitetask.reward.hasreward?(this.uiobj.rewardbtn.disabled=!0,_gtea2.default.rpc.Call("人员邀请任务","GetReward",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv){_playerdata_mgr2.default.getInstance().getMe().setTypeData("InviteTask",agv),this.IsOpen()&&_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取奖励成功"},!0,!0)},function(errflag,errmsg){this.IsOpen()&&(this.uiobj.rewardbtn.disabled=!1,_FlyText2.default.AddFlyText(errmsg))})):_FlyText2.default.AddFlyText("没有奖励可以领取!")}},{key:"Share",value:function(scene){var data={channel:"wx",type:"url",img:"icon.png",url:_gameconst2.default.CONFIG.invite_url+_gameconst2.default.NAMESPACE+"/"+_playerdata_mgr2.default.getInstance().getMeUID(),title:_gameconst2.default.GAMENAME,desc:_gameconst2.default.SHAREMSG,scene:scene};_appmethod2.default.unifiedShare(data)}},{key:"Copy",value:function(){_appmethod2.default.copy(_gameconst2.default.CONFIG.invite_url+_gameconst2.default.NAMESPACE+"/"+_playerdata_mgr2.default.getInstance().getMeUID(),this,function(obj,response){0===response.code&&_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"复制成功，请至微信中将此链接发送给好友",obj:obj,okfun:function(){_appmethod2.default.openWechat()}},!0,!0)})}},{key:"OnClickBtn",value:function(event){event.target===this.uiobj.closebtn?_UIMgr2.default.getInstance().CloseUI("邀请任务界面"):event.target===this.uiobj.rewardbtn?this.GetReward():event.target===this.uiobj.sharebtn_1?this.Share("session"):event.target===this.uiobj.sharebtn_2?this.Share("timeline"):event.target===this.uiobj.sharebtn_3&&this.Copy(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),InviteTaskUI}();exports.default=InviteTaskUI},{"../../appbase/com/FlyText":52,"../../appbase/com/appmethod":63,"../../appbase/com/soundmgr":65,"../../framework/data/item/itemkindmgr":113,"../../framework/data/playerdata_mgr":117,"../../framework/gtea/gtea":127,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../../framework/utils/tdf":148,"../gameconst":5}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_BaseLobby3=_interopRequireDefault(require("../../appbase/lobby/BaseLobby")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea")),_config2=_interopRequireDefault(require("../../framework/utils/config")),_itemkindmgr2=_interopRequireDefault(require("../../framework/data/item/itemkindmgr")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_UserHead2=_interopRequireDefault(require("../../appbase/com/UserHead")),_HeadImg2=_interopRequireDefault(require("../../appbase/com/HeadImg")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_appmethod2=_interopRequireDefault(require("../../appbase/com/appmethod")),_gameconst2=_interopRequireDefault(require("../gameconst")),_panel_fish2=_interopRequireDefault(require("./panel/panel_fish")),_panel_shop2=_interopRequireDefault(require("./panel/panel_shop")),_panel_goldgame2=_interopRequireDefault(require("./panel/panel_goldgame")),_panel_redgame2=_interopRequireDefault(require("./panel/panel_redgame")),_chargeitemmgr2=_interopRequireDefault(require("../../appbase/lobby/shop/chargeitemmgr")),_FlyText2=(_interopRequireDefault(require("../com/vipmgr")),_interopRequireDefault(require("../../appbase/com/FlyText"))),_BagPage2=_interopRequireDefault(require("../../appbase/lobby/bag/BagPage")),_panel_match2=_interopRequireDefault(require("./panel/panel_match")),_BaseObj2=_interopRequireDefault(require("../../framework/gtea/BaseObj"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_BagPage2.default.prototype.OnListRander=function(item,idx){var data=this.m_BindObj.array[idx];item.getChildByName("itemimage").skin=data.img,item.getChildByName("item_name").text=data.name,item.getChildByName("Txt_num").text=data.num,item.getChildByName("Text_info").text=data.intor;var btn=item.getChildByName("givingbtn");btn&&(1==data.cangiving?(btn.visible=_gameconst2.default.CanShowGivingBtn(),btn.on(Laya.Event.CLICK,this,this.OnClickGiving)):(btn.visible=!1,btn.off(Laya.Event.CLICK,this,this.OnClickGiving))),(btn=item.getChildByName("mixbtn"))&&(data.mixitem.length>0?(btn.visible=!0,btn.disabled=data.num<data.mixitem[1],btn.on(Laya.Event.CLICK,this,this.OnClickMix)):(btn.visible=!1,btn.off(Laya.Event.CLICK,this,this.OnClickMix))),item.visible=!0};var Lobby=function(_BaseLobby){function Lobby(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Lobby),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Lobby.__proto__||Object.getPrototypeOf(Lobby)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Lobby,_BaseLobby3.default),_createClass(Lobby,[{key:"OnCreate",value:function(){this.uiobj.animation_left.rawx=this.uiobj.animation_left.x,this.uiobj.animation_left.rawy=this.uiobj.animation_left.y,this.uiobj.animation_right.rawx=this.uiobj.animation_right.x,this.uiobj.animation_right.rawy=this.uiobj.animation_right.y,this.uiobj.scbtn.rawx=this.uiobj.scbtn.x,this.uiobj.luckybtn.rawx=this.uiobj.luckybtn.x,this.uiobj.rankbtn.rawx=this.uiobj.rankbtn.x,this.uiobj.daysignbtn.rawx=this.uiobj.daysignbtn.x,this.uiobj.vipbtn.rawx=this.uiobj.vipbtn.x,this.uiobj.olbtn.rawx=this.uiobj.olbtn.x,this.uiobj.olbtn.rawy=this.uiobj.olbtn.y,this.uiobj.thbtn.rawx=this.uiobj.thbtn.x,this.uiobj.thbtn.rawy=this.uiobj.thbtn.y,this.version=this.uiobj.version,this.version.rawx=this.version.x,this.version.rawy=this.version.y,this.titlelineleft=this.uiobj.titleline.getChildByName("panel_left"),this.value_gold=this.uiobj.num_gold.getChildByName("num"),this.value_redpacket=this.uiobj.num_cash.getChildByName("num"),this.buygoldbtn=this.uiobj.num_gold.getChildByName("shopbtn"),this.buygoldbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.chgredpacketbtn=this.uiobj.num_cash.getChildByName("shopbtn"),this.chgredpacketbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.actbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.setingbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.bagbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.helpbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.mailbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.feedbackbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.shopbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.scbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.rankbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.quickbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.luckybtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.invitebtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.daysignbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.vipbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.redtipclosebtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.olbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.thbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.rankbtn.visible=!1,this.uiobj.actbtn.getChildByName("tip").visible=!1,this.uiobj.bagbtn.getChildByName("tip").visible=!1,this.uiobj.mailbtn.getChildByName("tip").visible=!1,this.uiobj.daysignbtn.getChildByName("tip").visible=!1,this.uiobj.invitebtn.getChildByName("tip").visible=!1,this.head=new _UserHead2.default(this.uiobj.head),this.head.m_BindObj.on(Laya.Event.CLICK,this,this.OnClickBtn),this.nickname=this.uiobj.nickname.getChildByName("num"),this.uid=this.uiobj.nickname.getChildByName("uid"),this.redtip=this.uiobj.num_cash.getChildByName("redtip"),this.redtip.visible=!1;var version="V"+(_gameconst2.default.APPVERSION||"1.0.0");version+=_gameconst2.default.GAMEVERSION,this.version.text=version,_gameconst2.default.CONFIG.isreview&&(this.uiobj.num_cash.visible=!1,this.uiobj.invitebtn.visible=!1,this.uiobj.feedbackbtn.visible=!1),_get(Lobby.prototype.__proto__||Object.getPrototypeOf(Lobby.prototype),"OnCreate",this).call(this)}},{key:"OnResize",value:function(){for(var key in _get(Lobby.prototype.__proto__||Object.getPrototypeOf(Lobby.prototype),"OnResize",this).call(this),this.uiobj.bottomline.x=_config2.default.width/2,this.uiobj.bottomline.width=_config2.default.viewSize.width,"oppo_dljpbyol"==_gameconst2.default.THIRDPARTY&&_appmethod2.default.getSafeInset(this,function(obj,response){if(0==response.code){var safeInsetLeft=response.data.safeInsetLeft;obj.uiobj.bottomline.x=obj.uiobj.bottomline.x+safeInsetLeft,obj.uiobj.quickbtn.right=obj.uiobj.quickbtn.right+safeInsetLeft}}),this.uiobj.animation_left.x=this.uiobj.animation_left.rawx-_config2.default.offset.x,this.uiobj.animation_left.y=this.uiobj.animation_left.rawy-_config2.default.offset.y,this.uiobj.animation_right.x=this.uiobj.animation_right.rawx+_config2.default.offset.x,this.uiobj.animation_right.y=this.uiobj.animation_right.rawy-_config2.default.offset.y,this.version.x=this.version.rawx+_config2.default.offset.x,this.version.y=this.version.rawy+_config2.default.offset.y,this.uiobj.rankbtn.x=this.uiobj.rankbtn.rawx-_config2.default.offset.x+_config2.default.border.l,this.uiobj.scbtn.x=this.uiobj.scbtn.rawx+_config2.default.offset.x,this.uiobj.luckybtn.x=this.uiobj.luckybtn.rawx+_config2.default.offset.x,this.uiobj.daysignbtn.x=this.uiobj.daysignbtn.rawx+_config2.default.offset.x,this.uiobj.vipbtn.x=this.uiobj.vipbtn.rawx+_config2.default.offset.x,this.uiobj.olbtn.x=this.uiobj.olbtn.rawx-_config2.default.offset.x,this.uiobj.olbtn.y=this.uiobj.olbtn.rawy-_config2.default.offset.y,this.uiobj.thbtn.x=this.uiobj.thbtn.rawx+_config2.default.offset.x,this.szPanel){this.szPanel[key].OnResize()}}},{key:"SetPanelClass",value:function(){this.szPanel={fish:new _panel_fish2.default(this,"fish",this.uiobj.Panel_Fish),shop:new _panel_shop2.default(this,"shop",this.uiobj.Panel_Shop),goldgame:new _panel_goldgame2.default(this,"goldgame",this.uiobj.Panel_GoldGame,[52005,52006,52007]),redgame:new _panel_redgame2.default(this,"redgame",this.uiobj.Panel_RedGame,[52001,52002,52003]),match:new _panel_match2.default(this,"match",this.uiobj.Panel_Match)},this.szPanel.goldgame.SetFontValue(this.szPanel.fish.m_szGoldFontValue),this.szPanel.redgame.SetFontValue(this.szPanel.fish.m_szRedFontValue)}},{key:"InFirstPanel",value:function(){_gameconst2.default.CONFIG.isreview?(this.baseIdx="goldgame",this.SelectPanel("goldgame")):(this.baseIdx="fish",this.SelectPanel("fish"))}},{key:"OnOpen",value:function(bref){_playerdata_mgr2.default.getInstance().getMe().m_HonorTask&&_playerdata_mgr2.default.getInstance().getMe().m_HonorTask.addEventListener("eve.DataChg",this,this.RefreshActivity);var vipexpdata=_playerdata_mgr2.default.getInstance().getMe().m_VIPExpData;vipexpdata&&0==vipexpdata.exp?this.uiobj.scbtn.visible=!0:this.uiobj.scbtn.visible=!1,this.LoadGiftData(),this.LoadCustomerData(),this.LoadWinGoldRank(),this.LoadInviteTask(),this.RefreshDaySignData();for(var i=1700001;i<=1700006;i++)if(_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.getItemNum(i)>0){this.HaveRealItemOrder();break}_comfunc2.default.isNil(this.m_FontTimer)&&(this.m_FontTimer=this.loopCall(-1,20,this.PlayFontAni)),this.uiobj.olbtn.visible=!1,this.uiobj.luckybtn.visible=!1,this.uiobj.thbtn.visible=!1,_gameconst2.default.szActivityTime.giftcharge&&this.ChkGiftCharge(),_get(Lobby.prototype.__proto__||Object.getPrototypeOf(Lobby.prototype),"OnOpen",this).call(this,bref)}},{key:"OnClose",value:function(){_playerdata_mgr2.default.getInstance().getMe().m_HonorTask&&_playerdata_mgr2.default.getInstance().getMe().m_HonorTask.removeEventListener("eve.DataChg",this),_get(Lobby.prototype.__proto__||Object.getPrototypeOf(Lobby.prototype),"OnClose",this).call(this)}},{key:"OnInLobby",value:function(){if(!this.m_bOpenAuthen&&(!_gameconst2.default.CONFIG.isreview&&_gameconst2.default.NEEDAUTHEN))if(_playerdata_mgr2.default.getInstance().getMe().m_Authentiation)PopAuthen.bind(this)();else{var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel());_gtea2.default.rpc.Call("实名认证","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),channel:channel},this,function(agv){this.IsOpen()&&(_playerdata_mgr2.default.getInstance().getMe().setTypeData("Authentiation",agv[0]),PopAuthen.bind(this)())},function(errflag,errmsg){})}function PopAuthen(){var nowbind=_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone;nowbind&&0!=nowbind.length||_UIMgr2.default.getInstance().OpenUI("实名认证"),this.m_bOpenAuthen=!0}}},{key:"HaveRealItemOrder",value:function(){this.uiobj.bagbtn.getChildByName("tip").visible=!0}},{key:"RefreshUserInfo",value:function(){if(this.head.setHeadByUID(_playerdata_mgr2.default.getInstance().getMeUID()),this.uid.text="UID:"+_playerdata_mgr2.default.getInstance().getMeUID(),this.nickname.text=_playerdata_mgr2.default.getInstance().getMeNick(),this.value_gold.text=_comfunc2.default.getGoldRatio(_playerdata_mgr2.default.getInstance().getMeGold()).toString(),this.value_redpacket.text=_comfunc2.default.getVouchers2Ratio(_playerdata_mgr2.default.getInstance().getMeVouchers2()),_playerdata_mgr2.default.getInstance().getMeVouchers2()>=1e3){var ischg=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("ischgredpacket",!1);this.bShowRedTip||ischg||(this.redtip.visible=!0)}this.RefreshDaySignData()}},{key:"RefreshMail",value:function(){var ui=_UIMgr2.default.getInstance().GetUI("邮件界面",!1);if(!ui||!ui.IsOpen()){var list=_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.ListStatueEmails(!1);this.uiobj.mailbtn.getChildByName("tip").visible=list.length>0}}},{key:"LoadGiftData",value:function(){_gtea2.default.rpc.Call("礼包服务","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),viplv:_playerdata_mgr2.default.getInstance().getMeVIPLv()},this,function(agv){_playerdata_mgr2.default.getInstance().getMe().setTypeData("Gift",agv[0]),this.RefreshActivity()},function(errflag,errmsg){})}},{key:"LoadItemRank",value:function(){_gtea2.default.rpc.Call("排行榜活动","ListRank",{actname:"Item",uid:_playerdata_mgr2.default.getInstance().getMeUID(),nick:_playerdata_mgr2.default.getInstance().getMeNick()},this,function(data){for(var i=0;i<3;i++){var subdata=data.ulist[i],headbk=this.uiobj.rankbtn.getChildByName("rank_"+(i+1)).getChildByName("headbk");headbk.headimg&&(headbk.headimg.DelThis(),headbk.headimg=null),subdata&&(headbk.headimg=new _HeadImg2.default,headbk.headimg.width=headbk.width,headbk.headimg.height=headbk.height,headbk.headimg.x=headbk.width/2,headbk.headimg.y=headbk.height/2,headbk.headimg.SetData(subdata.uid,headbk))}},function(errflag,errmsg){})}},{key:"LoadWinGoldRank",value:function(){if(this.uiobj.rankbtn.visible=!1,_gameconst2.default.szActivityTime.wingold){var args={uid:_playerdata_mgr2.default.getInstance().getMeUID(),nick:_playerdata_mgr2.default.getInstance().getMeNick(),channel:_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel())};_gtea2.default.rpc.Call("捕鱼金币排行活动","ListRank",args,this,function(data){for(var i=0;i<3;i++){var subdata=data.ulist[i],headbk=this.uiobj.rankbtn.getChildByName("rank_"+(i+1)).getChildByName("headbk");headbk.headimg&&(headbk.headimg.DelThis(),headbk.headimg=null),subdata&&(headbk.headimg=new _HeadImg2.default,headbk.headimg.width=headbk.width,headbk.headimg.height=headbk.height,headbk.headimg.x=headbk.width/2,headbk.headimg.y=headbk.height/2,headbk.headimg.SetData(subdata.uid,headbk))}this.uiobj.rankbtn.visible=!0},function(errflag,errmsg){})}}},{key:"LoadInviteTask",value:function(){_gtea2.default.rpc.Call("人员邀请任务","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),nick:_playerdata_mgr2.default.getInstance().getMeNick()},this,function(agv){_playerdata_mgr2.default.getInstance().getMe().setTypeData("InviteTask",agv[0]),this.RefreshActivity()},function(errflag,errmsg){})}},{key:"RefreshActivity",value:function(){var ui=_UIMgr2.default.getInstance().GetUI("活动界面",!1);if(!ui||!ui.IsOpen()){var honortask=_playerdata_mgr2.default.getInstance().getMe().m_HonorTask;honortask&&honortask.HasReachReward()&&(this.uiobj.actbtn.getChildByName("tip").visible=!0);var daytask=_playerdata_mgr2.default.getInstance().getMe().m_DaliyTask;daytask&&daytask.HasReachReward()&&(this.uiobj.actbtn.getChildByName("tip").visible=!0);var usergift=_playerdata_mgr2.default.getInstance().getMe().m_GiftData;if(usergift){var giftdata=usergift["周期礼包"];giftdata&&giftdata.iscan&&(this.uiobj.actbtn.getChildByName("tip").visible=!0),(giftdata=usergift["时段礼包"])&&giftdata.iscan&&(this.uiobj.actbtn.getChildByName("tip").visible=!0)}var invitetask=_playerdata_mgr2.default.getInstance().getMe().m_InviteTask;invitetask&&invitetask.reward.hasreward&&(this.uiobj.invitebtn.getChildByName("tip").visible=!0)}}},{key:"RefreshDaySignData",value:function(){var ui=_UIMgr2.default.getInstance().GetUI("每日签到",!1);if(!ui||!ui.IsOpen()){this.uiobj.daysignbtn.getChildByName("tip").visible=!1;for(var szData=["m_GiftDaySign","m_GiftDaySign2"],i=0;i<szData.length;i++){var gift=_playerdata_mgr2.default.getInstance().getMe()[szData[i]];_comfunc2.default.isNil(gift)||1==gift.status&&(this.uiobj.daysignbtn.getChildByName("tip").visible=!0)}}}},{key:"LoadOnlineGift",value:function(){function ChkOnlineGift(){if(_gameconst2.default.ONLINEGIFT){for(var isshow=!1,hasover=!1,i=0;i<_gameconst2.default.ONLINEGIFT.alist.length;i++){var actdata=_gameconst2.default.ONLINEGIFT.alist[i];actdata.isreward||(actdata.isover?isshow||(this.uiobj.olbtn.getChildByName("lesstime").text="领取奖励",isshow=!0):(1==actdata.type&&(actdata.time=Math.min(actdata.time+1,actdata.maxtime)),isshow||(1==actdata.type?this.uiobj.olbtn.getChildByName("lesstime").text=_comfunc2.default.maketimestr(actdata.maxtime-actdata.time):this.uiobj.olbtn.getChildByName("lesstime").text=_comfunc2.default.maketimestr(actdata.maxtime-actdata.time)+"\n进入游戏完成任务",isshow=!0),actdata.time>=actdata.maxtime&&(hasover=!0)))}_UIMgr2.default.getInstance().UIEvent("活动界面","RefreshOnlinePage",{});var nowtime=new Date;_comfunc2.default.isSameDay(nowtime,_gameconst2.default.ONLINEGIFT.utime)||(hasover=!0),hasover&&this.LoadOnlineGift()}}_gameconst2.default.ONLINEGIFT=null,_gtea2.default.rpc.Call("在线活动","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(args){args.alist.sort(function(data1,data2){return data1.id<data2.id?-1:data1.id>data2.id?1:0}),_gameconst2.default.ONLINEGIFT=args;for(var i=0;i<args.alist.length;i++)args.alist[i].isreward||(this.uiobj.olbtn.visible=!0);this.m_OnlineGiftTimer||(this.m_OnlineGiftTimer=this.loopCall(-1,1e3,ChkOnlineGift))},function(errflag,errmsg){})}},{key:"OpenBag",value:function(agv){var page=void 0;agv&&agv.length>0&&(page=agv[0]);var showtip=this.uiobj.bagbtn.getChildByName("tip").visible;this.uiobj.bagbtn.getChildByName("tip").visible=!1,_UIMgr2.default.getInstance().OpenUI("背包界面",showtip),page&&_UIMgr2.default.getInstance().UIEvent("背包界面","OnSelectPage",page-1)}},{key:"OpenActivity",value:function(page){var data={page:page};_UIMgr2.default.getInstance().OpenUI("活动界面",data),this.uiobj.actbtn.getChildByName("tip").visible=!1}},{key:"InFish",value:function(){this.SelectPanel("fish",!0)}},{key:"InShop",value:function(agv){_comfunc2.default.isNil(agv)&&(agv={}),_gameconst2.default.CONFIG.isreview?agv.szshowpage=["jb"]:agv.szshowpage=["jb","hb","sw","jl"],this.redtip.visible=!1,this.SelectPanel("shop",!0,agv)}},{key:"InArena",value:function(nochk,subpage){this.SelectPanel("match",!0,subpage)}},{key:"netOnBillboardMsg",value:function(agv){this.CurPanel&&this.CurPanel.OnAddMsg(agv)}},{key:"ExchangeItemOk",value:function(agv){1==agv.type?_UIMgr2.default.getInstance().UIEvent("微信提示","SetInfo",{title:"兑换商品",msg:"兑换成功,获得"+agv.name+",请您于5个工作日内联系客服兑换!",type:_gameconst2.default.CONFIG.customerlist},!0,!0):2==agv.type?_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"兑换成功,获得"+agv.name},!0,!0):3==agv.type&&(_comfunc2.default.isNil(agv.exchangeitem.real_item)?_comfunc2.default.isNil(agv.exchangeitem.gold)?_UIMgr2.default.getInstance().UIEvent("微信提示","SetInfo",{title:"兑换商品",msg:"兑换成功,请您于5个工作日内联系客服兑换!",type:_gameconst2.default.CONFIG.customerlist},!0,!0):_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"兑换成功,获得"+agv.name},!0,!0):_UIMgr2.default.getInstance().UIEvent("微信提示","SetInfo",{title:"兑换红包",msg:_gameconst2.default.GET_ITEM_PROMPT,type:_gameconst2.default.CONFIG.wechatpublist||[_gameconst2.default.WeChatPub]},!0,!0)),_playerdata_mgr2.default.getInstance().setUserSetDataByKey("ischgredpacket",!0),_playerdata_mgr2.default.getInstance().writeUserSetData()}},{key:"BuyGemsGold",value:function(agv){if("gbxBridge"in window&&"ios"==gbxBridge.deviceType&&_gameconst2.default.CONFIG.iospay)this.iOSPay(agv);else if(""==_gameconst2.default.THIRDPARTY||"dyunionpay"==_gameconst2.default.THIRDPARTY){var msg=_gameconst2.default.AGENT_BUYINFO;1==agv.mode&&(msg=_gameconst2.default.BUY_GOLDMSG||"购买"+_itemkindmgr2.default.GOLD_NAME+"请关注微信公众号:"+_gameconst2.default.WeChatPub),_UIMgr2.default.getInstance().UIEvent("支付选择","SetInfo",{msg:msg,itemid:agv.item.dataSource.id,isactivity:agv.item.dataSource.isactivity},!0,!0)}else this.ThirdPartyPay(agv)}},{key:"ThirdPartyPay",value:function(args){var productId=args.item.dataSource.id,uid=_playerdata_mgr2.default.getInstance().getMeUID(),channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel()),orderArgs={uid:uid,product_id:productId,channel:channel,thirdparty:_gameconst2.default.THIRDPARTY},serviceName="";"vivo"==_gameconst2.default.THIRDPARTY||"vivo_dljpbyol"==_gameconst2.default.THIRDPARTY?serviceName="VivoPay":"oppo"==_gameconst2.default.THIRDPARTY||"oppo_dljpbyol"==_gameconst2.default.THIRDPARTY?serviceName="OppoPay":"huawei"==_gameconst2.default.THIRDPARTY?serviceName="HuaweiPay":"dianyou"==_gameconst2.default.THIRDPARTY?serviceName="DianyouPay":"dianyouandroid"==_gameconst2.default.THIRDPARTY?serviceName="DianyouAndroidPay":"xiaomi"==_gameconst2.default.THIRDPARTY?serviceName="XiaomiPay":"dyunionpay"==_gameconst2.default.THIRDPARTY&&(serviceName="DyUnionPay"),""!=serviceName?_gtea2.default.rpc.Call(serviceName,"MakeOrder",orderArgs,this,function(agv){agv.goldNum=_playerdata_mgr2.default.getInstance().getMeGold(),agv.uid=uid,agv.nick=_playerdata_mgr2.default.getInstance().getMeNick(),agv.vip=_playerdata_mgr2.default.getInstance().getMeVIPLv(),_appmethod2.default.unifiedPay(agv,_gameconst2.default.THIRDPARTY,null,null)},function(errflag,errmsg){_FlyText2.default.AddFlyText(errmsg)}):_FlyText2.default.AddFlyText("服务名错误")}},{key:"iOSPay",value:function(args){function getProductErr(msg){_FlyText2.default.AddFlyText(msg||"获取商品信息失败")}var productId=args.item.dataSource.m_nProductID;_appmethod2.default.getAppStoreProducts([productId],this,function(obj,response){if(0==response.code){for(var products=response.data.products,bGetOk=!1,i=0;i<products.length;i++)if(products[i].productId==productId){bGetOk=!0;break}bGetOk?(agv={productId:productId,obj:obj},_appmethod2.default.buyAppStoreProduct(agv.productId,agv.obj,function(obj,response){if(0==response.code){var data=response.data;obj.iOSPayOK(data)}else _FlyText2.default.AddFlyText("支付失败:"+response.msg)})):getProductErr()}else getProductErr(response.msg);var agv})}},{key:"iOSPayOK",value:function(args){var orderArgs={uid:_playerdata_mgr2.default.getInstance().getMeUID(),receipt:args.receipt,sandbox:_gameconst2.default.CONFIG.iospaysandbox,channel:_playerdata_mgr2.default.getInstance().getMe().getChannel()};_gtea2.default.rpc.Call("IOSPay","ChkOrder",orderArgs,this,function(obj,agv){_FlyText2.default.AddFlyText("购买成功")},function(obj,errflag,errmsg,agv){_FlyText2.default.AddFlyText(errmsg)})}},{key:"LoadCustomerData",value:function(){_gtea2.default.rpc.Call("客服列表服务","LoadData",{},this,function(agv){agv.length>0&&(_gameconst2.default.CONFIG.customerlist=agv[0])},function(errflag,errmsg){})}},{key:"ChkGiftCharge",value:function(){if(!_gameconst2.default.CONFIG.isreview){for(var daycharge=_gameconst2.default.GetDayChargeData(),has=!0,i=1610001;i<=1610005;i++){var num=daycharge.list[i.toString()];if(_comfunc2.default.isNil(num)||0==num){has=!1;break}}has?this.uiobj.thbtn.getChildByName("tip").visible=!1:(this.popgiftcharge?this.uiobj.thbtn.getChildByName("tip").visible=!0:_UIMgr2.default.getInstance().OpenUI("特惠礼包界面"),this.popgiftcharge=!0),this.uiobj.thbtn.visible=!0}}},{key:"PlayFontAni",value:function(){this.szPanel.fish.PlayFontAni(),this.szPanel.goldgame.PlayFontAni(),this.szPanel.redgame.PlayFontAni()}},{key:"netOnNoticeMsg",value:function(agv){this.SetSysMsg(agv)}},{key:"netOnUserCharge",value:function(agv){_get(Lobby.prototype.__proto__||Object.getPrototypeOf(Lobby.prototype),"netOnUserCharge",this).call(this,agv);var item=_chargeitemmgr2.default.getInstance().GetChargeItem("gold",agv.itemid);if(item){var msg="购买 "+item.name+" 成功";if(item.addvalue>0?msg=msg+"\n加送"+_gameconst2.default.MakeNumberSimple(item.addvalue)+_itemkindmgr2.default.GOLD_NAME:item.actadd.value&&item.actadd.value>0?msg=msg+"\n加送"+item.actadd.value+_itemkindmgr2.default.GOLD_NAME:1900001==item.id&&(msg+="\n请在双11当天使用"),item.additem.length>0&&(msg=msg+"\n额外赠送"+_itemkindmgr2.default.GetAddBagInfo({itemlist:item.additem})+"(背包领取)"),_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:msg,closetime:1e4},!0,!0),1600021==item.id||1600022==item.id||item.id>=1610001&&item.id<=1610005){var daycharge=_gameconst2.default.GetDayChargeData();daycharge.list[item.id.toString()]=daycharge.list[item.id.toString()]?daycharge.list[item.id.toString()]+1:1,_playerdata_mgr2.default.getInstance().setUserSetDataByKey("daycharge",daycharge),_playerdata_mgr2.default.getInstance().writeUserSetData(),this.szPanel.shop.RefreshShop()}}}},{key:"netOnGetCoconutScore",value:function(agv){_BaseObj2.default.getEventObj().dispatchEvent("CoconutScoreChg",agv)}},{key:"netOnGetCoconutScoreErr",value:function(agv){agv[0];var errmsg=agv[1]+"\n操作过于频繁，请稍后在背包重新领取";_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:errmsg},!0,!0)}},{key:"OnClickBtn",value:function(event){switch(event.target){case this.head.m_BindObj:_UIMgr2.default.getInstance().UIEvent("个人信息2","SetInfo",[_playerdata_mgr2.default.getInstance().getMeUID()],!0,!0);break;case this.uiobj.actbtn:this.OpenActivity();break;case this.uiobj.helpbtn:_UIMgr2.default.getInstance().OpenUI("游戏帮助");break;case this.uiobj.setingbtn:_UIMgr2.default.getInstance().OpenUI("大厅设置");break;case this.uiobj.bagbtn:this.OpenBag();break;case this.uiobj.mailbtn:_UIMgr2.default.getInstance().OpenUI("邮件界面"),this.uiobj.mailbtn.getChildByName("tip").visible=!1;break;case this.buygoldbtn:this.InShop({subpage:"jb"});break;case this.chgredpacketbtn:this.InShop({subpage:"hb",showhb:!0});break;case this.uiobj.feedbackbtn:_UIMgr2.default.getInstance().UIEvent("微信提示","SetInfo",{title:"客服列表",msg:_gameconst2.default.AGENT_FEEDBACK,type:_gameconst2.default.CONFIG.customerlist},!0,!0);break;case this.uiobj.shopbtn:this.InShop({});break;case this.uiobj.scbtn:_UIMgr2.default.getInstance().OpenUI("首充界面");break;case this.uiobj.rankbtn:_UIMgr2.default.getInstance().OpenUI("赢金排行榜");break;case this.uiobj.bankbtn:_UIMgr2.default.getInstance().OpenUI("银行界面");break;case this.uiobj.quickbtn:var AutoInRoom=function(){this.CurPanel.AutoInRoom()};"fish"==this.CurPanel.idx?(this.SelectPanel("redgame",!0),this.timerCall(500,AutoInRoom)):"match"!=this.CurPanel.idx&&AutoInRoom.bind(this)();break;case this.uiobj.luckybtn:_UIMgr2.default.getInstance().OpenUI("幸运转盘界面");break;case this.uiobj.invitebtn:_UIMgr2.default.getInstance().OpenUI("邀请任务界面"),this.uiobj.invitebtn.getChildByName("tip").visible=!1;break;case this.uiobj.daysignbtn:this.uiobj.daysignbtn.getChildByName("tip").visible=!1,_UIMgr2.default.getInstance().OpenUI("每日签到");break;case this.uiobj.vipbtn:_UIMgr2.default.getInstance().OpenUI("VIP说明",1);break;case this.uiobj.redtipclosebtn:this.redtip.visible=!1,this.bShowRedTip=!0;break;case this.uiobj.olbtn:this.OpenActivity(3);break;case this.uiobj.thbtn:this.uiobj.thbtn.getChildByName("tip").visible=!1,_UIMgr2.default.getInstance().OpenUI("特惠礼包界面")}event.nosnd||_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OpenOtherPanel",value:function(subpage){this.OnClickBtn({target:this.uiobj[subpage],nosnd:!0})}}]),Lobby}();exports.default=Lobby},{"../../appbase/com/FlyText":52,"../../appbase/com/HeadImg":53,"../../appbase/com/UserHead":61,"../../appbase/com/appmethod":63,"../../appbase/com/soundmgr":65,"../../appbase/lobby/BaseLobby":69,"../../appbase/lobby/bag/BagPage":76,"../../appbase/lobby/shop/chargeitemmgr":90,"../../framework/data/item/itemkindmgr":113,"../../framework/data/playerdata_mgr":117,"../../framework/gtea/BaseObj":126,"../../framework/gtea/gtea":127,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../../framework/utils/config":145,"../com/vipmgr":4,"../gameconst":5,"./panel/panel_fish":28,"./panel/panel_goldgame":29,"./panel/panel_match":30,"./panel/panel_redgame":31,"./panel/panel_shop":32}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_spinpage2=_interopRequireDefault(require("./spinpage")),_rulepage2=_interopRequireDefault(require("./rulepage")),_recordpage2=_interopRequireDefault(require("./recordpage")),_comfunc2=(_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_interopRequireDefault(require("../../../framework/utils/comfunc")));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LuckySpin=function(_BaseUI){function LuckySpin(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LuckySpin),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(LuckySpin.__proto__||Object.getPrototypeOf(LuckySpin)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(LuckySpin,_BaseUI3.default),_createClass(LuckySpin,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(LuckySpin.prototype.__proto__||Object.getPrototypeOf(LuckySpin.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick);for(var i=1;i<=3;i++){var btn=this.uiobj["btn_"+i];btn.visible=!1,btn.on(Laya.Event.CLICK,this,this.SelectPage)}this.m_szPage=[new _spinpage2.default(this,this.uiobj.spinpage),new _rulepage2.default(this,this.uiobj.rulepage),new _recordpage2.default(this,this.uiobj.recordpage)]}},{key:"OnOpen",value:function(){_gtea2.default.rpc.Call("捕鱼活动转盘","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(args){if(this.IsOpen())if(args.isopen){this.m_Data=args;for(var i=1;i<=3;i++)this.uiobj["btn_"+i].visible=!0;this.OnSelectPage(1)}else _FlyText2.default.AddFlyText("活动时间未到!")},function(errflag,errmsg){})}},{key:"OnClose",value:function(){for(var i=0;i<this.m_szPage.length;i++)this.uiobj["btn_"+(i+1)].visible=!1,this.m_szPage[i].Close();this.m_Data=null}},{key:"DoSpin",value:function(type){if(this.m_Data){var neednum=1==type?1:9;if(_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.getItemNum(this.m_Data.spinitem)<neednum)return _FlyText2.default.AddFlyText("奖券数量不足!"),_UIMgr2.default.getInstance().CloseUI("幸运转盘奖励界面"),void this.m_szPage[0].OnDoSpin();var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel());_gtea2.default.rpc.Call("捕鱼活动转盘","DoSpin",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),type:type,channel:channel},this,function(args){this.IsOpen()&&1==this.m_nCurPage&&(this.m_Data.user=args.user,args.szitem.length>1?(this.m_szPage[0].OnDoSpin(),_UIMgr2.default.getInstance().UIEvent("幸运转盘奖励界面","SetData",{data:this.m_Data,szitem:args.szitem,szreward:args.szreward},!0,!0)):this.m_szPage[0].OnDoSpin(args))},function(errflag,errmsg){this.IsOpen()&&1==this.m_nCurPage&&(this.m_szPage[0].OnDoSpin(),_FlyText2.default.AddFlyText(errmsg))})}}},{key:"OnSelectPage",value:function(idx){this.m_nCurPage=idx;for(var i=1;i<=3;i++){var btn=this.uiobj["btn_"+i];btn.selected=i==idx,btn.mouseEnabled=i!=idx;var page=this.m_szPage[i-1];i==idx?page.Open():page.Close()}}},{key:"SelectPage",value:function(event){for(var i=1;i<=3;i++){if(this.uiobj["btn_"+i]===event.target){this.OnSelectPage(i);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnClick",value:function(event){event.target===this.uiobj.closebtn&&_UIMgr2.default.getInstance().CloseUI("幸运转盘界面"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),LuckySpin}();exports.default=LuckySpin},{"../../../appbase/com/FlyText":52,"../../../appbase/com/soundmgr":65,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"./recordpage":25,"./rulepage":26,"./spinpage":27}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../gameconst")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LuckySpinReward=function(_BaseUI){function LuckySpinReward(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LuckySpinReward),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(LuckySpinReward.__proto__||Object.getPrototypeOf(LuckySpinReward)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(LuckySpinReward,_BaseUI3.default),_createClass(LuckySpinReward,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(LuckySpinReward.prototype.__proto__||Object.getPrototypeOf(LuckySpinReward.prototype),"OnCreate",this).call(this),this.uiobj.okbtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick)}},{key:"OnOpen",value:function(){}},{key:"OnClose",value:function(){}},{key:"SetData",value:function(args){this.uiobj.okbtn.visible=!1,this.uiobj.okbtn.disabled=!1,this.uiobj.closebtn.visible=!1,this.uiobj.ticketicon.visible=!1,this.uiobj.ticketnum.visible=!1;for(var i=0;i<10;i++){var item=this.uiobj["item_"+(i+1)];item.scaleX=item.scaleY=1,item.visible=!1}var data=args.data,szitem=args.szitem,szreward=args.szreward,idx=1;(function PlayAni(){var _this2=this;if(0==szitem.length||idx>10){this.uiobj.okbtn.visible=!0,this.uiobj.closebtn.visible=!0,this.uiobj.ticketicon.visible=!0,this.uiobj.ticketnum.visible=!0;var itemnum=_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.getItemNum(data.spinitem);return this.uiobj.ticketnum.text="×"+itemnum,void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"恭喜您获得 "+_itemkindmgr2.default.GetAddBagInfo(szreward)},!0,!0)}var id=szitem.shift(),item=this.uiobj["item_"+idx],itemdata=data.szitem[id-1];item.getChildByName("itemname").text=itemdata.name,item.getChildByName("itemnum").visible=!1,_gameconst2.default.SetIconImg(item.getChildByName("itemimg"),itemdata.imgpath),item.scaleX=item.scaleY=2,idx+=1,item.visible=!0,this.TweenLite(item,{scaleX:1,scaleY:1},100,Laya.Ease.sineOut,Laya.Handler.create(this,function(){_this2.timerCall(100,PlayAni)}))}).bind(this)()}},{key:"OnClick",value:function(event){event.target===this.uiobj.closebtn?_UIMgr2.default.getInstance().CloseUI("幸运转盘奖励界面"):event.target===this.uiobj.okbtn&&(this.uiobj.okbtn.disabled=!0,_UIMgr2.default.getInstance().UIEvent("幸运转盘界面","DoSpin",2)),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),LuckySpinReward}();exports.default=LuckySpinReward},{"../../../appbase/com/soundmgr":65,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../gameconst":5}],25:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_gameconst2=(_interopRequireDefault(require("../../../framework/ui/UIMgr")),_interopRequireDefault(require("../../gameconst")));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LuckySpin_RecordPage=function(_BaseObj){function LuckySpin_RecordPage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LuckySpin_RecordPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(LuckySpin_RecordPage.__proto__||Object.getPrototypeOf(LuckySpin_RecordPage)).call(this));return _this.m_UI=ui,_this.m_BindObj=bindobj,_this.m_BindObj.getChildByName("invitebtn").visible=!1,_this.m_BindObj.getChildByName("invitebtn").on(Laya.Event.CLICK,_this,_this.Share),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(LuckySpin_RecordPage,_BaseObj3.default),_createClass(LuckySpin_RecordPage,[{key:"Open",value:function(){for(var szitem=this.m_UI.m_Data.szitem,szreward=this.m_UI.m_Data.user.szreward,i=0;i<szitem.length;i++){var item=this.m_BindObj.getChildByName("item_"+(i+1));if(!item)break;var itemdata=szitem[i];item.getChildByName("itemname").text=itemdata.name,item.getChildByName("itemnum").text="×"+(szreward[itemdata.id.toString()]||0),_gameconst2.default.SetIconImg(item.getChildByName("itemimg"),itemdata.imgpath)}this.m_BindObj.visible=!0}},{key:"Close",value:function(){this.m_BindObj.visible=!1}},{key:"Share",value:function(){_gameconst2.default.GAMENAME,_gameconst2.default.SHAREMSG}}]),LuckySpin_RecordPage}();exports.default=LuckySpin_RecordPage},{"../../../framework/gtea/BaseObj":126,"../../../framework/ui/UIMgr":142,"../../gameconst":5}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../../../framework/gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var LuckySpin_RulePage=function(_BaseObj){function LuckySpin_RulePage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LuckySpin_RulePage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(LuckySpin_RulePage.__proto__||Object.getPrototypeOf(LuckySpin_RulePage)).call(this));return _this.m_UI=ui,_this.m_BindObj=bindobj,_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(LuckySpin_RulePage,_BaseObj3.default),_createClass(LuckySpin_RulePage,[{key:"Open",value:function(){this.m_BindObj.visible=!0}},{key:"Close",value:function(){this.m_BindObj.visible=!1}}]),LuckySpin_RulePage}();exports.default=LuckySpin_RulePage},{"../../../framework/gtea/BaseObj":126}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../gameconst")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LuckySpin_SpinPage=function(_BaseObj){function LuckySpin_SpinPage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LuckySpin_SpinPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(LuckySpin_SpinPage.__proto__||Object.getPrototypeOf(LuckySpin_SpinPage)).call(this));return _this.m_UI=ui,_this.m_BindObj=bindobj,_this.m_GoldBtn=_this.m_BindObj.getChildByName("goldbtn"),_this.m_RedBtn=_this.m_BindObj.getChildByName("redbtn"),_this.m_GoldBtn.on(Laya.Event.CLICK,_this,_this.DoSpin),_this.m_RedBtn.on(Laya.Event.CLICK,_this,_this.DoSpin),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(LuckySpin_SpinPage,_BaseObj3.default),_createClass(LuckySpin_SpinPage,[{key:"Open",value:function(){for(var szitem=this.m_UI.m_Data.szitem,i=0;i<szitem.length;i++){var item=this.m_BindObj.getChildByName("item_"+(i+1));if(!item)break;var itemdata=szitem[i];item.getChildByName("itemname").text=itemdata.name,item.getChildByName("itemnum").text="",item.getChildByName("light").visible=!1,item.itemid=itemdata.id,_gameconst2.default.SetIconImg(item.getChildByName("itemimg"),itemdata.imgpath)}this.m_GoldBtn.disabled=!1,this.m_RedBtn.disabled=!1,this.Refresh(),_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.addEventListener("eve.DataChg",this,this.Refresh),this.m_BindObj.visible=!0}},{key:"Close",value:function(){this.m_AniTimer&&this.killTimer(this.m_AniTimer),this.m_AniTimer=null,_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.removeEventListener("eve.DataChg",this),this.m_BindObj.visible=!1}},{key:"Refresh",value:function(){var itemnum=_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.getItemNum(this.m_UI.m_Data.spinitem);this.m_BindObj.getChildByName("lessnum").text=itemnum}},{key:"OnDoSpin",value:function(data){if(!data)return this.m_GoldBtn.disabled=!1,void(this.m_RedBtn.disabled=!1);function ShowResult(){this.m_AniTimer=null,this.m_GoldBtn.disabled=!1,this.m_RedBtn.disabled=!1,_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"恭喜您获得 "+_itemkindmgr2.default.GetAddBagInfo(data.szreward)},!0,!0)}var stop=0;if(_comfunc2.default.isNil(data.idx))for(var i=1;i<=6;i++){if(this.m_BindObj.getChildByName("item_"+i).itemid==data.szitem[0]){stop=i;break}}else stop=data.idx;(function PlayAni(idx,num,stop){idx>6&&(idx=1,num+=1);for(var i=1;i<=6;i++)this.m_BindObj.getChildByName("item_"+i).getChildByName("light").visible=i==idx;var time=100;num>3&&(time=500),this.m_AniTimer=5!=num||idx!=stop?this.timerCall(time,PlayAni,[idx+1,num,stop]):this.timerCall(500,ShowResult)}).bind(this)(1,1,stop)}},{key:"DoSpin",value:function(event){this.m_GoldBtn.disabled=!0,this.m_RedBtn.disabled=!0,event.target===this.m_GoldBtn?this.m_UI.DoSpin(1):event.target===this.m_RedBtn&&this.m_UI.DoSpin(2),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),LuckySpin_SpinPage}();exports.default=LuckySpin_SpinPage},{"../../../appbase/com/soundmgr":65,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../gameconst":5}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_panel_base2=_interopRequireDefault(require("../../../appbase/lobby/panel/panel_base")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_UIMgr2=(_interopRequireDefault(require("../../com/vipmgr")),_interopRequireDefault(require("../../../appbase/com/FlyText")),_interopRequireDefault(require("../../../framework/ui/UIMgr"))),_gameconst2=_interopRequireDefault(require("../../gameconst")),_appmethod2=_interopRequireDefault(require("../../../appbase/com/appmethod"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Panel_Fish=function(_Panel_Base){function Panel_Fish(ui,idx,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Panel_Fish);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Panel_Fish.__proto__||Object.getPrototypeOf(Panel_Fish)).call(this,ui,idx,bindobj));_this.m_szGame=[];for(var i=0;i<4;i++){var game=bindobj["game_"+(i+1)];game.on(Laya.Event.CLICK,_this,_this.SelectGame),_this.m_szGame[i]=game}return _this.m_szGoldFontValue=[Math.floor(5e7*Math.random()+1e8),Math.floor(5e7*Math.random()+2e8),Math.floor(5e7*Math.random()+5e8)],_this.m_szRedFontValue=[Math.floor(5e7*Math.random()+1e8),Math.floor(5e7*Math.random()+2e8),Math.floor(5e7*Math.random()+5e8)],_this.m_szBaseFontValue=[_this.m_szGoldFontValue[0]+_this.m_szGoldFontValue[1]+_this.m_szGoldFontValue[2],_this.m_szRedFontValue[0]+_this.m_szRedFontValue[1]+_this.m_szRedFontValue[2]],bindobj.wechatpubname1.text=_gameconst2.default.WeChatPub,bindobj.wechatpubname2.text=_gameconst2.default.WeChatPub,_this.m_szCurFontValue=_comfunc2.default.clone(_this.m_szBaseFontValue),_this.nAniXpos=-1,_this.bNeedBack=!1,_this.lock=bindobj.lock,bindobj.lock.visible=!0,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Panel_Fish,_panel_base2.default),_createClass(Panel_Fish,[{key:"SelectGame",value:function(event){for(var i=0;i<this.m_szGame.length;i++){var game=this.m_szGame[i];if(event.target===game){0==i?this.ui.SelectPanel("goldgame",!0):1==i?this.ui.SelectPanel("redgame",!0):2==i?_appmethod2.default.copyOpenWeChat(_gameconst2.default.WeChatPub):3==i?this.lock.visible?_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"暂未开放,敬请期待!"},!0,!0):this.ui.InArena():4==i&&DollMachineUI.getInstance().Open();break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"PlayFontAni",value:function(){for(var i=0;i<this.m_szBaseFontValue.length;i++)this.m_szCurFontValue[i]=this.m_szCurFontValue[i]+Math.floor(100*Math.random()+1),this.bindobj["font_"+(i+1)]&&(this.bindobj["font_"+(i+1)].value=_comfunc2.default.makenumberstr(this.m_szCurFontValue[i])),this.m_szCurFontValue[i]>this.m_szBaseFontValue[i]+15e4&&(this.m_szCurFontValue[i]=this.m_szBaseFontValue[i])}}]),Panel_Fish}();exports.default=Panel_Fish},{"../../../appbase/com/FlyText":52,"../../../appbase/com/appmethod":63,"../../../appbase/com/soundmgr":65,"../../../appbase/lobby/panel/panel_base":81,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../com/vipmgr":4,"../../gameconst":5}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_panel_base2=_interopRequireDefault(require("../../../appbase/lobby/panel/panel_base")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_matchkind2=_interopRequireDefault(require("../../../framework/match/matchkind")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Panel_GoldGame=function(_Panel_Base){function Panel_GoldGame(ui,idx,bindobj,szRoom){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Panel_GoldGame);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Panel_GoldGame.__proto__||Object.getPrototypeOf(Panel_GoldGame)).call(this,ui,idx,bindobj));_this.szRoom=szRoom;for(var i=1;i<=_this.szRoom.length;i++){var kindid=_this.szRoom[i-1],kind=_matchkind2.default.Find(kindid),gold=_this.bindobj["gold_"+i],btn=_this.bindobj["room_"+i];kind?(gold.text="每炮:"+_comfunc2.default.getGoldRatio(kind.fireGold)+_itemkindmgr2.default.GOLD_NAME,btn.on(Laya.Event.CLICK,_this,_this.SelectRoom)):(gold.text="暂未开放",btn.mouseEnabled=!1)}return _gameconst2.default.CONFIG.isreview&&(_this.bNeedBack=!1),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Panel_GoldGame,_panel_base2.default),_createClass(Panel_GoldGame,[{key:"SetFontValue",value:function(value){this.m_szBaseFontValue=value,this.m_szCurFontValue=_comfunc2.default.clone(this.m_szBaseFontValue)}},{key:"OnSelectRoom",value:function(kindid){var kind=_matchkind2.default.Find(kindid);kind?kind.enterGold>0&&_playerdata_mgr2.default.getInstance().getMeGold()<kind.enterGold?_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"进入该房间需要"+_gameconst2.default.MakeNumberSimple(_comfunc2.default.getGoldRatio(kind.enterGold))+"金币!"},!0,!0):kind.maxGold>0&&_playerdata_mgr2.default.getInstance().getMeGold()>kind.maxGold?_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"超过进入该房间上限"+_gameconst2.default.MakeNumberSimple(_comfunc2.default.getGoldRatio(kind.maxGold))+"金币!"},!0,!0):_UIMgr2.default.getInstance().UIEvent("大厅界面","InFreeGame",{kindid:kind.m_nKindID}):_FlyText2.default.AddFlyText("房间类型不存在!")}},{key:"AutoInRoom",value:function(){for(var i=0;i<this.szRoom.length;i++){var kind=_matchkind2.default.Find(this.szRoom[i]);if(kind&&!(kind.enterGold>0&&_playerdata_mgr2.default.getInstance().getMeGold()<kind.enterGold||kind.maxGold>0&&_playerdata_mgr2.default.getInstance().getMeGold()>kind.maxGold)){_UIMgr2.default.getInstance().UIEvent("大厅界面","InFreeGame",{kindid:kind.m_nKindID});break}}}},{key:"SelectRoom",value:function(event){for(var i=1;i<=this.szRoom.length;i++)if(this.bindobj["room_"+i]===event.target){this.OnSelectRoom(this.szRoom[i-1]);break}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"PlayFontAni",value:function(){for(var i=0;i<this.m_szBaseFontValue.length;i++)this.m_szCurFontValue[i]=this.m_szCurFontValue[i]+Math.floor(100*Math.random()+1),this.bindobj["font_"+(i+1)].value=_comfunc2.default.makenumberstr(this.m_szCurFontValue[i]),this.m_szCurFontValue[i]>this.m_szBaseFontValue[i]+5e4&&(this.m_szCurFontValue[i]=this.m_szBaseFontValue[i])}}]),Panel_GoldGame}();exports.default=Panel_GoldGame},{"../../../appbase/com/FlyText":52,"../../../appbase/com/soundmgr":65,"../../../appbase/lobby/panel/panel_base":81,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/match/matchkind":133,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../gameconst":5}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_panel_base2=_interopRequireDefault(require("../../../appbase/lobby/panel/panel_base")),_UIMgr2=(_interopRequireDefault(require("../../../framework/gtea/gtea")),_interopRequireDefault(require("../../../framework/ui/UIMgr"))),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Panel_Match=function(_Panel_Base){function Panel_Match(ui,idx,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Panel_Match);for(var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Panel_Match.__proto__||Object.getPrototypeOf(Panel_Match)).call(this,ui,idx,bindobj)),i=0;i<3;i++){_this.bindobj["item_"+(i+1)].on(Laya.Event.CLICK,_this,_this.SelectGame),_this.bindobj["off_"+(i+1)].visible=!0,_this.bindobj["time_"+(i+1)].text="暂未开放"}return _this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Panel_Match,_panel_base2.default),_createClass(Panel_Match,[{key:"Open",value:function(subpage){_get(Panel_Match.prototype.__proto__||Object.getPrototypeOf(Panel_Match.prototype),"Open",this).call(this,subpage),this.ui.uiobj.quickbtn.visible=!1}},{key:"Clear",value:function(){_get(Panel_Match.prototype.__proto__||Object.getPrototypeOf(Panel_Match.prototype),"Clear",this).call(this),this.ui.uiobj.quickbtn.visible=!0}},{key:"SelectGame",value:function(event){for(var i=0;i<3;i++){var btn=this.bindobj["item_"+(i+1)];if(event.target===btn){0==i?_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"暂未开放,敬请期待!"},!0,!0):1==i?_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"暂未开放,敬请期待!"},!0,!0):2==i&&_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"暂未开放,敬请期待!"},!0,!0);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),Panel_Match}();exports.default=Panel_Match},{"../../../appbase/com/soundmgr":65,"../../../appbase/lobby/panel/panel_base":81,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_panel_goldgame2=_interopRequireDefault(require("./panel_goldgame")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_matchkind2=_interopRequireDefault(require("../../../framework/match/matchkind"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Panel_RedGame=function(_Panel_GoldGame){function Panel_RedGame(ui,idx,bindobj,szRoom){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Panel_RedGame);for(var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Panel_RedGame.__proto__||Object.getPrototypeOf(Panel_RedGame)).call(this,ui,idx,bindobj,szRoom)),i=1;i<=_this.szRoom.length;i++){var kindid=_this.szRoom[i-1],kind=_matchkind2.default.Find(kindid),gold=_this.bindobj["gold_"+i],lock=_this.bindobj["lockmark_"+i];kind?(gold.visible=!0,lock.visible=!1):(gold.visible=!1,lock.visible=!0)}return _this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Panel_RedGame,_panel_goldgame2.default),_createClass(Panel_RedGame,[{key:"SetFontValue",value:function(value){this.m_szBaseFontValue=value,this.m_szCurFontValue=_comfunc2.default.clone(this.m_szBaseFontValue)}},{key:"PlayFontAni",value:function(){}}]),Panel_RedGame}();exports.default=Panel_RedGame},{"../../../framework/match/matchkind":133,"../../../framework/utils/comfunc":144,"./panel_goldgame":29}],32:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_panel_shop2=_interopRequireDefault(require("../../../appbase/lobby/panel/panel_shop")),_config2=_interopRequireDefault(require("../../../framework/utils/config")),_gameconst2=(_interopRequireDefault(require("../../../framework/ui/UIMgr")),_interopRequireDefault(require("../../../appbase/com/soundmgr")),_interopRequireDefault(require("../../gameconst"))),_shoppage2=_interopRequireDefault(require("../shop/shoppage")),_exchangepage2=_interopRequireDefault(require("../shop/exchangepage")),_recordpage2=_interopRequireDefault(require("../../../appbase/lobby/shop/recordpage")),_swpage2=_interopRequireDefault(require("../shop/swpage"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Panel_Shop=function(_BaseShop){function Panel_Shop(ui,idx,bindobj){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Panel_Shop),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Panel_Shop.__proto__||Object.getPrototypeOf(Panel_Shop)).call(this,ui,idx,bindobj))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Panel_Shop,_panel_shop2.default),_createClass(Panel_Shop,[{key:"InitPage",value:function(){this.m_szPage={shop:new _shoppage2.default(this,this.bindobj.gold_diamond),exchange:new _exchangepage2.default(this,this.bindobj.hb),record:new _recordpage2.default(this,this.bindobj.record)},_gameconst2.default.CONFIG.hideCoconutExchange?this.bindobj.sw&&(this.bindobj.sw.visible=!1):this.bindobj.sw&&(this.m_szPage.sw=new _swpage2.default(this,this.bindobj.sw),this.m_SelectPage.m_szTarget.sw={page:"sw",mode:2})}},{key:"OnResize",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(Panel_Shop.prototype.__proto__||Object.getPrototypeOf(Panel_Shop.prototype),"OnResize",this).call(this),this.bindobj.width=_config2.default.viewSize.width,this.bindobj.height=_config2.default.viewSize.height}}]),Panel_Shop}();exports.default=Panel_Shop},{"../../../appbase/com/soundmgr":65,"../../../appbase/lobby/panel/panel_shop":82,"../../../appbase/lobby/shop/recordpage":93,"../../../framework/ui/UIMgr":142,"../../../framework/utils/config":145,"../../gameconst":5,"../shop/exchangepage":41,"../shop/shoppage":42,"../shop/swpage":43}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_appmethod2=_interopRequireDefault(require("../../../appbase/com/appmethod")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../gameconst")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PayModeUI=function(_BaseUI){function PayModeUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PayModeUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PayModeUI.__proto__||Object.getPrototypeOf(PayModeUI)).call(this));return _this.m_msg="",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PayModeUI,_BaseUI3.default),_createClass(PayModeUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(PayModeUI.prototype.__proto__||Object.getPrototypeOf(PayModeUI.prototype),"OnCreate",this).call(this),this.m_CloseBtn=this.m_UI.getChildByName("Button_close"),this.m_CloseBtn.on(Laya.Event.CLICK,this,function(){_soundmgr2.default.getInstance().playSound("snd/button.mp3"),_UIMgr2.default.getInstance().CloseUI("支付选择")}),this.m_szPayButton=[],this.m_AliPayBtn=this.m_UI.getChildByName("paymode_1"),this.m_AliPayBtn.on(Laya.Event.CLICK,this,this.Charge),this.m_WeChatPayBtn=this.m_UI.getChildByName("paymode_2"),this.m_WeChatPayBtn.on(Laya.Event.CLICK,this,this.Charge),_gameconst2.default.CONFIG.unshowalipay&&(this.m_AliPayBtn.visible=!1)}},{key:"OnOpen",value:function(direct){this.m_AliPayBtn.disabled=!1,this.m_WeChatPayBtn.disabled=!1}},{key:"OnClose",value:function(direct){}},{key:"SetInfo",value:function(agv){this.m_msg=agv.msg,this.m_itemid=agv.itemid,this.m_bactiviy=agv.isactivity}},{key:"HuichaoPay",value:function(){var os="";"gbxBridge"in window&&(os=gbxBridge.deviceType);var orderArgs={os:os,uid:_playerdata_mgr2.default.getInstance().getMeUID(),product_id:this.m_itemid,channel:_playerdata_mgr2.default.getInstance().getMe().getChannel()};_gtea2.default.rpc.Call("HuichaoPay","MakeOrder",orderArgs,this,function(agv){_UIMgr2.default.getInstance().CloseUI("支付选择"),_appmethod2.default.openSystemBrowser(agv.url,this,function(obj,response){0!=response&&_FlyText2.default.AddFlyText(response.msg)})},function(errflag,errmsg){this.m_AliPayBtn.disabled=!1,this.m_WeChatPayBtn.disabled=!1,_FlyText2.default.AddFlyText(errmsg)})}},{key:"HCAliPay",value:function(pay_channel){_appmethod2.default.getBundleAndAppname(this,function(obj,response){if(0==response.code){var data=response.data,bundleid=data.bundleid,appname=data.appname;obj.doHCPay(pay_channel,bundleid,appname)}else obj.doHCPay(pay_channel,"1","1")})}},{key:"doHCPay",value:function(pay_channel,bundleid,appname){var orderArgs={uid:_playerdata_mgr2.default.getInstance().getMeUID(),product_id:this.m_itemid,channel:_playerdata_mgr2.default.getInstance().getMe().getChannel(),pay_channel:pay_channel,bundleid:bundleid,appname:appname};_gtea2.default.rpc.Call("HCAliPay","MakeOrder",orderArgs,this,function(agv){_UIMgr2.default.getInstance().CloseUI("支付选择"),_appmethod2.default.openSystemBrowser(agv.url)},function(errflag,errmsg){this.m_AliPayBtn.disabled=!1,this.m_WeChatPayBtn.disabled=!1,_FlyText2.default.AddFlyText(errmsg)})}},{key:"KJAliPay",value:function(){var orderArgs={uid:_playerdata_mgr2.default.getInstance().getMeUID(),product_id:this.m_itemid,channel:_playerdata_mgr2.default.getInstance().getMe().getChannel()};_gtea2.default.rpc.Call("KjPay","MakeOrder",orderArgs,this,function(agv){_UIMgr2.default.getInstance().CloseUI("支付选择"),_appmethod2.default.openSystemBrowser(agv.pay.pay_url)},function(errflag,errmsg){this.m_AliPayBtn.disabled=!1,this.m_WeChatPayBtn.disabled=!1,_FlyText2.default.AddFlyText(errmsg)})}},{key:"ChinaUMSPay",value:function(){var orderArgs={uid:_playerdata_mgr2.default.getInstance().getMeUID(),product_id:this.m_itemid,channel:_playerdata_mgr2.default.getInstance().getMe().getChannel()};_gtea2.default.rpc.Call("ChinaUMSPay","MakeOrder",orderArgs,this,function(agv){_UIMgr2.default.getInstance().CloseUI("支付选择"),_appmethod2.default.openSystemBrowser(agv.url)},function(errflag,errmsg){this.m_AliPayBtn.disabled=!1,this.m_WeChatPayBtn.disabled=!1,_FlyText2.default.AddFlyText(errmsg)})}},{key:"DyUnionPay",value:function(pay_channel){_appmethod2.default.getBundleAndAppname(this,function(obj,response){if(0==response.code){var data=response.data,bundleid=data.bundleid,appname=data.appname;obj.doDyUnionPay(pay_channel,bundleid,appname)}else obj.doDyUnionPay(pay_channel,"1","1")})}},{key:"doDyUnionPay",value:function(pay_channel,bundleid,appname){var orderArgs={uid:_playerdata_mgr2.default.getInstance().getMeUID(),product_id:this.m_itemid,channel:_playerdata_mgr2.default.getInstance().getMe().getChannel(),pay_channel:pay_channel,bundleid:bundleid,appname:appname};_gtea2.default.rpc.Call("DyUnionPay","MakeOrder",orderArgs,this,function(agv){_UIMgr2.default.getInstance().CloseUI("支付选择"),_appmethod2.default.unifiedPay(agv,_gameconst2.default.THIRDPARTY,null,null)},function(errflag,errmsg){this.m_AliPayBtn.disabled=!1,this.m_WeChatPayBtn.disabled=!1,_FlyText2.default.AddFlyText(errmsg)})}},{key:"PanGuPay",value:function(pay_channel){var os="";"gbxBridge"in window&&(os=gbxBridge.deviceType);var orderArgs={uid:_playerdata_mgr2.default.getInstance().getMeUID(),product_id:this.m_itemid,channel:_playerdata_mgr2.default.getInstance().getMe().getChannel(),pay_channel:pay_channel,os:os};_gtea2.default.rpc.Call("PanGuPay","MakeOrder",orderArgs,this,function(agv){_UIMgr2.default.getInstance().CloseUI("支付选择"),_appmethod2.default.openSystemBrowser(agv.url)},function(errflag,errmsg){this.ChargeErr(errmsg)})}},{key:"DoPay",value:function(type){var _this2=this,callname=void 0;if("alipay"==type?callname="AliPay":"wx"==type&&(callname="WeChatPay"),callname){var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel());_gtea2.default.rpc.Call(callname,"MakeOrder",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),product_id:this.m_itemid,channel:channel},this,function(agv){_UIMgr2.default.getInstance().CloseUI("支付选择"),_appmethod2.default.unifiedPay(agv,type,null,null)},function(errflag,errmsg){_FlyText2.default.AddFlyText(errmsg),_this2.m_AliPayBtn.disabled=!1,_this2.m_WeChatPayBtn.disabled=!1})}}},{key:"Charge",value:function(event){var _this3=this;function OnCharge(){event.target===this.m_AliPayBtn?_gameconst2.default.CONFIG.lzhcpay?this.HuichaoPay():_gameconst2.default.CONFIG.lzkjpay?this.KJAliPay():"dyunionpay"==_gameconst2.default.THIRDPARTY?this.DyUnionPay("alipay"):this.HCAliPay("alipay"):event.target===this.m_WeChatPayBtn&&("dyunionpay"==_gameconst2.default.THIRDPARTY?this.DyUnionPay("wechat"):_gameconst2.default.CONFIG.dypay?this.HCAliPay("wechat"):this.DoPay("wx"))}_soundmgr2.default.getInstance().playSound("snd/button.mp3"),event.target===this.m_WeChatPayBtn&&_gameconst2.default.CONFIG.wechatpubpay?_UIMgr2.default.getInstance().UIEvent("微信提示","SetInfo",{title:"充值",msg:this.m_msg,type:_gameconst2.default.CONFIG.wechatpublist||[_gameconst2.default.WeChatPub]},!0,!0):(this.m_bactiviy?_gtea2.default.rpc.Call("捕鱼充值活动","BuyCharge",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),itemid:this.m_itemid},this,function(agv){OnCharge.bind(_this3)()},function(errflag,errmsg){_FlyText2.default.AddFlyText(errmsg),_this3.m_AliPayBtn.disabled=!1,_this3.m_WeChatPayBtn.disabled=!1}):OnCharge.bind(this)(),this.m_AliPayBtn.disabled=!0,this.m_WeChatPayBtn.disabled=!0)}}]),PayModeUI}();exports.default=PayModeUI},{"../../../appbase/com/FlyText":52,"../../../appbase/com/appmethod":63,"../../../appbase/com/soundmgr":65,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../gameconst":5}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_HeadImg2=_interopRequireDefault(require("../../appbase/com/HeadImg")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_gameconst2=_interopRequireDefault(require("../gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RankGoldUI=function(_BaseUI){function RankGoldUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RankGoldUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(RankGoldUI.__proto__||Object.getPrototypeOf(RankGoldUI)).call(this));return _this.UI_NAME="排行榜",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(RankGoldUI,_BaseUI3.default),_createClass(RankGoldUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(RankGoldUI.prototype.__proto__||Object.getPrototypeOf(RankGoldUI.prototype),"OnCreate",this).call(this),this.m_ListView=this.m_UI.listview,this.m_ListView.renderHandler=Laya.Handler.create(this,this.OnListRander,null,!1),this.m_CloseBtn=this.m_UI.Button_close,this.m_CloseBtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_szBtn=[];for(var i=0;i<3;i++){var btn=this.m_UI["Button_Page"+(i+1)];btn&&(btn.on(Laya.Event.CLICK,this,this.SelectPage),this.m_szBtn[i]=btn)}for(var _i=0;_i<this.m_ListView.cells.length;_i++){this.m_ListView.cells[_i].getChildByName("headbk").on(Laya.Event.CLICK,this,this.SelectHead)}this.m_UI.selectheadbk.visible=!1}},{key:"ClearSelectHead",value:function(){this.killTimer(this.m_HeadTimer),this.m_HeadTimer=null,this.m_UI.selectheadbk.visible=!1}},{key:"OnOpen",value:function(page){this.m_UI.nick.text=_playerdata_mgr2.default.getInstance().getMeNick(),this.m_UI.headbk.headimg&&this.m_UI.headbk.headimg.DelThis(),this.m_UI.headbk.headimg=new _HeadImg2.default,this.m_UI.headbk.headimg.width=this.m_UI.headbk.width,this.m_UI.headbk.headimg.height=this.m_UI.headbk.height,this.m_UI.headbk.headimg.x=this.m_UI.headbk.width/2,this.m_UI.headbk.headimg.y=this.m_UI.headbk.height/2,this.m_UI.headbk.headimg.SetData(_playerdata_mgr2.default.getInstance().getMeUID(),this.m_UI.headbk),this.OnSelectPage(page||1)}},{key:"OnClose",value:function(){this.ClearSelectHead(),this.m_nCurPage=0,this.m_ListView.array=[]}},{key:"SetUserInfo",value:function(user){for(var i=0;i<this.m_ListView.cells.length;i++){var item=this.m_ListView.cells[i],data=item.dataSource;if(data&&data.uid==user.m_nUID){var headbk=item.getChildByName("headbk");headbk.headimg&&headbk.headimg.DelThis(),headbk.headimg=new _HeadImg2.default,headbk.headimg.width=headbk.width,headbk.headimg.height=headbk.height,headbk.headimg.x=headbk.width/2,headbk.headimg.y=headbk.height/2,headbk.headimg.SetData(data.uid,headbk),item.getChildByName("nick").text=user.getNick()}}}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource,rank=idx+1,headbk=item.getChildByName("headbk"),rankicon=item.getChildByName("rankicon"),ranknum=item.getChildByName("ranknum");item.getChildByName("nick").text="",rankicon.visible=!1,ranknum.visible=!1,headbk.headimg&&headbk.headimg.DelThis(),rank<=3?(_gameconst2.default.SetIconImg(rankicon,"lobby/paihangbang/paiming_"+rank+".png"),rankicon.visible=!0):(ranknum.value=rank,ranknum.visible=!0),this.SetItemValue(item,idx);var user=_playerdata_mgr2.default.getInstance().findData(data.uid);if(user)this.SetUserInfo(user);else{var _user=_playerdata_mgr2.default.getInstance().loadData(data.uid,!0);_user.isReady()?this.SetUserInfo(_user):_user.addOnceEventListener("eve.DataReady",this,this.SetUserInfo)}}},{key:"SetItemValue",value:function(item,idx){var data=item.dataSource,icon=item.getChildByName("icon"),value=item.getChildByName("value");1==this.m_nCurPage?(value.text=_gameconst2.default.MakeNumberSimple(data.gold),_gameconst2.default.SetIconImg(icon,"lobby/paihangbang/icon_jinbi.png")):2==this.m_nCurPage?(value.text=_gameconst2.default.MakeNumberSimple(_comfunc2.default.getVouchers2Ratio(data.vouchers2)),_gameconst2.default.SetIconImg(icon,"lobby/paihangbang/icon_hongbao.png")):3==this.m_nCurPage&&(value.text=_gameconst2.default.MakeNumberSimple(data.num),_gameconst2.default.SetIconImg(icon,"lobby/paihangbang/icon_yulei.png"))}},{key:"OnSelectPage",value:function(page){for(var i=0;i<this.m_szBtn.length;i++){var btn=this.m_szBtn[i];btn.selected=i+1==page,btn.mouseEnabled=i+1!=page}this.m_ListView.array=[],this.m_nCurPage=page,this.m_UI.rankicon.visible=!1,this.m_UI.ranknum.visible=!1,this.m_UI.headbk.visible=!1,this.m_UI.icon&&(this.m_UI.icon.visible=!1),this.m_UI.nick.visible=!1,this.m_UI.value.text="",this.m_UI.unrank.visible=!1,this.GetRankList()}},{key:"GetRankList",value:function(){function ListErr(){}1==this.m_nCurPage?(_gameconst2.default.SetIconImg(this.m_UI.titlename,"lobby/paihangbang/text_jinbi.png"),_gtea2.default.rpc.Call("金币排行活动","ListRank",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),mode:1},this,function(data){1==this.m_nCurPage&&this.RefreshRankList(data)},ListErr)):2==this.m_nCurPage?(_gameconst2.default.SetIconImg(this.m_UI.titlename,"lobby/paihangbang/text_hongbao.png"),_gtea2.default.rpc.Call("金币排行活动","ListRank",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),mode:2},this,function(data){2==this.m_nCurPage&&this.RefreshRankList(data)},ListErr)):3==this.m_nCurPage&&(_gameconst2.default.SetIconImg(this.m_UI.titlename,"lobby/paihangbang/text_yulei.png"),_gtea2.default.rpc.Call("排行榜活动","ListRank",{actname:"Item",uid:_playerdata_mgr2.default.getInstance().getMeUID(),nick:_playerdata_mgr2.default.getInstance().getMeNick()},this,function(data){3==this.m_nCurPage&&this.RefreshRankList(data)},ListErr))}},{key:"RefreshRankList",value:function(data){1==this.m_nCurPage?(this.m_UI.value.text=_gameconst2.default.MakeNumberSimple(_playerdata_mgr2.default.getInstance().getMe().getGold()),_gameconst2.default.SetIconImg(this.m_UI.icon,"lobby/paihangbang/icon_jinbi.png")):2==this.m_nCurPage?(this.m_UI.value.text=_gameconst2.default.MakeNumberSimple(_comfunc2.default.getVouchers2Ratio(_playerdata_mgr2.default.getInstance().getMe().getVouchers2())),_gameconst2.default.SetIconImg(this.m_UI.icon,"lobby/paihangbang/icon_hongbao.png")):3==this.m_nCurPage&&(this.m_UI.value.text=_gameconst2.default.MakeNumberSimple(data.myscore),_gameconst2.default.SetIconImg(this.m_UI.icon,"lobby/paihangbang/icon_yulei.png")),data.myrank>0?data.myrank<=3?(_gameconst2.default.SetIconImg(this.m_UI.rankicon,"lobby/paihangbang/paiming_"+data.myrank+".png"),this.m_UI.rankicon.visible=!0):(this.m_UI.ranknum.value=data.myrank,this.m_UI.ranknum.visible=!0):this.m_UI.unrank.visible=!0,this.m_UI.headbk.visible=!0,this.m_UI.icon&&(this.m_UI.icon.visible=!0),this.m_UI.nick.visible=!0;for(var rankagv=[],i=0;i<data.ulist.length;i++)i<20&&(rankagv[i]=data.ulist[i]);this.m_ListView.array=rankagv}},{key:"SelectPage",value:function(event){this.ClearSelectHead();for(var i=0;i<this.m_szBtn.length;i++){var btn=this.m_szBtn[i];if(event.target==btn){this.OnSelectPage(i+1);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"SelectHead",value:function(event){this.ClearSelectHead();for(var i=0;i<this.m_ListView.cells.length;i++){var item=this.m_ListView.cells[i];if(!_comfunc2.default.isNil(item.dataSource)&&item.getChildByName("headbk")===event.target){var headimg=this.m_UI.selectheadbk.headimg;headimg&&headimg.DelThis(),(headimg=new _HeadImg2.default).width=this.m_UI.selectheadbk.width,headimg.height=this.m_UI.selectheadbk.height,headimg.x=this.m_UI.selectheadbk.width/2,headimg.y=this.m_UI.selectheadbk.height/2,headimg.SetData(item.dataSource.uid,this.m_UI.selectheadbk),this.m_UI.selectheadbk.position=event.target.localToGlobal(new Laya.Point(50,-30)),this.m_UI.selectheadbk.headimg=headimg,this.m_UI.selectheadbk.visible=!0,this.m_HeadTimer=this.timerCall(2e3,this.ClearSelectHead);break}}}},{key:"OnClickBtn",value:function(event){event.target===this.m_CloseBtn&&_UIMgr2.default.getInstance().CloseUI(this.UI_NAME),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),RankGoldUI}();exports.default=RankGoldUI},{"../../appbase/com/HeadImg":53,"../../appbase/com/soundmgr":65,"../../framework/data/playerdata_mgr":117,"../../framework/gtea/gtea":127,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../gameconst":5}],35:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_rankgold2=_interopRequireDefault(require("./rankgold")),_FlyText2=_interopRequireDefault(require("../../appbase/com/FlyText")),_gameconst2=_interopRequireDefault(require("../gameconst")),_config2=_interopRequireDefault(require("../../framework/utils/config")),_itemkindmgr2=(_interopRequireDefault(require("../../appbase/com/HeadImg")),_interopRequireDefault(require("../../framework/data/item/itemkindmgr")));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RankWinGoldUI=function(_RankGoldUI){function RankWinGoldUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RankWinGoldUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(RankWinGoldUI.__proto__||Object.getPrototypeOf(RankWinGoldUI)).call(this));return _this.UI_NAME="赢金排行榜",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(RankWinGoldUI,_rankgold2.default),_createClass(RankWinGoldUI,[{key:"OnCreate",value:function(){_get(RankWinGoldUI.prototype.__proto__||Object.getPrototypeOf(RankWinGoldUI.prototype),"OnCreate",this).call(this),this.uiobj.rewardui.visible=!1,this.uiobj.Button_info.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.rewardui.Button_close.on(Laya.Event.CLICK,this,this.OnClickBtn)}},{key:"OnOpen",value:function(){for(var i=0;i<3;i++)this.uiobj["rank_"+(i+1)].text="";this.OnSelectPage(2)}},{key:"OnResize",value:function(){_get(RankWinGoldUI.prototype.__proto__||Object.getPrototypeOf(RankWinGoldUI.prototype),"OnResize",this).call(this),this.uiobj.rewardui.width=_config2.default.viewSize.width,this.uiobj.rewardui.height=_config2.default.viewSize.height,this.uiobj.rewardui.x=_config2.default.center.x,this.uiobj.rewardui.y=_config2.default.center.y;var bg=this.uiobj.rewardui.getChildByName("bg");bg.width=this.uiobj.rewardui.width,bg.height=this.uiobj.rewardui.height,bg.graphics.clear(),bg.graphics.drawRect(0,0,bg.width,bg.height,"#000000")}},{key:"OnSelectPage",value:function(page){this.uiobj.reward.text="",_get(RankWinGoldUI.prototype.__proto__||Object.getPrototypeOf(RankWinGoldUI.prototype),"OnSelectPage",this).call(this,page)}},{key:"GetRankList",value:function(){var args={uid:_playerdata_mgr2.default.getInstance().getMeUID(),nick:_playerdata_mgr2.default.getInstance().getMeNick(),channel:_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel()),chktime:1==this.m_nCurPage?_comfunc2.default.addDay((new Date).getTime(),-1):null};function ListErr(errflag,errmsg){_FlyText2.default.AddFlyText(errmsg)}1==this.m_nCurPage?_gtea2.default.rpc.Call("捕鱼金币排行活动","ListRank",args,this,function(agv){this.IsOpen()&&1==this.m_nCurPage&&this.RefreshRankList(agv)},ListErr):2==this.m_nCurPage&&_gtea2.default.rpc.Call("捕鱼金币排行活动","ListRank",args,this,function(agv){this.IsOpen()&&2==this.m_nCurPage&&this.RefreshRankList(agv)},ListErr)}},{key:"SetItemValue",value:function(item,idx){var data=item.dataSource,value=item.getChildByName("value"),reward=item.getChildByName("reward");value.text=data.gold,this.m_szReward[idx]?reward.text=_itemkindmgr2.default.GetAddBagInfo(this.m_szReward[idx]):reward.text=""}},{key:"RefreshRankList",value:function(data){this.m_szReward=data.szreward,this.m_UI.value.text=data.myscore.toString(),data.myrank>0?(data.myrank<=3?(_gameconst2.default.SetIconImg(this.m_UI.rankicon,"lobby/paihangbang/paiming_"+data.myrank+".png"),this.m_UI.rankicon.visible=!0):(this.m_UI.ranknum.value=data.myrank,this.m_UI.ranknum.visible=!0),this.m_szReward[data.myrank-1]&&(this.m_UI.reward.text=_itemkindmgr2.default.GetAddBagInfo(this.m_szReward[data.myrank-1]))):this.m_UI.unrank.visible=!0,this.m_UI.headbk.visible=!0,this.m_UI.nick.visible=!0,this.m_UI.acttime.text="活动时间:"+_comfunc2.default.formatDateTime(data.stime,"M月d日")+"-"+_comfunc2.default.formatDateTime(data.etime,"M月d日");for(var rankagv=[],shownum=this.m_szReward.length,i=0;i<data.ulist.length;i++){var udata=data.ulist[i];i<shownum&&(rankagv[i]=udata),2==this.m_nCurPage&&i<3&&(this.uiobj["rank_"+(i+1)].text=udata.nick)}this.m_ListView.array=rankagv}},{key:"GetReward",value:function(){if(1==this.m_nCurPage){var nowbind=_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone;if(!nowbind||0==nowbind.length)return _FlyText2.default.AddFlyText("请先实名认证!"),void _UIMgr2.default.getInstance().OpenUI("实名认证");this.uiobj.Button_reward.disabled=!0,_gtea2.default.rpc.Call("捕鱼金币排行活动","GetReward",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),phonenum:nowbind},this,function(agv){_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"您已成功领取第"+agv.rank+"名的奖励\n"+_itemkindmgr2.default.GetAddBagInfo(agv.szreward)},!0,!0)},function(errflag,errmsg){this.uiobj.Button_reward.disabled=!1,_FlyText2.default.AddFlyText(errmsg)})}}},{key:"OnClickBtn",value:function(event){if(event.target===this.uiobj.Button_reward)this.GetReward();else if(event.target===this.uiobj.Button_info)this.uiobj.rewardui.visible=!0;else{if(event.target!==this.uiobj.rewardui.Button_close)return void _get(RankWinGoldUI.prototype.__proto__||Object.getPrototypeOf(RankWinGoldUI.prototype),"OnClickBtn",this).call(this,event);this.uiobj.rewardui.visible=!1}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),RankWinGoldUI}();exports.default=RankWinGoldUI},{"../../appbase/com/FlyText":52,"../../appbase/com/HeadImg":53,"../../appbase/com/soundmgr":65,"../../framework/data/item/itemkindmgr":113,"../../framework/data/playerdata_mgr":117,"../../framework/gtea/gtea":127,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../../framework/utils/config":145,"../gameconst":5,"./rankgold":34}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_itemkindmgr2=(_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_interopRequireDefault(require("../../../framework/data/item/itemkindmgr"))),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_DropRedPacketItem2=_interopRequireDefault(require("../../../appbase/lobby/redpacket/DropRedPacketItem"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DropRedPacketItem=function(_BaseDropRedPacketIte){function DropRedPacketItem(ui,bindobj,idx){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DropRedPacketItem),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(DropRedPacketItem.__proto__||Object.getPrototypeOf(DropRedPacketItem)).call(this,ui,bindobj,idx))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DropRedPacketItem,_DropRedPacketItem2.default),_createClass(DropRedPacketItem,[{key:"ShowBk",value:function(idx){for(var i=0;i<this.m_szImg.length;i++)this.m_szImg[i].visible=i+1==idx}},{key:"PlayAni",value:function(idx,data,isSelect){this.m_bSelect=!0,this.m_TweenKey=this.TweenLite(this.m_BindObj,{scaleX:0},250,null,Laya.Handler.create(this,function(idx,data,isSelect){if(this.ShowBk(idx),"item"==data.mode)this.m_ItemName.text=_itemkindmgr2.default.GetAddBagInfo({itemlist:data.itemlist});else{var iconimg="";"gold"==data.mode?(this.m_Value.value=100*data.value,iconimg="lobby/text_coin.png",null==isSelect&&(iconimg="lobby/text_coin1.png")):(1==_gameconst2.default.VOUCHERS2RATIO?this.m_Value.value=data.value:this.m_Value.value=_comfunc2.default.getVouchers2Ratio(data.value).toFixed(2),iconimg="lobby/text_redpack.png",null==isSelect&&(iconimg="lobby/text_redpack1.png")),this.m_IconReward&&(_gameconst2.default.SetIconImg(this.m_IconReward,iconimg),this.m_IconReward.visible=!0)}this.m_TweenKey=this.TweenLite(this.m_BindObj,{scaleX:1},250)},[idx,data,isSelect]))}}]),DropRedPacketItem}();exports.default=DropRedPacketItem},{"../../../app/gameconst":5,"../../../appbase/lobby/redpacket/DropRedPacketItem":83,"../../../framework/data/item/itemkindmgr":113,"../../../framework/gtea/BaseObj":126,"../../../framework/utils/comfunc":144}],37:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_DropRedPacketUI3=_interopRequireDefault(require("../../../appbase/lobby/redpacket/DropRedPacketUI")),_DropRedPacketItem2=_interopRequireDefault(require("./DropRedPacketItem")),_BaseUI2=_interopRequireDefault(require("../../../framework/ui/BaseUI"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TurnRedPacketUI=function(_DropRedPacketUI){function TurnRedPacketUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TurnRedPacketUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(TurnRedPacketUI.__proto__||Object.getPrototypeOf(TurnRedPacketUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(TurnRedPacketUI,_DropRedPacketUI3.default),_createClass(TurnRedPacketUI,[{key:"OnCreate",value:function(){_BaseUI2.default.prototype.OnCreate.call(this),this.m_szItem=[];for(var i=1;i<=8;i++)this.m_szItem.push(new _DropRedPacketItem2.default(this,this.m_UI["item_"+i],i));this.m_CloseBtn=this.m_UI.quitbtn,this.m_CloseBtn.on(Laya.Event.CLICK,this,this.OnClick),this.m_ShareBtn=this.m_UI.sharebtn,this.m_ShareBtn.on(Laya.Event.CLICK,this,this.OnClick),this.m_LessTime=this.m_UI.lesstime,this.m_LessTime.text="",this.m_TipMsg=this.m_UI.tip,this.m_TipMsg.visible=!1}},{key:"OnClose",value:function(){this.m_BackFun&&this.m_BackFun.method.apply(this.m_BackFun.caller,this.m_BackFun.args),this.m_BackFun=null,this.m_nValue=0,function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0}(TurnRedPacketUI.prototype.__proto__||Object.getPrototypeOf(TurnRedPacketUI.prototype),"OnClose",this).call(this)}},{key:"SetData",value:function(agv){this.m_nValue=agv.value,this.m_nChestMode=agv.chestmode,this.m_sRewardMode=agv.rewardmode,this.m_BackFun=agv.backfun}},{key:"PlayTurnCardAni",value:function(){this.IsOpen()&&(0==this.m_nSelectIdx&&(this.m_nSelectIdx=Math.floor(Math.random()*this.m_szItem.length+1)),this.m_DropRed=this.m_szRed.shift(),this.m_szItem[this.m_nSelectIdx-1].PlayAni(2,this.m_DropRed,!0),this.StopClock(),this.m_Timer=this.timerCall(600,this.ShowAll))}},{key:"ShowAll",value:function(){for(var i=0;i<this.m_szItem.length&&0!=this.m_szRed.length;i++){var item=this.m_szItem[i];if(!item.m_bSelect){var random=Math.floor(Math.random()*this.m_szRed.length),data=this.m_szRed[random];item.PlayAni(3,data),this.m_szRed.splice(random,1)}}this.m_CloseBtn.visible=!0,this.m_Timer=this.timerCall(2e3,this.ShowEnd)}},{key:"Select",value:function(idx){if(0==this.m_nSelectIdx){this.m_nSelectIdx=idx;for(var szArea=[[.5,.63],[.7,.9],[.9,1.1],[1.3,1.6],[1.8,2.1],[2.3,2.6],[2.8,3.2],[3.5,4.5],[4.51,5]],agv=[],i=0;i<szArea.length;i++){var sub=szArea[i],low=this.m_nValue*sub[0],high=this.m_nValue*sub[1],rewardmode="redpacket",value=Math.floor(Math.random()*(high-low)+low);if(2==this.m_nChestMode)Math.floor(100*Math.random())>50&&(rewardmode="gold");agv[i]={value:value,mode:rewardmode}}this.m_szRed=[{value:this.m_nValue,mode:this.m_sRewardMode}];for(var _i=0;_i<this.m_szItem.length;_i++)if(agv.length>0){var _rand=Math.floor(Math.random()*agv.length);this.m_szRed.push(agv[_rand]),agv.splice(_rand,1)}this.PlayTurnCardAni()}}}]),TurnRedPacketUI}();exports.default=TurnRedPacketUI},{"../../../appbase/lobby/redpacket/DropRedPacketUI":84,"../../../framework/ui/BaseUI":141,"./DropRedPacketItem":36}],38:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RoomRedInfo=function(_BaseUI){function RoomRedInfo(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RoomRedInfo),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(RoomRedInfo.__proto__||Object.getPrototypeOf(RoomRedInfo)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(RoomRedInfo,_BaseUI3.default),_createClass(RoomRedInfo,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(RoomRedInfo.prototype.__proto__||Object.getPrototypeOf(RoomRedInfo.prototype),"OnCreate",this).call(this),this.uiobj.Btn_Close.on(Laya.Event.CLICK,this,this.OnClick)}},{key:"OnOpen",value:function(){var data=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("roomredinfo");data&&_comfunc2.default.isSameDay(new Date,new Date(data.chktime))?this.m_UI.Panel_nomore.selected=data.selected:this.m_UI.Panel_nomore.selected=!1}},{key:"OnClose",value:function(){_playerdata_mgr2.default.getInstance().setUserSetDataByKey("roomredinfo",{chktime:new Date,selected:this.m_UI.Panel_nomore.selected}),_playerdata_mgr2.default.getInstance().writeUserSetData()}},{key:"OnClick",value:function(event){switch(event.target){case this.uiobj.Btn_Close:_UIMgr2.default.getInstance().CloseUI("红包提示界面")}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),RoomRedInfo}();exports.default=RoomRedInfo},{"../../appbase/com/soundmgr":65,"../../framework/data/playerdata_mgr":117,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144}],39:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_soundmgr2=(_interopRequireDefault(require("../../framework/data/item/itemkindmgr")),_interopRequireDefault(require("../../appbase/com/soundmgr"))),_gamemodelmgr2=(_interopRequireDefault(require("../gameconst")),_interopRequireDefault(require("../../framework/gamemodel/gamemodelmgr")));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SCDlg=function(_BaseUI){function SCDlg(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SCDlg),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SCDlg.__proto__||Object.getPrototypeOf(SCDlg)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SCDlg,_BaseUI3.default),_createClass(SCDlg,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(SCDlg.prototype.__proto__||Object.getPrototypeOf(SCDlg.prototype),"OnCreate",this).call(this),this.uiobj.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.czbtn.on(Laya.Event.CLICK,this,this.OnClick)}},{key:"OnClick",value:function(event){event.target===this.uiobj?_UIMgr2.default.getInstance().CloseUI("首充界面"):event.target===this.uiobj.czbtn&&(_gamemodelmgr2.default.getInstance().ExitGameRoom(!1),_UIMgr2.default.getInstance().UIEvent("大厅界面","InShop",{subpage:"jb"}),_UIMgr2.default.getInstance().UIEvent("大厅界面","BuyGemsGold",{mode:1,item:{dataSource:{id:1600001}}},!0,!0),_UIMgr2.default.getInstance().CloseUI("首充界面")),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),SCDlg}();exports.default=SCDlg},{"../../appbase/com/soundmgr":65,"../../framework/data/item/itemkindmgr":113,"../../framework/gamemodel/gamemodelmgr":123,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../gameconst":5}],40:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_exchangeconfirm2=_interopRequireDefault(require("../../../appbase/lobby/shop/exchangeconfirm")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_UNameCheck2=_interopRequireDefault(require("../../../framework/utils/UNameCheck")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExchangeConfirmUI=function(_BaseExchangeConfirmU){function ExchangeConfirmUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExchangeConfirmUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ExchangeConfirmUI.__proto__||Object.getPrototypeOf(ExchangeConfirmUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ExchangeConfirmUI,_exchangeconfirm2.default),_createClass(ExchangeConfirmUI,[{key:"OnCreate",value:function(){_get(ExchangeConfirmUI.prototype.__proto__||Object.getPrototypeOf(ExchangeConfirmUI.prototype),"OnCreate",this).call(this),this.m_PanelPhone=this.m_UI.Panel_Phone,this.m_PanelPhone.visible=!1,this.m_PhoneNum=this.m_PanelPhone.getChildByName("input")}},{key:"OnClose",value:function(){this.m_PanelPhone.visible=!1,this.m_PhoneNum.text=""}},{key:"SetData",value:function(data){_get(ExchangeConfirmUI.prototype.__proto__||Object.getPrototypeOf(ExchangeConfirmUI.prototype),"SetData",this).call(this,data),data.data.exchangeitem.real_item&&data.data.exchangeitem.real_item.length>0&&"58chf"==data.data.exchangeitem.real_item[0][0]&&(this.m_PanelPhone.visible=!0)}},{key:"OnExchangeItem",value:function(){var phonenum=void 0;if(this.m_PanelPhone.visible){if(phonenum=parseInt(this.m_PhoneNum.text),isNaN(phonenum))return void _FlyText2.default.AddFlyText("请输入正确的手机号!");if(!_UNameCheck2.default.isMobilePhoneNum(phonenum))return void _FlyText2.default.AddFlyText("错误的手机号!")}phonenum||(phonenum=parseInt(_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone)),_get(ExchangeConfirmUI.prototype.__proto__||Object.getPrototypeOf(ExchangeConfirmUI.prototype),"OnExchangeItem",this).call(this,phonenum)}}]),ExchangeConfirmUI}();exports.default=ExchangeConfirmUI},{"../../../appbase/com/FlyText":52,"../../../appbase/lobby/shop/exchangeconfirm":91,"../../../framework/data/playerdata_mgr":117,"../../../framework/utils/UNameCheck":143}],41:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_exchangepage2=_interopRequireDefault(require("../../../appbase/lobby/shop/exchangepage")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_layaMaxUI=require("../../../ui/layaMaxUI"),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExchangePage=function(_BaseExchangePage){function ExchangePage(ui,bindobj){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExchangePage),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ExchangePage.__proto__||Object.getPrototypeOf(ExchangePage)).call(this,ui,bindobj))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ExchangePage,_exchangepage2.default),_createClass(ExchangePage,[{key:"Init",value:function(){this.m_ListView=this.m_BindObj.getChildByName("ListView")}},{key:"Clear",value:function(){for(var i=0;i<this.m_ListView.content._children.length;i++){var item=this.m_ListView.content._children[i];item.off(Laya.Event.CLICK,this,this.OnClickBtn),item.buybtn.off(Laya.Event.CLICK,this,this.OnClickBtn)}this.m_ListView.removeChildren()}},{key:"SetModeList",value:function(mode){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(ExchangePage.prototype.__proto__||Object.getPrototypeOf(ExchangePage.prototype),"SetModeList",this).call(this,mode),1==mode&&this.m_szModeList.push(2)}},{key:"OnRefresh",value:function(szItem){for(var szOther=[],szRed=[],i=0;i<szItem.length;i++){var data=szItem[i];data.exchangeitem.real_item||data.exchangeitem.itemlist?szRed.push(data):szOther.push(data)}if(1==this.m_szModeList.length&&0==szRed.length){for(var tmp=[],_i=0;_i<szOther.length;_i++)_i%2!=0?szRed.push(szOther[_i]):tmp.push(szOther[_i]);szOther=tmp}function AddItemList(agv,xpos,ypos){for(var x=0,_i2=0;_i2<agv.length;_i2++){var item=new _layaMaxUI.ExchangeItemUI;item.dataSource=agv[_i2],item.x=x,item.y=ypos,x+=xpos+item.width,this.m_ListView.addChild(item)}}szOther.length>0?(AddItemList.bind(this)(szOther,15,0),AddItemList.bind(this)(szRed,15,285)):AddItemList.bind(this)(szRed,15,0);for(var _i3=0;_i3<this.m_ListView.content._children.length;_i3++){var item=this.m_ListView.content._children[_i3];item.buybtn=item.getChildByName("Button_buy"),item.on(Laya.Event.CLICK,this,this.OnClickBtn),item.buybtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.OnListRander(item)}this.m_ListView.scrollTo()}},{key:"ExchangeItemOk",value:function(agv){for(var szItem=this.m_ListView.content._children,i=0;i<szItem.length;i++){var item=szItem[i];if(item.dataSource.kindid==agv.kindid){item.dataSource.lessnum=agv.num;break}}this.m_UI.SetSecretItem(agv),_UIMgr2.default.getInstance().UIEvent("大厅界面","ExchangeItemOk",agv)}},{key:"OnClickBtn",value:function(event){function IsRedPacket(data){if(!data.exchangeitem.real_item)return!1;for(var i=0;i<data.exchangeitem.real_item.length;i++){if("redpacket"==data.exchangeitem.real_item[i][0])return!0}return!1}for(var i=0;i<this.m_ListView.content._children.length;i++){var item=this.m_ListView.content._children[i];if(item.buybtn===event.target||item===event.target){if(IsRedPacket(item.dataSource))_playerdata_mgr2.default.getInstance().getUserSetDataByKey("isopenexchangered",!1)?_UIMgr2.default.getInstance().UIEvent("兑换确认界面","SetData",{ui:this,data:item.dataSource,szheadframe:this.m_szHeadFrame},!0,!0):_UIMgr2.default.getInstance().UIEvent("关注引导界面","SetData",{ui:this,data:item.dataSource,szheadframe:this.m_szHeadFrame},!0,!0);else _UIMgr2.default.getInstance().UIEvent("兑换确认界面","SetData",{ui:this,data:item.dataSource,szheadframe:this.m_szHeadFrame},!0,!0);break}}event.stopPropagation(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),ExchangePage}();exports.default=ExchangePage},{"../../../appbase/com/soundmgr":65,"../../../appbase/lobby/shop/exchangepage":92,"../../../framework/data/playerdata_mgr":117,"../../../framework/ui/UIMgr":142,"../../../ui/layaMaxUI":178}],42:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_shoppage2=_interopRequireDefault(require("../../../appbase/lobby/shop/shoppage")),_gameconst2=_interopRequireDefault(require("../../gameconst")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ShopPage=function(_BaseShopPage){function ShopPage(ui,bindobj){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ShopPage),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ShopPage.__proto__||Object.getPrototypeOf(ShopPage)).call(this,ui,bindobj))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ShopPage,_shoppage2.default),_createClass(ShopPage,[{key:"Open",value:function(mode){_get(ShopPage.prototype.__proto__||Object.getPrototypeOf(ShopPage.prototype),"Open",this).call(this,mode),this.m_BindObj.getChildByName("tip").visible=!1,_gameconst2.default.szActivityTime.shop&&(this.m_BindObj.getChildByName("tip").visible=!0)}},{key:"ListItem",value:function(agv){if("gbxBridge"in window&&"ios"==gbxBridge.deviceType&&_gameconst2.default.CONFIG.iospay)_get(ShopPage.prototype.__proto__||Object.getPrototypeOf(ShopPage.prototype),"ListItem",this).call(this,agv);else{this.Clear();for(var daycharge=_gameconst2.default.GetDayChargeData(),additem=[],i=0;i<agv.length;i++){var item=agv[i];if(1600021==item.id||1600022==item.id){var num=daycharge.list[item.id.toString()];if(!_comfunc2.default.isNil(num)&&num>0)continue}additem.push(item)}this.m_ListView.array=additem}}},{key:"OnListRander",value:function(item,idx){_get(ShopPage.prototype.__proto__||Object.getPrototypeOf(ShopPage.prototype),"OnListRander",this).call(this,item,idx);var value=item.dataSource,flag=item.getChildByName("flag");value.additem?flag.visible=value.additem.length>0:flag.visible=!1,1600021!=value.id&&1600022!=value.id||(flag.visible=!0)}}]),ShopPage}();exports.default=ShopPage},{"../../../appbase/lobby/shop/shoppage":95,"../../../framework/utils/comfunc":144,"../../gameconst":5}],43:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_exchangepage2=_interopRequireDefault(require("./exchangepage")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_appmethod2=_interopRequireDefault(require("../../../appbase/com/appmethod")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_BaseObj2=_interopRequireDefault(require("../../../framework/gtea/BaseObj"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SwPage=function(_ExchangePage){function SwPage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SwPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SwPage.__proto__||Object.getPrototypeOf(SwPage)).call(this,ui,bindobj)),userinfo=bindobj.getChildByName("userinfo"),shopurl=bindobj.getChildByName("shopurl");return _this.m_Score=userinfo.getChildByName("score"),_this.m_UName=userinfo.getChildByName("uname"),_this.m_ActBtn=userinfo.getChildByName("actbtn"),_this.m_ChgBtn=shopurl.getChildByName("chgbtn"),_this.m_GoldBtn=shopurl.getChildByName("goldbtn"),_this.m_CardBtn=shopurl.getChildByName("cardbtn"),_this.m_ShopBtn=shopurl.getChildByName("shopbtn"),_this.m_ActBtn.on(Laya.Event.CLICK,_this,_this.ClickAct),_this.m_ChgBtn.on(Laya.Event.CLICK,_this,_this.ClickShop),_this.m_GoldBtn.on(Laya.Event.CLICK,_this,_this.ClickShop),_this.m_CardBtn.on(Laya.Event.CLICK,_this,_this.ClickShop),_this.m_ShopBtn.on(Laya.Event.CLICK,_this,_this.ClickShop),bindobj.getChildByName("chgokui").shopbtn.on(Laya.Event.CLICK,_this,function(){_this.OpenShellShop(),_this.m_BindObj.getChildByName("chgokui").visible=!1}),bindobj.getChildByName("chgokui").closebtn.on(Laya.Event.CLICK,_this,function(){_this.m_BindObj.getChildByName("chgokui").visible=!1}),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SwPage,_exchangepage2.default),_createClass(SwPage,[{key:"Open",value:function(mode,agv){_get(SwPage.prototype.__proto__||Object.getPrototypeOf(SwPage.prototype),"Open",this).call(this,mode,agv),this.m_BindObj.getChildByName("chgokui").visible=!1,this.m_ActBtn.visible=!1,this.m_Score.visible=!1,this.m_UName.visible=!1,this.m_ChgBtn.visible=!1,this.m_GoldBtn.visible=!1,this.m_CardBtn.visible=!1,this.m_ShopBtn.visible=!1,this.m_bCanExchange=!1,this.QueCocuntUser(),_BaseObj2.default.getEventObj().addEventListener("CoconutScoreChg",this,this.RefreshScore),_BaseObj2.default.FindRegObj("MainApp").addEventListener("OnResume",this,this.QueCocuntUser)}},{key:"Clear",value:function(){_get(SwPage.prototype.__proto__||Object.getPrototypeOf(SwPage.prototype),"Clear",this).call(this),_BaseObj2.default.getEventObj().removeEventListener("CoconutScoreChg",this),_BaseObj2.default.FindRegObj("MainApp").removeEventListener("OnResume",this)}},{key:"OnListRander",value:function(item){_get(SwPage.prototype.__proto__||Object.getPrototypeOf(SwPage.prototype),"OnListRander",this).call(this,item)}},{key:"QueCocuntUser",value:function(){_gtea2.default.rpc.Call("实物奖励","QueCoconutUser",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(args){this.m_BindObj.visible&&(args?(this.m_Score.text=args.score.toString(),this.m_UName.text=_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone,this.m_UName.visible=!0,this.m_ActBtn.visible=!1):(this.m_Score.text="0",this.m_ActBtn.visible=!0,this.m_ActBtn.disabled=!1,this.m_UName.visible=!1),this.m_Score.visible=!0,this.m_ChgBtn.visible=!0,this.m_GoldBtn.visible=!0,this.m_CardBtn.visible=!0,this.m_ShopBtn.visible=!0,this.m_bCanExchange=!0,this.m_BindObj.getChildByName("shopurl").mouseEnabled=!0)},function(errflag,errmsg){})}},{key:"OpenShellShop",value:function(type){var nowbind=_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone;if(!nowbind||0==nowbind.length)return _FlyText2.default.AddFlyText("请先实名认证!"),void _UIMgr2.default.getInstance().OpenUI("实名认证");if(this.m_ActBtn.visible)_FlyText2.default.AddFlyText("请先激活椰子账号！");else{this.m_BindObj.getChildByName("shopurl").mouseEnabled=!1;var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel()),sendagv={uid:_playerdata_mgr2.default.getInstance().getMeUID(),channel:channel,phonenum:nowbind,type:type};_gtea2.default.rpc.Call("实物奖励","GetCocuntShopUrl",sendagv,this,function(agv){this.m_BindObj.visible&&(this.m_BindObj.getChildByName("shopurl").mouseEnabled=!0,_appmethod2.default.openSystemBrowser(decodeURIComponent(agv.url)))},function(errflag,errmsg){this.m_BindObj.visible&&(this.m_BindObj.getChildByName("shopurl").mouseEnabled=!0,_FlyText2.default.AddFlyText(errmsg))})}}},{key:"OnExchangeItem",value:function(item){this.m_bCanExchange?this.m_ActBtn.visible?_FlyText2.default.AddFlyText("请先激活椰子账号！"):_get(SwPage.prototype.__proto__||Object.getPrototypeOf(SwPage.prototype),"OnExchangeItem",this).call(this,item):_FlyText2.default.AddFlyText("正在查询账号信息！")}},{key:"ExchangeItemOk",value:function(agv){for(var szItem=this.m_ListView.content._children,i=0;i<szItem.length;i++){var item=szItem[i];if(item.dataSource.kindid==agv.kindid){item.dataSource.lessnum=agv.num;break}}this.m_UI.SetSecretItem(agv),this.m_BindObj.getChildByName("chgokui").info.text="兑换成功,获得"+agv.name,this.m_BindObj.getChildByName("chgokui").visible=!0}},{key:"RefreshScore",value:function(agv){this.m_BindObj.visible&&(this.m_Score.text=agv[0].toString())}},{key:"ClickAct",value:function(){var nowbind=_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone;if(!nowbind||0==nowbind.length)return _FlyText2.default.AddFlyText("请先实名认证!"),void _UIMgr2.default.getInstance().OpenUI("实名认证");var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel()),sendagv={uid:_playerdata_mgr2.default.getInstance().getMeUID(),channel:channel,phonenum:nowbind};this.m_ActBtn.disabled=!0,_gtea2.default.rpc.Call("实物奖励","BindCocuntUser",sendagv,this,function(args){this.m_BindObj.visible&&(this.m_Score.text=args.score.toString(),this.m_UName.text=_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone,this.m_UName.visible=!0,this.m_ActBtn.visible=!1,_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"账号激活成功！"},!0,!0))},function(errflag,errmsg){this.m_BindObj.visible&&(this.m_ActBtn.disabled=!1,_FlyText2.default.AddFlyText(errmsg))})}},{key:"ClickShop",value:function(event){event.target===this.m_ChgBtn?this.OpenShellShop():event.target===this.m_GoldBtn?this.OpenShellShop("gold"):event.target===this.m_CardBtn?this.OpenShellShop("phonecard"):event.target===this.m_ShopBtn&&this.OpenShellShop("shop"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),SwPage}();exports.default=SwPage},{"../../../appbase/com/FlyText":52,"../../../appbase/com/appmethod":63,"../../../appbase/com/soundmgr":65,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"./exchangepage":41}],44:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=(_interopRequireDefault(require("../../../framework/ui/BaseUI")),_interopRequireDefault(require("../../../framework/gtea/BaseObj"))),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_soundmgr2=(_interopRequireDefault(require("../../../framework/gtea/gtea")),_interopRequireDefault(require("../../../appbase/com/soundmgr"))),_gameconst2=(_interopRequireDefault(require("../../../appbase/com/FlyText")),_interopRequireDefault(require("../../../appbase/com/UserHead")),_interopRequireDefault(require("../../gameconst"))),_vipmgr2=_interopRequireDefault(require("../../com/vipmgr")),_PlayerInfo2=_interopRequireDefault(require("../../../appbase/lobby/userinfo/PlayerInfo"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PlayerInfo=function(_BasePlayerInfo){function PlayerInfo(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PlayerInfo),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PlayerInfo.__proto__||Object.getPrototypeOf(PlayerInfo)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PlayerInfo,_PlayerInfo2.default),_createClass(PlayerInfo,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(PlayerInfo.prototype.__proto__||Object.getPrototypeOf(PlayerInfo.prototype),"OnCreate",this).call(this),this.value_gold=this.m_UI.num_gold.getChildByName("num"),this.value_redpacket=this.m_UI.num_cash.getChildByName("num"),this.buygoldbtn=this.m_UI.num_gold.getChildByName("shopbtn"),this.buygoldbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.chgredpacketbtn=this.m_UI.num_cash.getChildByName("shopbtn"),this.chgredpacketbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_UI.bind.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_UI.chgacc.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_UI.vip.on(Laya.Event.CLICK,this,this.OnClickBtn)}},{key:"SetDataInfo",value:function(usr){var nick=usr.getNick();usr.m_UserData.m_vData.headidx;this.m_nUID=usr.m_nUID,this.Txt_Name.text=nick,this.Txt_UID.text="玩家ID:"+usr.m_nUID;var myviplv=_vipmgr2.default.GetVipLv(),viplv=Math.min(myviplv,_vipmgr2.default.s_nMax);this.value_redpacket.text=_comfunc2.default.getVouchers2Ratio(_playerdata_mgr2.default.getInstance().getMeVouchers2()),this.value_gold.text=_comfunc2.default.getGoldRatio(_playerdata_mgr2.default.getInstance().getMeGold()).toString(),this.m_Head.setHeadByUID(usr.m_nUID),this.m_UI.sex.x=this.Txt_Name.x+this.Txt_Name.displayWidth+5,1==usr.getSex()?this.m_UI.sex.skin="lobby/icon_boy.png":this.m_UI.sex.skin="lobby/icon_gril.png",0==viplv?(this.m_UI.vip.gray=!0,this.m_UI.vip.skin="lobby/tubiao_vip1.png"):(this.m_UI.vip.gray=!1,this.m_UI.vip.skin="lobby/tubiao_vip"+viplv+".png");_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone;this.m_UI.bind.visible=!_gameconst2.default.IsRealNameOk(),this.m_UI.bindoff.visible=_gameconst2.default.IsRealNameOk();for(var used=0,szheadlist=[],i=0;i<this.m_szHeadIDs.length;i++){var itemid=parseInt(this.m_szHeadIDs[i]),framedata=_playerdata_mgr2.default.getInstance().getMe().m_UserData.getHeadFrameData(itemid);if(framedata){var data={id:itemid,used:!1};framedata.used&&(used=itemid,data.used=!0),szheadlist.push(data)}}szheadlist.unshift({id:0,used:0==used}),this.HeadList&&(this.HeadList.array=[])}},{key:"OnClickBtn",value:function(event){switch(event.target){case this.buygoldbtn:_UIMgr2.default.getInstance().GetUI("大厅界面",!1).InShop({subpage:"jb"});break;case this.chgredpacketbtn:_UIMgr2.default.getInstance().GetUI("大厅界面",!1).InShop({subpage:"hb",showhb:!0});break;case this.m_UI.bind:_UIMgr2.default.getInstance().OpenUI("实名认证",1);break;case this.m_UI.chgacc:this.OnSwitchAcc();break;case this.m_UI.vip:_UIMgr2.default.getInstance().OpenUI("VIP说明",1)}_UIMgr2.default.getInstance().CloseUI("个人信息2"),event.nosnd||_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnSwitchAcc",value:function(){_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"是否注销账号",obj:this,okfun:function(){_BaseObj2.default.EventToRegObj("MainApp","Logout",[])}},!0,!0),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),PlayerInfo}();exports.default=PlayerInfo},{"../../../appbase/com/FlyText":52,"../../../appbase/com/UserHead":61,"../../../appbase/com/soundmgr":65,"../../../appbase/lobby/userinfo/PlayerInfo":96,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../com/vipmgr":4,"../../gameconst":5}],45:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_vipmgr2=_interopRequireDefault(require("../com/vipmgr")),_gameconst2=_interopRequireDefault(require("../gameconst")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VipInfo=function(_BaseUI){function VipInfo(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,VipInfo),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(VipInfo.__proto__||Object.getPrototypeOf(VipInfo)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(VipInfo,_BaseUI3.default),_createClass(VipInfo,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(VipInfo.prototype.__proto__||Object.getPrototypeOf(VipInfo.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.chargebtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.prevbtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.nextbtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.line.rawwidth=this.uiobj.line.width,this.uiobj.bullet.rawy=this.uiobj.bullet.y}},{key:"OnOpen",value:function(){var myviplv=_vipmgr2.default.GetVipLv(),viplv=Math.min(myviplv+1,_vipmgr2.default.s_nMax),vipdata=_vipmgr2.default.GetVipDataByLv(viplv);if(this.uiobj.vlv1.value=viplv,this.uiobj.line.width=this.uiobj.line.rawwidth,_gameconst2.default.SetIconImg(this.uiobj.vipicon,"lobby/tubiao_vip"+viplv+".png"),myviplv==_vipmgr2.default.s_nMax)this.uiobj.money.value="0元",this.uiobj.line_txt.text=vipdata.minexp/100+"/"+vipdata.minexp/100;else{var vipexp=_playerdata_mgr2.default.getInstance().getMe().m_VIPExpData.exp;this.uiobj.money.value=(vipdata.minexp-vipexp)/100+"元",this.uiobj.line_txt.text=vipexp/100+"/"+vipdata.minexp/100,this.uiobj.line.width=vipexp*this.uiobj.line.width/vipdata.minexp}this.RefreshPage(viplv)}},{key:"RefreshPage",value:function(viplv){var vipdata=_vipmgr2.default.GetVipDataByLv(viplv);if(vipdata){for(var i=0;i<4;i++){var intor=this.uiobj["intor_"+(i+1)];i>=vipdata.intor.length?intor.visible=!1:(intor.getChildByName("txt").text=vipdata.intor[i],intor.visible=!0)}this.m_nCurVipLv=viplv,this.uiobj.vlv.value=viplv,this.uiobj.prevbtn.visible=viplv>1,this.uiobj.nextbtn.visible=viplv<_vipmgr2.default.s_nMax,this.PlayTurrentAni(viplv),_gameconst2.default.SetIconImg(this.uiobj.cannon_base,"res-game/jcby/aqua/canon"+viplv+"_base.png")}}},{key:"PlayTurrentAni",value:function(viplv){var _this2=this;function FlyBulletEnd(){this.uiobj.bullet.visible=!1,this.uiobj.net.once(Laya.Event.COMPLETE,this,this.PlayTurrentAni,[viplv]),this.uiobj.net.play(0,!1,"net"+viplv),this.uiobj.net.visible=!0}this.uiobj.cannon.once(Laya.Event.COMPLETE,this,function(){_this2.uiobj.bullet.play(0,!1,"bullet"+viplv),_this2.uiobj.bullet.y=_this2.uiobj.bullet.rawy,_this2.uiobj.bullet.visible=!0,_this2.m_Tweenkey=_this2.TweenLite(_this2.uiobj.bullet,{y:_this2.uiobj.net.y},100,Laya.Ease.sineOut,Laya.Handler.create(_this2,FlyBulletEnd))}),this.killTween(this.m_Tweenkey),this.uiobj.net.visible=!1,this.uiobj.bullet.visible=!1,this.uiobj.net.stop(),this.uiobj.cannon.play(0,!1,"fire"+viplv)}},{key:"OnClick",value:function(event){event.target===this.uiobj.closebtn?_UIMgr2.default.getInstance().CloseUI("VIP说明"):event.target===this.uiobj.chargebtn?(_UIMgr2.default.getInstance().UIEvent("大厅界面","InShop",{subpage:"jb"}),_UIMgr2.default.getInstance().CloseUI("VIP说明")):event.target===this.uiobj.prevbtn?this.RefreshPage(this.m_nCurVipLv-1):event.target===this.uiobj.nextbtn&&this.RefreshPage(this.m_nCurVipLv+1),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),VipInfo}();exports.default=VipInfo},{"../../appbase/com/soundmgr":65,"../../framework/data/playerdata_mgr":117,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../com/vipmgr":4,"../gameconst":5}],46:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_appmethod2=_interopRequireDefault(require("../../appbase/com/appmethod")),_soundmgr2=_interopRequireDefault(require("../../appbase/com/soundmgr")),_gameconst2=_interopRequireDefault(require("../gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WeChatDlg=function(_BaseUI){function WeChatDlg(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WeChatDlg),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(WeChatDlg.__proto__||Object.getPrototypeOf(WeChatDlg)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(WeChatDlg,_BaseUI3.default),_createClass(WeChatDlg,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(WeChatDlg.prototype.__proto__||Object.getPrototypeOf(WeChatDlg.prototype),"OnCreate",this).call(this),this.uiobj.Btn_Close.on(Laya.Event.CLICK,this,this.OnClickClose),this.uiobj.ListView.renderHandler=Laya.Handler.create(this,this.OnListRander,null,!1);for(var i=0;i<this.uiobj.ListView.cells.length;i++){var item=this.uiobj.ListView.cells[i];item.wxname=item.getChildByName("wxname"),item.openbtn=item.getChildByName("openbtn"),item.openbtn.on(Laya.Event.CLICK,this,this.OnClickOpen)}}},{key:"SetInfo",value:function(agv){this.uiobj.Text_Title.text=agv.title||"",this.uiobj.Text_info.text=agv.msg,this.uiobj.ListView.array=agv.type,this.uiobj.Text_info.visible=!1,this.uiobj.Text_Title.text="客服引导",this.uiobj.publicnum.text="搜索【"+_gameconst2.default.WeChatPub+"】"}},{key:"OnListRander",value:function(item,idx){item.wxname.text=item.dataSource}},{key:"OnClickOpen",value:function(event){for(var i=0;i<this.uiobj.ListView.cells.length;i++){var item=this.uiobj.ListView.cells[i];if(event.target==item.openbtn&&item.dataSource){if("gbxBridge"in window){var customer=item.dataSource.split(":")[1];_appmethod2.default.copyOpenWeChat(customer)}break}}_UIMgr2.default.getInstance().CloseUI("微信提示")}},{key:"OnClickClose",value:function(event){_soundmgr2.default.getInstance().playSound("snd/button.mp3"),_UIMgr2.default.getInstance().CloseUI("微信提示")}}]),WeChatDlg}();exports.default=WeChatDlg},{"../../appbase/com/appmethod":63,"../../appbase/com/soundmgr":65,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../gameconst":5}],47:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_LoginUI2=_interopRequireDefault(require("../../appbase/login/LoginUI")),_config2=_interopRequireDefault(require("../../framework/utils/config")),_FlyText2=_interopRequireDefault(require("../../appbase/com/FlyText")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gameconst2=(_interopRequireDefault(require("../../framework/gtea/gtea")),_interopRequireDefault(require("../gameconst"))),_LoadingUI2=_interopRequireDefault(require("../../appbase/login/LoadingUI")),_UIMgr2=(_interopRequireDefault(require("../../framework/utils/comfunc")),_interopRequireDefault(require("../../appbase/com/appmethod")),_interopRequireDefault(require("../../framework/ui/UIMgr")));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_LoadingUI2.default.prototype.OnResize=function(){this.width=_config2.default.viewSize.width,this.height=_config2.default.viewSize.height,this.x=_config2.default.center.x,this.y=_config2.default.center.y};var LoginUI=function(_BaseLoginUI){function LoginUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LoginUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(LoginUI.__proto__||Object.getPrototypeOf(LoginUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(LoginUI,_LoginUI2.default),_createClass(LoginUI,[{key:"OnCreate",value:function(){_get(LoginUI.prototype.__proto__||Object.getPrototypeOf(LoginUI.prototype),"OnCreate",this).call(this),this.uiobj.actbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.wechatbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.regbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.guestbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.phonebtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.actbtn.rawx=this.uiobj.actbtn.x,this.uiobj.regbtn.rawx=this.uiobj.regbtn.x,this.uiobj.guestbtn.rawx=this.uiobj.guestbtn.x,this.uiobj.lobby_lb.rawx=this.uiobj.lobby_lb.x,this.uiobj.lobby_lb.rawy=this.uiobj.lobby_lb.y,this.uiobj.lobby_rb.rawx=this.uiobj.lobby_rb.x,this.uiobj.lobby_rb.rawy=this.uiobj.lobby_rb.y,this.uiobj.lobby_lt.rawx=this.uiobj.lobby_lt.x,this.uiobj.lobby_lt.rawy=this.uiobj.lobby_lt.y,this.uiobj.lobby_rt.rawx=this.uiobj.lobby_rt.x,this.uiobj.lobby_rt.rawy=this.uiobj.lobby_rt.y,this.uiobj.animation_left.rawx=this.uiobj.animation_left.x,this.uiobj.animation_left.rawy=this.uiobj.animation_left.y,this.uiobj.animation_right.rawx=this.uiobj.animation_right.x,this.uiobj.animation_right.rawy=this.uiobj.animation_right.y,this.uiobj.logingdlg.getChildByName("okbtn").on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.logingdlg.getChildByName("closebtn").on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.logingdlg.visible=!1,this.uiobj.regdlg.getChildByName("regokbtn").on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.regdlg.getChildByName("regclosebtn").on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.regdlg.visible=!1,this.uiobj.phonelogindlg.getChildByName("getcodebtn").on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.phonelogindlg.getChildByName("phoneokbtn").on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.phonelogindlg.getChildByName("phoneclosebtn").on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.phonelogindlg.visible=!1,_gameconst2.default.SHOWAGREEMENT?this.uiobj.Panel_agree.on(Laya.Event.MOUSE_UP,this,function(){_UIMgr2.default.getInstance().OpenUI("同意协议")}):(this.uiobj.Panel_agree.visible=!1,this.uiobj.check_agree.visible=!1),_gameconst2.default.CONFIG.versiontxt&&(this.uiobj.text2.text=_gameconst2.default.CONFIG.versiontxt)}},{key:"wechatThirdPartyLogin",value:function(){!_gameconst2.default.SHOWAGREEMENT||this.uiobj.check_agree.selected?_get(LoginUI.prototype.__proto__||Object.getPrototypeOf(LoginUI.prototype),"wechatThirdPartyLogin",this).call(this):_FlyText2.default.AddFlyText("请先同意并确认用户协议!")}},{key:"onLogin",value:function(data){_gameconst2.default.SHOWAGREEMENT&&(this.uiobj.check_agree.selected=!0),_get(LoginUI.prototype.__proto__||Object.getPrototypeOf(LoginUI.prototype),"onLogin",this).call(this,data)}},{key:"OnClickBtn",value:function(event){switch(event.target.name){case"actbtn":this.OpenLoginDlg();break;case"closebtn":this.CloseLoginDlg();break;case"okbtn":this.accLogin(this.uiobj.logingdlg.getChildByName("uname").text,this.uiobj.logingdlg.getChildByName("pass").text);break;case"wechatbtn":this.wechatThirdPartyLogin();break;case"regbtn":this.OpenRegDlg();break;case"guestbtn":this.GuestLogin();break;case"regokbtn":this.accReg(this.uiobj.regdlg.getChildByName("uname").text,this.uiobj.regdlg.getChildByName("pass").text,this.uiobj.regdlg.getChildByName("pass2").text);break;case"regclosebtn":this.CloseRegDlg();break;case"phonebtn":this.OpenPhoneLoginDlg();break;case"getcodebtn":this.GetPhoneCode();break;case"phoneokbtn":this.PhoneLogin(this.uiobj.phonelogindlg.getChildByName("phone").text,this.uiobj.phonelogindlg.getChildByName("code").text);break;case"phoneclosebtn":this.ClosePhoneLoginDlg()}}},{key:"ShowMsg",value:function(msg){this.uiobj.text_note.text=msg}},{key:"OnOpen",value:function(){this.uiobj.actbtn.visible=!1,this.uiobj.wechatbtn.visible=!1,this.uiobj.regbtn.visible=!1,this.uiobj.guestbtn.visible=!1,this.uiobj.phonebtn.visible=!1,""==_gameconst2.default.THIRDPARTY||"dianyouandroid"==_gameconst2.default.THIRDPARTY||"dyunionpay"==_gameconst2.default.THIRDPARTY?this.uiobj.wechatbtn.skin="lobby/button_wechat.png":this.uiobj.wechatbtn.skin="lobby/button_account.png",_gameconst2.default.SHOWAGREEMENT&&(this.uiobj.check_agree.selected=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("agreementselect",!1)),_get(LoginUI.prototype.__proto__||Object.getPrototypeOf(LoginUI.prototype),"OnOpen",this).call(this,this)}},{key:"OnClose",value:function(){this.CloseLoginDlg(),this.CloseRegDlg(),this.ClosePhoneLoginDlg(),_gameconst2.default.SHOWAGREEMENT&&(_playerdata_mgr2.default.getInstance().setUserSetDataByKey("agreementselect",this.uiobj.check_agree.selected),_playerdata_mgr2.default.getInstance().writeUserSetData())}},{key:"OnResize",value:function(){_get(LoginUI.prototype.__proto__||Object.getPrototypeOf(LoginUI.prototype),"OnResize",this).call(this),this.uiobj.bg.scaleX=this.uiobj.bg.scaleY=_config2.default.scale,this.uiobj.regbtn.x=this.uiobj.regbtn.rawx+_config2.default.offset.x,this.uiobj.guestbtn.x=this.uiobj.guestbtn.rawx+_config2.default.offset.x,this.uiobj.actbtn.x=this.uiobj.actbtn.rawx+_config2.default.offset.x,this.uiobj.lobby_lb.x=this.uiobj.lobby_lb.rawx-_config2.default.offset.x,this.uiobj.lobby_lb.y=this.uiobj.lobby_lb.rawy+_config2.default.offset.y,this.uiobj.lobby_lt.x=this.uiobj.lobby_lt.rawx-_config2.default.offset.x,this.uiobj.lobby_lt.y=this.uiobj.lobby_lt.rawy-_config2.default.offset.y,this.uiobj.lobby_rb.x=this.uiobj.lobby_rb.rawx+_config2.default.offset.x,this.uiobj.lobby_rb.y=this.uiobj.lobby_rb.rawy+_config2.default.offset.y,this.uiobj.lobby_rt.x=this.uiobj.lobby_rt.rawx+_config2.default.offset.x,this.uiobj.lobby_rt.y=this.uiobj.lobby_rt.rawy-_config2.default.offset.y,this.uiobj.animation_left.x=this.uiobj.animation_left.rawx-_config2.default.offset.x,this.uiobj.animation_left.y=this.uiobj.animation_left.rawy-_config2.default.offset.y,this.uiobj.animation_right.x=this.uiobj.animation_right.rawx+_config2.default.offset.x,this.uiobj.animation_right.y=this.uiobj.animation_right.rawy-_config2.default.offset.y,(_gameconst2.default.CONFIG.phonelogin||_gameconst2.default.DEBUG)&&""==_gameconst2.default.THIRDPARTY||(this.uiobj.wechatbtn.x=_config2.default.width/2)}},{key:"OpenLoginDlg",value:function(){this.uiobj.logingdlg.getChildByName("uname").text="std"==this.m_AccData.mode&&this.m_AccData.uname||"",this.uiobj.logingdlg.getChildByName("pass").text="std"==this.m_AccData.mode&&this.m_AccData.pwd||"",this.uiobj.logingdlg.visible=!0}},{key:"CloseLoginDlg",value:function(){this.uiobj.logingdlg.visible=!1}},{key:"OpenRegDlg",value:function(){this.uiobj.regdlg.getChildByName("uname").text="",this.uiobj.regdlg.getChildByName("pass").text="",this.uiobj.regdlg.getChildByName("pass2").text="",this.uiobj.regdlg.visible=!0}},{key:"CloseRegDlg",value:function(){this.uiobj.regdlg.visible=!1}},{key:"OpenPhoneLoginDlg",value:function(){if(!_gameconst2.default.SHOWAGREEMENT||this.uiobj.check_agree.selected){this.uiobj.phonelogindlg.getChildByName("phone").text="",this.uiobj.phonelogindlg.getChildByName("code").text="";var getbtn=this.uiobj.phonelogindlg.getChildByName("getcodebtn");getbtn.selected=!1,getbtn.mouseEnabled=!0,getbtn.getChildByName("num").text="",this.uiobj.phonelogindlg.visible=!0}else _FlyText2.default.AddFlyText("请先同意并确认用户协议!")}},{key:"ClosePhoneLoginDlg",value:function(){this.StopCodeTimer(),this.uiobj.phonelogindlg.visible=!1}},{key:"StopCodeTimer",value:function(){this.m_CodeTimer&&this.killTimer(this.m_CodeTimer),this.m_CodeTimer=null}},{key:"GetPhoneCode",value:function(){var phone=this.uiobj.phonelogindlg.getChildByName("phone").text;if(isNaN(parseInt(phone)))_FlyText2.default.AddFlyText("请输入正确的手机号码!");else{var getbtn=this.uiobj.phonelogindlg.getChildByName("getcodebtn");this.m_nFrozenTime=60,getbtn.selected=!0,getbtn.mouseEnabled=!1,getbtn.getChildByName("num").text=this.m_nFrozenTime.toString(),this.m_CodeTimer=this.loopCall(-1,1e3,function(){this.m_nFrozenTime=this.m_nFrozenTime-1,getbtn.getChildByName("num").text=this.m_nFrozenTime.toString(),0==this.m_nFrozenTime&&this.StopCodeTimer()}),_playerdata_mgr2.default.getInstance().getPhoneCode(phone,"login",this,function(agv){},function(errflag,errmsg){this.StopCodeTimer(),_FlyText2.default.AddFlyText(errmsg)})}}},{key:"ResetBtn",value:function(){_gameconst2.default.CONFIG.nowechatlogin||(this.uiobj.wechatbtn.visible=!0),(_gameconst2.default.CONFIG.useacc||_gameconst2.default.DEBUG)&&(this.uiobj.actbtn.visible=!0,this.uiobj.regbtn.visible=!0,this.uiobj.guestbtn.visible=!0),(_gameconst2.default.CONFIG.phonelogin||_gameconst2.default.DEBUG)&&""==_gameconst2.default.THIRDPARTY&&(this.uiobj.phonebtn.visible=!0),_gameconst2.default.CONFIG.nowechatlogin&&_gameconst2.default.CONFIG.useacc&&!_gameconst2.default.CONFIG.phonelogin&&(this.uiobj.actbtn.x=_config2.default.width/2,this.uiobj.regbtn.x=_config2.default.width/2-100,this.uiobj.guestbtn.x=_config2.default.width/2+100)}}]),LoginUI}();exports.default=LoginUI},{"../../appbase/com/FlyText":52,"../../appbase/com/appmethod":63,"../../appbase/login/LoadingUI":97,"../../appbase/login/LoginUI":98,"../../framework/data/playerdata_mgr":117,"../../framework/gtea/gtea":127,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../../framework/utils/config":145,"../gameconst":5}],48:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_mainappbase2=_interopRequireDefault(require("../appbase/mainappbase")),_respathlist2=_interopRequireDefault(require("../app/respathlist")),_config2=_interopRequireDefault(require("../framework/utils/config")),_InitMatch2=_interopRequireDefault(require("./com/match/InitMatch")),_gameconst2=_interopRequireDefault(require("./gameconst")),_appmethod2=_interopRequireDefault(require("../appbase/com/appmethod")),_UIMgr2=(_interopRequireDefault(require("../appbase/login/LoadingUI")),_interopRequireDefault(require("../framework/ui/UIMgr"))),_vipmgr2=_interopRequireDefault(require("./com/vipmgr")),_bridge2=_interopRequireDefault(require("../appbase/com/bridge")),_BaseObj2=_interopRequireDefault(require("../framework/gtea/BaseObj")),_playerdata_mgr2=_interopRequireDefault(require("../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MainApp=function(_MainAppBase){function MainApp(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MainApp);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(MainApp.__proto__||Object.getPrototypeOf(MainApp)).call(this));return _this.szLoadList=_respathlist2.default.ResList.lobby,_this.szDataList=["UserBag","GameData","Mails","Gift","HonorTask","DailyTask","Invite","Authentiation","VIPExp","Bank","GiftDaySign","GiftDaySign2"],_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MainApp,_mainappbase2.default),_createClass(MainApp,[{key:"InApp",value:function(){this.m_BgImg=new Laya.Image("loading/bg_day.png"),this.m_BgImg.anchorX=this.m_BgImg.anchorY=.5,Laya.stage.addChild(this.m_BgImg),_get(MainApp.prototype.__proto__||Object.getPrototypeOf(MainApp.prototype),"InApp",this).call(this)}},{key:"AppStart",value:function(){_appmethod2.default.getDeviceInfo(),_appmethod2.default.getThirdParty(),_bridge2.default.registFunction("thirdPartyLogout",this.ThirdPartyLogout,this),_get(MainApp.prototype.__proto__||Object.getPrototypeOf(MainApp.prototype),"AppStart",this).call(this)}},{key:"OnResize",value:function(event){_get(MainApp.prototype.__proto__||Object.getPrototypeOf(MainApp.prototype),"OnResize",this).call(this,event),this.m_BgImg.x=_config2.default.center.x,this.m_BgImg.y=_config2.default.center.y,this.m_BgImg.scaleX=this.m_BgImg.scaleY=_config2.default.scale}},{key:"OnLoadUI",value:function(){_InitMatch2.default.Init(),_vipmgr2.default.Init(),_get(MainApp.prototype.__proto__||Object.getPrototypeOf(MainApp.prototype),"OnLoadUI",this).call(this)}},{key:"OnInHallOk",value:function(){if(_gameconst2.default.szActivityTime=_gameconst2.default.szActivityTime||{},_gameconst2.default.CONFIG.szActivityTime){var nowtime=Date.now();for(var key in _gameconst2.default.CONFIG.szActivityTime){var start=new Date(_gameconst2.default.CONFIG.szActivityTime[key][0]).getTime(),end=new Date(_gameconst2.default.CONFIG.szActivityTime[key][1]).getTime();_gameconst2.default.szActivityTime[key]=nowtime>start&&nowtime<end}}_gameconst2.default.CONFIG.isreview||(_gameconst2.default.AUTOOPEN=[{uiname:"活动界面"}]),_gameconst2.default.CONFIG.isreview&&(_gameconst2.default.HELPTEXT="这是一款街机捕鱼游戏，在保留了传统街机版本的界面、玩法、得分方式等基础上，增加了更多刺激的网络元素，更有神秘的海底生物，带给玩家们全新的捕鱼体验。",_gameconst2.default.HELPTEXT2="算法：\n得到的分数计算公式为：所选炮值*捕获鱼类的倍数=总得分。"),_gameconst2.default.PICTYPE=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("pictype","high"),_get(MainApp.prototype.__proto__||Object.getPrototypeOf(MainApp.prototype),"OnInHallOk",this).call(this)}},{key:"ThirdPartyLogout",value:function(){_BaseObj2.default.EventToRegObj("MainApp","Logout",[]);var functionName="";"vivo"==_gameconst2.default.THIRDPARTY||"vivo_dljpbyol"==_gameconst2.default.THIRDPARTY?functionName="vivoLogin":"oppo"==_gameconst2.default.THIRDPARTY||"oppo_dljpbyol"==_gameconst2.default.THIRDPARTY?functionName="oppoLogin":"huawei"==_gameconst2.default.THIRDPARTY?functionName="huaweiLogin":"dianyou"==_gameconst2.default.THIRDPARTY?functionName="dianyouLogin":"dianyouandroid"==_gameconst2.default.THIRDPARTY&&(functionName="dianyouandroidLogin"),_UIMgr2.default.getInstance().UIEvent("登录界面",functionName)}}]),MainApp}();exports.default=MainApp},{"../app/respathlist":49,"../appbase/com/appmethod":63,"../appbase/com/bridge":64,"../appbase/login/LoadingUI":97,"../appbase/mainappbase":99,"../framework/data/playerdata_mgr":117,"../framework/gtea/BaseObj":126,"../framework/ui/UIMgr":142,"../framework/utils/config":145,"./com/match/InitMatch":2,"./com/vipmgr":4,"./gameconst":5}],49:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var GameResList=function(){function GameResList(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameResList)}return _createClass(GameResList,null,[{key:"ResList",get:function(){return{lobby:["effects/jcmy_jinbiyu.scene","effects/mixani.scene","elements/ExchangeItem.scene","elements/FlyText.scene","elements/Head.scene","elements/Hslider.scene","elements/OfflineInfo.scene","elements/Panel_Agreement.scene","elements/Panel_Player_Info.scene","elements/PayMode.scene","elements/RoomRedInfo.scene","elements/SCDlg.scene","elements/SysDlg.scene","elements/WaitDlg.scene","elements/WeChatDlg.scene","elements/dhcg.scene","elements/gzsm.scene","jcby/aqua/Aqua_Jcby.scene","jcby/aqua/help_detail.scene","jcby/aqua/Help_Jcby.scene","jcby/aqua/jiujijing.scene","jcby/aqua/Panel_kuaichong.scene","jcby/aqua/Pane_shangcheng.scene","jcby/aqua/paotai.scene","jcby/aqua/record_detail.scene","jcby/aqua/Settle_Jcby.scene","jcby/aqua/Turret_Jcby.scene","jcby/aqua/ani/effect_dragon_wakeup.scene","jcby/aqua/ani/effect_dragon_wakeup1.scene","jcby/aqua/ani/effect_goldglow1.scene","jcby/aqua/ani/effect_goldglow2.scene","jcby/aqua/ani/effect_goldglow3.scene","jcby/aqua/ani/firestar.scene","jcby/aqua/ani/fishmark.scene","jcby/aqua/ani/flower.scene","jcby/aqua/ani/flower46.scene","jcby/aqua/ani/lingqujiangli.scene","jcby/aqua/ani/manygold.scene","jcby/aqua/ani/onstage.scene","jcby/aqua/ani/roulette.scene","jcby/aqua/ani/roulette1.scene","jcby/aqua/ani/tidecoming.scene","jcby/aqua/ani/torpedo_boom.scene","jcby/aqua/ani/torpedo_fly.scene","jcby/aqua/ani/warning.scene","jcby/aqua/ani/warning1.scene","jcby/aqua/ani/warning2.scene","jcby/effects/dice_shaking.scene","jcby/fish/dicefish.scene","jcby/fish/dragonking.scene","jcby/fish/drillking.scene","jcby/fish/frogking.scene","jcby/fish/laserfish.scene","jcby/fish/volcanoking.scene","jcby/fish/whaleking.scene","jcby/help/BS.scene","jcby/help/JJ.scene","jcby/help/SM.scene","jcby/record/RecordDetail.scene","lobby/dropredpacket.scene","lobby/gongxihuode.scene","lobby/LobbyPage.scene","lobby/Panel_BindReal.scene","lobby/Panel_BuyConfirm.scene","lobby/Panel_daysign.scene","lobby/Panel_fenxiang.scene","lobby/Panel_FishPage.scene","lobby/Panel_FishPage1.scene","lobby/Panel_fruit.scene","lobby/Panel_fulilibao.scene","lobby/Panel_gunzhuyindao.scene","lobby/Panel_hongbaochang.scene","lobby/Panel_jinbichang.scene","lobby/Panel_jinjichang.scene","lobby/Panel_paihangbang.scene","lobby/Panel_wingoldrank.scene","lobby/Panel_rewardinfo.scene","lobby/Panel_SetingPage.scene","lobby/Panel_wyshl.scene","lobby/Panel_Shop.scene","lobby/Panel_VIPtequan.scene","lobby/Panel_xingyundazhuanpan.scene","lobby/yaoqingyouli.scene","lobby/activity/Activity_DailyAwards.scene","lobby/activity/Activity_DayAwards.scene","lobby/activity/Activity_DayTimeAwards.scene","lobby/activity/Activity_Exchangecode.scene","lobby/activity/Panel_Activitys.scene","lobby/bag/Panel_Bag.scene","lobby/bag/Panel_Bagzengsong.scene","lobby/bag/Panel_Bagzs.scene","lobby/jjc/Help_jjc.scene","lobby/jjc/Panel_djs.scene","lobby/jjc/Panel_jjc.scene","lobby/jjc/Panel_jjcphb.scene","lobby/jjc/Panel_qms.scene","lobby/jjc/Panel_tzs.scene","lobby/mail/MailItem.scene","lobby/mail/Panel_MailDlg.scene","lobby/yinhang/Panel_yinhang.scene","lobby/yinhang/Panel_yinhangejmm.scene","lobby/yinhang/Panel_yinhangtankuang.scene","login/LoginPage.scene","res/atlas/awards.atlas","res/atlas/effects.atlas","res/atlas/item.atlas","res/atlas/lobby.atlas","res/atlas/lobby/activity.atlas","res/atlas/lobby/donghua.atlas","res/atlas/lobby/lobby1_room.atlas","res/atlas/lobby/ocean.atlas","res/atlas/lobby/paihangbang.atlas","res/atlas/lobby/wuyihaoli.atlas","res/atlas/lobby/yezi.atlas","res/atlas/lobby/room1.atlas","res/atlas/lobby/room2.atlas","res/atlas/lobby/room3.atlas","res/atlas/lobby/shop.atlas","res/atlas/lobby/shopitem.atlas","res/atlas/lobby/yaoqingyouli.atlas","res/atlas/res-game/jcby/aqua.atlas","res/atlas/res-game/jcby/effects.atlas","res/atlas/res-game/jcby/help.atlas","res/atlas/res-game/jcby/record.atlas","data/keyword.json","data/uilist.json","data/activity/activitylogin.json","data/activity/activityshow.json","data/match/jcby/free.json","data/agreement.txt","data/gift/daycycle.tdf","data/gift/daysign.tdf","data/gift/daysign2.tdf","data/gift/daytime.tdf","data/item/itemeffect.tdf","data/item/itemkind.tdf","data/item/shopgems.tdf","data/item/wechatpublicgold.tdf","data/match/jcby/chargeitem.tdf","data/match/jcby/vip.tdf","data/task/everydaytask.tdf","data/task/honortask.tdf","data/task/invitetask.tdf","data/task/invitetask_2020.tdf","data/match/jcby/path.json.gzip","fonts/number.ttf","effects/GlowRound.ani","effects/glow_frame.ani","effects/qipao_hfcz.ani","effects/qipao_hjdh.ani","effects/qipao_jdsc.ani","effects/loading_shark.ani","effects/lobby1_room1.ani","effects/lobby1_room2.ani","effects/lobby1_room3.ani","effects/lobby1_room4.ani","effects/lobby2_room1.ani","effects/lobby2_room2.ani","effects/lobby2_room3.ani","effects/lobby_deng.ani","effects/lobby_flag.ani","effects/lobby_long.ani","effects/lobby_long1.ani","effects/lobby_scdeng.ani","effects/lobby_scl.ani","effects/lobby_tree_left.ani","effects/lobby_tree_right.ani","effects/lobby_xyzp.ani","effects/lobby_xyzp1.ani","effects/nihongdeng.ani","effects/pangxie.ani","effects/redbelt_1.ani","effects/room1_fish.ani","effects/room2_fish.ani","effects/room2_glow.ani","effects/room3_fish.ani","effects/room4_fish.ani","effects/room4_fish1.ani","effects/roomtitle_1.ani","effects/roomtitle_2.ani","effects/roomtitle_3.ani","effects/roomtitle_4.ani","effects/Speaker.ani","effects/room2/room1_fish_1.ani","effects/room2/room1_fish_2.ani","effects/room2/room1_fish_3.ani","snd/button.mp3","snd/waiting.mp3","snd/fruit/chip.mp3","snd/fruit/in.mp3","snd/fruit/lose.mp3","snd/fruit/slot_1.mp3","snd/fruit/slot_2.mp3","snd/fruit/slot_3.mp3","snd/fruit/slot_win.mp3","snd/fruit/slot_win2.mp3","snd/fruit/win.mp3","snd/jcby/alert.mp3","snd/jcby/beam.mp3","snd/jcby/bgm10.mp3","snd/jcby/bgm2.mp3","snd/jcby/bgm3.mp3","snd/jcby/bgm4.mp3","snd/jcby/bingo.mp3","snd/jcby/blitz.mp3","snd/jcby/bomb.mp3","snd/jcby/bomb1.mp3","snd/jcby/boss.mp3","snd/jcby/cannonswitch.mp3","snd/jcby/casting.mp3","snd/jcby/catch.mp3","snd/jcby/dead_1.mp3","snd/jcby/dead_10.mp3","snd/jcby/dead_2.mp3","snd/jcby/dead_3.mp3","snd/jcby/dead_4.mp3","snd/jcby/dead_5.mp3","snd/jcby/dead_6.mp3","snd/jcby/dead_7.mp3","snd/jcby/dead_8.mp3","snd/jcby/dead_9.mp3","snd/jcby/din.mp3","snd/jcby/dragon.mp3","snd/jcby/drillready.mp3","snd/jcby/drillreflect.mp3","snd/jcby/fire.mp3","snd/jcby/freebonus.mp3","snd/jcby/itemget.mp3","snd/jcby/laseraward.mp3","snd/jcby/mie.mp3","snd/jcby/minorenter.mp3","snd/jcby/spbonus.mp3","snd/jcby/wakeup.mp3","snd/jcby/wakeupding.mp3","snd/jcby/wave.mp3"],jcby:["res/atlas/res-game/jcby/aqua.atlas","res/atlas/res-game/jcby/effects.atlas","res/atlas/res-game/jcby/help.atlas","res/atlas/res-game/jcby/record.atlas","res-game/jcby/fish/banliyu_01.png","res-game/jcby/fish/banliyu_02.png","res-game/jcby/fish/banliyu_03.png","res-game/jcby/fish/banliyu_04.png","res-game/jcby/fish/banliyu_05.png","res-game/jcby/fish/banliyu_06.png","res-game/jcby/fish/banliyu_catch_01.png","res-game/jcby/fish/banliyu_catch_02.png","res-game/jcby/fish/banliyu_catch_03.png","res-game/jcby/fish/banliyu_catch_04.png","res-game/jcby/fish/banliyu_catch_05.png","res-game/jcby/fish/banmayu_01.png","res-game/jcby/fish/banmayu_02.png","res-game/jcby/fish/banmayu_03.png","res-game/jcby/fish/banmayu_04.png","res-game/jcby/fish/banmayu_05.png","res-game/jcby/fish/banmayu_catch_01.png","res-game/jcby/fish/banmayu_catch_02.png","res-game/jcby/fish/banmayu_catch_03.png","res-game/jcby/fish/banmayu_catch_04.png","res-game/jcby/fish/banmayu_catch_05.png","res-game/jcby/fish/bingdongyu_01.png","res-game/jcby/fish/bingdongyu_02.png","res-game/jcby/fish/bingdongyu_03.png","res-game/jcby/fish/bingdongyu_04.png","res-game/jcby/fish/bingdongyu_05.png","res-game/jcby/fish/bingdongyu_06.png","res-game/jcby/fish/bingdongyu_07.png","res-game/jcby/fish/bingdongyu_08.png","res-game/jcby/fish/bingdongyu_09.png","res-game/jcby/fish/bingdongyu_10.png","res-game/jcby/fish/bingdongyu_catch_01.png","res-game/jcby/fish/bingdongyu_catch_02.png","res-game/jcby/fish/bingdongyu_catch_03.png","res-game/jcby/fish/bingdongyu_catch_04.png","res-game/jcby/fish/bingdongyu_catch_05.png","res-game/jcby/fish/boss_46.png","res-game/jcby/fish/boss_47.png","res-game/jcby/fish/boss_48.png","res-game/jcby/fish/dabaisha_01.png","res-game/jcby/fish/dabaisha_02.png","res-game/jcby/fish/dabaisha_03.png","res-game/jcby/fish/dabaisha_04.png","res-game/jcby/fish/dabaisha_05.png","res-game/jcby/fish/dabaisha_06.png","res-game/jcby/fish/dabaisha_07.png","res-game/jcby/fish/dabaisha_08.png","res-game/jcby/fish/dabaisha_09.png","res-game/jcby/fish/dabaisha_10.png","res-game/jcby/fish/dabaisha_11.png","res-game/jcby/fish/dabaisha_catch_01.png","res-game/jcby/fish/dabaisha_catch_02.png","res-game/jcby/fish/dabaisha_catch_03.png","res-game/jcby/fish/dabaisha_catch_04.png","res-game/jcby/fish/dabaisha_catch_05.png","res-game/jcby/fish/denglongyuwang_01.png","res-game/jcby/fish/denglongyuwang_02.png","res-game/jcby/fish/denglongyuwang_03.png","res-game/jcby/fish/denglongyuwang_04.png","res-game/jcby/fish/denglongyuwang_05.png","res-game/jcby/fish/denglongyuwang_06.png","res-game/jcby/fish/denglongyuwang_07.png","res-game/jcby/fish/denglongyuwang_08.png","res-game/jcby/fish/denglongyuwang_09.png","res-game/jcby/fish/denglongyuwang_10.png","res-game/jcby/fish/denglongyuwang_11.png","res-game/jcby/fish/denglongyuwang_12.png","res-game/jcby/fish/denglongyuwang_13.png","res-game/jcby/fish/denglongyuwang_14.png","res-game/jcby/fish/denglongyuwang_15.png","res-game/jcby/fish/denglongyuwang_16.png","res-game/jcby/fish/denglongyuwang_catch_01.png","res-game/jcby/fish/denglongyuwang_catch_02.png","res-game/jcby/fish/denglongyuwang_catch_03.png","res-game/jcby/fish/denglongyuwang_catch_04.png","res-game/jcby/fish/denglongyuwang_catch_05.png","res-game/jcby/fish/denglongyu_01.png","res-game/jcby/fish/denglongyu_02.png","res-game/jcby/fish/denglongyu_03.png","res-game/jcby/fish/denglongyu_04.png","res-game/jcby/fish/denglongyu_05.png","res-game/jcby/fish/denglongyu_06.png","res-game/jcby/fish/denglongyu_07.png","res-game/jcby/fish/denglongyu_08.png","res-game/jcby/fish/denglongyu_09.png","res-game/jcby/fish/denglongyu_10.png","res-game/jcby/fish/denglongyu_catch_01.png","res-game/jcby/fish/denglongyu_catch_02.png","res-game/jcby/fish/denglongyu_catch_03.png","res-game/jcby/fish/denglongyu_catch_04.png","res-game/jcby/fish/dianmanyu.png","res-game/jcby/fish/fenshuimu_01.png","res-game/jcby/fish/fenshuimu_02.png","res-game/jcby/fish/fenshuimu_03.png","res-game/jcby/fish/fenshuimu_04.png","res-game/jcby/fish/fenshuimu_05.png","res-game/jcby/fish/fenshuimu_06.png","res-game/jcby/fish/fenshuimu_07.png","res-game/jcby/fish/fenshuimu_08.png","res-game/jcby/fish/fenshuimu_09.png","res-game/jcby/fish/fenshuimu_10.png","res-game/jcby/fish/fenshuimu_catch_01.png","res-game/jcby/fish/fenshuimu_catch_02.png","res-game/jcby/fish/fenshuimu_catch_03.png","res-game/jcby/fish/fenshuimu_catch_04.png","res-game/jcby/fish/gongzhuyu_01.png","res-game/jcby/fish/gongzhuyu_02.png","res-game/jcby/fish/gongzhuyu_03.png","res-game/jcby/fish/gongzhuyu_04.png","res-game/jcby/fish/gongzhuyu_05.png","res-game/jcby/fish/gongzhuyu_06.png","res-game/jcby/fish/gongzhuyu_07.png","res-game/jcby/fish/gongzhuyu_08.png","res-game/jcby/fish/gongzhuyu_09.png","res-game/jcby/fish/gongzhuyu_catch_01.png","res-game/jcby/fish/gongzhuyu_catch_02.png","res-game/jcby/fish/gongzhuyu_catch_03.png","res-game/jcby/fish/gongzhuyu_catch_04.png","res-game/jcby/fish/gongzhuyu_catch_05.png","res-game/jcby/fish/haidaozhangyu_01.png","res-game/jcby/fish/haidaozhangyu_02.png","res-game/jcby/fish/haidaozhangyu_03.png","res-game/jcby/fish/haidaozhangyu_04.png","res-game/jcby/fish/haidaozhangyu_05.png","res-game/jcby/fish/haidaozhangyu_06.png","res-game/jcby/fish/haidaozhangyu_07.png","res-game/jcby/fish/haidaozhangyu_catch_01.png","res-game/jcby/fish/haidaozhangyu_catch_02.png","res-game/jcby/fish/haidaozhangyu_catch_03.png","res-game/jcby/fish/haidaozhangyu_catch_04.png","res-game/jcby/fish/haidaozhangyu_catch_05.png","res-game/jcby/fish/haigui_01.png","res-game/jcby/fish/haigui_02.png","res-game/jcby/fish/haigui_03.png","res-game/jcby/fish/haigui_04.png","res-game/jcby/fish/haigui_05.png","res-game/jcby/fish/haigui_06.png","res-game/jcby/fish/haigui_07.png","res-game/jcby/fish/haigui_08.png","res-game/jcby/fish/haigui_09.png","res-game/jcby/fish/haigui_10.png","res-game/jcby/fish/haigui_catch_01.png","res-game/jcby/fish/haigui_catch_02.png","res-game/jcby/fish/haigui_catch_03.png","res-game/jcby/fish/haigui_catch_04.png","res-game/jcby/fish/haimanyu_01.png","res-game/jcby/fish/haimanyu_02.png","res-game/jcby/fish/haimanyu_03.png","res-game/jcby/fish/haimanyu_04.png","res-game/jcby/fish/haimanyu_05.png","res-game/jcby/fish/haimanyu_06.png","res-game/jcby/fish/haimanyu_catch_01.png","res-game/jcby/fish/haimanyu_catch_02.png","res-game/jcby/fish/haimanyu_catch_03.png","res-game/jcby/fish/haimanyu_catch_04.png","res-game/jcby/fish/haimanyu_catch_05.png","res-game/jcby/fish/haiwang_01.png","res-game/jcby/fish/haiwang_02.png","res-game/jcby/fish/haiwang_03.png","res-game/jcby/fish/haiwang_04.png","res-game/jcby/fish/haiwang_05.png","res-game/jcby/fish/haiwang_06.png","res-game/jcby/fish/haiwang_07.png","res-game/jcby/fish/haiwang_08.png","res-game/jcby/fish/haiwang_09.png","res-game/jcby/fish/haiwang_10.png","res-game/jcby/fish/haiwang_11.png","res-game/jcby/fish/haiwang_12.png","res-game/jcby/fish/haiwang_catch_01.png","res-game/jcby/fish/haiwang_catch_02.png","res-game/jcby/fish/haiwang_catch_03.png","res-game/jcby/fish/haiwang_catch_04.png","res-game/jcby/fish/haiwang_catch_05.png","res-game/jcby/fish/hetunyu_01.png","res-game/jcby/fish/hetunyu_02.png","res-game/jcby/fish/hetunyu_03.png","res-game/jcby/fish/hetunyu_04.png","res-game/jcby/fish/hetunyu_05.png","res-game/jcby/fish/hetunyu_06.png","res-game/jcby/fish/hetunyu_07.png","res-game/jcby/fish/hetunyu_08.png","res-game/jcby/fish/hetunyu_09.png","res-game/jcby/fish/hetunyu_10.png","res-game/jcby/fish/hetunyu_catch_01.png","res-game/jcby/fish/hetunyu_catch_02.png","res-game/jcby/fish/hetunyu_catch_03.png","res-game/jcby/fish/hetunyu_catch_04.png","res-game/jcby/fish/hetunyu_catch_05.png","res-game/jcby/fish/hongdiaoyu_01.png","res-game/jcby/fish/hongdiaoyu_02.png","res-game/jcby/fish/hongdiaoyu_03.png","res-game/jcby/fish/hongdiaoyu_04.png","res-game/jcby/fish/hongdiaoyu_05.png","res-game/jcby/fish/hongdiaoyu_06.png","res-game/jcby/fish/hongdiaoyu_07.png","res-game/jcby/fish/hongdiaoyu_08.png","res-game/jcby/fish/hongdiaoyu_09.png","res-game/jcby/fish/hongdiaoyu_10.png","res-game/jcby/fish/hongdiaoyu_catch_01.png","res-game/jcby/fish/hongdiaoyu_catch_02.png","res-game/jcby/fish/hongdiaoyu_catch_03.png","res-game/jcby/fish/hongdiaoyu_catch_04.png","res-game/jcby/fish/hongdiaoyu_catch_05.png","res-game/jcby/fish/huangdixie_01.png","res-game/jcby/fish/huangdixie_02.png","res-game/jcby/fish/huangdixie_03.png","res-game/jcby/fish/huangdixie_04.png","res-game/jcby/fish/huangdixie_05.png","res-game/jcby/fish/huangdixie_06.png","res-game/jcby/fish/huangdixie_07.png","res-game/jcby/fish/huangdixie_08.png","res-game/jcby/fish/huangdixie_09.png","res-game/jcby/fish/huangdixie_10.png","res-game/jcby/fish/huangdixie_catch_01.png","res-game/jcby/fish/huangdixie_catch_02.png","res-game/jcby/fish/huangdixie_catch_03.png","res-game/jcby/fish/huangdixie_catch_04.png","res-game/jcby/fish/jinchuitousha_01.png","res-game/jcby/fish/jinchuitousha_02.png","res-game/jcby/fish/jinchuitousha_03.png","res-game/jcby/fish/jinchuitousha_04.png","res-game/jcby/fish/jinchuitousha_05.png","res-game/jcby/fish/jinchuitousha_06.png","res-game/jcby/fish/jinchuitousha_07.png","res-game/jcby/fish/jinchuitousha_08.png","res-game/jcby/fish/jinchuitousha_09.png","res-game/jcby/fish/jinchuitousha_10.png","res-game/jcby/fish/jinchuitousha_catch_01.png","res-game/jcby/fish/jinchuitousha_catch_02.png","res-game/jcby/fish/jinchuitousha_catch_03.png","res-game/jcby/fish/jinchuitousha_catch_04.png","res-game/jcby/fish/jinlongyu_01.png","res-game/jcby/fish/jinlongyu_02.png","res-game/jcby/fish/jinlongyu_03.png","res-game/jcby/fish/jinlongyu_04.png","res-game/jcby/fish/jinlongyu_05.png","res-game/jcby/fish/jinlongyu_06.png","res-game/jcby/fish/jinlongyu_07.png","res-game/jcby/fish/jinlongyu_08.png","res-game/jcby/fish/jinlongyu_09.png","res-game/jcby/fish/jinlongyu_10.png","res-game/jcby/fish/jinlongyu_catch_01.png","res-game/jcby/fish/jinlongyu_catch_02.png","res-game/jcby/fish/jinlongyu_catch_03.png","res-game/jcby/fish/jinlongyu_catch_04.png","res-game/jcby/fish/laser_battery.png","res-game/jcby/fish/meirenyu_01.png","res-game/jcby/fish/meirenyu_02.png","res-game/jcby/fish/meirenyu_03.png","res-game/jcby/fish/meirenyu_04.png","res-game/jcby/fish/meirenyu_05.png","res-game/jcby/fish/meirenyu_06.png","res-game/jcby/fish/meirenyu_07.png","res-game/jcby/fish/meirenyu_08.png","res-game/jcby/fish/meirenyu_09.png","res-game/jcby/fish/meirenyu_10.png","res-game/jcby/fish/meirenyu_11.png","res-game/jcby/fish/meirenyu_12.png","res-game/jcby/fish/meirenyu_13.png","res-game/jcby/fish/meirenyu_14.png","res-game/jcby/fish/meirenyu_15.png","res-game/jcby/fish/meirenyu_16.png","res-game/jcby/fish/meirenyu_17.png","res-game/jcby/fish/meirenyu_18.png","res-game/jcby/fish/meirenyu_catch_01.png","res-game/jcby/fish/meirenyu_catch_02.png","res-game/jcby/fish/meirenyu_catch_03.png","res-game/jcby/fish/meirenyu_catch_04.png","res-game/jcby/fish/meirenyu_catch_05.png","res-game/jcby/fish/meirenyu_catch_06.png","res-game/jcby/fish/meirenyu_catch_07.png","res-game/jcby/fish/meirenyu_catch_08.png","res-game/jcby/fish/moguiyu_01.png","res-game/jcby/fish/moguiyu_02.png","res-game/jcby/fish/moguiyu_03.png","res-game/jcby/fish/moguiyu_04.png","res-game/jcby/fish/moguiyu_05.png","res-game/jcby/fish/moguiyu_06.png","res-game/jcby/fish/moguiyu_07.png","res-game/jcby/fish/moguiyu_08.png","res-game/jcby/fish/moguiyu_09.png","res-game/jcby/fish/moguiyu_10.png","res-game/jcby/fish/moguiyu_catch_01.png","res-game/jcby/fish/moguiyu_catch_02.png","res-game/jcby/fish/moguiyu_catch_03.png","res-game/jcby/fish/moguiyu_catch_04.png","res-game/jcby/fish/pic_nengliangpao_01.png","res-game/jcby/fish/shayu_01.png","res-game/jcby/fish/shayu_02.png","res-game/jcby/fish/shayu_03.png","res-game/jcby/fish/shayu_04.png","res-game/jcby/fish/shayu_05.png","res-game/jcby/fish/shayu_06.png","res-game/jcby/fish/shayu_07.png","res-game/jcby/fish/shayu_08.png","res-game/jcby/fish/shayu_09.png","res-game/jcby/fish/shayu_10.png","res-game/jcby/fish/shayu_catch_01.png","res-game/jcby/fish/shayu_catch_02.png","res-game/jcby/fish/shayu_catch_03.png","res-game/jcby/fish/shayu_catch_04.png","res-game/jcby/fish/shenxianyu_01.png","res-game/jcby/fish/shenxianyu_02.png","res-game/jcby/fish/shenxianyu_03.png","res-game/jcby/fish/shenxianyu_04.png","res-game/jcby/fish/shenxianyu_05.png","res-game/jcby/fish/shenxianyu_06.png","res-game/jcby/fish/shenxianyu_07.png","res-game/jcby/fish/shenxianyu_08.png","res-game/jcby/fish/shenxianyu_09.png","res-game/jcby/fish/shenxianyu_10.png","res-game/jcby/fish/shenxianyu_catch_01.png","res-game/jcby/fish/shenxianyu_catch_02.png","res-game/jcby/fish/shenxianyu_catch_03.png","res-game/jcby/fish/shenxianyu_catch_04.png","res-game/jcby/fish/shenxianyu_catch_05.png","res-game/jcby/fish/typebombback_01.png","res-game/jcby/fish/typebombback_02.png","res-game/jcby/fish/typebombback_03.png","res-game/jcby/fish/xiaochouyuwang_01.png","res-game/jcby/fish/xiaochouyuwang_02.png","res-game/jcby/fish/xiaochouyuwang_03.png","res-game/jcby/fish/xiaochouyuwang_04.png","res-game/jcby/fish/xiaochouyuwang_05.png","res-game/jcby/fish/xiaochouyuwang_06.png","res-game/jcby/fish/xiaochouyuwang_07.png","res-game/jcby/fish/xiaochouyuwang_08.png","res-game/jcby/fish/xiaochouyuwang_09.png","res-game/jcby/fish/xiaochouyuwang_10.png","res-game/jcby/fish/xiaochouyuwang_11.png","res-game/jcby/fish/xiaochouyuwang_12.png","res-game/jcby/fish/xiaochouyuwang_13.png","res-game/jcby/fish/xiaochouyuwang_catch_01.png","res-game/jcby/fish/xiaochouyuwang_catch_02.png","res-game/jcby/fish/xiaochouyuwang_catch_03.png","res-game/jcby/fish/xiaochouyuwang_catch_04.png","res-game/jcby/fish/xiaochouyuwang_catch_05.png","res-game/jcby/fish/xiaochouyuwang_catch_06.png","res-game/jcby/fish/y9_light.png","res-game/jcby/fish/yinchuitousha_01.png","res-game/jcby/fish/yinchuitousha_02.png","res-game/jcby/fish/yinchuitousha_03.png","res-game/jcby/fish/yinchuitousha_04.png","res-game/jcby/fish/yinchuitousha_05.png","res-game/jcby/fish/yinchuitousha_06.png","res-game/jcby/fish/yinchuitousha_07.png","res-game/jcby/fish/yinchuitousha_08.png","res-game/jcby/fish/yinchuitousha_09.png","res-game/jcby/fish/yinchuitousha_10.png","res-game/jcby/fish/yinchuitousha_catch_01.png","res-game/jcby/fish/yinchuitousha_catch_02.png","res-game/jcby/fish/yinchuitousha_catch_03.png","res-game/jcby/fish/yinchuitousha_catch_04.png","res-game/jcby/fish/yingwuluo_01.png","res-game/jcby/fish/yingwuluo_02.png","res-game/jcby/fish/yingwuluo_03.png","res-game/jcby/fish/yingwuluo_04.png","res-game/jcby/fish/yingwuluo_05.png","res-game/jcby/fish/yingwuluo_06.png","res-game/jcby/fish/yingwuluo_07.png","res-game/jcby/fish/yingwuluo_08.png","res-game/jcby/fish/yingwuluo_catch_01.png","res-game/jcby/fish/yingwuluo_catch_02.png","res-game/jcby/fish/yingwuluo_catch_03.png","res-game/jcby/fish/yingwuluo_catch_04.png","res-game/jcby/fish/youlingchuanzhang_01.png","res-game/jcby/fish/youlingchuanzhang_02.png","res-game/jcby/fish/youlingchuanzhang_03.png","res-game/jcby/fish/youlingchuanzhang_04.png","res-game/jcby/fish/youlingchuanzhang_05.png","res-game/jcby/fish/youlingchuanzhang_06.png","res-game/jcby/fish/youlingchuanzhang_catch_01.png","res-game/jcby/fish/youlingchuanzhang_catch_02.png","res-game/jcby/fish/youlingchuanzhang_catch_03.png","res-game/jcby/fish/youlingchuan_01.png","res-game/jcby/fish/youlingchuan_02.png","res-game/jcby/fish/youlingchuan_03.png","res-game/jcby/fish/youlingchuan_04.png","res-game/jcby/fish/youlingchuan_05.png","res-game/jcby/fish/youlingchuan_06.png","res-game/jcby/fish/youlingchuan_07.png","res-game/jcby/fish/youlingchuan_08.png","res-game/jcby/fish/youlingchuan_09.png","res-game/jcby/fish/youlingchuan_10.png","res-game/jcby/fish/youlingchuan_11.png","res-game/jcby/fish/youlingchuan_catch_01.png","res-game/jcby/fish/youlingchuan_catch_02.png","res-game/jcby/fish/youlingchuan_catch_03.png","res-game/jcby/fish/youlingchuan_catch_04.png","res-game/jcby/fish/youlingchuan_catch_05.png","res-game/jcby/fish/zibaohaima_01.png","res-game/jcby/fish/zibaohaima_02.png","res-game/jcby/fish/zibaohaima_03.png","res-game/jcby/fish/zibaohaima_04.png","res-game/jcby/fish/zibaohaima_05.png","res-game/jcby/fish/zibaohaima_06.png","res-game/jcby/fish/zibaohaima_07.png","res-game/jcby/fish/zibaohaima_08.png","res-game/jcby/fish/zibaohaima_09.png","res-game/jcby/fish/zibaohaima_10.png","res-game/jcby/fish/zibaohaima_catch_01.png","res-game/jcby/fish/zibaohaima_catch_02.png","res-game/jcby/fish/zibaohaima_catch_03.png","res-game/jcby/fish/zibaohaima_catch_04.png","res-game/jcby/fish/zibaohaima_catch_05.png","res-game/jcby/fish/zibaohaima_catch_06.png","res-game/jcby/fish/zibaohaima_catch_07.png","res-game/jcby/fish/zibaohaima_catch_08.png","res-game/jcby/fish/zibaohaima_catch_09.png","jcby/aqua/Aqua_Jcby.scene","jcby/aqua/help_detail.scene","jcby/aqua/Help_Jcby.scene","jcby/aqua/jiujijing.scene","jcby/aqua/Panel_kuaichong.scene","jcby/aqua/Pane_shangcheng.scene","jcby/aqua/paotai.scene","jcby/aqua/record_detail.scene","jcby/aqua/Settle_Jcby.scene","jcby/aqua/Turret_Jcby.scene","jcby/aqua/ani/effect_dragon_wakeup.scene","jcby/aqua/ani/effect_dragon_wakeup1.scene","jcby/aqua/ani/effect_goldglow1.scene","jcby/aqua/ani/effect_goldglow2.scene","jcby/aqua/ani/effect_goldglow3.scene","jcby/aqua/ani/firestar.scene","jcby/aqua/ani/fishmark.scene","jcby/aqua/ani/flower.scene","jcby/aqua/ani/flower46.scene","jcby/aqua/ani/lingqujiangli.scene","jcby/aqua/ani/manygold.scene","jcby/aqua/ani/onstage.scene","jcby/aqua/ani/roulette.scene","jcby/aqua/ani/roulette1.scene","jcby/aqua/ani/tidecoming.scene","jcby/aqua/ani/torpedo_boom.scene","jcby/aqua/ani/torpedo_fly.scene","jcby/aqua/ani/warning.scene","jcby/aqua/ani/warning1.scene","jcby/aqua/ani/warning2.scene","jcby/effects/dice_shaking.scene","jcby/fish/dicefish.scene","jcby/fish/dragonking.scene","jcby/fish/drillking.scene","jcby/fish/frogking.scene","jcby/fish/laserfish.scene","jcby/fish/volcanoking.scene","jcby/fish/whaleking.scene","jcby/help/BS.scene","jcby/help/JJ.scene","jcby/help/SM.scene","jcby/record/RecordDetail.scene","jcby/aqua/ani/baku.ani","jcby/aqua/ani/baku_lighting.ani","jcby/aqua/ani/bomb.ani","jcby/aqua/ani/boom.ani","jcby/aqua/ani/bullet.ani","jcby/aqua/ani/cannon.ani","jcby/aqua/ani/cannon_new.ani","jcby/aqua/ani/effect_baseglow.ani","jcby/aqua/ani/effect_baseglow_rage.ani","jcby/aqua/ani/flower.ani","jcby/aqua/ani/free_start.ani","jcby/aqua/ani/laser_head.ani","jcby/aqua/ani/laser_pole.ani","jcby/aqua/ani/lightning_bomb.ani","jcby/aqua/ani/lockon.ani","jcby/aqua/ani/net.ani","jcby/aqua/ani/netsp.ani","jcby/aqua/ani/purple.ani","jcby/aqua/ani/ripper.ani","jcby/aqua/ani/sunlight.ani","jcby/aqua/ani/treasure_box.ani","jcby/aqua/ani/treasure_halo.ani","jcby/aqua/ani/treasure_hint.ani","jcby/aqua/ani/treasure_light.ani","jcby/aqua/ani/wave.ani","jcby/effects/effect_bomb.ani","jcby/fish/butterfly.ani","jcby/fish/flog_gold.ani","jcby/fish/flog_green.ani","jcby/fish/free_fish.ani","jcby/fish/halo1.ani","jcby/fish/halo2.ani","jcby/fish/halo3.ani","jcby/fish/lightingfish.ani","jcby/fish/y1.ani","jcby/fish/y10.ani","jcby/fish/y11.ani","jcby/fish/y110.ani","jcby/fish/y12.ani","jcby/fish/y13.ani","jcby/fish/y14.ani","jcby/fish/y15.ani","jcby/fish/y16.ani","jcby/fish/y17.ani","jcby/fish/y18.ani","jcby/fish/y19.ani","jcby/fish/y2.ani","jcby/fish/y20.ani","jcby/fish/y21.ani","jcby/fish/y25.ani","jcby/fish/y3.ani","jcby/fish/y30.ani","jcby/fish/y4.ani","jcby/fish/y40.ani","jcby/fish/y42.ani","jcby/fish/y43.ani","jcby/fish/y44.ani","jcby/fish/y45.ani","jcby/fish/y46.ani","jcby/fish/y47.ani","jcby/fish/y48.ani","jcby/fish/y49.ani","jcby/fish/y5.ani","jcby/fish/y6.ani","jcby/fish/y7.ani","jcby/fish/y8.ani","jcby/fish/y9.ani","snd/jcby/alert.mp3","snd/jcby/beam.mp3","snd/jcby/bgm10.mp3","snd/jcby/bgm2.mp3","snd/jcby/bgm3.mp3","snd/jcby/bgm4.mp3","snd/jcby/bingo.mp3","snd/jcby/blitz.mp3","snd/jcby/bomb.mp3","snd/jcby/bomb1.mp3","snd/jcby/boss.mp3","snd/jcby/cannonswitch.mp3","snd/jcby/casting.mp3","snd/jcby/catch.mp3","snd/jcby/dead_1.mp3","snd/jcby/dead_10.mp3","snd/jcby/dead_2.mp3","snd/jcby/dead_3.mp3","snd/jcby/dead_4.mp3","snd/jcby/dead_5.mp3","snd/jcby/dead_6.mp3","snd/jcby/dead_7.mp3","snd/jcby/dead_8.mp3","snd/jcby/dead_9.mp3","snd/jcby/din.mp3","snd/jcby/dragon.mp3","snd/jcby/drillready.mp3","snd/jcby/drillreflect.mp3","snd/jcby/fire.mp3","snd/jcby/freebonus.mp3","snd/jcby/itemget.mp3","snd/jcby/laseraward.mp3","snd/jcby/mie.mp3","snd/jcby/minorenter.mp3","snd/jcby/spbonus.mp3","snd/jcby/wakeup.mp3","snd/jcby/wakeupding.mp3","snd/jcby/wave.mp3"]}}}]),GameResList}();exports.default=GameResList},{}],50:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_LoginUI2=_interopRequireDefault(require("../app/login/LoginUI")),_lobby2=_interopRequireDefault(require("../app/lobby/lobby")),_SysDlg2=_interopRequireDefault(require("../appbase/com/SysDlg")),_WaitDlg2=_interopRequireDefault(require("../appbase/com/WaitDlg")),_maildlgui2=_interopRequireDefault(require("../appbase/lobby/mail/maildlgui")),_BagUI2=_interopRequireDefault(require("../appbase/lobby/bag/BagUI")),_GivingDlg2=_interopRequireDefault(require("../appbase/lobby/bag/GivingDlg")),_SetingUI2=_interopRequireDefault(require("../app/lobby/SetingUI")),_help2=_interopRequireDefault(require("../app/lobby/help")),_activityui2=_interopRequireDefault(require("../app/lobby/activity/activityui")),_PlayerInfo2=_interopRequireDefault(require("../app/lobby/userinfo/PlayerInfo")),_exchangeconfirm2=_interopRequireDefault(require("../app/lobby/shop/exchangeconfirm")),_turnredpacketui2=_interopRequireDefault(require("../app/lobby/redpacket/turnredpacketui")),_authentication2=_interopRequireDefault(require("../appbase/lobby/authentication")),_scdlg2=_interopRequireDefault(require("../app/lobby/scdlg")),_wechatdlg2=_interopRequireDefault(require("../app/lobby/wechatdlg")),_PayModeUI2=_interopRequireDefault(require("../app/lobby/paymode/PayModeUI")),_rankgold2=_interopRequireDefault(require("../app/lobby/rankgold")),_guidedlg2=_interopRequireDefault(require("../app/lobby/guidedlg")),_bankui2=_interopRequireDefault(require("../app/lobby/bank/bankui")),_bankpassui2=_interopRequireDefault(require("../app/lobby/bank/bankpassui")),_luckyspin2=_interopRequireDefault(require("../app/lobby/luckyspin/luckyspin")),_luckyspinreward2=_interopRequireDefault(require("../app/lobby/luckyspin/luckyspinreward")),_ShareUI2=_interopRequireDefault(require("../appbase/lobby/share/ShareUI")),_ShareSelectUI2=_interopRequireDefault(require("../appbase/lobby/share/ShareSelectUI")),_shop2=_interopRequireDefault(require("../game/jcby/ui/shop")),_daysignui2=_interopRequireDefault(require("../app/lobby/activity/daysignui")),_invitetask2=_interopRequireDefault(require("../app/lobby/invitetask")),_fruit2=_interopRequireDefault(require("../app/lobby/fruit")),_roomredinfo2=_interopRequireDefault(require("../app/lobby/roomredinfo")),_vipinfo2=_interopRequireDefault(require("../app/lobby/vipinfo")),_agreement2=_interopRequireDefault(require("../app/lobby/agreement")),_rankwingold2=_interopRequireDefault(require("../app/lobby/rankwingold")),_skinchg2=_interopRequireDefault(require("../game/jcby/ui/skinchg")),_goldsubsidies2=_interopRequireDefault(require("../game/jcby/ui/goldsubsidies")),_quitsure2=_interopRequireDefault(require("../game/jcby/ui/quitsure")),_giftcharge2=_interopRequireDefault(require("../app/lobby/giftcharge"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(function(){function UIReg(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UIReg)}return _createClass(UIReg,null,[{key:"Reg",value:function(){Laya.ClassUtils.regClass("LoginUI",_LoginUI2.default),Laya.ClassUtils.regClass("Lobby",_lobby2.default),Laya.ClassUtils.regClass("SysDlg",_SysDlg2.default),Laya.ClassUtils.regClass("WaitDlg",_WaitDlg2.default),Laya.ClassUtils.regClass("MailDlgUI",_maildlgui2.default),Laya.ClassUtils.regClass("BagUI",_BagUI2.default),Laya.ClassUtils.regClass("GivingDlg",_GivingDlg2.default),Laya.ClassUtils.regClass("SetingUI",_SetingUI2.default),Laya.ClassUtils.regClass("HelpUI",_help2.default),Laya.ClassUtils.regClass("ActivityUISub",_activityui2.default),Laya.ClassUtils.regClass("PlayerInfo",_PlayerInfo2.default),Laya.ClassUtils.regClass("ExchangeConfirmUI",_exchangeconfirm2.default),Laya.ClassUtils.regClass("TurnRedPacketUI",_turnredpacketui2.default),Laya.ClassUtils.regClass("AuticationUI",_authentication2.default),Laya.ClassUtils.regClass("SCDlg",_scdlg2.default),Laya.ClassUtils.regClass("WeChatDlg",_wechatdlg2.default),Laya.ClassUtils.regClass("PayModeUI",_PayModeUI2.default),Laya.ClassUtils.regClass("RankGoldUI",_rankgold2.default),Laya.ClassUtils.regClass("GuideDlg",_guidedlg2.default),Laya.ClassUtils.regClass("BankUI",_bankui2.default),Laya.ClassUtils.regClass("BankPassUI",_bankpassui2.default),Laya.ClassUtils.regClass("LuckySpin",_luckyspin2.default),Laya.ClassUtils.regClass("LuckySpinReward",_luckyspinreward2.default),Laya.ClassUtils.regClass("CShareUI",_ShareUI2.default),Laya.ClassUtils.regClass("CShareSelectUI",_ShareSelectUI2.default),Laya.ClassUtils.regClass("GameShopUI",_shop2.default),Laya.ClassUtils.regClass("DaySignUI",_daysignui2.default),Laya.ClassUtils.regClass("InviteTaskUI",_invitetask2.default),Laya.ClassUtils.regClass("FruitUI",_fruit2.default),Laya.ClassUtils.regClass("RoomRedInfo",_roomredinfo2.default),Laya.ClassUtils.regClass("VipInfo",_vipinfo2.default),Laya.ClassUtils.regClass("AgreeMent",_agreement2.default),Laya.ClassUtils.regClass("SkinChgUI",_skinchg2.default),Laya.ClassUtils.regClass("GoldSubsidiesUI",_goldsubsidies2.default),Laya.ClassUtils.regClass("QuitSureUI",_quitsure2.default),Laya.ClassUtils.regClass("GiftChargeUI",_giftcharge2.default),Laya.ClassUtils.regClass("RankWinGoldUI",_rankwingold2.default)}}]),UIReg})().Reg()},{"../app/lobby/SetingUI":6,"../app/lobby/activity/activityui":7,"../app/lobby/activity/daysignui":9,"../app/lobby/agreement":14,"../app/lobby/bank/bankpassui":15,"../app/lobby/bank/bankui":16,"../app/lobby/fruit":17,"../app/lobby/giftcharge":18,"../app/lobby/guidedlg":19,"../app/lobby/help":20,"../app/lobby/invitetask":21,"../app/lobby/lobby":22,"../app/lobby/luckyspin/luckyspin":23,"../app/lobby/luckyspin/luckyspinreward":24,"../app/lobby/paymode/PayModeUI":33,"../app/lobby/rankgold":34,"../app/lobby/rankwingold":35,"../app/lobby/redpacket/turnredpacketui":37,"../app/lobby/roomredinfo":38,"../app/lobby/scdlg":39,"../app/lobby/shop/exchangeconfirm":40,"../app/lobby/userinfo/PlayerInfo":44,"../app/lobby/vipinfo":45,"../app/lobby/wechatdlg":46,"../app/login/LoginUI":47,"../appbase/com/SysDlg":60,"../appbase/com/WaitDlg":62,"../appbase/lobby/authentication":75,"../appbase/lobby/bag/BagUI":77,"../appbase/lobby/bag/GivingDlg":78,"../appbase/lobby/mail/maildlgui":80,"../appbase/lobby/share/ShareSelectUI":88,"../appbase/lobby/share/ShareUI":89,"../game/jcby/ui/goldsubsidies":160,"../game/jcby/ui/quitsure":171,"../game/jcby/ui/shop":172,"../game/jcby/ui/skinchg":173}],51:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_comfunc2=_interopRequireDefault(require("../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BaseConst=function(){function BaseConst(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseConst)}return _createClass(BaseConst,null,[{key:"CmpVer",value:function(cur,max){for(var szver1=cur.split("."),szver2=max.split("."),sver1="",i=0;i<szver1.length;i++)sver1+=szver1[i];for(var sver2="",_i=0;_i<szver2.length;_i++)sver2+=szver2[_i];var ver1=parseInt(sver1),ver2=parseInt(sver2);return ver1<ver2?-1:ver1==ver2?0:1}},{key:"GetDateStr",value:function(date,full){var today=new Date,tomorrow=_comfunc2.default.addHour(today,-24),tday=_comfunc2.default.addHour(today,-48);if(_comfunc2.default.isSameDay(date,today))return"今天";if(_comfunc2.default.isSameDay(date,tomorrow))return"昨天";if(_comfunc2.default.isSameDay(date,tday))return"前天";var str=_comfunc2.default.formatDateTime(date,"yyyy-MM-dd hh:mm");return full?str:str.substring(5,10)}},{key:"GetShareURL",value:function(){return""}},{key:"GetGameRound",value:function(match){return 0}},{key:"GetShareTitle",value:function(matchobj){return""}},{key:"GetShareCondition",value:function(matchobj,isclip){return""}},{key:"RequestOther",value:function(matchobj){}},{key:"ClipBoardRequest",value:function(matchobj){}},{key:"GetGameCondition",value:function(match){return""}},{key:"SetBuyInfo",value:function(buy_info){if(buy_info){BaseConst.BUYINFOAGV=[];for(var agv=buy_info.split("<"),i=0;i<agv.length;i++){var sub=agv[i].split(">");sub.length>1&&BaseConst.BUYINFOAGV.push(sub[0])}buy_info=buy_info.replace("<",""),BaseConst.AGENT_BUYINFO=buy_info.replace(">","")}}},{key:"StartShock",value:function(time){}},{key:"StopShock",value:function(){}},{key:"MakeNumberSimple",value:function(value){return value>=1e8?Math.floor(value/1e6)/100+"亿":value>=1e4?Math.floor(value/100)/100+"万":String(value)}},{key:"FindGoldMatchMode",value:function(kindid){for(var i=0;i<BaseConst.GOLDMATCHLIST.length;i++)for(var sub=BaseConst.GOLDMATCHLIST[i],j=0;j<sub.length;j++)if(sub[j]==kindid)return 1;for(var _i2=0;_i2<BaseConst.GEMSMATCHLIST.length;_i2++)for(var _sub=BaseConst.GEMSMATCHLIST[_i2],_j=0;_j<_sub.length;_j++)if(_sub[_j]==kindid)return 2;return 0}},{key:"GetGameModel",value:function(gamename){for(var i=0;i<BaseConst.GAMEMODELLIST.length;i++)for(var model=BaseConst.GAMEMODELLIST[i],j=0;j<model.szgame.length;j++){if(model.szgame[j].name==gamename)return model}return null}},{key:"GetGameModelByGtype",value:function(gtype){for(var i=0;i<BaseConst.GAMEMODELLIST.length;i++)for(var model=BaseConst.GAMEMODELLIST[i],j=0;j<model.szgame.length;j++){if(model.szgame[j].gtype==gtype)return model}return null}},{key:"GetModelName",value:function(gamename){var model=BaseConst.GetGameModel(gamename);return _comfunc2.default.isNil(model)?null:model.name}},{key:"GetModelNameByGtype",value:function(gtype){var model=BaseConst.GetGameModelByGtype(gtype);return _comfunc2.default.isNil(model)?null:model.name}},{key:"GetGameName",value:function(gtype){for(var i=0;i<BaseConst.GAMEMODELLIST.length;i++)for(var model=BaseConst.GAMEMODELLIST[i],j=0;j<model.szgame.length;j++){var data=model.szgame[j];if(data.gtype==gtype)return data.showname}return"未知"}},{key:"GetGameGroupName",value:function(gtype){var model=BaseConst.GetGameModelByGtype(gtype);return _comfunc2.default.isNil(model)?"未知":model.group}},{key:"GetShowPos",value:function(chairno,chgno,maxno){var showpos=1;chairno<=0&&(chairno=1),null==maxno&&(maxno=4);for(var nextno=chairno;nextno!=chgno;)(nextno+=1)>maxno&&(nextno=1),showpos+=1;return showpos}},{key:"GetWeight",value:function(agv){for(var total=0,i=0;i<agv.length;i++)total+=agv[i];if(0==total)return-1;for(var _i3=0;_i3<agv.length;_i3++){var value=agv[_i3];if(Math.floor(Math.random()*total+1)<=value)return _i3+1;total-=value}return-1}},{key:"SetIconImg",value:function(obj,respath){if(obj)if(obj instanceof Laya.Image||obj instanceof Laya.Button){if(obj.skin==respath)return;obj.skin=respath}else(obj instanceof Laya.Sprite||obj instanceof Laya.Box)&&obj.loadImage(respath)}},{key:"ChkCanTurnCard",value:function(kindid,data,data1){return null}},{key:"IsRealNameOk",value:function(){var phoneok=!1,nowbind=_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone;nowbind&&nowbind.length>0&&(phoneok=!0);var realnameok=!1,data=_playerdata_mgr2.default.getInstance().getMe().m_Authentiation;return _comfunc2.default.isTable(data)&&data.code.length>0&&(realnameok=!0),!(!phoneok||!realnameok)}},{key:"SetSystemInfo",value:function(args){var model=args.system.split(" ");BaseConst.SYSTEMMODEL=model[0]}},{key:"ChkUserMail",value:function(agv){return agv}},{key:"CanShowGivingBtn",value:function(){return!0}}]),BaseConst}();exports.default=BaseConst,BaseConst.APPID=1e4,BaseConst.SYSTEMMODEL="window",BaseConst.DEBUG=!0,BaseConst.APP=!1,BaseConst.CHANNEL="",BaseConst.INVITECODE="",BaseConst.PLATFORM="std",BaseConst.LINKADDR="",BaseConst.NAMESPACE="",BaseConst.DOMAIN="null",BaseConst.CONFIGPATH="",BaseConst.CONFIG={},BaseConst.GEMSNAME="钻石",BaseConst.GOLDNAME="金币",BaseConst.MODELNAME="",BaseConst.GAMENAME="",BaseConst.GAMEMODELLIST=[],BaseConst.HEADIMG="lobby/user_head_0.png",BaseConst.ShareAddr={android:"",ios:""},BaseConst.AGENT_NOTICE="",BaseConst.AGENT_BUYINFO="购买钻石请关注微信公众号:",BaseConst.AGENT_FEEDBACK="产品建议或举报请联系客服\n微信号:\nQQ号:",BaseConst.ADURL="",BaseConst.GAMEVERSION="",BaseConst.SHAREMSG="",BaseConst.COPYINFO="",BaseConst.Invite_Code_Url="",BaseConst.Invite_Url="",BaseConst.BUYINFOAGV=[],BaseConst.ShakeMode=1,BaseConst.LanguareMode=1,BaseConst.AUTOOPEN=[],BaseConst.PAYMODE=["owner","AA","dear","club"],BaseConst.ONEMOREINFO="",BaseConst.PARTNERINFO="",BaseConst.CREATECLUBGEMS=50,BaseConst.CHARGEINFO="",BaseConst.ChannelTitle="",BaseConst.BASEMUSICVOLUME=.5,BaseConst.BASESOUNDVOLUME=.5,BaseConst.CLUBNAME="俱乐部",BaseConst.SHARECLUBNAME="<俱>",BaseConst.HEADEFFECTLIST=[],BaseConst.EXITKINDID=[],BaseConst.THIRDPARTY="",BaseConst.GOLDRATIO=1,BaseConst.VOUCHERS2RATIO=100,BaseConst.NOGAMBLING="本平台仅供娱乐，严禁赌博。如有发现任何赌博情况，本平台将上报公安依法处理。",BaseConst.DISSDIYMSG="(未打满1局,将返还开局的钻石!)",BaseConst.ROOMID="",BaseConst.NEEDAUTHEN=!0,BaseConst.WEEKRANKNAME1="参与周榜",BaseConst.WEEKRANKNAME2="开局周榜",BaseConst.MONTHRANKNAME="大赢家月榜",BaseConst.REWARDGOLDICON="lobby/marktop_coin.png",BaseConst.TICKETGOLDICON="lobby/marktop_coin.png"},{"../framework/data/playerdata_mgr":117,"../framework/utils/comfunc":144}],52:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_layaMaxUI=require("../../ui/layaMaxUI"),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_config2=_interopRequireDefault(require("../../framework/utils/config"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FlyText=function(_FlyTextUI){function FlyText(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FlyText),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FlyText.__proto__||Object.getPrototypeOf(FlyText)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FlyText,_layaMaxUI.FlyTextUI),_createClass(FlyText,null,[{key:"AddFlyText",value:function(msg){(new FlyText).PlayFly(msg)}}]),_createClass(FlyText,[{key:"PlayFly",value:function(msg){this.str.text=msg,this.bk.width=this.str.width+50,this.bk.graphics.drawRect(0,0,this.bk.width,this.bk.height,"#000000"),this.scaleX=this.scaleY=.1,this.x=_config2.default.viewSize.width/2;var layer=_UIMgr2.default.getInstance().GetLayer(4);layer?(layer.addChild(this),this.OnPlayFly(1)):this.destroy()}},{key:"OnPlayFly",value:function(mode){1==mode?Laya.Tween.to(this,{scaleX:1.2,scaleY:1.2},200,Laya.Ease.sineOut,Laya.Handler.create(this,this.OnPlayFly,[2])):2==mode?Laya.Tween.to(this,{scaleX:1,scaleY:1},100,Laya.Ease.sineOut,Laya.Handler.create(this,this.OnPlayFly,[3])):3==mode?Laya.Tween.to(this,{},300,null,Laya.Handler.create(this,this.OnPlayFly,[4])):4==mode?Laya.Tween.to(this,{alpha:0},500,Laya.Ease.sineOut,Laya.Handler.create(this,this.OnPlayFly,[5])):this.destroy()}}]),FlyText}();exports.default=FlyText},{"../../framework/ui/UIMgr":142,"../../framework/utils/config":145,"../../ui/layaMaxUI":178}],53:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gameconst2=_interopRequireDefault(require("../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HeadImg=function(_Laya$Image){function HeadImg(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HeadImg);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(HeadImg.__proto__||Object.getPrototypeOf(HeadImg)).call(this));return _this.anchorX=.5,_this.anchorY=.5,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(HeadImg,Laya.Image),_createClass(HeadImg,[{key:"DelThis",value:function(){this.m_BindObj=null,this.m_BackFun=null,this.destroy()}},{key:"SetData",value:function(uid,bindobj,backfun){this.m_BindObj=bindobj,this.m_BackFun=backfun,this.m_BindObj.addChild(this);var user=_playerdata_mgr2.default.getInstance().findData(uid);user?this.SetHeadData(user):(user=_playerdata_mgr2.default.getInstance().loadData(uid,null,!0)).isReady()?this.SetHeadData(user):user.addOnceEventListener("eve.DataReady",this,function(){this.SetHeadData(user)})}},{key:"SetHeadData",value:function(user){this.skin=user.m_UserData.m_vData.head_url||_gameconst2.default.HEADIMG,this.width=this.m_BindObj.width,this.height=this.m_BindObj.height,this.m_BackFun&&(this.m_BackFun.args=[user],this.m_BackFun.method.apply(this.m_BackFun.caller,this.m_BackFun.args))}}]),HeadImg}();exports.default=HeadImg},{"../../app/gameconst":5,"../../framework/data/playerdata_mgr":117}],54:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_tdf2=_interopRequireDefault(require("../../framework/utils/tdf")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HonorTaskMgr=function(){function HonorTaskMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HonorTaskMgr),this.LoadTDF()}return _createClass(HonorTaskMgr,null,[{key:"getInstance",value:function(){return HonorTaskMgr.instance||(HonorTaskMgr.instance=new HonorTaskMgr),HonorTaskMgr.instance}}]),_createClass(HonorTaskMgr,[{key:"LoadTDF",value:function(){this.m_szTask=[];var tdf=Laya.loader.getRes("data/task/honortask.json")||_tdf2.default.LoadTDF("data/task/honortask.tdf");if(tdf){for(var key in tdf){var value=tdf[key],data={id:key,name:value["名称"],kind:value["分类"],condition:value["条件"],reward:{gold:value["金币奖励"],gems:value["钻石奖励"],vouchers1:value["奖券奖励"],vouchers2:value["现金券"],itemlist:value["物品奖励"],real_item:value["实物奖励"]},icon:value["图标"],nameicon:value["名称图标"],intor:value["说明"],reviewshow:value["审核显示"]||0},szID=data.id.split("_");data.idx=szID[2],data.nkind=parseInt(data.kind);var agv=this.m_szTask[data.nkind];agv||(agv=[]),agv.push(data),this.m_szTask[data.nkind]=agv}for(var i=0;i<this.m_szTask.length;i++){this.m_szTask[i]&&this.m_szTask[i].sort(sorttask)}}function sorttask(data1,data2){return data1.idx<data2.idx?-1:data1.idx>data2.idx?1:0}}},{key:"FindTask",value:function(id){for(var i=0;i<this.m_szTask.length;i++){var agv=this.m_szTask[i];if(agv)for(var j=0;j<agv.length;j++){var data=agv[j];if(_comfunc2.default.isNil(id))return data;if(data.id==id)return data}}return null}}]),HonorTaskMgr}();exports.default=HonorTaskMgr},{"../../framework/utils/comfunc":144,"../../framework/utils/tdf":148}],55:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../../framework/gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var Hslider=function(_BaseObj){function Hslider(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Hslider);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Hslider.__proto__||Object.getPrototypeOf(Hslider)).call(this));return _this.uiobj=bindobj,_this.slidertop=_this.uiobj.slider.getChildByName("top"),_this.sliderbar=_this.uiobj.slider.getChildByName("bar"),_this.uiobj.on(Laya.Event.MOUSE_DOWN,_this,_this.OnTouchBegin),_this.sliderbar.on(Laya.Event.DRAG_MOVE,_this,_this.OnDragMove),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Hslider,_BaseObj3.default),_createClass(Hslider,[{key:"OnDelThis",value:function(){this.uiobj=null}},{key:"OnTouchBegin",value:function(event){var pos=event.target.getMousePoint();this.sliderbar.x=pos.x,this.RefreshMask(),this.dispatchEvent("OnSlider",this),this.sliderbar.startDrag(new Laya.Rectangle(this.uiobj.slider.x,this.sliderbar.y,this.uiobj.slider.width,0)),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.OnTouchEnd)}},{key:"OnTouchEnd",value:function(event){this.sliderbar.stopDrag(),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.OnTouchEnd)}},{key:"OnDragMove",value:function(event){this.RefreshMask(),this.dispatchEvent("OnSlider",this)}},{key:"RefreshMask",value:function(){this.slidertop.mask.graphics.clear(),this.slidertop.mask.graphics.drawRect(0,0,Math.max(this.sliderbar.x,1),this.slidertop.height,"#000000")}},{key:"setPercent",value:function(per){this.sliderbar.x=parseInt(per*this.uiobj.slider.width/100),this.RefreshMask()}},{key:"getPercent",value:function(){return parseInt(100*this.sliderbar.x/this.uiobj.slider.width)}}]),Hslider}();exports.default=Hslider},{"../../framework/gtea/BaseObj":126}],56:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../../framework/gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var LoadingBar=function(_BaseObj){function LoadingBar(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LoadingBar);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(LoadingBar.__proto__||Object.getPrototypeOf(LoadingBar)).call(this));return _this.uiobj=bindobj,_this.progress=_this.uiobj.getChildByName("progress"),_this.per=_this.uiobj.getChildByName("per"),_this.msg=_this.uiobj.getChildByName("msg"),_this.maxwidth=_this.progress.width,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(LoadingBar,_BaseObj3.default),_createClass(LoadingBar,[{key:"Clear",value:function(){this.msg&&(this.msg.text=""),this.setPercent(0)}},{key:"RefreshMask",value:function(width){this.progress.mask.graphics.clear(),this.progress.mask.graphics.drawRect(0,0,Math.max(width,1),this.progress.height,"#000000")}},{key:"setPercent",value:function(per){this.per.text=per+"%";var width=parseInt(this.maxwidth*per/100);this.RefreshMask(width)}},{key:"SetMsg",value:function(str){this.msg&&(this.msg.text=str)}}]),LoadingBar}();exports.default=LoadingBar},{"../../framework/gtea/BaseObj":126}],57:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../framework/gtea/BaseObj")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_gameconst2=_interopRequireDefault(require("../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NoticeUI=function(_BaseObj){function NoticeUI(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NoticeUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(NoticeUI.__proto__||Object.getPrototypeOf(NoticeUI)).call(this));_this.m_BindObj=bindobj;var panel=bindobj.panel||bindobj.getChildByName("panel");return _this.m_Msg=panel.getChildByName("text"),_this.m_MsgBox=panel.getChildByName("textbox"),_this.m_MsgBox&&(_this.m_Msg=_this.m_MsgBox.getChildByName("text"),_this.m_Msg.visible=!1),_this.m_MarkSpeaker=bindobj.Mark_Speaker||bindobj.getChildByName("Mark_Speaker"),_this.m_bPlay=!1,_this.m_nPlayIdx=0,_this.m_szMsgList=[],_this.m_nWidth=panel.width,_this.m_nHeight=panel.height,_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(NoticeUI,_BaseObj3.default),_createClass(NoticeUI,[{key:"OnDelThis",value:function(){this.Clear(),this.m_szMsgList=[],this.m_BindObj=null}},{key:"Clear",value:function(){this.PlayEnd(),this.m_BindObj.visible=!1}},{key:"PlayEnd",value:function(){this.killTimer(this.m_Timer),this.m_MsgBox&&this.m_MsgBox.removeChildren(),this.m_Msg.text="",this.m_bPlay=!1,this.m_MarkSpeaker.stop()}},{key:"AddPlayText",value:function(){this.m_szMsgList&&0!=this.m_szMsgList.length&&(0==this.m_nPlayIdx?this.m_nPlayIdx=1:this.m_nPlayIdx=this.m_nPlayIdx+1,this.m_nPlayIdx>this.m_szMsgList.length&&(this.m_nPlayIdx=1),this.OnPlay())}},{key:"OnPlay",value:function(){if(!this.m_bPlay){var data=this.GetPlayData();if(this.m_MsgBox){for(var agv=_comfunc2.default.splitcolorString(data.context),xpos=0,i=0;i<agv.length;i++){var tdata=agv[i],text=new Laya.Label(tdata.text);text.color=tdata.color||this.m_Msg.color,text.fontSize=this.m_Msg.fontSize,text.anchorX=this.m_Msg.anchorX,text.anchorY=this.m_Msg.anchorY,text.x=xpos,text.y=this.m_Msg.y,xpos=text.x+text.width,this.m_MsgBox.addChild(text)}this.m_MsgBox.x=this.m_nWidth,this.m_MsgBox.y=this.m_nHeight/2}else this.m_Msg.text=data.context,this.m_Msg.x=this.m_nWidth,this.m_Msg.y=this.m_nHeight/2;this.m_MarkSpeaker.play(0,!0),this.m_Timer=this.loopCall(-1,15,this.OnFrame),this.m_bPlay=!0,this.m_BindObj.visible=!0}}},{key:"GetPlayData",value:function(){return this.m_szMsgList[this.m_nPlayIdx-1]}},{key:"OnFrame",value:function(){if(this.m_bPlay){var moveobj=this.m_MsgBox||this.m_Msg;if(moveobj.x+moveobj.width<0)return this.PlayEnd(),void this.AddPlayText();moveobj.x-=2}}},{key:"OnRefreshMsg",value:function(agv){this.PlayEnd(),this.m_szMsgList=_comfunc2.default.clone(agv),0==this.m_szMsgList.length&&""!=_gameconst2.default.AGENT_NOTICE&&this.m_szMsgList.push({context:_gameconst2.default.AGENT_NOTICE}),this.m_nPlayIdx=0,this.AddPlayText(),this.m_BindObj.visible=!0}},{key:"OnAddMsg",value:function(agv){this.m_szMsgList.push(agv)}}]),NoticeUI}();exports.default=NoticeUI},{"../../app/gameconst":5,"../../framework/gtea/BaseObj":126,"../../framework/utils/comfunc":144}],58:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NoticeUI3=_interopRequireDefault(require("./NoticeUI")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OnceNoticeUI=function(_NoticeUI){function OnceNoticeUI(bindobj){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,OnceNoticeUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(OnceNoticeUI.__proto__||Object.getPrototypeOf(OnceNoticeUI)).call(this,bindobj))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(OnceNoticeUI,_NoticeUI3.default),_createClass(OnceNoticeUI,[{key:"OnDelThis",value:function(){_playerdata_mgr2.default.getInstance().UnRegSvrCallBack("消息广播",this),function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0}(OnceNoticeUI.prototype.__proto__||Object.getPrototypeOf(OnceNoticeUI.prototype),"OnDelThis",this).call(this)}},{key:"AddPlayText",value:function(){0!=this.m_szMsgList.length?this.OnPlay():this.Clear()}},{key:"GetPlayData",value:function(){return this.m_szMsgList.shift()}},{key:"netOnOnceNotice",value:function(agv){this.m_BindObj&&(this.m_szMsgList.push(agv),this.OnPlay())}},{key:"netOnBillboardMsg",value:function(agv){this.m_BindObj&&(this.m_szMsgList.push(agv),this.OnPlay())}},{key:"OpenListener",value:function(){this.m_BindObj&&_playerdata_mgr2.default.getInstance().RegSvrCallBack("消息广播",this)}}]),OnceNoticeUI}();exports.default=OnceNoticeUI},{"../../framework/data/playerdata_mgr":117,"./NoticeUI":57}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../framework/gtea/BaseObj")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PageView=function(_BaseObj){function PageView(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PageView);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PageView.__proto__||Object.getPrototypeOf(PageView)).call(this));return _this.m_BindObj=bindobj,bindobj.mask=new Laya.Sprite,bindobj.mask.graphics.drawRect(0,0,bindobj.width,bindobj.height,"#000000"),_this.m_szPage=[],_this.m_nMoveSpeed=500,_this.m_nAutoTime=0,_this.m_BindObj.on(Laya.Event.MOUSE_DOWN,_this,_this.OnMouseDown),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PageView,_BaseObj3.default),_createClass(PageView,[{key:"AddPageItem",value:function(item){item.idx=this.m_szPage.length,this.m_szPage[item.idx]=item,this.m_BindObj.addChild(item)}},{key:"ClearPage",value:function(){this.m_szPage=[],this.killTimer(this.m_Timer),this.killAllTween(),this.m_BindObj.removeChildren()}},{key:"ResetPage",value:function(){for(var i=0;i<this.m_szPage.length;i++){var page=this.m_szPage[i];page.x=0,page.visible=!1}this.killAllTween()}},{key:"ShowPage",value:function(idx){this.ResetPage(),this.m_nCurIdx=idx,this.m_CurPage=this.m_szPage[idx],this.m_CurPage.visible=!0,this.m_nAutoTime>0&&this.m_szPage.length>1&&(this.m_Timer=this.timerCall(this.m_nAutoTime,this.TweenTo,[this.m_nCurIdx+1]))}},{key:"RefreshShow",value:function(){if(this.m_CurPage){var nextpage=this.GetNextPage();nextpage&&(nextpage.x=this.m_CurPage.x<0?this.m_CurPage.x+this.m_CurPage.width:this.m_CurPage.x-nextpage.width,nextpage.visible=!0)}}},{key:"TweenTo",value:function(idx){if(this.killTimer(this.m_Timer),this.m_CurPage){var nextpage=this.GetNextPage(idx);if(nextpage){var endx=this.m_CurPage.idx<idx?-this.m_BindObj.width:this.m_BindObj.width;this.TweenLite(this.m_CurPage,{x:endx},this.m_nMoveSpeed,Laya.Ease.sineOut,Laya.Handler.create(this,this.ShowPage,[nextpage.idx])),nextpage.x=this.m_CurPage.idx<idx?this.m_CurPage.x+this.m_CurPage.width:this.m_CurPage.x-nextpage.width,nextpage.visible=!0,this.TweenLite(nextpage,{x:0},this.m_nMoveSpeed,Laya.Ease.sineOut)}}}},{key:"GetNextPage",value:function(idx){if(!_comfunc2.default.isNil(idx))return idx<0?idx=this.m_szPage.length-1:idx>=this.m_szPage.length&&(idx=0),this.m_szPage[idx];if(!this.m_CurPage)return null;idx=-1;return this.m_CurPage.x>0?(idx=this.m_CurPage.idx-1)<0&&(idx=this.m_szPage.length-1):this.m_CurPage.x<0&&(idx=this.m_CurPage.idx+1)>=this.m_szPage.length&&(idx=0),this.m_szPage[idx]}},{key:"OnMouseDown",value:function(event){this.m_szPage.length<=1||(this.m_CurPage.startDrag(new Laya.Rectangle(-this.m_BindObj.width,0,2*this.m_BindObj.width,0)),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.RefreshShow),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.OnMouseUp))}},{key:"OnMouseUp",value:function(event){this.m_CurPage.stopDrag(),this.m_CurPage.x<0?this.TweenTo(this.m_CurPage.idx+1):this.m_CurPage.x>0&&this.TweenTo(this.m_CurPage.idx-1),Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.RefreshShow),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.OnMouseUp)}}]),PageView}();exports.default=PageView},{"../../framework/gtea/BaseObj":126,"../../framework/utils/comfunc":144}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("./soundmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SysDlg=function(_BaseUI){function SysDlg(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SysDlg),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SysDlg.__proto__||Object.getPrototypeOf(SysDlg)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SysDlg,_BaseUI3.default),_createClass(SysDlg,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(SysDlg.prototype.__proto__||Object.getPrototypeOf(SysDlg.prototype),"OnCreate",this).call(this),this.uiobj.Btn_Close.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.Btn_Ok.on(Laya.Event.CLICK,this,this.OnClickBtn)}},{key:"OnClose",value:function(){this.ClearAutoClose(),this.obj=null,this.okfun=null,this.cancelfun=null}},{key:"setDlgInfo",value:function(agv){this.obj=agv.obj,this.okfun=agv.okfun,this.cancelfun=agv.cancelfun,this.args=agv.args,this.uiobj.Text_info.text=agv.msg,agv.closetime?this.AutoClose(agv.closetime):this.ClearAutoClose()}},{key:"ClearAutoClose",value:function(){this.closetimer&&this.killTimer(this.closetimer),this.closetimer=null}},{key:"AutoClose",value:function(time){this.ClearAutoClose(),this.closetimer=this.timerCall(time,function(){_UIMgr2.default.getInstance().CloseUI("系统确认")})}},{key:"OnClickBtn",value:function(event){if(_soundmgr2.default.getInstance().playSound("snd/button.mp3"),event.target===this.uiobj.Btn_Close){if(this.obj&&this.cancelfun){var handler=Laya.Handler.create(this.obj,this.cancelfun,this.args);return void handler.method.apply(handler.caller,handler.args)}}else if(event.target===this.uiobj.Btn_Ok&&this.obj&&this.okfun){var _handler=Laya.Handler.create(this.obj,this.okfun,this.args);return void _handler.method.apply(_handler.caller,_handler.args)}_UIMgr2.default.getInstance().CloseUI("系统确认")}}]),SysDlg}();exports.default=SysDlg},{"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"./soundmgr":65}],61:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../framework/gtea/BaseObj")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_HeadImg2=_interopRequireDefault(require("./HeadImg"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UserHead=function(_BaseObj){function UserHead(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UserHead);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(UserHead.__proto__||Object.getPrototypeOf(UserHead)).call(this));return _this.m_BindObj=bindobj,_this.m_BkImg=_this.m_BindObj.player_frame,_this.m_HeadBk=_this.m_BindObj.Spr_head,_this.m_HeadFrame=_this.m_BindObj.user_headframe01,_this.m_HeadFrame&&(_this.m_HeadFrame.visible=!1),_this.m_MarkRank=_this.m_BindObj.mark_rank,_this.m_MarkRank&&(_this.m_MarkRank.visible=!1),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(UserHead,_BaseObj3.default),_createClass(UserHead,[{key:"OnDelThis",value:function(){this.Clear(),this.m_BkImg=null,this.m_HeadBk=null,this.m_HeadFrame=null,this.m_MarkRank=null,this.m_BindObj=null}},{key:"Clear",value:function(){this.m_HeadImg&&this.m_HeadImg.DelThis(),this.m_HeadImg=null,this.m_HeadFrame&&(this.m_HeadFrame.visible=!1),this.m_MarkRank&&(this.m_MarkRank.visible=!1),this.m_BindObj.visible=!1}},{key:"HideHead",value:function(){this.m_HeadBk.visible=!1,this.m_HeadFrame&&(this.m_HeadFrame.visible=!1)}},{key:"setHeadByUID",value:function(uid){this.Clear(),this.m_HeadImg=new _HeadImg2.default,this.m_HeadImg.centerX=0,this.m_HeadImg.centerY=0,this.m_HeadImg.SetData(uid,this.m_HeadBk,Laya.Handler.create(this,this.RefreshHeadFrame)),this.m_HeadBk.visible=!0,this.m_BindObj.visible=!0}},{key:"setImgByIdx",value:function(idx){this.Clear(),this.m_HeadBk instanceof Laya.Clip&&(_comfunc2.default.isNil(idx)&&(idx=0),(idx<0||idx>=this.m_HeadBk.total)&&(idx=0),this.m_HeadBk.index=idx),this.m_HeadBk.visible=!0,this.m_BindObj.visible=!0}},{key:"RefreshHeadFrame",value:function(user){if(_comfunc2.default.isNil(user.m_UserData.m_vData.head_url)&&_gameconst2.default.USEHEADIDX&&this.setImgByIdx(user.m_UserData.m_vData.headidx),this.m_HeadFrame){var data=user.m_UserData.getUsedHeadFrameData();data?(_gameconst2.default.SetIconImg(this.m_HeadFrame,"avatar/headframe_"+data.itemid+".png"),this.m_HeadFrame.visible=!0):this.m_HeadFrame.visible=!1}}},{key:"ShowMarkRank",value:function(data){if(this.m_MarkRank&&data){var file="avatar/rankmark"+(data.m_nRank||data.rank)+".png";_gameconst2.default.SetIconImg(this.m_MarkRank,file),this.m_MarkRank.visible=!0}}}]),UserHead}();exports.default=UserHead},{"../../app/gameconst":5,"../../framework/gtea/BaseObj":126,"../../framework/utils/comfunc":144,"./HeadImg":53}],62:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WaitDlg=function(_BaseUI){function WaitDlg(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WaitDlg),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(WaitDlg.__proto__||Object.getPrototypeOf(WaitDlg)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(WaitDlg,_BaseUI3.default),_createClass(WaitDlg,[{key:"OnOpen",value:function(){this.uiobj.Text_info.text=""}},{key:"OnClose",value:function(){this.killTimer(this.timerkey),this.timerkey=null}},{key:"OnSetWaitText",value:function(agv){var msg=agv[0],time=agv[1];this.uiobj.Text_info.text=msg,this.uiobj.Text_bg.width=this.uiobj.Text_info.width+50,this.uiobj.Text_bg.height=this.uiobj.Text_info.height+10,this.timerkey=this.timerCall(time,this.TimerClose)}},{key:"TimerClose",value:function(){_UIMgr2.default.getInstance().CloseUI("等待界面")}}]),WaitDlg}();exports.default=WaitDlg},{"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142}],63:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_bridge2=_interopRequireDefault(require("./bridge")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gameconst2=_interopRequireDefault(require("../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AppMethod=function(){function AppMethod(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AppMethod)}return _createClass(AppMethod,null,[{key:"unifiedLogin",value:function(channel,obj,backfun){_bridge2.default.toStartEvent("UnifiedLogin",[{channel:channel}],obj,backfun)}},{key:"unifiedPay",value:function(args,channel,obj,backfun){_bridge2.default.toStartEvent("UnifiedPay",[channel,args],obj,backfun)}},{key:"unifiedShare",value:function(args,obj,backfun){_bridge2.default.toStartEvent("UnifiedShare",[args],obj,backfun)}},{key:"gameReady",value:function(){_bridge2.default.toStartEvent("gameReady",[],null,null)}},{key:"openSystemBrowser",value:function(url,obj,func){_bridge2.default.bridgeObject?_bridge2.default.toStartEvent("OpenSystemBrowser",[url],obj,func):Laya.Browser.window.open(url)}},{key:"openWindow",value:function(url){_bridge2.default.bridgeObject?_bridge2.default.toStartEvent("OpenWindow",[url],null,null):Laya.Browser.window.open(url)}},{key:"getSupportedPayType",value:function(obj,backfun){_bridge2.default.toStartEvent("getSupportedPayType",[],obj,backfun)}},{key:"initTalkingData",value:function(appid){_bridge2.default.toStartEvent("initTalkingData",[appid],null,null)}},{key:"copyOpenWeChat",value:function(text){_bridge2.default.toStartEvent("SetClipboard",[text],this,function(obj,response){0===response.code&&_bridge2.default.toStartEvent("OpenClient",["wechat"],null,null)})}},{key:"copy",value:function(text){var obj=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,backfun=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_bridge2.default.toStartEvent("SetClipboard",[text],obj,backfun)}},{key:"openWechat",value:function(){_bridge2.default.toStartEvent("OpenClient",["wechat"],null,null)}},{key:"getAppVer",value:function(obj,backfun){_bridge2.default.toStartEvent("getAppVer",[],obj,backfun)}},{key:"setQiyuUserInfo",value:function(){_bridge2.default.toStartEvent("setQiyuUserInfo",[_playerdata_mgr2.default.getInstance().getMeUID(),_playerdata_mgr2.default.getInstance().getMeNick()],null,null)}},{key:"openQiyu",value:function(){_bridge2.default.toStartEvent("openQiyu",[],null,null)}},{key:"logoutQiyu",value:function(){_bridge2.default.toStartEvent("logoutQiyu",[],null,null)}},{key:"getDeviceInfo",value:function(){_bridge2.default.toStartEvent("getDeviceInfo",[],this,function(obj,response){0===response.code&&(_gameconst2.default.DeviceData=response.data,_gameconst2.default.DeviceData.channel=_gameconst2.default.CHANNEL)})}},{key:"getThirdParty",value:function(){_bridge2.default.toStartEvent("getSDK",[],this,function(obj,response){0===response.code&&(_gameconst2.default.THIRDPARTY=response.data)})}},{key:"unifiedSendUserInfo",value:function(channel,args){_bridge2.default.toStartEvent("UnifiedSendUserInfo",[{channel:channel,data:args}],null,null)}},{key:"unifiedCheckRealName",value:function(obj,func){_bridge2.default.toStartEvent("UnifiedCheckRealName",[],obj,func)}},{key:"getAppConfig",value:function(obj,func){_bridge2.default.toStartEvent("getAppConfig",[],obj,func)}},{key:"getBundleAndAppname",value:function(obj,func){_bridge2.default.toStartEvent("getBundleAndAppname",[],obj,func)}},{key:"shutdownApp",value:function(){_bridge2.default.toStartEvent("shutdownApp",[],null,null)}},{key:"getSafeInset",value:function(obj,func){_bridge2.default.toStartEvent("getSafeInset",[],obj,func)}},{key:"getAppStoreProducts",value:function(productIds,obj,func){_bridge2.default.toStartEvent("getAppStoreProducts",[productIds],obj,func)}},{key:"buyAppStoreProduct",value:function(productId,obj,func){_bridge2.default.toStartEvent("buyAppStoreProduct",[productId],obj,func)}},{key:"usrReg",value:function(){_bridge2.default.toStartEvent("usrReg",[],null,null)}},{key:"usrPay",value:function(amount){_bridge2.default.toStartEvent("usrPay",[amount],null,null)}}]),AppMethod}();exports.default=AppMethod},{"../../app/gameconst":5,"../../framework/data/playerdata_mgr":117,"./bridge":64}],64:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Bridge=function(){function Bridge(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Bridge)}return _createClass(Bridge,null,[{key:"initBridge",value:function(){"gbxBridge"in window&&(Bridge.bridgeObject=window.gbxBridge),Bridge.bridgeObject&&(Bridge.bridgeObject.sendCallback=function(callbackID,response){0==callbackID&&(callbackID=Bridge.sharecallbackid);var cbFunction=Bridge.callbackFunctions[callbackID];cbFunction&&cbFunction.backfun&&(response=JSON.parse(response),cbFunction.backfun.call(cbFunction.obj,cbFunction.obj,response))},Bridge.bridgeObject.callFunction=function(args){var jsonObject=JSON.parse(args),funcName=jsonObject.name,agv=jsonObject.args,funcdata=Bridge.callFunctions[funcName];funcdata&&funcdata.function&&funcdata.function.call(funcdata.obj,funcdata.obj,agv)})}},{key:"toStartEvent",value:function(eventName,args,obj,backfun){Bridge.bridgeObject||Bridge.initBridge();var id=++Bridge.cbid;if(backfun&&(Bridge.callbackFunctions[id]={backfun:backfun,obj:obj},"UnifiedShare"==eventName&&(Bridge.sharecallbackid=id)),Bridge.bridgeObject){var eventArgs={name:eventName,callbackId:id,args:args};Bridge.bridgeObject.startEvent(JSON.stringify(eventArgs))}}},{key:"registFunction",value:function(name,fn,obj){Bridge.bridgeObject||Bridge.initBridge(),Bridge.callFunctions[name]={function:fn,obj:obj}}}]),Bridge}();exports.default=Bridge,Bridge.bridgeObject,Bridge.callbackFunctions={},Bridge.callFunctions={},Bridge.cbid=0,Bridge.sharecallbackid=-1,Bridge.initBridge()},{}],65:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gameconst2=_interopRequireDefault(require("../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SoundMgr=function(){function SoundMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SoundMgr),Laya.SoundManager.autoReleaseSound=!1,this.initSet()}return _createClass(SoundMgr,null,[{key:"getInstance",value:function(){return SoundMgr.instance||(SoundMgr.instance=new SoundMgr),SoundMgr.instance}}]),_createClass(SoundMgr,[{key:"initSet",value:function(){var musicvolume=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("musicvolume",_gameconst2.default.BASEMUSICVOLUME),soundvolume=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("soundvolume",_gameconst2.default.BASESOUNDVOLUME);this.setBGMVolume(musicvolume),this.setSoundVolume(soundvolume)}},{key:"getMuted",value:function(){return Laya.SoundManager.muted}},{key:"setMuted",value:function(v){Laya.SoundManager.muted=v}},{key:"getSoundMuted",value:function(){return Laya.SoundManager.soundMuted}},{key:"setSoundMuted",value:function(v){Laya.SoundManager.soundMuted=v}},{key:"getMusicMuted",value:function(){return Laya.SoundManager.musicMuted}},{key:"setMusicMuted",value:function(v){Laya.SoundManager.musicMuted=v}},{key:"playBGM",value:function(url,obj,backfun){return backfun=void 0!==backfun?backfun:null,Laya.SoundManager.playMusic(url,0,Laya.Handler.create(obj,backfun))}},{key:"playSound",value:function(url,obj,backfun){return 0==this.soundvolume?null:(backfun=void 0!==backfun?backfun:null,Laya.SoundManager.playSound(url,1,Laya.Handler.create(obj,backfun)))}},{key:"destroySound",value:function(url){Laya.SoundManager.destroySound(url)}},{key:"addChannel",value:function(soundChannel){Laya.SoundManager.addChannel(soundChannel)}},{key:"removeChannel",value:function(soundChannel){Laya.SoundManager.removeChannel(soundChannel)}},{key:"setBGMVolume",value:function(volume){Laya.SoundManager.setMusicVolume(volume)}},{key:"setSoundVolume",value:function(volume){this.soundvolume=volume,Laya.SoundManager.setSoundVolume(volume)}},{key:"stopAll",value:function(){Laya.SoundManager.stopAll()}},{key:"stopAllSound",value:function(){Laya.SoundManager.stopAllSound()}},{key:"stopBGM",value:function(){Laya.SoundManager.stopMusic()}},{key:"stopSound",value:function(url){Laya.SoundManager.stopSound(url)}}]),SoundMgr}();exports.default=SoundMgr},{"../../app/gameconst":5,"../../framework/data/playerdata_mgr":117}],66:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../framework/gtea/BaseObj")),_matchdef2=_interopRequireDefault(require("../../framework/match/matchdef")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameChair=function(_BaseObj){function GameChair(ctrl,idx){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameChair);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameChair.__proto__||Object.getPrototypeOf(GameChair)).call(this));return _this.m_GameCtrl=ctrl,_this.m_nScore=0,_this.m_nChairNo=idx,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameChair,_BaseObj3.default),_createClass(GameChair,[{key:"OnDelThis",value:function(){this.m_GameCtrl=null,this.m_PlayerData=null}},{key:"setData",value:function(v){this.m_GameCtrl.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_FNG&&v.udata&&delete v.udata.MatchScore,this.m_nStatus=v.status,this.m_bBreakLine=v.is_breakline,this.m_bHosting=v.is_hosting,this.m_bTrust=v.is_trust,this.m_szChairData=v;var pdata=_playerdata_mgr2.default.getInstance().toData(v.udata);this.OnPlayerChg(pdata),this.setMatchData(v.match),this.setGameData(v.gdata)}},{key:"setUData",value:function(v){var pdata=_playerdata_mgr2.default.getInstance().toData(v.udata);this.OnPlayerChg(pdata)}},{key:"setStatus",value:function(v){this.m_nStatus=v.status,this.m_bBreakLine=v.is_breakline,this.m_bHosting=v.is_hosting,this.m_bTrust=v.is_trust,this.OnPlayerChg(this.m_PlayerData)}},{key:"OnPlayerChg",value:function(pdata){this.m_PlayerData=pdata}},{key:"setGameData",value:function(data){}},{key:"setMatchData",value:function(data){data&&data.score&&(this.m_nScore=data.score)}},{key:"getChairData",value:function(){return this.m_szChairData}},{key:"getChairUID",value:function(){var data=this.m_szChairData;return data&&data.udata&&data.udata.UserData?data.udata.UserData.uid:null}},{key:"empty",value:function(){return null==this.m_PlayerData}},{key:"getUID",value:function(){return this.m_PlayerData?this.m_PlayerData.m_nUID:0}},{key:"getNick",value:function(){return this.m_PlayerData?this.m_PlayerData.getNick():""}}]),GameChair}();exports.default=GameChair},{"../../framework/data/playerdata_mgr":117,"../../framework/gtea/BaseObj":126,"../../framework/match/matchdef":132}],67:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../framework/gtea/BaseObj")),_matchdef2=_interopRequireDefault(require("../../framework/match/matchdef")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_gamemodelmgr2=_interopRequireDefault(require("../../framework/gamemodel/gamemodelmgr")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_FlyText2=_interopRequireDefault(require("../com/FlyText")),_clubsys2=_interopRequireDefault(require("../../framework/data/club/clubsys")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_gamechair2=_interopRequireDefault(require("./gamechair")),_gameuser2=_interopRequireDefault(require("./gameuser"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameCtrl=function(_BaseObj){function GameCtrl(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameCtrl);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameCtrl.__proto__||Object.getPrototypeOf(GameCtrl)).call(this));return _this.m_nChairNum=4,_this.m_nGameRunTimes=0,_this.m_nMaxRound=1,_this.m_bVoicePlay=!1,_this.m_szVoiceChat=[],_this.m_szMagicShielding=[],_this.m_DissData=null,_this.m_bPlaying=!1,_this.m_bWatching=!1,_this.m_VideoID=null,_this.m_MatchMode=_matchdef2.default.MATCH_MODE.MM_UNKNOWN,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameCtrl,_BaseObj3.default),_createClass(GameCtrl,[{key:"OnDelThis",value:function(){this.m_DeskUser&&this.m_DeskUser.DelThis();for(var i=0;i<this.m_szChairs.length;i++)this.m_szChairs[i].DelThis();this.m_szChairs=[],this.m_szVoiceChat=[],this.m_DissData=null,this.m_GameDesk=null,this.m_DeskUser=null,this.m_MatchObj=null,this.m_VideoID=null,this.m_GameChairClass=null,this.m_GameUserClass=null}},{key:"OnCreate",value:function(desk){this.m_GameChairClass||(this.m_GameChairClass=_gamechair2.default),this.m_szChairs=[];for(var i=0;i<this.m_nChairNum;i++)this.m_szChairs[i]=new this.m_GameChairClass(this,i+1);this.m_GameDesk=desk}},{key:"StartGameTimer",value:function(time,backfun,agv){this.KillGameTimer(),this.m_GameTimer=this.timerCall(time,backfun,agv)}},{key:"KillGameTimer",value:function(){this.killTimer(this.m_GameTimer),this.m_GameTimer=null}},{key:"getChair",value:function(chairno){if(chairno)return chairno>=1&&chairno<=this.m_szChairs.length?this.m_szChairs[chairno-1]:null}},{key:"OnInDesk",value:function(agv){this.m_DeskUser||(this.m_GameUserClass||(this.m_GameUserClass=_gameuser2.default),this.m_MatchObj=agv.matchobj,this.m_MatchMode=this.m_GameDesk.m_nGameType,this.m_DeskUser=new this.m_GameUserClass(this),this.m_DeskUser.JoinDesk(agv.sname,agv.gname,agv.desk,agv.chair))}},{key:"OnSetDeskInfo",value:function(agv){this.m_GameStatus=agv[0],this.OnSetCfgData(agv[1]);for(var chairdata=agv[3],i=0;i<this.m_nChairNum;i++){this.m_szChairs[i].setData(chairdata[i])}this.OnSetGameData(agv[2]);var matchdata=agv[4];matchdata&&this.OnSetMatchData(matchdata)}},{key:"OnSetCfgData",value:function(data){}},{key:"OnSetGameData",value:function(data){}},{key:"OnChairStatusChg",value:function(agv){var chair=this.getChair(agv.chairno);chair&&chair.setStatus(agv)}},{key:"OnChairInfoChg",value:function(agv,ispb){var chair=this.getChair(agv.chairno);chair&&!ispb&&chair.setData(agv)}},{key:"OnChairUsrDataChg",value:function(agv){var chair=this.getChair(agv.chairno);chair&&chair.setUData(agv)}},{key:"OnSetMatchData",value:function(data){data&&(this.m_VideoID=data.videoid)}},{key:"OnUserReady",value:function(agv){}},{key:"OnGameStart",value:function(agv){this.m_bPlaying=!0}},{key:"OnGameEnd",value:function(agv){this.m_bPlaying=!1}},{key:"OnUsrWatch",value:function(agv){this.m_bWatching=!0}},{key:"OnUserChat",value:function(agv){var chair=this.getChair(agv.chaino);chair&&!chair.empty()&&(agv.uid=chair.m_PlayerData.m_nUID,agv.nick=chair.m_PlayerData.getNick(),this.m_GameDesk&&this.m_GameDesk.AddChatReplay(1,agv))}},{key:"OnUserEmoji",value:function(agv){}},{key:"OnUserMagicEmoji",value:function(agv){}},{key:"OnUserVoiceChat",value:function(agv){agv.chair<=0||(this.m_szVoiceChat.push(agv),this.PlayUserVoiceChat(),this.m_GameDesk&&this.m_GameDesk.AddChatReplay(3,agv))}},{key:"PlayUserVoiceChat",value:function(){if(!this.m_bVoicePlay){var agv=this.m_szVoiceChat.shift(),time=Math.ceil(agv.timelen/1e3);this.OnPlayUserVoice(agv.chair,time),this.m_bVoicePlay=!0,this.timerCall(1e3*time,this.PlayUserVoiceEnd,agv)}}},{key:"PlayUserVoiceEnd",value:function(agv){this.m_bVoicePlay=!1,this.OnPlayUserVoiceEnd(agv.chair),0!=this.m_szVoiceChat.length&&this.PlayUserVoiceChat()}},{key:"OnPlayUserVoice",value:function(chairno,time){}},{key:"OnPlayUserVoiceEnd",value:function(chairno){}},{key:"ChkIsSameDesk",value:function(){return!0}},{key:"OnPingInfo",value:function(agv){var ping=agv[0],lv=1;return ping<=500?lv=5:ping<=700?lv=4:ping<=1e3?lv=3:ping<=8e3&&(lv=2),lv}},{key:"GetMeMatchGameData",value:function(){if(!this.m_MatchObj)return null;for(var key in this.m_MatchObj.m_szGameData){var data=this.m_MatchObj.m_szGameData[key];if(Number(key)==_playerdata_mgr2.default.getInstance().getMeUID())return data}return null}},{key:"CallSvr",value:function(evename,agv){if(_comfunc2.default.ObjIsValid(this.m_DeskUser)){if("MagicEmoji"==evename){var nowtime=new Date;if(this.m_SendMagicTime)if(_comfunc2.default.subAsSec(nowtime,this.m_SendMagicTime)<10)return void this.OnUserMagicEmoji(agv);this.m_SendMagicTime=nowtime}this.m_DeskUser.ToS(evename,agv)}}},{key:"DissDesk",value:function(){if(_comfunc2.default.ObjIsValid(this.m_DeskUser))if(this.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_DIY)if(this.m_DissData)this.OpenDissolution();else{var msg="你是否确定要解散房间?";0==this.m_nGameRunTimes&&(msg=msg+"\n"+_gameconst2.default.DISSDIYMSG),_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:msg,obj:this,okfun:function(){_comfunc2.default.ObjIsValid(this)&&this.CallSvr("DissDesk",[this.MeIsClubCEO()]),_UIMgr2.default.getInstance().CloseUI("系统确认")},cancelfun:function(){_UIMgr2.default.getInstance().CloseUI("系统确认")}},!0,!0)}else this.m_GameDesk.ExitGame()}},{key:"OnQueDissDesk",value:function(agv){this.m_DissData=agv,_comfunc2.default.ObjIsValid(this.m_DeskUser)&&(this.m_DissData.owner.uid==_playerdata_mgr2.default.getInstance().getMeUID()&&_FlyText2.default.AddFlyText("已成功提出解散申请,等待其他玩家确认!"),this.OpenDissolution())}},{key:"OpenDissolution",value:function(){this.m_DissData&&(this.m_DissData.maxnum=this.m_nChairNum,this.m_DissData.iswatching=this.m_bWatching,_UIMgr2.default.getInstance().UIEvent("解散房间","SetData",this.m_DissData,!0,!0))}},{key:"OnCheckIpLocation",value:function(agv){agv&&_UIMgr2.default.getInstance().UIEvent("检测界面","SetData",agv,!0,!0)}},{key:"OnAutoDissDesk",value:function(agv){_FlyText2.default.AddFlyText(agv[0]);var showend=!1;agv[1]&&(showend=!0,_UIMgr2.default.getInstance().UIEvent("大厅界面","SetOverData",{modelname:_gameconst2.default.MODELNAME,data:agv[1]}));var clubID=void 0;"club"==this.m_MatchObj.getOwnerType()&&(clubID=this.m_MatchObj.getOwner()),this.m_MatchObj.m_Status=_matchdef2.default.MATCH_STATUS.MST_CANCEL,_gamemodelmgr2.default.getInstance().ExitGameRoom(!1),!showend&&clubID&&_UIMgr2.default.getInstance().UIEvent("大厅界面","OpenClubUI",{id:clubID})}},{key:"GetEmptyChairNum",value:function(){for(var num=0,i=0;i<this.m_szChairs.length;i++){this.m_szChairs[i].empty()&&(num+=1)}return num}},{key:"ChkGamePlaying",value:function(){return!!(this.m_nGameRunTimes>0||this.m_bPlaying||3==this.m_GameStatus)}},{key:"MeIsClubCEO",value:function(){if(!_comfunc2.default.ObjIsValid(this.m_MatchObj))return!1;if(this.m_MatchObj.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_DIY)return!1;if("club"!=this.m_MatchObj.getOwnerType())return!1;var club=_clubsys2.default.getInstance().findClub(this.m_MatchObj.getOwner());return!!club&&club.IsCEO(_playerdata_mgr2.default.getInstance().getMeUID())}},{key:"OnRefreshLocation",value:function(agv){}},{key:"ChgTrustShow",value:function(agv){}},{key:"IsInMagicShielding",value:function(uid){if(uid==_playerdata_mgr2.default.getInstance().getMeUID())return!1;for(var i=0;i<this.m_szMagicShielding.length;i++)if(this.m_szMagicShielding[i]==uid)return!0;return!1}},{key:"ChgMagicShieldingOk",value:function(agv){this.m_szMagicShielding=agv}},{key:"UserRunAway",value:function(agv){_playerdata_mgr2.default.getInstance().getMeUID()!=agv.uid?_FlyText2.default.AddFlyText(agv.nick+"竟然逃跑!!!"):_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}},{key:"AppPause",value:function(){}}]),GameCtrl}();exports.default=GameCtrl},{"../../app/gameconst":5,"../../framework/data/club/clubsys":105,"../../framework/data/playerdata_mgr":117,"../../framework/gamemodel/gamemodelmgr":123,"../../framework/gtea/BaseObj":126,"../../framework/match/matchdef":132,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../com/FlyText":52,"./gamechair":66,"./gameuser":68}],68:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_gamedeskuser=require("../net/gamedeskuser"),_gamedeskuser2=(obj=_gamedeskuser)&&obj.__esModule?obj:{default:obj};var GameUser=function(_GameDeskUser){function GameUser(ctrl){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameUser),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameUser.__proto__||Object.getPrototypeOf(GameUser)).call(this,ctrl))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameUser,_gamedeskuser2.default),GameUser}();exports.default=GameUser},{"../net/gamedeskuser":101}],69:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea")),_config2=_interopRequireDefault(require("../../framework/utils/config")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_gamemodelmgr2=_interopRequireDefault(require("../../framework/gamemodel/gamemodelmgr")),_itemkindmgr2=_interopRequireDefault(require("../../framework/data/item/itemkindmgr")),_matchkind2=_interopRequireDefault(require("../../framework/match/matchkind")),_soundmgr2=_interopRequireDefault(require("../com/soundmgr")),_FlyText2=_interopRequireDefault(require("../com/FlyText")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_appmethod2=_interopRequireDefault(require("../com/appmethod")),_chargeitemmgr2=_interopRequireDefault(require("./shop/chargeitemmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BaseLobby=function(_BaseUI){function BaseLobby(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseLobby);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BaseLobby.__proto__||Object.getPrototypeOf(BaseLobby)).call(this));return _this.szSysMsg=[],_this.nTitleLineMoveX=125,_this.baseIdx="",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BaseLobby,_BaseUI3.default),_createClass(BaseLobby,[{key:"OnCreate",value:function(){_get(BaseLobby.prototype.__proto__||Object.getPrototypeOf(BaseLobby.prototype),"OnCreate",this).call(this),this.uiobj.titleline.rawx=this.uiobj.titleline.x,this.uiobj.titleline.rawy=this.uiobj.titleline.y,this.uiobj.bottomline.rawx=this.uiobj.bottomline.x,this.uiobj.bottomline.rawy=this.uiobj.bottomline.y,this.uiobj.bottomline.aniy=0,this.uiobj.Button_back.on(Laya.Event.CLICK,this,this.OnClickBack),this.SetPanelClass(),this.LoadNotice()}},{key:"SetPanelClass",value:function(){this.szPanel={}}},{key:"OnOpen",value:function(bref){_playerdata_mgr2.default.getInstance().getMe().addEventListener("eve.DataChg",this,this.RefreshUserInfo),_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.addEventListener("eve.DataChg",this,this.RefreshMail),this.RefreshUserInfo(),this.RefreshMail(),this.ListRealItemOrder(),this.CurPanel?(this.CurPanel.Open(),this.RefreshMsg()):this.InFirstPanel(),this.InLobby(bref),this.ChkGoldSubsidies(),this.RefreshWXMPCharge()}},{key:"OnClose",value:function(){_playerdata_mgr2.default.getInstance().getMe().removeEventListener("eve.DataChg",this),_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.removeEventListener("eve.DataChg",this),this.CurPanel&&this.CurPanel.Clear()}},{key:"OnResize",value:function(){_get(BaseLobby.prototype.__proto__||Object.getPrototypeOf(BaseLobby.prototype),"OnResize",this).call(this),this.uiobj.bg.scaleX=this.uiobj.bg.scaleY=_config2.default.scale,this.nBottomLineYpos=this.uiobj.bottomline.rawy+_config2.default.offset.y,this.uiobj.bottomline.x=this.uiobj.bottomline.rawx-_config2.default.offset.x,this.uiobj.bottomline.y=this.nBottomLineYpos+this.uiobj.bottomline.aniy,this.uiobj.titleline.width=_config2.default.viewSize.width,this.nTitleLineYpos=this.uiobj.titleline.rawy-_config2.default.offset.y,this.uiobj.titleline.x=this.uiobj.titleline.rawx-_config2.default.offset.x,this.uiobj.titleline.y=this.nTitleLineYpos}},{key:"InFirstPanel",value:function(){}},{key:"InLobby",value:function(bref){this.PlayLobbyBGM(),this.AutoOpenDlg(),this.OnInLobby()}},{key:"OnInLobby",value:function(){}},{key:"PlayLobbyBGM",value:function(){_soundmgr2.default.getInstance().playBGM("snd/waiting.mp3")}},{key:"RefreshUserInfo",value:function(){}},{key:"SelectPanel",value:function(idx,bani,subpage){if(idx)if(this.CurPanel&&this.CurPanel.idx==idx)this.CurPanel.SetSubPage(subpage);else{var lastpanel=this.CurPanel;this.CurPanel=this.szPanel[idx],this.nLastIdx=null,lastpanel&&(bani?lastpanel.PlayOutAni():lastpanel.Close(),"shop"==idx&&(this.nLastIdx=lastpanel.idx)),this.CurPanel.bNeedTitle?lastpanel?(lastpanel.bNeedTitle!=this.CurPanel.bNeedTitle&&bani?this.TweenLite(this.uiobj.titleline,{y:this.nTitleLineYpos},300,Laya.Ease.sineOut):this.uiobj.titleline.y=this.nTitleLineYpos,lastpanel.bNeedBack!=this.CurPanel.bNeedBack&&bani?this.CurPanel.bNeedBack?this.TweenLite(this.titlelineleft,{x:this.nTitleLineMoveX},300,Laya.Ease.sineOut):this.TweenLite(this.titlelineleft,{x:0},300,Laya.Ease.sineOut):this.CurPanel.bNeedBack?this.titlelineleft.x=this.nTitleLineMoveX:this.titlelineleft.x=0):(this.uiobj.titleline.y=this.nTitleLineYpos,this.CurPanel.bNeedBack?this.titlelineleft.x=this.nTitleLineMoveX:this.titlelineleft.x=0):bani?this.TweenLite(this.uiobj.titleline,{y:this.nTitleLineYpos-200},300,Laya.Ease.sineOut):this.uiobj.titleline.y=this.nTitleLineYpos-200,this.CurPanel.bNeedBottom?(this.uiobj.bottomline.aniy=0,lastpanel&&lastpanel.bNeedBottom!=this.CurPanel.bNeedBottom&&bani?this.TweenLite(this.uiobj.bottomline,{y:this.nBottomLineYpos},300,Laya.Ease.sineOut):this.uiobj.bottomline.y=this.nBottomLineYpos):(this.uiobj.bottomline.aniy=200,bani?this.TweenLite(this.uiobj.bottomline,{y:this.nBottomLineYpos+this.uiobj.bottomline.aniy},300,Laya.Ease.sineOut):this.uiobj.bottomline.y=this.nBottomLineYpos+this.uiobj.bottomline.aniy),bani?this.CurPanel.PlayInAni(subpage):this.CurPanel.Open(subpage),this.uiobj.Button_back.visible=this.CurPanel.bNeedBack,this.RefreshMsg()}}},{key:"SetSysMsg",value:function(list){this.szSysMsg=[];for(var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel()),i=0;i<list.length;i++){var data=list[i];channel!=data.channel&&"all"!=data.channel||this.szSysMsg.push(data)}this.RefreshMsg()}},{key:"RefreshMsg",value:function(){this.CurPanel&&this.CurPanel.OnRefreshMsg(this.szSysMsg)}},{key:"RefreshMail",value:function(){}},{key:"ListRealItemOrder",value:function(){_gtea2.default.rpc.Call("实物奖励","ListOrder",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv){for(var i=0;i<agv.length;i++)if(1==agv[i].status){this.HaveRealItemOrder();break}},function(errflag,errmsg){})}},{key:"HaveRealItemOrder",value:function(){}},{key:"LoadNotice",value:function(){_gtea2.default.rpc.Call("公告服务","LoadData",{},this,function(agv){this.SetSysMsg(agv)},function(errflag,errmsg){}),_playerdata_mgr2.default.getInstance().RegSvrCallBack("消息广播",this)}},{key:"netOnNoticeMsg",value:function(agv){this.SetSysMsg(agv)}},{key:"netOnUserCharge",value:function(agv){var item=_chargeitemmgr2.default.getInstance().GetChargeItem("gold",agv.itemid);if(item){if(_gameconst2.default.DeviceData&&(_gameconst2.default.DeviceData.amount=item.price,_gameconst2.default.DeviceData.channel=_playerdata_mgr2.default.getInstance().getMe().getChannel(),_gameconst2.default.CONFIG.apilist))for(var i=0;i<_gameconst2.default.CONFIG.apilist.length;i++){var apiname=_gameconst2.default.CONFIG.apilist[i];_gtea2.default.rpc.Send("com::"+apiname,"UsrPay",_gameconst2.default.DeviceData)}_appmethod2.default.usrPay(item.price)}}},{key:"netOnGetCoconutScore",value:function(agv){}},{key:"netOnGetCoconutScoreErr",value:function(agv){}},{key:"InFreeGame",value:function(agv){var kind=_matchkind2.default.Find(agv.kindid);if(kind){var szName=kind.m_sName.split("/");_gamemodelmgr2.default.getInstance().LoadGameModel({type:1,value:szName[0],backfun:Laya.Handler.create(this,function(agv){_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,"InFreeGame",agv)},[agv])})}else _FlyText2.default.AddFlyText("房间不存在!")}},{key:"InJoyGame",value:function(agv){_gamemodelmgr2.default.getInstance().LoadGameModel({type:2,value:agv.gtype,backfun:Laya.Handler.create(this,function(agv){_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,"InJoyGame",agv)},[agv])})}},{key:"ChkGoldSubsidies",value:function(){_gtea2.default.rpc.Call("金币补助","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv){_gameconst2.default.GOLDSUBSIDIESDATA=agv},function(errflag,errmsg){})}},{key:"AutoOpenDlg",value:function(){if(0!=_gameconst2.default.AUTOOPEN.length){var data=_gameconst2.default.AUTOOPEN.shift();if(data.data){if(!_playerdata_mgr2.default.getInstance().getMe().getGiftData(data.data))return void this.AutoOpenDlg();_UIMgr2.default.getInstance().OpenUI(data.uiname)}else"活动界面"==data.uiname&&this.OpenActivityUI()}}},{key:"OpenActivityUI",value:function(){_playerdata_mgr2.default.getInstance().getUserSetDataByKey("noopenactivity",!1)||_UIMgr2.default.getInstance().OpenUI("活动界面")}},{key:"ExchangeItemOk",value:function(agv){1==agv.type?_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:_gameconst2.default.GET_ITEM_PROMPT||"兑换成功,请您于5个工作日内联系工作人员!"},!0,!0):_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"兑换成功,获得"+agv.name},!0,!0)}},{key:"BuyGemsGold",value:function(agv){var msg=_gameconst2.default.AGENT_BUYINFO;1==agv.mode&&(msg=_gameconst2.default.BUY_GOLDMSG||"购买"+_itemkindmgr2.default.GOLD_NAME+"请关注微信公众号:"+_gameconst2.default.WeChatPub),_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:msg},!0,!0)}},{key:"RefreshWXMPCharge",value:function(){if("undefined"!=typeof wx){var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel());_gtea2.default.rpc.Send("MidasPay","Charge",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),channel:channel})}}},{key:"OpenOtherPanel",value:function(subpage){}},{key:"OnClickBack",value:function(event){this.SelectPanel(this.nLastIdx||this.baseIdx,!0),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),BaseLobby}();exports.default=BaseLobby},{"../../app/gameconst":5,"../../framework/data/item/itemkindmgr":113,"../../framework/data/playerdata_mgr":117,"../../framework/gamemodel/gamemodelmgr":123,"../../framework/gtea/gtea":127,"../../framework/match/matchkind":133,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../../framework/utils/config":145,"../com/FlyText":52,"../com/appmethod":63,"../com/soundmgr":65,"./shop/chargeitemmgr":90}],70:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=_interopRequireDefault(require("../../framework/gtea/BaseObj")),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_Hslider2=_interopRequireDefault(require("../com/Hslider")),_soundmgr2=_interopRequireDefault(require("../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SetingUI=function(_BaseUI){function SetingUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SetingUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SetingUI.__proto__||Object.getPrototypeOf(SetingUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SetingUI,_BaseUI3.default),_createClass(SetingUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(SetingUI.prototype.__proto__||Object.getPrototypeOf(SetingUI.prototype),"OnCreate",this).call(this),this.Button_switch=this.m_UI.Btn_quit_account,this.Button_close=this.m_UI.Button_close,this.Button_yes=this.m_UI.Btn_Ok,this.Btn_Help=this.m_UI.Btn_help,this.Slider_music=new _Hslider2.default(this.m_UI.Slider_music),this.Slider_sound=new _Hslider2.default(this.m_UI.Slider_sound),this.Slider_music.addEventListener("OnSlider",this,this.OnSlider),this.Slider_sound.addEventListener("OnSlider",this,this.OnSlider),this.Button_switch.on(Laya.Event.CLICK,this,this.OnSwitchAcc),this.Button_close.on(Laya.Event.CLICK,this,this.OnBack),this.Button_yes.on(Laya.Event.CLICK,this,this.OnBack),this.Btn_Help&&this.Btn_Help.on(Laya.Event.CLICK,this,this.OnHelpClick),"undefined"!=typeof wx&&(this.Button_switch.visible=!1,this.m_UI.getChildByName("accbk").visible=!1)}},{key:"OnSwitchAcc",value:function(){_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"是否注销账号",obj:this,okfun:function(){_BaseObj2.default.EventToRegObj("MainApp","Logout",[])}},!0,!0),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnOpen",value:function(){this.InitSet()}},{key:"OnHelpClick",value:function(){_UIMgr2.default.getInstance().OpenUI("游戏帮助"),_UIMgr2.default.getInstance().CloseUI(this.uidata.name),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnBack",value:function(){_soundmgr2.default.getInstance().playSound("snd/button.mp3"),_UIMgr2.default.getInstance().CloseUI(this.uidata.name)}},{key:"InitSet",value:function(){var musicvolume=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("musicvolume",_gameconst2.default.BASEMUSICVOLUME),soundvolume=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("soundvolume",_gameconst2.default.BASESOUNDVOLUME);this.Slider_music.setPercent(100*musicvolume),this.Slider_sound.setPercent(100*soundvolume),""!=_gameconst2.default.THIRDPARTY&&"dyunionpay"!=_gameconst2.default.THIRDPARTY&&(this.Button_switch.visible=!1,this.m_UI.getChildByName("accbk").visible=!1)}},{key:"OnSlider",value:function(target){if(target===this.Slider_music){var value=this.Slider_music.getPercent()/100;_soundmgr2.default.getInstance().setBGMVolume(value),_playerdata_mgr2.default.getInstance().setUserSetDataByKey("musicvolume",value),_playerdata_mgr2.default.getInstance().writeUserSetData()}else if(target===this.Slider_sound){var _value=this.Slider_sound.getPercent()/100;_soundmgr2.default.getInstance().setSoundVolume(_value),_playerdata_mgr2.default.getInstance().setUserSetDataByKey("soundvolume",_value),_playerdata_mgr2.default.getInstance().writeUserSetData()}}}]),SetingUI}();exports.default=SetingUI},{"../../app/gameconst":5,"../../framework/data/playerdata_mgr":117,"../../framework/gtea/BaseObj":126,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../com/Hslider":55,"../com/soundmgr":65}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_tdf2=_interopRequireDefault(require("../../../framework/utils/tdf")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_imagepage2=_interopRequireDefault(require("./imagepage")),_weeksignpage2=_interopRequireDefault(require("./weeksignpage")),_taskpage2=_interopRequireDefault(require("./taskpage"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ActivityUI=function(_BaseUI){function ActivityUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ActivityUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ActivityUI.__proto__||Object.getPrototypeOf(ActivityUI)).call(this));return _this.UI_NAME="活动界面",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ActivityUI,_BaseUI3.default),_createClass(ActivityUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(ActivityUI.prototype.__proto__||Object.getPrototypeOf(ActivityUI.prototype),"OnCreate",this).call(this),this.m_CloseBtn=this.m_UI.closebtn,this.m_CloseBtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_ListView=this.m_UI.ListView,this.m_ListView.vScrollBarSkin=" ",this.m_ListView.renderHandler=Laya.Handler.create(this,this.OnListRander,null,!1),this.m_CheckBox=this.m_UI.Panel_nomore,this.m_nCurPage=0,this.InitBtn(),this.InitPage(),this.InitActivity()}},{key:"InitBtn",value:function(){for(var i=0;i<this.m_ListView.cells.length;i++){var item=this.m_ListView.cells[i];item.markhd=item.getChildByName("mark_huodong"),item.markgg=item.getChildByName("mark_gonggao"),item.btn1=item.getChildByName("btn1"),item.btn1.on(Laya.Event.CLICK,this,this.SelectPage),item.btn2=item.getChildByName("btn2"),item.btn2.selected=!0,item.btn2.mouseEnabled=!1,item.tip=item.getChildByName("tip")}}},{key:"InitPage",value:function(){this.m_szPage=[new _imagepage2.default(this.m_UI.Activity_bg),new _weeksignpage2.default(this.m_UI.Activity_weeksign),new _taskpage2.default(this.m_UI.Activity_task)]}},{key:"InitActivity",value:function(){this.m_szActivity=[];var tdf=_tdf2.default.LoadTDF("data/activity/activityshow.tdf")||Laya.loader.getRes("data/activity/activityshow.json");if(tdf){for(var key in tdf){var value=tdf[key],data={name:key,btn:value["按钮图片"],mode:value["分类"],page:value["活动切页"],bgimg:value["背景图片"],clickevent:value["点击事件"],sort:value["排序"],sztime:value["活动时间"],reviewshow:value["审核显示"]||0};this.m_szActivity.push(data)}this.m_szActivity.sort(function(data1,data2){return data1.sort<data2.sort?-1:data1.sort>data2.sort?1:0})}}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource;item.markhd&&(item.markhd.visible=1==data.mode),item.markgg&&(item.markgg.visible=2==data.mode),item.btn1.getChildByName("Text_name").text=data.name,item.btn2.getChildByName("Text_name").text=data.name,item.isselect?(item.btn1.visible=!1,item.btn2.visible=!0):(item.btn1.visible=!0,item.btn2.visible=!1),_comfunc2.default.isNil(item.tipvisible)?item.tip.visible=!1:item.tip.visible=item.tipvisible}},{key:"OnOpen",value:function(data){var page=1;data&&(page=data.page||1);var noopen=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("noopenactivity");this.m_CheckBox.selected=!!noopen,this.m_ListView.array=this.MakeShowActivity(),_UIMgr2.default.getInstance().UIEvent("大厅界面","UnShowActTip",{}),_playerdata_mgr2.default.getInstance().addEventListener("eve.LoginActivityDataChg",this,this.RefreshTips),this.timerCall(100,function(){this.RefreshTips(),this.OnSelectPage(page)})}},{key:"OnClose",value:function(){_playerdata_mgr2.default.getInstance().setUserSetDataByKey("noopenactivity",this.m_CheckBox.selected),_playerdata_mgr2.default.getInstance().writeUserSetData(),_playerdata_mgr2.default.getInstance().removeEventListener("eve.LoginActivityDataChg",this),this.ClearPage(),this.m_ListView.array=[],this.m_nCurPage=0}},{key:"ClearPage",value:function(){for(var i=0;i<this.m_szPage.length;i++)this.m_szPage[i].Close()}},{key:"MakeShowActivity",value:function(){for(var nowtime=new Date,szActData=[],i=0;i<this.m_szActivity.length;i++){var data=this.m_szActivity[i],stime=void 0,etime=void 0;data.sztime.length>0?(stime=new Date(data.sztime[0].replace(/-/g,"/")),etime=new Date(data.sztime[1].replace(/-/g,"/"))):(stime=_comfunc2.default.addDay(nowtime.getTime(),-1),etime=_comfunc2.default.addDay(nowtime.getTime(),1)),nowtime.getTime()>=stime.getTime()&&nowtime.getTime()<=etime.getTime()&&(_gameconst2.default.CONFIG.isreview?1==data.reviewshow&&szActData.push(data):szActData.push(data))}return szActData}},{key:"RefreshTips",value:function(cell){for(var tipdata=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("tipdata",{}),nowtime=new Date,daytask=_playerdata_mgr2.default.getInstance().getMe().m_DaliyTask,weektask=_playerdata_mgr2.default.getInstance().getMe().m_WeekTask,szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(item.dataSource&&(!cell||cell===item)&&(tipdata.acttip?tipdata.lasttime&&!_comfunc2.default.isSameDay(nowtime,new Date(tipdata.lasttime))?2!=item.dataSource.page&&3!=item.dataSource.page||(item.tipvisible=!0):i+1!=this.m_nCurPage&&(2==item.dataSource.page?_playerdata_mgr2.default.getInstance().LoginActivityHasReward(1003)&&(item.tipvisible=!0):3==item.dataSource.page&&(daytask&&daytask.HasReachReward()&&(item.tipvisible=!0),weektask&&weektask.HasReachReward()&&(item.tipvisible=!0))):item.tipvisible=!0,_comfunc2.default.isNil(item.tipvisible)||(item.tip.visible=item.tipvisible),cell))break}tipdata.acttip=!0,tipdata.lasttime=nowtime.getTime(),_playerdata_mgr2.default.getInstance().setUserSetDataByKey("tipdata",tipdata),_playerdata_mgr2.default.getInstance().writeUserSetData()}},{key:"OnSelectPage",value:function(idx){this.ClearPage(),this.m_nCurPage=idx;for(var szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(item.dataSource)if(i+1==idx)item.btn1.visible=!1,item.btn2.visible=!0,item.tip.visible=!1,item.tipvisible=!1,item.isselect=!0,this.m_szPage[item.dataSource.page-1].Open(item.dataSource);else item.btn1.visible=!0,item.btn2.visible=!1,item.isselect=!1}}},{key:"SelectPage",value:function(event){for(var szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){if(szItem[i].btn1===event.target){this.OnSelectPage(i+1);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"GoTask",value:function(agv){switch(agv[0]){case"goldmatch":_UIMgr2.default.getInstance().UIEvent("大厅界面","InGold",{kindid:parseInt(agv[1])})}_UIMgr2.default.getInstance().CloseUI("活动界面")}},{key:"OnClickBtn",value:function(event){event.target===this.m_CloseBtn&&_UIMgr2.default.getInstance().CloseUI(this.UI_NAME),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),ActivityUI}();exports.default=ActivityUI},{"../../../app/gameconst":5,"../../../framework/data/playerdata_mgr":117,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../framework/utils/tdf":148,"../../com/soundmgr":65,"./imagepage":72,"./taskpage":73,"./weeksignpage":74}],72:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_appmethod2=_interopRequireDefault(require("../../com/appmethod"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Activity_ImagePage=function(_BaseObj){function Activity_ImagePage(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Activity_ImagePage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Activity_ImagePage.__proto__||Object.getPrototypeOf(Activity_ImagePage)).call(this));return _this.m_BindObj=bindobj,_this.m_BindObj.on(Laya.Event.CLICK,_this,_this.OnClickBtn),_this.m_Bg=bindobj.getChildByName("bg"),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Activity_ImagePage,_BaseObj3.default),_createClass(Activity_ImagePage,[{key:"Open",value:function(data){this.m_Data=data,this.m_Bg.skin="lobby/activity/"+data.bgimg,this.m_BindObj.visible=!0}},{key:"Close",value:function(){this.m_Data=null,this.m_BindObj.visible=!1}},{key:"OnClickBtn",value:function(){if(this.m_Data){var clickevent=this.m_Data.clickevent;if(clickevent&&"{}"!=JSON.stringify(clickevent)){var ui=_UIMgr2.default.getInstance().GetUI("大厅界面");clickevent.openui?_UIMgr2.default.getInstance().OpenUI(clickevent.openui.name,clickevent.openui.page||!0):clickevent.openpanel?"gold"==clickevent.openpanel.name?ui.InGold({page:clickevent.openpanel.page}):"match"==clickevent.openpanel.name?ui.InArena(!1,clickevent.openpanel.page):"shop"==clickevent.openpanel.name?ui.InShop({subpage:clickevent.openpanel.page}):"quick"==clickevent.openpanel.name?ui.OnClickBtn({target:ui.uiobj.quickbtn,nosnd:!0}):"other"==clickevent.openpanel.name&&ui.OpenOtherPanel(clickevent.openpanel.subpage):clickevent.popweb&&_appmethod2.default.openSystemBrowser(clickevent.popweb.url),_UIMgr2.default.getInstance().CloseUI("活动界面")}}}}]),Activity_ImagePage}();exports.default=Activity_ImagePage},{"../../../framework/gtea/BaseObj":126,"../../../framework/ui/UIMgr":142,"../../com/appmethod":63}],73:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_tdf2=_interopRequireDefault(require("../../../framework/utils/tdf")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_FlyText2=_interopRequireDefault(require("../../com/FlyText")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Activity_TaskPage=function(_BaseObj){function Activity_TaskPage(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Activity_TaskPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Activity_TaskPage.__proto__||Object.getPrototypeOf(Activity_TaskPage)).call(this));_this.m_BindObj=bindobj,_this.m_ListView=bindobj.list,_this.m_ListView.vScrollBarSkin=" ",_this.m_ListView.renderHandler=Laya.Handler.create(_this,_this.OnListRander,null,!1);for(var i=0;i<_this.m_ListView.cells.length;i++){var item=_this.m_ListView.cells[i];item.task_share=item.getChildByName("task_share"),item.task_sign=item.getChildByName("task_sign"),item.task_game=item.getChildByName("task_game"),item.task_share.sharebtn=item.task_share.getChildByName("Button_share"),item.task_share.sharebtn.on(Laya.Event.CLICK,_this,_this.Share),item.task_sign.signbtn=item.task_sign.getChildByName("Button_check"),item.task_sign.signbtn.on(Laya.Event.CLICK,_this,_this.Sign),item.task_sign.marksign=item.task_sign.getChildByName("mark_sign"),item.task_game.gobtn=item.task_game.getChildByName("Button_go"),item.task_game.gobtn.on(Laya.Event.CLICK,_this,_this.GoTask),item.task_game.getbtn=item.task_game.getChildByName("Button_get"),item.task_game.getbtn.on(Laya.Event.CLICK,_this,_this.GetTaskReward),item.task_game.marksign=item.task_game.getChildByName("mark_sign"),item.task_game.taskbar=item.task_game.getChildByName("task_bar")}return _this.m_szTask={},_this.InitTask(),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Activity_TaskPage,_BaseObj3.default),_createClass(Activity_TaskPage,[{key:"InitTask",value:function(){this.AddTaskKind("everydaytask"),this.AddTaskKind("weektask")}},{key:"AddTaskKind",value:function(name){var tdf=Laya.loader.getRes("data/task/"+name+".json")||_tdf2.default.LoadTDF("data/task/"+name+".tdf");if(tdf)for(var key in tdf){var value=tdf[key],data={id:key,name:value["名称"],kind:value["分类"],condition:value["条件"],reward:{gold:value["金币奖励"],gems:value["钻石奖励"],vouchers1:value["奖券奖励"],vouchers2:value["现金券"],itemlist:value["物品奖励"],real_item:value["实物奖励"]},icon:value["图标"],intor:value["说明"],taskmode:name,sort:value["排序"]||0};this.m_szTask[data.id]=data}}},{key:"Open",value:function(data){this.m_bDayLoadOk=!1,this.m_bWeekLoadOk=!1,_gtea2.default.rpc.Call("每日任务","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv){_playerdata_mgr2.default.getInstance().getMe().setTypeData("DailyTask",agv[0]),this.m_bDayLoadOk=!0,this.RefreshPage()},function(errflag,errmsg){this.m_bDayLoadOk=!0,this.RefreshPage()}),_gtea2.default.rpc.Call("每周任务","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv){_playerdata_mgr2.default.getInstance().getMe().setTypeData("WeekTask",agv[0]),this.m_bWeekLoadOk=!0,this.RefreshPage()},function(errflag,errmsg){this.m_bWeekLoadOk=!0,this.RefreshPage()}),this.m_BindObj.visible=!0}},{key:"RefreshPage",value:function(){if(this.m_BindObj.visible&&this.m_bDayLoadOk&&this.m_bWeekLoadOk){var szItem=[];if(_gameconst2.default.GOLDSUBSIDIESDATA)for(var key in _gameconst2.default.GOLDSUBSIDIESDATA.activity){var value=_gameconst2.default.GOLDSUBSIDIESDATA.activity[key];szItem.push({name:key,data:value})}var daytask=_playerdata_mgr2.default.getInstance().getMe().m_DaliyTask,weektask=_playerdata_mgr2.default.getInstance().getMe().m_WeekTask,agv=[];if(daytask){for(var i=0;i<daytask.m_szReached.length;i++){var taskid=daytask.m_szReached[i][0],taskdata=this.m_szTask[taskid];taskdata&&(daytask.m_szReached[i][2]<=0?agv.push({mode:2,taskid:taskid,sort:1e3+taskdata.sort}):agv.push({mode:3,taskid:taskid,sort:600+taskdata.sort}))}for(var _i=0;_i<daytask.m_szTaskItem.length;_i++)if(!daytask.IsReach(daytask.m_szTaskItem[_i].m_nTaskID)){var _taskid=daytask.m_szTaskItem[_i].m_nTaskID,_taskdata=this.m_szTask[_taskid];_taskdata&&agv.push({mode:1,taskid:_taskid,data:daytask.m_szTaskItem[_i],sort:800+_taskdata.sort})}}if(weektask){for(var _i2=0;_i2<weektask.m_szReached.length;_i2++){var _taskid2=weektask.m_szReached[_i2][1],_taskdata2=this.m_szTask[_taskid2];_taskdata2&&(weektask.m_szReached[_i2][2]<=0?agv.push({mode:2,taskid:_taskid2,sort:900+_taskdata2.sort}):agv.push({mode:3,taskid:_taskid2,sort:500+_taskdata2.sort}))}for(var _i3=0;_i3<weektask.m_szTaskItem.length;_i3++)if(!weektask.IsReach(weektask.m_szTaskItem[_i3].m_nTaskID)){var _taskid3=weektask.m_szTaskItem[_i3].m_nTaskID,_taskdata3=this.m_szTask[_taskid3];_taskdata3&&agv.push({mode:1,taskid:_taskid3,data:weektask.m_szTaskItem[_i3],sort:700+_taskdata3.sort})}}agv.sort(function(data1,data2){return data1.sort>data2.sort?-1:data1.sort<data2.sort?1:0});for(var _i4=0;_i4<agv.length;_i4++)szItem.push({name:"task",data:agv[_i4]});this.m_ListView.array=szItem}}},{key:"Close",value:function(){this.m_ListView.array=[],this.m_bSign=!1,this.m_bShare=!1,this.m_bGetReward=!1,this.m_BindObj.visible=!1}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource;if(item.task_share.visible=!1,item.task_sign.visible=!1,item.task_game.visible=!1,"share"==data.name)item.task_share.getChildByName("Text_number").text=(_gameconst2.default.GOLDSUBSIDIESDATA.isdayshare?"每日":"首次")+"分享可领取",item.task_share.getChildByName("value").text=_comfunc2.default.getGoldRatio(data.gold).toString(),item.task_share.visible=!0;else if("sign"==data.name)item.task_sign.signbtn.visible=0==data.num,item.task_sign.marksign.visible=data.num>0,item.task_sign.getChildByName("Text_number").text="每日签到后可领取",item.task_sign.getChildByName("value").text=_comfunc2.default.getGoldRatio(data.gold).toString(),item.task_sign.visible=!0;else if("task"==data.name){var task=this.m_szTask[data.data.taskid];if(!task)return;item.task_game.marksign.visible=!0,item.task_game.getbtn.visible=!0,item.task_game.gobtn.visible=!0,_gameconst2.default.SetIconImg(item.task_game.getChildByName("gold"),task.icon),item.task_game.getChildByName("Text_number").text=task.intor,task.reward.gold>0?item.task_game.getChildByName("value").text=_comfunc2.default.getGoldRatio(task.reward.gold).toString():task.reward.gems>0?item.task_game.getChildByName("value").text=task.reward.gems.toString():task.reward.vouchers2>0&&(item.task_game.getChildByName("value").text=_comfunc2.default.getVouchers2Ratio(task.reward.vouchers2).toString());var progress=item.task_game.taskbar.getChildByName("progress"),tasknum=item.task_game.taskbar.getChildByName("per"),curnum=void 0,maxnum=void 0;1==data.data.mode?(curnum=data.data.data.m_szCondition[0][2],maxnum=data.data.data.m_szCondition[0][1],item.task_game.marksign.visible=!1,item.task_game.getbtn.visible=!1):(curnum=task.condition[0][1],maxnum=task.condition[0][1],item.task_game.marksign.visible=3==data.data.mode,item.task_game.getbtn.visible=2==data.data.mode,item.task_game.gobtn.visible=!1);var per=curnum/maxnum*100,width=parseInt(progress.width*per/100);progress.mask.graphics.clear(),progress.mask.graphics.drawRect(0,0,Math.max(width,1),progress.height,"#000000"),tasknum.text=curnum+"/"+maxnum,item.taskdata=task,item.task_game.visible=!0}}},{key:"Share",value:function(){if(this.m_bShare)_FlyText2.default.AddFlyText("正在领取中...");else{var rand=Math.floor(2*Math.random()+1),ui=_UIMgr2.default.getInstance().GetUI("游戏分享"+rand,!0);ui&&ui.OnShareRedPacket(Laya.Handler.create(function(){_gameconst2.default.GOLDSUBSIDIESDATA.sharenum>=_gameconst2.default.GOLDSUBSIDIESDATA.maxsharenum||(this.m_bShare=!0,_gtea2.default.rpc.Call("金币补助","AddShareNum",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,AddOk,AddErr))}),!0),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}function AddOk(data){_gameconst2.default.GOLDSUBSIDIESDATA=data,this.m_BindObj.visible&&(this.m_bShare=!1,_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取成功,您的"+(_gameconst2.default.GOLDSUBSIDIESDATA.sharegetgems?_itemkindmgr2.default.GEMS_NAME:_itemkindmgr2.default.GOLD_NAME)+"增加"+data.share},!0,!0))}function AddErr(errflag,errmsg){this.m_BindObj.visible&&(this.m_bShare=!1,_FlyText2.default.AddFlyText(errmsg))}}},{key:"Sign",value:function(){this.m_bSign?_FlyText2.default.AddFlyText("正在签到中..."):(_gtea2.default.rpc.Call("金币补助","AddTarget",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),name:"sign"},this,function(data){if(_gameconst2.default.GOLDSUBSIDIESDATA=data,this.m_BindObj.visible){for(var szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(item.dataSource&&"sign"==item.dataSource.name){item.task_sign.signbtn.visible=!1,item.task_sign.marksign.visible=!0,this.m_bSign=!0;break}}this.m_bSign=!1,_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"签到成功,您的"+_itemkindmgr2.default.GOLD_NAME+"增加"+_comfunc2.default.getGoldRatio(data.activity.sign.gold)},!0,!0)}},function(errflag,errmsg){this.m_BindObj.visible&&(this.m_bSign=!1,_FlyText2.default.AddFlyText(errmsg))}),_soundmgr2.default.getInstance().playSound("snd/button.mp3"))}},{key:"GoTask",value:function(event){for(var szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(item.task_game.gobtn===event.target){var szcondition=item.taskdata.condition[0][0].split("_");_UIMgr2.default.getInstance().UIEvent("活动界面","GoTask",szcondition);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"GetTaskReward",value:function(event){if(this.m_bGetReward)_FlyText2.default.AddFlyText("正在领取中...");else{for(var szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(item.task_game.getbtn===event.target){"everydaytask"==item.taskdata.taskmode?_gtea2.default.rpc.Call("每日任务","GetReward",[_playerdata_mgr2.default.getInstance().getMeUID(),item.taskdata.id],this,GetOk,GetErr):"weektask"==item.taskdata.taskmode&&_gtea2.default.rpc.Call("每周任务","GetReward",[_playerdata_mgr2.default.getInstance().getMeUID(),item.taskdata.id],this,GetOk,GetErr),this.m_bGetReward=!0;break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}function GetOk(agv){if(this.m_BindObj.visible){for(var szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(item.task_game.getbtn===event.target){item.task_game.marksign.visible=!0,item.task_game.getbtn.visible=!1,item.dataSource.data.mode=3;break}}this.m_bGetReward=!1,_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取奖励成功"},!0,!0)}}function GetErr(errflag,errmsg){this.m_BindObj.visible&&(this.m_bGetReward=!1,_FlyText2.default.AddFlyText(errmsg))}}}]),Activity_TaskPage}();exports.default=Activity_TaskPage},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../framework/utils/tdf":148,"../../com/FlyText":52,"../../com/soundmgr":65}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_tdf2=_interopRequireDefault(require("../../../framework/utils/tdf")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_FlyText2=_interopRequireDefault(require("../../com/FlyText")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Activity_WeekSignPage=function(_BaseObj){function Activity_WeekSignPage(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Activity_WeekSignPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Activity_WeekSignPage.__proto__||Object.getPrototypeOf(Activity_WeekSignPage)).call(this));_this.m_BindObj=bindobj,_this.m_GetBtn=bindobj.Button_get,_this.m_GetBtn.visible=!1,_this.m_GetBtn.on(Laya.Event.CLICK,_this,_this.OnClickBtn),_this.m_ActTime=bindobj.time;var tdf=_tdf2.default.LoadTDF("data/activity/activitylogin.tdf")||Laya.loader.getRes("data/activity/activitylogin.json"),szItem=[];for(var key in tdf){var value=tdf[key];1003==value["活动ID"]&&(szItem[value["天数"]-1]={target:value["达成条件"],imgpath:value["图片"],szreward:{gold:value["金币"],gems:value["钻石"],vouchers1:value["奖券"],vouchers2:value["现金券"],itemlist:value["道具"],real_item:value["实物奖励"]}})}return _this.m_szItem=[],_this.BindItem(szItem),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Activity_WeekSignPage,_BaseObj3.default),_createClass(Activity_WeekSignPage,[{key:"BindItem",value:function(szItem){for(var i=0;i<szItem.length;i++){var item=this.m_BindObj["dailybonus_"+(i+1)];if(_comfunc2.default.isNil(item))break;var itemnum=item.getChildByName("itemnum");item.highlight=item.getChildByName("highlight"),item.condition=item.getChildByName("condition"),item.markobj=item.getChildByName("mark"),item.maskobj=item.getChildByName("maskobj"),item.curmark=item.getChildByName("dailybonus_today");var data=szItem[i];data&&(data.szreward.gold>0?(item.gold=data.szreward.gold,itemnum.text=_comfunc2.default.getGoldRatio(data.szreward.gold).toString()):data.szreward.gems>0?(item.gems=data.szreward.gems,itemnum.text=data.szreward.gems.toString()):data.szreward.vouchers1>0?(item.vouchers1=data.szreward.vouchers1,itemnum.text=data.szreward.vouchers1.toString()):data.szreward.vouchers2>0&&(item.vouchers2=data.szreward.vouchers2,itemnum.text=_comfunc2.default.getVouchers2Ratio(data.szreward.vouchers2)),_gameconst2.default.SetIconImg(item,"awards/"+data.imgpath),item.target=data.target),item.visible=!1,this.m_szItem.push(item)}}},{key:"Open",value:function(data){this.Refresh(),_playerdata_mgr2.default.getInstance().addEventListener("eve.LoginActivityDataChg",this,this.Refresh),this.m_BindObj.visible=!0}},{key:"Close",value:function(){_playerdata_mgr2.default.getInstance().removeEventListener("eve.LoginActivityDataChg",this);for(var i=0;i<this.m_szItem.length;i++)this.m_szItem[i].visible=!1;this.m_GetBtn.visible=!1,this.m_bGet=!1,this.m_BindObj.visible=!1}},{key:"Refresh",value:function(){if(_playerdata_mgr2.default.getInstance().getMe().m_LoginActivity){var actdata=_playerdata_mgr2.default.getInstance().getMe().m_LoginActivity.data[1003];if(actdata){var stime=new Date(actdata.chkweektime),etime=_comfunc2.default.addDay(stime,6);this.m_ActTime.text="活动时间:"+(stime.getMonth()+1)+"月"+stime.getDate()+"日-"+(etime.getMonth()+1)+"月"+etime.getDate()+"日",this.m_GetBtn.disabled=!0;var nowtime=new Date,curday=0;curday=_comfunc2.default.isSameDay(nowtime,new Date(actdata.chktime))?actdata.days:actdata.days+1;for(var i=0;i<actdata.szday.length;i++){var item=this.m_szItem[i];if(!item)break;var subdata=actdata.szday[i],condition="";condition=_comfunc2.default.isNil(subdata.sztarget.play_gold)?_comfunc2.default.isNil(subdata.sztarget.gold_redpacket)?"登录":condition+"翻"+_itemkindmgr2.default.VOUCHERS2_NAME+"("+subdata.sztarget.gold_redpacket+"/"+item.target.gold_redpacket+")":"金币场("+subdata.sztarget.play_gold+"/"+item.target.play_gold+")",1==subdata.reward&&(this.m_GetBtn.disabled=!1),item.hasreward=1==subdata.reward,item.condition.text=condition,item.highlight.visible=1==subdata.reward,item.markobj.visible=2==subdata.reward,item.maskobj.visible=2==subdata.reward,item.curmark.visible=i+1==curday,item.visible=!0}this.m_GetBtn.visible=!0}}}},{key:"GetReward",value:function(){if(this.m_bGet)_FlyText2.default.AddFlyText("正在领取奖励...");else{for(var hasreward=!1,vouchers2=0,i=0;i<this.m_szItem.length;i++){var item=this.m_szItem[i];item.hasreward&&(hasreward=!0,item.vouchers2&&(vouchers2+=item.vouchers2))}if(hasreward){if(vouchers2>0){var ui=_UIMgr2.default.getInstance().GetUI("周签到分享",!0);if(ui)return ui.SetData({value:_comfunc2.default.getVouchers2Ratio(vouchers2)}),void ui.OnShareRedPacket(Laya.Handler.create(function(){this.OnGetReward()}),!0)}this.OnGetReward()}else _FlyText2.default.AddFlyText("没有奖励可以领取!")}}},{key:"OnGetReward",value:function(){this.m_bGet=!0,_gtea2.default.rpc.Call("登录活动","GetReward",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),actid:1003},this,function(agv){_playerdata_mgr2.default.getInstance().getMe().m_LoginActivity=agv,this.Refresh(),this.m_BindObj.visible&&(this.m_bGet=!1,_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取奖励成功!"},!0,!0))},function(errflag,errmsg){this.m_BindObj.visible&&(this.m_bGet=!1,_FlyText2.default.AddFlyText(errmsg))})}},{key:"OnClickBtn",value:function(event){event.target===this.m_GetBtn&&this.GetReward(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),Activity_WeekSignPage}();exports.default=Activity_WeekSignPage},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../framework/utils/tdf":148,"../../com/FlyText":52,"../../com/soundmgr":65}],75:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_FlyText2=_interopRequireDefault(require("../com/FlyText")),_soundmgr2=_interopRequireDefault(require("../com/soundmgr")),_UNameCheck2=_interopRequireDefault(require("../../framework/utils/UNameCheck"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AuticationUI=function(_BaseUI){function AuticationUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AuticationUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(AuticationUI.__proto__||Object.getPrototypeOf(AuticationUI)).call(this));return _this.UI_NAME="实名认证",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AuticationUI,_BaseUI3.default),_createClass(AuticationUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(AuticationUI.prototype.__proto__||Object.getPrototypeOf(AuticationUI.prototype),"OnCreate",this).call(this),this.m_Reward=this.m_UI.Node_get,this.m_RealName=this.m_UI.Panel_RealName.getChildByName("input"),this.m_RealNameFlag=this.m_UI.Panel_RealName.getChildByName("mark"),this.m_RealCode=this.m_UI.Panel_RealCode.getChildByName("input"),this.m_RealCodeFlag=this.m_UI.Panel_RealCode.getChildByName("mark"),this.m_Phone=this.m_UI.Panel_Phone.getChildByName("input"),this.m_PhoneFlag=this.m_UI.Panel_Phone.getChildByName("mark"),this.m_PhoneCode=this.m_UI.Panel_PhoneCode.getChildByName("input"),this.m_PhoneCodeFlag=this.m_UI.Panel_PhoneCode.getChildByName("mark"),this.m_GetBtn=this.m_UI.Panel_PhoneCode.getChildByName("btn"),this.m_GetBtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_GetBtnText=this.m_GetBtn.getChildByName("num"),this.m_GetBtnText.text="",this.m_OkBtn=this.m_UI.okbtn,this.m_OkBtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_CloseBtn=this.m_UI.Button_close,this.m_CloseBtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_nFrozenTime=60}},{key:"OnOpen",value:function(){this.m_OkBtn.disabled=!1,this.Refresh()}},{key:"OnClose",value:function(){_UIMgr2.default.getInstance().CloseUI("等待界面"),this.m_RealName.text="",this.m_RealCode.text="",this.m_Phone.text="",this.m_PhoneCode.text="",this.StopTimer()}},{key:"Refresh",value:function(){var authen=_playerdata_mgr2.default.getInstance().getMe().m_Authentiation;this.m_bAuthen=!1,_comfunc2.default.isTable(authen)&&authen.name.length>0&&authen.code.length>0&&(this.m_bAuthen=!0);var nowbind=_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone;this.m_bPhone=!1,nowbind&&nowbind.length>0&&(this.m_bPhone=!0),this.m_RealName.visible=!this.m_bAuthen,this.m_RealNameFlag.visible=this.m_bAuthen,this.m_RealCode.visible=!this.m_bAuthen,this.m_RealCodeFlag.visible=this.m_bAuthen,this.m_Phone.visible=!this.m_bPhone,this.m_PhoneFlag.visible=this.m_bPhone,this.m_PhoneCode.visible=!this.m_bPhone,this.m_PhoneCodeFlag.visible=this.m_bPhone,this.m_GetBtn.visible=!this.m_bPhone,this.m_Reward&&(this.m_Reward.visible=!this.m_bPhone)}},{key:"GetPhoneCode",value:function(){if(this.m_bPhone)_FlyText2.default.AddFlyText("该账号已绑定手机!");else{var phone=this.m_Phone.text;isNaN(parseInt(phone))?_FlyText2.default.AddFlyText("请输入正确的手机号码!"):(this.m_nFrozenTime=60,this.m_GetBtn.selected=!0,this.m_GetBtn.mouseEnabled=!1,this.m_GetBtnText.text=this.m_nFrozenTime.toString(),this.m_Timer=this.loopCall(-1,1e3,function(){this.m_nFrozenTime=this.m_nFrozenTime-1,this.m_GetBtnText.text=this.m_nFrozenTime.toString(),0==this.m_nFrozenTime&&this.StopTimer()}),_playerdata_mgr2.default.getInstance().getPhoneCode(phone,"bindphone",this,function(agv){this.m_OkBtn.disabled=!1},function(errflag,errmsg){this.StopTimer(),_FlyText2.default.AddFlyText(errmsg)}))}}},{key:"StopTimer",value:function(){this.m_Timer&&(this.killTimer(this.m_Timer),this.m_Timer=null),this.m_nFrozenTime=60,this.m_GetBtn.selected=!1,this.m_GetBtn.mouseEnabled=!0,this.m_GetBtnText.text="",this.m_OkBtn.disabled=!1}},{key:"ChkAllOk",value:function(){_UIMgr2.default.getInstance().UIEvent("大厅界面","RefreshAu",{}),this.m_bAuthen&&this.m_bPhone&&_UIMgr2.default.getInstance().CloseUI(this.UI_NAME)}},{key:"ChkAllErr",value:function(){this.m_bAuthenErr&&this.m_bPhoneErr&&(this.m_OkBtn.disabled=!1,_UIMgr2.default.getInstance().CloseUI("等待界面"))}},{key:"ChkCertification",value:function(){if(this.m_bAuthen)return!0;if(0==this.m_RealName.text.length)return _FlyText2.default.AddFlyText("姓名错误!"),!1;var code=this.m_RealCode.text;return!!_UNameCheck2.default.isAuthen(code)||(_FlyText2.default.AddFlyText("请输入18位正确的身份证号码!"),!1)}},{key:"Certification",value:function(){var name=this.m_RealName.text,code=this.m_RealCode.text;this.m_bAuthenErr=!1,_gtea2.default.rpc.Call("实名认证","Certification",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),channel:_playerdata_mgr2.default.getInstance().getMe().getChannel(),name:name,code:code},this,function(agv){_FlyText2.default.AddFlyText("身份验证成功！"),_playerdata_mgr2.default.getInstance().getMe().m_Authentiation=agv,this.m_bAuthenErr=!0,this.Refresh(),this.ChkAllOk()},function(errflag,errmsg,agv){_FlyText2.default.AddFlyText("身份验证失败,"+errmsg),this.m_bAuthenErr=!0,this.ChkAllErr()})}},{key:"ChkBindPhone",value:function(){if(this.m_bPhone)return!0;var phone=this.m_Phone.text;if(!_UNameCheck2.default.isMobilePhoneNum(phone))return _FlyText2.default.AddFlyText("手机号不正确!"),!1;var code=this.m_PhoneCode.text;return!isNaN(parseInt(code))||(_FlyText2.default.AddFlyText("请输入手机验证码!"),!1)}},{key:"BindPhone",value:function(){var phone=this.m_Phone.text,code=this.m_PhoneCode.text;this.m_bPhoneErr=!1;var accdata=_playerdata_mgr2.default.getInstance().getLastLoginUsr();_gtea2.default.rpc.Call("在线管理","BindPhone",{platform:accdata.mode,phone:phone,uid:_playerdata_mgr2.default.getInstance().getMeUID(),code:code},this,function(agv){_FlyText2.default.AddFlyText("绑定手机成功！"),_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone=phone,this.m_bPhoneErr=!0,this.Refresh(),this.ChkAllOk()},function(errflag,errmsg){_FlyText2.default.AddFlyText("绑定手机失败,"+errmsg),this.m_bPhoneErr=!0,this.ChkAllErr()})}},{key:"OnClickBtn",value:function(event){if(_soundmgr2.default.getInstance().playSound("snd/button.mp3"),event.target===this.m_CloseBtn)_UIMgr2.default.getInstance().CloseUI(this.UI_NAME);else if(event.target===this.m_GetBtn)this.GetPhoneCode();else if(event.target===this.m_OkBtn){if(this.m_bAuthen&&this.m_bPhone)return void _FlyText2.default.AddFlyText("该账号已完成验证!");if(!this.ChkCertification()||!this.ChkBindPhone())return;this.m_bAuthenErr=!0,this.m_bPhoneErr=!0,this.m_bAuthen||this.Certification(),this.m_bPhone||this.BindPhone(),this.m_OkBtn.disabled=!0,_UIMgr2.default.getInstance().UIEvent("等待界面","OnSetWaitText",["正在验证信息请稍等..."],!0,!0)}}}]),AuticationUI}();exports.default=AuticationUI},{"../../framework/data/playerdata_mgr":117,"../../framework/gtea/gtea":127,"../../framework/ui/BaseUI":141,"../../framework/ui/UIMgr":142,"../../framework/utils/UNameCheck":143,"../../framework/utils/comfunc":144,"../com/FlyText":52,"../com/soundmgr":65}],76:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_itemkind2=_interopRequireDefault(require("../../../framework/data/item/itemkind")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BagPage=function(_BaseObj){function BagPage(bagui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BagPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BagPage.__proto__||Object.getPrototypeOf(BagPage)).call(this));return _this.m_BagUI=bagui,_this.m_BindObj=bindobj,_this.m_BindObj.hScrollBarSkin=" ",_this.m_BindObj.renderHandler=Laya.Handler.create(_this,_this.OnListRander,null,!1),_this.m_BindObj.array=[],_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BagPage,_BaseObj3.default),_createClass(BagPage,[{key:"Clear",value:function(){this.ClearItem(),_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.removeEventListener("eve.DataChg",this),this.m_BindObj.visible=!1}},{key:"Open",value:function(){this.m_BindObj.visible=!0,this.Refresh(),_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.addEventListener("eve.DataChg",this,this.Refresh)}},{key:"ClearItem",value:function(){this.m_BindObj.array=[]}},{key:"OnListRander",value:function(item,idx){var data=this.m_BindObj.array[idx];item.getChildByName("itemimage").skin=data.img,item.getChildByName("item_name").text=data.name,item.getChildByName("Txt_num").text="拥有数量:"+data.num,item.getChildByName("Text_info").text=data.intor;var btn=item.getChildByName("givingbtn");btn&&(1==data.cangiving?(btn.visible=_gameconst2.default.CanShowGivingBtn(),btn.on(Laya.Event.CLICK,this,this.OnClickGiving)):(btn.visible=!1,btn.off(Laya.Event.CLICK,this,this.OnClickGiving))),(btn=item.getChildByName("mixbtn"))&&(data.mixitem.length>0?(btn.visible=!0,btn.disabled=data.num<data.mixitem[1],btn.on(Laya.Event.CLICK,this,this.OnClickMix)):(btn.visible=!1,btn.off(Laya.Event.CLICK,this,this.OnClickMix))),item.visible=!0}},{key:"Refresh",value:function(){if(this.m_BindObj.visible){for(var szItem=[],userbag=_playerdata_mgr2.default.getInstance().getMe().m_ItemBag,i=0;i<userbag.m_szItems.length;i++){var bagitem=userbag.m_szItems[i],itemkind=_itemkindmgr2.default.getInstance().Find(bagitem.m_nKindID);if(itemkind&&itemkind.getType()!=_itemkind2.default.TYPE_BUFF&&1==itemkind.m_nCanShow){for(var bexist=!1,j=0;j<szItem.length;j++)parseInt(szItem[j].id)==parseInt(bagitem.m_nKindID)&&(szItem[j].num+=1,bexist=!0);bexist||szItem.push({id:bagitem.m_nKindID,name:bagitem.m_ItemKind.m_sName,num:bagitem.m_nNum,img:bagitem.m_ItemKind.m_sImg,cangiving:bagitem.m_ItemKind.m_nCanGiving,mixitem:bagitem.m_ItemKind.m_szMixItem,intor:bagitem.m_ItemKind.m_sAbout})}}szItem.sort(function(data1,data2){if(data1.id&&data2.id){if(data1.id<data2.id)return-1;if(data1.id>data2.id)return 1}return 0}),this.m_BindObj.array=szItem}}},{key:"OnClickGiving",value:function(event){for(var i=0;i<this.m_BindObj.cells.length;i++){var item=this.m_BindObj.cells[i],btn=item.getChildByName("givingbtn");if(event.target===btn){this.m_BagUI.OpenGivingDlg(item.dataSource);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnClickMix",value:function(event){for(var i=0;i<this.m_BindObj.cells.length;i++){var item=this.m_BindObj.cells[i],btn=item.getChildByName("mixbtn");if(event.target===btn){this.m_BagUI.MixItem(item.dataSource);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),BagPage}();exports.default=BagPage},{"../../../app/gameconst":5,"../../../framework/data/item/itemkind":112,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../com/soundmgr":65}],77:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_BagPage2=_interopRequireDefault(require("./BagPage")),_RealItemLogPage2=_interopRequireDefault(require("./RealItemLogPage")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../com/FlyText")),_config2=_interopRequireDefault(require("../../../framework/utils/config")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BagUI=function(_BaseUI){function BagUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BagUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BagUI.__proto__||Object.getPrototypeOf(BagUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BagUI,_BaseUI3.default),_createClass(BagUI,[{key:"OnCreate",value:function(){_get(BagUI.prototype.__proto__||Object.getPrototypeOf(BagUI.prototype),"OnCreate",this).call(this),this.m_CloseBtn=this.m_UI.getChildByName("Button_close"),this.m_CloseBtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_RewardTip=this.m_UI.getChildByName("rewardtip"),this.m_szPage=[new _BagPage2.default(this,this.m_UI.getChildByName("page1")),new _RealItemLogPage2.default(this.m_UI.getChildByName("page2"))],this.m_szBtn=[];for(var i=0;i<this.m_szPage.length;i++){var btn=this.m_UI.getChildByName("Button_Page"+(i+1));btn.on(Laya.Event.CLICK,this,this.SelectPage),this.m_szBtn[i]=btn}this.m_UI.mixani&&(this.m_UI.mixani.visible=!1)}},{key:"OnOpen",value:function(direct){this.m_RewardTip&&(this.m_RewardTip.visible=direct),this.OnSelectPage(0)}},{key:"OnClose",value:function(){for(var i=0;i<this.m_szPage.length;i++)this.m_szPage[i].Clear()}},{key:"OnResize",value:function(){if(_get(BagUI.prototype.__proto__||Object.getPrototypeOf(BagUI.prototype),"OnResize",this).call(this),this.m_UI.mixani){this.m_UI.mixani.width=_config2.default.viewSize.width,this.m_UI.mixani.height=_config2.default.viewSize.height;var bg=this.m_UI.mixani.getChildByName("bg");bg.width=this.m_UI.mixani.width,bg.height=this.m_UI.mixani.height,bg.graphics.clear(),bg.graphics.drawRect(0,0,bg.width,bg.height,"#000000")}}},{key:"OnClickBtn",value:function(event){event.target==this.m_CloseBtn&&_UIMgr2.default.getInstance().CloseUI("背包界面"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"SelectPage",value:function(event){for(var i=0;i<this.m_szBtn.length;i++)if(this.m_szBtn[i]==event.target){this.OnSelectPage(i);break}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnSelectPage",value:function(idx){idx>this.m_szPage.length&&(idx=this.m_szPage.length);for(var i=0;i<this.m_szPage.length;i++){var page=this.m_szPage[i],btn=this.m_szBtn[i];i==idx?(page.Open(),btn.selected=!0,btn.mouseEnabled=!1):(page.Clear(),btn.selected=!1,btn.mouseEnabled=!0)}1==idx&&this.m_RewardTip&&(this.m_RewardTip.visible=!1)}},{key:"OpenGivingDlg",value:function(data){data&&_UIMgr2.default.getInstance().UIEvent("背包赠送界面","SetData",data,!0,!0)}},{key:"MixItem",value:function(data){if(data){if(_UIMgr2.default.getInstance().UIEvent("等待界面","OnSetWaitText",["正在合成物品...",9e5],!0,!0),this.m_UI.mixani){_gameconst2.default.SetIconImg(this.m_UI.mixani.getChildByName("item1"),data.img);var itemkind=_itemkindmgr2.default.getInstance().Find(data.mixitem[2]);itemkind&&_gameconst2.default.SetIconImg(this.m_UI.mixani.getChildByName("item2"),itemkind.m_sImg)}var vipexpdata=_playerdata_mgr2.default.getInstance().getMe().m_VIPExpData,vipexp=vipexpdata?vipexpdata.exp:0;_gtea2.default.rpc.Call("仓库数据","BuySecretShop",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),kindid:data.mixitem[0],no_phone:!0,nick:_playerdata_mgr2.default.getInstance().getMeNick(),vipexp:vipexp},this,function(agv){var _this2=this;this.m_UI.mixani?(this.m_UI.mixani.ani1.play(0,!1),this.m_UI.mixani.ani1.once(Laya.Event.COMPLETE,this,function(){_this2.m_UI.mixani.visible=!1}),this.m_UI.mixani.visible=!0):_FlyText2.default.AddFlyText("合成成功!"),_UIMgr2.default.getInstance().CloseUI("等待界面")},function(errflag,errmsg){_FlyText2.default.AddFlyText(errmsg),_UIMgr2.default.getInstance().CloseUI("等待界面")})}}}]),BagUI}();exports.default=BagUI},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/config":145,"../../com/FlyText":52,"../../com/soundmgr":65,"./BagPage":76,"./RealItemLogPage":79}],78:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_FlyText2=_interopRequireDefault(require("../../com/FlyText"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GivingDlg=function(_BaseUI){function GivingDlg(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GivingDlg),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GivingDlg.__proto__||Object.getPrototypeOf(GivingDlg)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GivingDlg,_BaseUI3.default),_createClass(GivingDlg,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(GivingDlg.prototype.__proto__||Object.getPrototypeOf(GivingDlg.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.okbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.addbtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.uiobj.decbtn.on(Laya.Event.CLICK,this,this.OnClickBtn)}},{key:"OnClose",value:function(){this.m_Item=null}},{key:"OnOpen",value:function(){this.uiobj.uid.text="",this.uiobj.sendnum.text="",this.uiobj.okbtn.disabled=!1}},{key:"SetData",value:function(data){this.m_Item=_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.GetItem(data.id)}},{key:"AddNum",value:function(){if(this.m_Item){var num=0;this.uiobj.sendnum.text.length>0&&(num=parseInt(this.uiobj.sendnum.text)),num+=1,num=Math.min(num,this.m_Item.m_nNum),this.uiobj.sendnum.text=num}}},{key:"DecNum",value:function(){if(this.m_Item){var num=0;this.uiobj.sendnum.text.length>0&&(num=parseInt(this.uiobj.sendnum.text)),num-=1,num=Math.max(1,num),this.uiobj.sendnum.text=num}}},{key:"Giving",value:function(){if(0!=this.m_nItemID)if(""!=this.uiobj.uid.text)if(""!=this.uiobj.sendnum.text){var uid=parseInt(this.uiobj.uid.text),num=parseInt(this.uiobj.sendnum.text);if(isNaN(uid)||uid<1e5)_FlyText2.default.AddFlyText("UID不正确!");else if(isNaN(num)||num<=0)_FlyText2.default.AddFlyText("道具数量不正确!");else if(uid!=_playerdata_mgr2.default.getInstance().getMeUID())if(this.m_Item)if(this.m_Item.m_nNum<num)_FlyText2.default.AddFlyText("要赠送的物品数量不足!");else{var sendagv={token:_playerdata_mgr2.default.getInstance().getMeToken(),nick:_playerdata_mgr2.default.getInstance().getMeNick(),sendto:uid,itemid:this.m_Item.m_nKindID,num:num};_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"是否赠送给玩家(UID:"+uid+")\n"+this.m_Item.m_ItemKind.m_sName+"×"+num,obj:this,okfun:function(){_UIMgr2.default.getInstance().CloseUI("系统确认"),this.uiobj.okbtn.disabled=!0,_gtea2.default.rpc.Call("仓库数据","GivingItem",sendagv,this,SendOk,SendErr)}},!0,!0)}else _FlyText2.default.AddFlyText("要赠送的物品不存在!");else _FlyText2.default.AddFlyText("不能送给自己!")}else _FlyText2.default.AddFlyText("请输入要增送的数量!");else _FlyText2.default.AddFlyText("请输入要增送玩家的UID!");else _FlyText2.default.AddFlyText("要赠送的物品错误!");function SendOk(agv){this.IsOpen()&&(_UIMgr2.default.getInstance().CloseUI("背包赠送界面"),_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"赠送成功"},!0,!0))}function SendErr(errflag,errmsg){this.IsOpen()&&(_FlyText2.default.AddFlyText(errmsg),this.uiobj.okbtn.disabled=!1)}}},{key:"OnClickBtn",value:function(event){event.target===this.uiobj.closebtn?_UIMgr2.default.getInstance().CloseUI("背包赠送界面"):event.target===this.uiobj.okbtn?this.Giving():event.target===this.uiobj.addbtn?this.AddNum():event.target===this.uiobj.decbtn&&this.DecNum(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),GivingDlg}();exports.default=GivingDlg},{"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../com/FlyText":52,"../../com/soundmgr":65}],79:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_masterscoremgr2=_interopRequireDefault(require("../../../framework/match/masterscoremgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_FlyText2=_interopRequireDefault(require("../../com/FlyText")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RealItemLogPage=function(_BaseObj){function RealItemLogPage(bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RealItemLogPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(RealItemLogPage.__proto__||Object.getPrototypeOf(RealItemLogPage)).call(this));_this.m_BindObj=bindobj,_this.m_BindObj.vScrollBarSkin=" ",_this.m_BindObj.renderHandler=Laya.Handler.create(_this,_this.OnListRander,null,!1);for(var i=0;i<_this.m_BindObj.cells.length;i++){var item=_this.m_BindObj.cells[i];item.getbtn=item.getChildByName("Button_get"),item.getbtn.on(Laya.Event.CLICK,_this,_this.OnClickBtn)}return _this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(RealItemLogPage,_BaseObj3.default),_createClass(RealItemLogPage,[{key:"Clear",value:function(){this.ClearItem(),this.m_BindObj.visible=!1}},{key:"Open",value:function(){this.Refresh(),this.m_bIsGet=!1,this.m_BindObj.visible=!0}},{key:"ClearItem",value:function(){this.m_BindObj.array=[]}},{key:"OnListRander",value:function(item,idx){var nowtime=new Date,data=this.m_BindObj.array[idx];if(!(idx>30)){var time=item.getChildByName("Text_time"),name=item.getChildByName("Text_name"),id=item.getChildByName("Text_info1");item.getChildByName("mark_yilinqu").rotation=-15;var extinfo={};data.intor&&(extinfo=JSON.parse(data.intor));var titlestr="";if(titlestr="gems"==data.tname?data.value+_itemkindmgr2.default.GEMS_NAME:_itemkindmgr2.default.GetOneRealItemStr([data.tname,data.value]),extinfo)if("master"==extinfo.mode){var rankdata=_masterscoremgr2.default.getInstance().GetDataByRank(extinfo.rank||0);rankdata&&(titlestr=extinfo.change?(titlestr=_itemkindmgr2.default.GetOneRealItemStr(["redpacket",extinfo.value]))+"(排位赛 "+rankdata.name+" 段位奖励,现金红包低于1元自动转换成1钻石)":titlestr+"(排位赛 "+rankdata.name+" 段位奖励)")}else"olacafe"==extinfo.mode?(titlestr="olacafe代金券 编号:"+extinfo.code,extinfo.exptime&&(titlestr=titlestr+" "+extinfo.exptime.substr(0,10)+"日过期")):"58clpk"!=data.tname&&"58chf"!=data.tname||(titlestr=extinfo.productname);if(3!=data.status)if(-2==data.status)titlestr+=" 订单失效,请联系客服";else{var passtime=_comfunc2.default.addHour(data.ctime,extinfo.expiredtime/3600),pass=new Date(passtime);if(nowtime>pass)titlestr+=" 已过期";else titlestr=titlestr+" "+_comfunc2.default.subAsDay(pass,nowtime).toString()+"天后过期"}time.text=_gameconst2.default.GetDateStr(data.ctime),name.text=titlestr,id.text="订单编号:"+data.order_id.toString(),item.data=data,this.RefreshStatus(item)}}},{key:"Refresh",value:function(){_gtea2.default.rpc.Call("实物奖励","ListOrder",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv,bindagv){this.m_BindObj.visible&&this.ListItem(agv)},function(errflag,errmsg){this.m_BindObj.visible&&_FlyText2.default.AddFlyText(errmsg)})}},{key:"ListItem",value:function(agv){this.ClearItem(),agv.sort(function(data1,data2){if(data1.status<data2.status){if(data1.status>0)return-1;if(data1.status>data2.status&&data2.status>0)return 1}return data1.ctime>data2.ctime?-1:data1.ctime<data2.ctime?1:0}),this.m_BindObj.array=agv}},{key:"RefreshStatus",value:function(item){var status=item.getChildByName("Text_info2"),markget=item.getChildByName("mark_yilinqu"),getbtn=item.getChildByName("Button_get");"realitemcode"==item.data.tname?(getbtn.visible=!1,markget.visible=!1,status.text="订单状态:请前往实体店兑换"):(getbtn.visible=1==item.data.status,markget.visible=3==item.data.status,status.text="订单状态:"+this.GetStatusStr(item.data.status))}},{key:"GetStatusStr",value:function(status){switch(status){case-1:return"已过期";case-2:return"订单失效";case 1:return"未发货";case 2:return"发货中";case 3:return"已发货";default:return"失控"}}},{key:"GetItem",value:function(item){function ResendOk(agv,bindagv){this.m_BindObj.visible&&(this.m_bIsGet=!1,item.data.status=3,this.RefreshStatus(item))}function ResendErr(errflag,errmsg){this.m_bIsGet=!1,_FlyText2.default.AddFlyText(errmsg)}if(this.m_bIsGet)_FlyText2.default.AddFlyText("正在领取奖励,请稍等!");else{this.m_bIsGet=!0;_UIMgr2.default.getInstance();(function(){this.m_BindObj.visible&&_gtea2.default.rpc.Call("实物奖励","Resend",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),order_id:item.data.order_id,value:item.data.value},this,ResendOk,ResendErr)}).bind(this)()}}},{key:"OnClickBtn",value:function(event){for(var szItem=this.m_BindObj.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(event.target==item.getbtn){this.GetItem(item);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),RealItemLogPage}();exports.default=RealItemLogPage},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/match/masterscoremgr":131,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../com/FlyText":52,"../../com/soundmgr":65}],80:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_FlyText2=_interopRequireDefault(require("../../com/FlyText")),_layaMaxUI=require("../../../ui/layaMaxUI"),_bridge2=_interopRequireDefault(require("../../com/bridge"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MailDlgUI=function(_BaseUI){function MailDlgUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MailDlgUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(MailDlgUI.__proto__||Object.getPrototypeOf(MailDlgUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MailDlgUI,_BaseUI3.default),_createClass(MailDlgUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(MailDlgUI.prototype.__proto__||Object.getPrototypeOf(MailDlgUI.prototype),"OnCreate",this).call(this,this),this.m_ListView=this.uiobj.getChildByName("Panel_Mail"),this.m_ListView.vScrollBarSkin=" ",this.m_ListView.renderHandler=Laya.Handler.create(this,this.OnListRander,null,!1);for(var i=0;i<this.m_ListView.cells.length;i++){var item=this.m_ListView.cells[i];item.getBtn=item.getChildByName("getbtn"),item.getBtn.on(Laya.Event.CLICK,this,this.OnClickGet),item.msg=item.getChildByName("msg"),item.msg.on(Laya.Event.MOUSE_DOWN,this,this.SelectMsg),item.msg1=item.getChildByName("msg1"),item.msg1.on(Laya.Event.MOUSE_DOWN,this,this.SelectMsg)}this.Btn_Close=this.uiobj.getChildByName("Button_close"),this.Btn_Close.on(Laya.Event.CLICK,this,this.OnBack),this.szBtn=[];for(var _i=0;_i<2;_i++){var btn=this.uiobj.getChildByName("btn_"+_i);btn.on(Laya.Event.CLICK,this,this.SelectPage),this.szBtn.push(btn)}this.Tips=this.uiobj.getChildByName("msgtip"),this.Tips.visible=!1,this.NoTips=this.uiobj.getChildByName("tips_noroom"),this.NoTips&&(this.NoTipsMsg=this.NoTips.getChildByName("Text_1"),this.NoTips.visible=!1)}},{key:"OnOpen",value:function(bref){this.m_nCurPage=0,this.RefreshMail(),_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.addEventListener("eve.DataChg",this,this.RefreshMail)}},{key:"OnClose",value:function(){_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.removeEventListener("eve.DataChg",this),this.SetMailRead(),this.m_szNotice=[],this.m_szMail=[];for(var i=0;i<this.m_ListView.cells.length;i++){var mailItem=this.m_ListView.cells[i];if(mailItem.getBtn=mailItem.getChildByName("getbtn"),mailItem.getBtn.off(Laya.Event.CLICK,this,this.OnClickGet),mailItem.m_ItemList)for(var j=0;j<mailItem.m_ItemList.length;j++)mailItem.m_ItemList[j].visible=!1}this.Tips.visible=!1}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource;if(item.m_ItemList)for(var j=0;j<item.m_ItemList.length;j++)item.m_ItemList[j].visible=!1;item.title=item.getChildByName("title"),item.mark=item.getChildByName("mark"),item.getBtn.visible=!1,item.mark.visible=!1,item.msg.visible=!1,item.msg1.visible=!1;var titlestr=data.title+" "+_comfunc2.default.formatDateTime(new Date(data.time));item.title.text=titlestr;var empty=!0,index=0;if(data.attachments)for(var key in data.attachments)AddListItem(data.attachments[key],key,index++),empty=!1,"real_item"==key&&(item.m_bRealItem=!0);function AddListItem(value,key,index){var img=null;if("gems"==key)img="awards/3.png";else if("vouchers1"==key)img="awards/2.png";else if("gold"==key)img="awards/sm_gold.png";else if("vouchers2"==key)img="awards/5.png";else if("item"==key){var agv=value.split("_");value=parseInt(agv[1]);var itemkind=ItemKindMgr.getInstance().Find(parseInt(agv[0]));itemkind&&(img=itemkind.m_sImg)}else if("itemlist"==key&&value.length>0)for(var _j=0;_j<value.length;_j++)index=AddListItem.bind(this)(value[_j][0]+"_"+value[_j][1],"item",index);if(img){item.m_ItemList||(item.m_ItemList=[]);var _item=item.m_ItemList[index-1];_item||(_item=new _layaMaxUI.MailItemUI,item.addChild(_item),item.m_ItemList.push(_item)),_item.visible=!0,_item.x=_item.x-120*(index-1),_item.getChildByName("item_diamond").skin=img;var itmenum=_item.getChildByName("item_diamond").getChildByName("item_num");itmenum.text="vouchers2"==key?value/100:_gameconst2.default.MakeNumberSimple(value)}}empty?(item.msg1.text=data.note,item.msg1.visible=!0):(0==data.attachments_status?item.getBtn.visible=!0:item.mark.visible=!0,item.msg.text=data.note,item.msg.visible=!0)}},{key:"OnClickGet",value:function(event){_soundmgr2.default.getInstance().playSound("snd/button.mp3");for(var i=0;i<this.m_ListView.cells.length;i++){var mailItem=this.m_ListView.cells[i];if(event.target==mailItem.getBtn){if(!mailItem.dataSource)return;if(!_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.getMailAttachments(mailItem.dataSource.mailid))return;var data=void 0;0==this.m_nCurPage?data=this.m_szNotice:1==this.m_nCurPage&&(data=this.m_szMail);for(var j=0;j<data.length;j++)mailItem.dataSource.mailid==data.mailid&&(data.attachments_status=2);mailItem.getBtn.visible=!1,mailItem.mark.visible=!0,mailItem.m_bRealItem&&_FlyText2.default.AddFlyText("请前往兑奖界面领取现金奖励");break}}}},{key:"RefreshMail",value:function(){this.m_szNotice=[],this.m_szMail=[];for(var i=0;i<this.m_ListView.cells.length;i++){var mailItem=this.m_ListView.cells[i];if(mailItem.getBtn=mailItem.getChildByName("getbtn"),mailItem.getBtn.on(Laya.Event.CLICK,this,this.OnClickGet),mailItem.m_ItemList)for(var j=0;j<mailItem.m_ItemList.length;j++)mailItem.m_ItemList[j].visible=!1}function sortmail(mail1,mail2){var time1=new Date(mail1.time).getTime(),time2=new Date(mail2.time).getTime();return time1>time2?-1:time1<time2?1:0}this.m_ListView.array=[];var list=_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.ListStatueEmails(!1);list.sort(sortmail);for(var mail=void 0,hasunread=!1,_i2=0;_i2<list.length;_i2++)0==(mail=list[_i2]).kind?this.m_szNotice.push(mail):(hasunread=!0,this.m_szMail.push(mail));(list=_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.ListStatueEmails(!0)).sort(sortmail);for(var _i3=0;_i3<list.length;_i3++)0==(mail=list[_i3]).kind?this.m_szNotice.push(mail):this.m_szMail.push(mail);0==this.m_nCurPage&&hasunread?this.Tips.visible=!0:this.Tips.visible=!1,this.OnSelectPage(this.m_nCurPage)}},{key:"OnSelectPage",value:function(idx){for(var i=0;i<this.szBtn.length;i++){var btn=this.szBtn[i];btn.selected=i==idx,btn.mouseEnabled=i!=idx}this.m_nCurPage=idx,0==idx?(this.NoTipsMsg&&(this.NoTipsMsg.text="暂无任何公告"),this.m_ListView.array=this.m_szNotice,this.NoTips&&(this.NoTips.visible=0==this.m_szNotice.length)):1==idx&&(this.NoTipsMsg&&(this.NoTipsMsg.text="暂无任何邮件"),this.m_ListView.array=this.m_szMail,this.Tips.visible=!1,this.NoTips&&(this.NoTips.visible=0==this.m_szMail.length))}},{key:"SelectPage",value:function(event){this.SetMailRead();for(var i=0;i<this.szBtn.length;i++){if(this.szBtn[i]==event.target){this.m_nCurPage=i;break}}this.RefreshMail(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnBack",value:function(){_soundmgr2.default.getInstance().playSound("snd/button.mp3"),_UIMgr2.default.getInstance().CloseUI("邮件界面")}},{key:"SetMailRead",value:function(){var agv=[],data=void 0;0==this.m_nCurPage?data=this.m_szNotice:1==this.m_nCurPage&&(data=this.m_szMail);for(var i=0;i<data.length;i++){var mail=data[i];mail.read||0==mail.attachments_status&&0!=Object.keys(mail.attachments).length||agv.push(mail.mailid)}_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.setBatchMsgReadedByID(agv),_playerdata_mgr2.default.getInstance().getMe().m_UserEmail.CheckDelMail(30)}},{key:"SelectMsg",value:function(event){var _this2=this;this.m_MsgTimer=this.timerCall(1500,function(msg){_bridge2.default.toStartEvent("SetClipboard",[msg.text],_this2,function(obj,response){0===response.code&&_FlyText2.default.AddFlyText("复制邮件内容成功")})},[event.target]),Laya.stage.once(Laya.Event.MOUSE_UP,this,function(){_this2.killTimer(_this2.m_MsgTimer)})}}]),MailDlgUI}();exports.default=MailDlgUI},{"../../../app/gameconst":5,"../../../framework/data/playerdata_mgr":117,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../ui/layaMaxUI":178,"../../com/FlyText":52,"../../com/bridge":64,"../../com/soundmgr":65}],81:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_NoticeUI2=_interopRequireDefault(require("../../com/NoticeUI")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Panel_Base=function(_BaseObj){function Panel_Base(ui,idx,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Panel_Base);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Panel_Base.__proto__||Object.getPrototypeOf(Panel_Base)).call(this));return _this.ui=ui,_this.idx=idx,_this.bindobj=bindobj,_this.nAniXpos=1,_this.bNeedTitle=!0,_this.bNeedBottom=!0,_this.bNeedBack=!0,_this.nXpos=_this.bindobj.x,_this.nYpos=_this.bindobj.y,_this.bindobj.message&&(_this.noticepanel=new _NoticeUI2.default(_this.bindobj.message),_gameconst2.default.CONFIG.isreview&&(_this.noticepanel.m_BindObj.visible=!1)),_this.bindobj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Panel_Base,_BaseObj3.default),_createClass(Panel_Base,[{key:"Open",value:function(subpage){this.StopAni(),this.bindobj.visible=!0}},{key:"Close",value:function(){this.StopAni(),this.Clear(),this.bAniIn=!1,this.bindobj.x=this.nXpos,this.bindobj.y=this.nYpos,this.bindobj.visible=!1}},{key:"SetSubPage",value:function(subpage){}},{key:"Clear",value:function(){this.noticepanel&&this.noticepanel.Clear()}},{key:"OnResize",value:function(){}},{key:"StopAni",value:function(){this.killTween(this.tweenkey)}},{key:"OnRefreshMsg",value:function(agv){_gameconst2.default.CONFIG.isreview||this.noticepanel&&this.noticepanel.OnRefreshMsg(agv)}},{key:"OnAddMsg",value:function(agv){_gameconst2.default.CONFIG.isreview||this.noticepanel&&this.noticepanel.m_BindObj.visible&&this.noticepanel.OnAddMsg(agv)}},{key:"PlayInAni",value:function(subpage,backfun){this.Open(subpage),this.bindobj.x=(Laya.stage.width+this.bindobj.width/2)*this.nAniXpos,this.tweenkey=this.TweenLite(this.bindobj,{x:this.nXpos},300,Laya.Ease.sineOut,Laya.Handler.create(this,this.PlayInAniEnd,[backfun]))}},{key:"PlayInAniEnd",value:function(backfun){this.bAniIn=!0,backfun&&backfun()}},{key:"PlayOutAni",value:function(backfun){this.StopAni();var endx=(Laya.stage.width+this.bindobj.width/2)*this.nAniXpos;this.tweenkey=this.TweenLite(this.bindobj,{x:endx},300,Laya.Ease.sineOut,Laya.Handler.create(this,this.PlayOutAniEnd,[backfun]))}},{key:"PlayOutAniEnd",value:function(backfun){backfun&&backfun(),this.Close()}}]),Panel_Base}();exports.default=Panel_Base},{"../../../app/gameconst":5,"../../../framework/gtea/BaseObj":126,"../../com/NoticeUI":57}],82:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_panel_base2=_interopRequireDefault(require("./panel_base")),_selectpage2=_interopRequireDefault(require("../shop/selectpage")),_shoppage2=_interopRequireDefault(require("../shop/shoppage")),_exchangepage2=_interopRequireDefault(require("../shop/exchangepage")),_recordpage2=_interopRequireDefault(require("../shop/recordpage")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_FlyText2=_interopRequireDefault(require("../../com/FlyText")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_config2=_interopRequireDefault(require("../../../framework/utils/config")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Panel_Shop=function(_Panel_Base){function Panel_Shop(ui,idx,bindobj,selclass){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Panel_Shop);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Panel_Shop.__proto__||Object.getPrototypeOf(Panel_Shop)).call(this,ui,idx,bindobj));return _this.bNeedBottom=!1,bindobj.Text_buttom&&(_gameconst2.default.CONFIG.isreview?bindobj.Text_buttom.text="适度娱乐 理性消费":bindobj.Text_buttom.text="适度娱乐 理性消费 更多游戏信息请咨询微信公众号:"+_gameconst2.default.WeChatPub),selclass||(selclass=_selectpage2.default),_this.m_SelectPage=new selclass(_this,bindobj.framer_switch),_this.m_szSecretItem=[],_this.InitPage(),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Panel_Shop,_panel_base2.default),_createClass(Panel_Shop,[{key:"InitPage",value:function(){this.m_szPage={shop:new _shoppage2.default(this,this.bindobj.gold_diamond),exchange:new _exchangepage2.default(this,this.bindobj.hb),record:new _recordpage2.default(this,this.bindobj.record)}}},{key:"Open",value:function(agv){_get(Panel_Shop.prototype.__proto__||Object.getPrototypeOf(Panel_Shop.prototype),"Open",this).call(this,agv),this.m_bIsLoad||this.LoadExData();var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel());_gtea2.default.rpc.Call("仓库数据","ListSecretShop",[channel,!1],this,function(agv){this.bindobj.visible&&(this.m_szSecretItem=agv,this.ListSecretShopOk())},function(errflag,errmsg){this.bindobj.visible&&_FlyText2.default.AddFlyText(errmsg)}),this.m_SelectPage.Open(agv)}},{key:"ListSecretShopOk",value:function(){this.m_szPage.exchange.Refresh(this.m_szSecretItem)}},{key:"LoadExData",value:function(){var l=_gameconst2.default.SecretshopHideList||[];0!=l.length?_gtea2.default.rpc.Call("仓库数据","ListUserSecretShopOrder",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv){for(var exlist=[],i=0;i<agv.length;i++)_comfunc2.default.arrayContain(l,agv[i][2])&&exlist.push(agv[i][2]);_gameconst2.default.SecretshopExList=exlist,this.m_bIsLoad=!0},function(errflag,errmsg){}):this.m_bIsLoad=!0}},{key:"SetSubPage",value:function(agv){_comfunc2.default.isNil(agv.subpage)||this.m_SelectPage.Open(agv)}},{key:"PlayInAni",value:function(subpage,backfun){this.Open(subpage),this.bindobj.y=_config2.default.viewSize.height+this.bindobj.height/2,this.tweenkey=this.TweenLite(this.bindobj,{y:this.nYpos},300,Laya.Ease.sineOut,Laya.Handler.create(this,this.PlayInAniEnd,[backfun]))}},{key:"PlayInAniEnd",value:function(backfun){_get(Panel_Shop.prototype.__proto__||Object.getPrototypeOf(Panel_Shop.prototype),"PlayInAniEnd",this).call(this,backfun),this.m_bOpen=!0,this.m_szPage.exchange.LoadRecord()}},{key:"PlayOutAni",value:function(backfun){this.StopAni(),this.tweenkey=this.TweenLite(this.bindobj,{y:_config2.default.viewSize.height+this.bindobj.height/2},300,Laya.Ease.sineOut,Laya.Handler.create(this,this.PlayOutAniEnd,[backfun]))}},{key:"Clear",value:function(){for(var key in this.m_SelectPage.Close(),this.m_szPage){this.m_szPage[key].Close(!0)}this.m_bOpen=!1,this.m_szSecretItem=[]}},{key:"SelectPage",value:function(name,mode){for(var key in this.m_szPage){var page=this.m_szPage[key];key==name?page.Open(mode,this.m_szSecretItem):page.Close()}}},{key:"SetSecretItem",value:function(agv){for(var i=0;i<this.m_szSecretItem.length;i++){var item=this.m_szSecretItem[i];if(item.kindid==agv.kindid){item.num=agv.num;break}}}},{key:"RefreshShop",value:function(){this.bindobj.visible&&this.m_szPage.shop.Refresh()}}]),Panel_Shop}();exports.default=Panel_Shop},{"../../../app/gameconst":5,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/utils/comfunc":144,"../../../framework/utils/config":145,"../../com/FlyText":52,"../shop/exchangepage":92,"../shop/recordpage":93,"../shop/selectpage":94,"../shop/shoppage":95,"./panel_base":81}],83:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DropRedPacketItem=function(_BaseObj){function DropRedPacketItem(ui,bindobj,idx){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DropRedPacketItem);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(DropRedPacketItem.__proto__||Object.getPrototypeOf(DropRedPacketItem)).call(this));_this.m_UI=ui,_this.m_BindObj=bindobj,_this.m_nIdx=idx,_this.m_szImg=[];for(var i=1;i<=3;i++){var img=_this.m_BindObj.getChildByName("img_"+i);img.visible=!1,_this.m_szImg.push(img)}return _this.m_Value=_this.m_BindObj.getChildByName("Txt_num"),_this.m_Value.value=null,_this.m_ItemName=_this.m_BindObj.getChildByName("Text_item"),_this.m_ItemName.text="",_this.m_IconReward=_this.m_BindObj.getChildByName("icon_reward"),_this.m_IconReward&&(_this.m_IconReward.visible=!1),_this.m_BindObj.on(Laya.Event.CLICK,_this,_this.OnClick),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DropRedPacketItem,_BaseObj3.default),_createClass(DropRedPacketItem,[{key:"Clear",value:function(){this.killTween(this.m_TweenKey);for(var i=0;i<this.m_szImg.length;i++)this.m_szImg[i].visible=!1;this.m_IconReward&&(this.m_IconReward.visible=!1),this.m_bSelect=!1,this.m_BindObj.scaleX=1,this.m_Value.value=null,this.m_ItemName.text=""}},{key:"ShowBk",value:function(idx){for(var i=0;i<this.m_szImg.length;i++)this.m_szImg[i].visible=i+1==idx}},{key:"OnClick",value:function(event){this.m_UI.Select(this.m_nIdx)}},{key:"PlayAni",value:function(idx,data){this.m_bSelect=!0,this.m_TweenKey=this.TweenLite(this.m_BindObj,{scaleX:0},250,null,Laya.Handler.create(this,function(idx,data){if(this.ShowBk(idx),"item"==data.mode)this.m_ItemName.text=_itemkindmgr2.default.GetAddBagInfo({itemlist:data.itemlist});else{var iconimg="";"gold"==data.mode?(this.m_Value.value=100*data.value,iconimg="lobby/icon_coin.png"):(1==_gameconst2.default.VOUCHERS2RATIO?this.m_Value.value=data.value:this.m_Value.value=_comfunc2.default.getVouchers2Ratio(data.value).toFixed(2),iconimg="lobby/icon_redpack.png"),this.m_IconReward&&(_gameconst2.default.SetIconImg(this.m_IconReward,iconimg),this.m_IconReward.visible=!0)}this.m_TweenKey=this.TweenLite(this.m_BindObj,{scaleX:1},250)},[idx,data]))}}]),DropRedPacketItem}();exports.default=DropRedPacketItem},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/gtea/BaseObj":126,"../../../framework/utils/comfunc":144}],84:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_FlyText2=_interopRequireDefault(require("../../com/FlyText")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_DropRedPacketItem2=_interopRequireDefault(require("./DropRedPacketItem"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DropRedPacketUI=function(_BaseUI){function DropRedPacketUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DropRedPacketUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(DropRedPacketUI.__proto__||Object.getPrototypeOf(DropRedPacketUI)).call(this));return _this.UI_NAME="红包翻牌界面",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DropRedPacketUI,_BaseUI3.default),_createClass(DropRedPacketUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(DropRedPacketUI.prototype.__proto__||Object.getPrototypeOf(DropRedPacketUI.prototype),"OnCreate",this).call(this),this.m_szItem=[];for(var i=1;i<=8;i++)this.m_szItem.push(new _DropRedPacketItem2.default(this,this.m_UI["item_"+i],i));this.m_CloseBtn=this.m_UI.quitbtn,this.m_CloseBtn.on(Laya.Event.CLICK,this,this.OnClick),this.m_ShareBtn=this.m_UI.sharebtn,this.m_ShareBtn.on(Laya.Event.CLICK,this,this.OnClick),this.m_LessTime=this.m_UI.lesstime,this.m_LessTime.text="",this.m_TipMsg=this.m_UI.tip,this.m_TipMsg.visible=!1}},{key:"OnOpen",value:function(){this.m_nSelectIdx=0;for(var i=0;i<this.m_szItem.length;i++)this.m_szItem[i].ShowBk(1);this.m_CloseBtn.visible=!1,this.m_ShareBtn.visible=!1}},{key:"OnClose",value:function(){this.StopClock();for(var i=0;i<this.m_szItem.length;i++)this.m_szItem[i].Clear();this.m_szRed=[],this.m_TipMsg.visible=!1}},{key:"SetData",value:function(agv){this.m_nKindID=agv.kindid,this.m_nMode=agv.mode||1,2==this.m_nMode&&this.SetLessTime(agv.time),"nmmj"==_gameconst2.default.NAMESPACE&&22006==agv.kindid&&(this.m_TipMsg.visible=!0)}},{key:"SetLessTime",value:function(time){this.StopClock(),this.m_nLessTime=time,this.OnClock()}},{key:"OnClock",value:function(){this.m_LessTime.text=this.m_nLessTime+"秒后自动翻牌",this.m_nLessTime=this.m_nLessTime-1,0!=this.m_nLessTime&&(this.m_Timer=this.timerCall(1e3,this.OnClock))}},{key:"StopClock",value:function(){this.m_Timer&&this.killTimer(this.m_Timer),this.m_LessTime.text="",this.m_Timer=null}},{key:"PlayTurnCardAni",value:function(agv){this.IsOpen()&&(this.m_szRed=agv,0==this.m_nSelectIdx&&(this.m_nSelectIdx=Math.floor(Math.random()*this.m_szItem.length+1)),this.m_DropRed=this.m_szRed.shift(),this.m_szItem[this.m_nSelectIdx-1].PlayAni(2,this.m_DropRed),this.StopClock(),this.m_Timer=this.timerCall(600,this.ShowAll))}},{key:"ShowAll",value:function(){for(var i=0;i<this.m_szItem.length&&0!=this.m_szRed.length;i++){var item=this.m_szItem[i];if(!item.m_bSelect){var random=Math.floor(Math.random()*this.m_szRed.length),data=this.m_szRed[random];item.PlayAni(3,data),this.m_szRed.splice(random,1)}}this.m_CloseBtn.visible=!0}},{key:"ShowEnd",value:function(){_UIMgr2.default.getInstance().CloseUI(this.UI_NAME)}},{key:"Select",value:function(idx){0==this.m_nSelectIdx&&(this.m_nSelectIdx=idx,_gtea2.default.rpc.Call("人员红包数据","TurnCard",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),nick:_playerdata_mgr2.default.getInstance().getMeNick(),kindid:this.m_nKindID},this,function(agv){this.PlayTurnCardAni(agv)},function(errflag,errmsg){_FlyText2.default.AddFlyText(errmsg),_UIMgr2.default.getInstance().CloseUI(this.UI_NAME)}))}},{key:"OnClick",value:function(event){if(event.target===this.m_CloseBtn)this.ShowEnd();else if(event.target===this.m_ShareBtn){var ui=void 0;this.m_DropRed.value>=100&&this.m_DropRed.value<=601?ui=_UIMgr2.default.getInstance().GetUI("红包翻牌分享2",!0):this.m_DropRed.value>601&&(ui=_UIMgr2.default.getInstance().GetUI("红包翻牌分享1",!0)),ui&&(ui.SetData({value:this.m_DropRed.value}),ui.OnShareRedPacket(Laya.Handler.create(this,function(){_UIMgr2.default.getInstance().CloseUI(this.UI_NAME)})))}}}]),DropRedPacketUI}();exports.default=DropRedPacketUI},{"../../../app/gameconst":5,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../com/FlyText":52,"./DropRedPacketItem":83}],85:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CInvitePage=function(_BaseObj){function CInvitePage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CInvitePage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(CInvitePage.__proto__||Object.getPrototypeOf(CInvitePage)).call(this));return _this.m_ShareUI=ui,_this.m_BindObj=bindobj,_this.m_ListView=bindobj.getChildByName("Panel_records"),_this.m_ListView.renderHandler=Laya.Handler.create(_this,_this.OnListRander,null,!1),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(CInvitePage,_BaseObj3.default),_createClass(CInvitePage,[{key:"Clear",value:function(){this.m_ListView.array=[],this.m_BindObj.visible=!1}},{key:"Open",value:function(){this.m_ShareUI.QueReward(function(agv){this.Refresh(agv)}.bind(this)),this.m_BindObj.visible=!0}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource;item.getChildByName("msg").text=data}},{key:"Refresh",value:function(agv){if(this.m_BindObj.visible){for(var szInvite=agv.invite||[],szRecord=[],i=szInvite.length-1;i>=0;i--){var data=szInvite[i];szRecord.push(_comfunc2.default.formatDateTime(data.time)+" "+(data.nick||"玩家")+"("+data.uid+"),接收了您的邀请!")}this.m_ListView.array=szRecord}}}]),CInvitePage}();exports.default=CInvitePage},{"../../../framework/gtea/BaseObj":126,"../../../framework/utils/comfunc":144}],86:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CRewardPage=function(_BaseObj){function CRewardPage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CRewardPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(CRewardPage.__proto__||Object.getPrototypeOf(CRewardPage)).call(this));return _this.m_ShareUI=ui,_this.m_BindObj=bindobj,_this.m_ListView=bindobj.getChildByName("Panel_records"),_this.m_ListView.renderHandler=Laya.Handler.create(_this,_this.OnListRander,null,!1),_this.m_GetText=bindobj.getChildByName("Text_awards"),_this.m_GetBtn=bindobj.getChildByName("Button_get"),_this.m_GetBtn.on(Laya.Event.CLICK,_this,_this.OnClickBtn),_this.m_GetBtn.disabled=!0,_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(CRewardPage,_BaseObj3.default),_createClass(CRewardPage,[{key:"Clear",value:function(){this.m_Data=null,this.m_GetText.text="",this.m_GetBtn.disabled=!0,this.m_ListView.array=[],this.m_BindObj.visible=!1}},{key:"Open",value:function(){this.m_ShareUI.QueReward(function(agv){this.Refresh(agv)}.bind(this)),this.m_BindObj.visible=!0}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource;item.getChildByName("msg").text=data}},{key:"Refresh",value:function(data){if(this.m_BindObj.visible){this.m_Data=data;var itemlist=this.MakeSpRewardItem();if(itemlist.length>0){for(var str="您还可以领取 ",i=0;i<itemlist.length;i++){var sub=itemlist[i];str=str+_itemkindmgr2.default.getInstance().Find(sub[0]).m_sName+"*"+sub[1]+" "}str+="的奖励",this.m_GetText.text=str}else this.m_GetText.text="您还可以领取 "+data.gems+" "+_gameconst2.default.GEMSNAME+"的奖励";(data.gems>0||data.vouchers1>0)&&(this.m_GetBtn.disabled=!1),this.RefreshRecord()}}},{key:"RefreshRecord",value:function(){if(this.m_Data){for(var szRecord=[],i=this.m_Data.record.length-1;i>=0;i--){var data=this.m_Data.record[i],rewardstr="领取";data.itemlist?rewardstr+=_itemkindmgr2.default.GetAddBagInfo({itemlist:data.itemlist}):rewardstr+=_itemkindmgr2.default.GetAddBagInfo({gems:data.gems,vouchers1:data.vouchers1}),szRecord.push(_comfunc2.default.formatDateTime(data.time)+" "+rewardstr)}this.m_ListView.array=szRecord}}},{key:"MakeSpRewardItem",value:function(){var itemlist=[];if(_comfunc2.default.isNil(this.m_Data.spreward))return itemlist;var nowtime=new Date;if(nowtime.getTime()>=this.m_Data.spreward.stime.getTime()&&nowtime.getTime()<=this.m_Data.spreward.etime.getTime()){var getnum=Math.ceil(this.m_Data.gems/this.m_Data.rewarddata.gems*this.m_Data.spreward.chgnum);if(_comfunc2.default.isNil(this.m_Data.spreward.max))itemlist=[[this.m_Data.spreward.itemid,getnum]];else{for(var totalnum=0,i=0;i<this.m_Data.record.length;i++){var agv=this.m_Data.record[i];if(!_comfunc2.default.isNil(agv.itemlist))for(var j=0;j<agv.itemlist.length;j++){var sub=agv.itemlist[j];sub[0]==this.m_Data.spreward.itemid&&(totalnum+=sub[1])}}if(totalnum+getnum>this.m_Data.spreward.max.num){var normalnum=this.m_Data.spreward.max.num-totalnum;normalnum>0&&(itemlist.push([this.m_Data.spreward.itemid,normalnum]),getnum-=normalnum),getnum>0&&this.m_Data.spreward.max.itemid&&itemlist.push([this.m_Data.spreward.max.itemid,getnum])}else itemlist=[[this.m_Data.spreward.itemid,getnum]]}}return itemlist}},{key:"GetReward",value:function(){this.OnGetReward()}},{key:"OnGetReward",value:function(){this.m_GetBtn.disabled=!0,_gtea2.default.rpc.Call("扫码邀请","ReceiveReward",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv){this.m_BindObj.visible&&(this.Refresh(agv),_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取奖励成功!"},!0,!0))},function(errflag,errmsg){this.m_BindObj.visible&&(this.m_GetBtn.disabled=!1,_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:errmsg},!0,!0))})}},{key:"OnClickBtn",value:function(event){event.target===this.m_GetBtn&&this.GetReward(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),CRewardPage}();exports.default=CRewardPage},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../com/soundmgr":65}],87:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CSharePage=function(_BaseObj){function CSharePage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CSharePage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(CSharePage.__proto__||Object.getPrototypeOf(CSharePage)).call(this));_this.m_ShareUI=ui,_this.m_BindObj=bindobj;var node=bindobj.getChildByName("frame_outer1");return _this.m_ImgBk=node.getChildByName("Panel_code"),node=bindobj.getChildByName("frame_outer2"),_this.m_ShareBtn=node.getChildByName("Button_share"),_this.m_ShareBtn.on(Laya.Event.CLICK,_this,_this.OnClickBtn),node=bindobj.getChildByName("frame_outer3"),_this.m_Reward1=node.getChildByName("Text_award1"),_this.m_Reward1.text="",_this.m_Reward2=node.getChildByName("Text_award2"),_this.m_Reward2.text="",_this.m_ItemIcon=node.getChildByName("shopitem_diamond"),_this.m_ItemIcon.visible=!1,_this.m_Icon=bindobj.getChildByName("share_icon"),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(CSharePage,_BaseObj3.default),_createClass(CSharePage,[{key:"Clear",value:function(){this.m_Reward1.text="",this.m_Reward2.text="",this.m_ItemIcon.visible=!1,this.m_BindObj.visible=!1}},{key:"Open",value:function(){if(!this.m_CodeImg&&_gameconst2.default.CONFIG.invite_code_url){var imgpath=_gameconst2.default.CONFIG.invite_code_url+_gameconst2.default.NAMESPACE+"/"+_playerdata_mgr2.default.getInstance().getMeUID();this.m_CodeImg=new Laya.Image(imgpath),this.m_ImgBk.addChild(this.m_CodeImg)}this.m_ShareUI.QueReward(function(agv){this.Refresh(agv)}.bind(this)),this.m_BindObj.visible=!0}},{key:"Refresh",value:function(data){if(this.m_BindObj.visible){var rewarddata=data.rewarddata,spreward=data.spreward,nowtime=new Date,spitem=void 0;if(!_comfunc2.default.isNil(spreward)&&nowtime.getTime()>=spreward.stime.getTime()&&nowtime.getTime()<=spreward.etime.getTime()){var itemid=spreward.itemid;if(!_comfunc2.default.isNil(spreward.max)){var totalnum=0;for(i=0;i<data.record.length;i++){var agv=data.record[i];if(!_comfunc2.default.isNil(agv.itemlist))for(var j=0;j<agv.itemlist.length;j++){var subdata=agv.itemlist[j];subdata[0]==itemid&&(totalnum+=subdata[1])}}totalnum>=spreward.max.num&&(itemid=spreward.max.itemid||0)}0!=itemid&&(spitem=_itemkindmgr2.default.getInstance().Find(itemid))}spitem?(this.m_Reward1.text=spitem.m_sName+"*"+spreward.chgnum,this.m_Reward2.text=spitem.m_sAbout):_comfunc2.default.isNil(rewarddata)?this.m_Reward1.text=(_gameconst2.default.SHAREGEMS||"8")+_gameconst2.default.GEMSNAME:this.m_Reward1.text=rewarddata.gems+_gameconst2.default.GEMSNAME,this.m_ItemIcon.visible=!0}}},{key:"OnClickBtn",value:function(event){if(event.target===this.m_ShareBtn){var data={channel:"wx",type:"url",img:"icon.png",url:_gameconst2.default.CONFIG.invite_url+_gameconst2.default.NAMESPACE+"/"+_playerdata_mgr2.default.getInstance().getMeUID(),title:_gameconst2.default.GAMENAME,desc:_gameconst2.default.SHAREMSG};_UIMgr2.default.getInstance().UIEvent("分享选择界面","SetData",data,!0,!0)}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),CSharePage}();exports.default=CSharePage},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../com/soundmgr":65}],88:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_appmethod2=_interopRequireDefault(require("../../com/appmethod")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CShareSelectUI=function(_BaseUI){function CShareSelectUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CShareSelectUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(CShareSelectUI.__proto__||Object.getPrototypeOf(CShareSelectUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(CShareSelectUI,_BaseUI3.default),_createClass(CShareSelectUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(CShareSelectUI.prototype.__proto__||Object.getPrototypeOf(CShareSelectUI.prototype),"OnCreate",this).call(this),this.uiobj.share_1.on(Laya.Event.CLICK,this,this.Share),this.uiobj.share_2.on(Laya.Event.CLICK,this,this.Share),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClickBtn)}},{key:"SetData",value:function(data){this.m_Data=data}},{key:"Share",value:function(event){event.target===this.uiobj.share_1?this.m_Data.scene="session":this.m_Data.scene="timeline",_appmethod2.default.unifiedShare(this.m_Data),_UIMgr2.default.getInstance().CloseUI("分享选择界面"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnClickBtn",value:function(event){event.target===this.uiobj.closebtn&&_UIMgr2.default.getInstance().CloseUI("分享选择界面"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),CShareSelectUI}();exports.default=CShareSelectUI},{"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../com/appmethod":63,"../../com/soundmgr":65}],89:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_SharePage2=_interopRequireDefault(require("./SharePage")),_RewardPage2=_interopRequireDefault(require("./RewardPage")),_InvitePage2=_interopRequireDefault(require("./InvitePage")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CShareUI=function(_BaseUI){function CShareUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CShareUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(CShareUI.__proto__||Object.getPrototypeOf(CShareUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(CShareUI,_BaseUI3.default),_createClass(CShareUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(CShareUI.prototype.__proto__||Object.getPrototypeOf(CShareUI.prototype),"OnCreate",this).call(this);for(var i=1;i<=3;i++){this.uiobj["btn_"+i].on(Laya.Event.CLICK,this,this.SelectPage)}this.uiobj.tips.visible=!1,this.m_szPage=[new _SharePage2.default(this,this.uiobj.page_1),new _RewardPage2.default(this,this.uiobj.page_2),new _InvitePage2.default(this,this.uiobj.page_3)],this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClickBtn)}},{key:"OnOpen",value:function(){this.OnSelectPage(1)}},{key:"OnClose",value:function(){this.m_nCurPage=0,this.uiobj.tips.visible=!1}},{key:"OnSelectPage",value:function(idx){this.m_nCurPage=idx,2==idx&&(this.uiobj.tips.visible=!1);for(var i=1;i<=3;i++){var btn=this.uiobj["btn_"+i];btn.selected=i==idx,btn.mouseEnabled=i!=idx;var page=this.m_szPage[i-1];i==idx?page.Open():page.Clear()}}},{key:"SelectPage",value:function(event){for(var i=1;i<=3;i++){var btn=this.uiobj["btn_"+i];if(event.target===btn){this.OnSelectPage(i);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnClickBtn",value:function(event){event.target===this.uiobj.closebtn&&_UIMgr2.default.getInstance().CloseUI("分享界面"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"QueReward",value:function(backfun){_gtea2.default.rpc.Call("扫码邀请","GetUserReward",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv){backfun&&backfun(agv),2!=this.m_nCurPage&&(agv.gems>0||agv.vouchers1>0)&&(this.uiobj.tips.visible=!0)},function(errflag,errmsg){})}}]),CShareUI}();exports.default=CShareUI},{"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../com/soundmgr":65,"./InvitePage":85,"./RewardPage":86,"./SharePage":87}],90:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_tdf2=_interopRequireDefault(require("../../../framework/utils/tdf")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ChargeItemMgr=function(){function ChargeItemMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ChargeItemMgr),this.m_szAllItem={},this.LoadItem("gems","data/item/wechatpublicgems"),this.LoadItem("gold","data/item/wechatpublicgold")}return _createClass(ChargeItemMgr,null,[{key:"getInstance",value:function(){return ChargeItemMgr.instance||(ChargeItemMgr.instance=new ChargeItemMgr),ChargeItemMgr.instance}}]),_createClass(ChargeItemMgr,[{key:"LoadItem",value:function(name,tdfpath){var szItem=[],tdf=Laya.Loader.getRes(tdfpath+".json")||_tdf2.default.LoadTDF(tdfpath+".tdf");if(tdf)for(var key in tdf){var data=tdf[key];szItem.push({id:parseInt(key),itemid:data["商品编号"],name:data["名称"],price:data["价格"],value:data["钻石"]||data["金币"],szitem:data["物品"]||[],addvalue:data["加送"]||0,intor:data["说明"],buynum:data["购买次数"]||-1,imgpath:data["显示图片"],additem:data["加送物品"]||[],sort:data["排序"]||0,actadd:data["活动赠送"],canshow:_comfunc2.default.isNil(data["是否显示"])?1:data["是否显示"]})}szItem.sort(function(item1,item2){return item1.sort<item2.sort?-1:item1.sort>item2.sort?1:0}),this.m_szAllItem[name]=szItem}},{key:"GetChargeList",value:function(name,all){for(var retagv=[],szItem=this.m_szAllItem[name],i=0;i<szItem.length;i++){var data=szItem[i];(1==data.canshow||all)&&retagv.push(data)}return retagv}},{key:"GetChargeItem",value:function(name,id){var szItem=this.m_szAllItem[name];if(!szItem)return null;for(var i=0;i<szItem.length;i++){var item=szItem[i];if(item.id==id)return item}return null}}]),ChargeItemMgr}();exports.default=ChargeItemMgr},{"../../../framework/utils/comfunc":144,"../../../framework/utils/tdf":148}],91:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_FlyText2=_interopRequireDefault(require("../../com/FlyText")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExchangeConfirmUI=function(_BaseUI){function ExchangeConfirmUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExchangeConfirmUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ExchangeConfirmUI.__proto__||Object.getPrototypeOf(ExchangeConfirmUI)).call(this));return _this.UINAME="兑换确认界面",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ExchangeConfirmUI,_BaseUI3.default),_createClass(ExchangeConfirmUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(ExchangeConfirmUI.prototype.__proto__||Object.getPrototypeOf(ExchangeConfirmUI.prototype),"OnCreate",this).call(this),this.m_CloseBtn=this.m_UI.Button_close,this.m_CloseBtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_ExchangeBtn=this.m_UI.Button_buy,this.m_ExchangeBtn.on(Laya.Event.CLICK,this,this.OnClickBtn),this.m_Icon=this.m_UI.itemimage,this.m_PriceIcon=this.m_UI.pricetag,this.m_Name=this.m_UI.Text_name,this.m_Intor=this.m_UI.Text_info,this.m_LessNum=this.m_UI.Text_number,this.m_Price=this.m_UI.Text_price,this.m_PriceItem=this.m_UI.Text_priceitem,this.m_Tips=this.m_UI.Text_info2}},{key:"OnOpen",value:function(){this.m_bExchange=!1}},{key:"OnClose",value:function(direct){this.m_Data=null}},{key:"SetData",value:function(data){this.m_Data=data,_gameconst2.default.SetIconImg(this.m_Icon,data.data.img),this.m_Name.text=data.data.name,this.m_Intor.text=data.data.about,this.m_LessNum.text="剩余"+data.data.num+"个",this.m_PriceIcon.visible=!0,this.m_Price.visible=!0,this.m_PriceItem&&(this.m_PriceItem.visible=!1),this.m_Tips&&(this.m_Tips.text=data.data.tips||""),data.data.price.vouchers2&&data.data.price.vouchers2>0?(this.m_Price.text=_comfunc2.default.getVouchers2Ratio(data.data.price.vouchers2),_gameconst2.default.SetIconImg(this.m_PriceIcon,"lobby/shopitem/pricetag_hongbao.png")):data.data.price.gems&&data.data.price.gems>0?(this.m_Price.text=_gameconst2.default.MakeNumberSimple(data.data.price.gems),_gameconst2.default.SetIconImg(this.m_PriceIcon,"lobby/shopitem/pricetag_diamond.png")):data.data.price.vouchers1&&data.data.price.vouchers1>0?(this.m_Price.text=_gameconst2.default.MakeNumberSimple(data.data.price.vouchers1),_gameconst2.default.SetIconImg(this.m_PriceIcon,"lobby/shopitem/pricetag_jiangquan.png")):data.data.price.gold&&data.data.price.gold>0?(this.m_Price.text=_gameconst2.default.MakeNumberSimple(data.data.price.gold),_gameconst2.default.SetIconImg(this.m_PriceIcon,"lobby/shopitem/pricetag_coin.png")):data.data.price.itemlist&&data.data.price.itemlist.length>0&&(this.m_PriceItem&&(this.m_PriceItem.text=_itemkindmgr2.default.GetAddBagInfo({itemlist:data.data.price.itemlist}),this.m_PriceItem.visible=!0),this.m_Price.visible=!1,this.m_PriceIcon.visible=!1)}},{key:"ExchangeItem",value:function(){if(!_gameconst2.default.CONFIG.isreview&&_gameconst2.default.NEEDAUTHEN){var nowbind=_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.phone;if(!nowbind||0==nowbind.length)return _FlyText2.default.AddFlyText("请先实名认证!"),_UIMgr2.default.getInstance().OpenUI("实名认证"),void _UIMgr2.default.getInstance().CloseUI(this.UINAME)}if(this.m_bExchange)_FlyText2.default.AddFlyText("正在兑换中,请稍等!");else{var data=this.m_Data.data,szheadframe=this.m_Data.szheadframe;if(data.exchangeitem.itemlist)for(var i=0;i<data.exchangeitem.itemlist.length;i++){var kindid=data.exchangeitem.itemlist[i][0];for(var itemid in szheadframe){var effectid=szheadframe[itemid];if(kindid==parseInt(itemid)&&_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.GetItem(parseInt(effectid)))return void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"您已兑换过此商品,请勿重复兑换!"},!0,!0)}}var t=_gameconst2.default.SecretshopExList||[];_comfunc2.default.arrayContain(t,data.kindid)?_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"您已兑换过此商品,请勿重复兑换!"},!0,!0):!_comfunc2.default.isNil(data.maxchgnum)&&data.maxchgnum>0&&_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.GetSecrtShopItemChgMaxNum(data.kindid)>=data.maxchgnum?_FlyText2.default.AddFlyText("兑换次数已满!"):data.price.vouchers1&&data.price.vouchers1>0&&_playerdata_mgr2.default.getInstance().getMe().getVouchers1()<data.price.vouchers1?_FlyText2.default.AddFlyText("奖券不足!"):data.price.vouchers2&&data.price.vouchers2>0&&_playerdata_mgr2.default.getInstance().getMe().getVouchers2()<data.price.vouchers2?_FlyText2.default.AddFlyText(_itemkindmgr2.default.VOUCHERS2_NAME+"不足!"):data.price.gems&&data.price.gems>0&&_playerdata_mgr2.default.getInstance().getMe().getGems()<data.price.gems?_FlyText2.default.AddFlyText(_itemkindmgr2.default.GEMS_NAME+"不足!"):this.OnExchangeItem()}}},{key:"OnExchangeItem",value:function(phonenum){var data=this.m_Data.data;this.m_bExchange=!0,_UIMgr2.default.getInstance().UIEvent("等待界面","OnSetWaitText",["正在兑换商品...",3e4],!0,!0);var vipexpdata=_playerdata_mgr2.default.getInstance().getMe().m_VIPExpData,vipexp=vipexpdata?vipexpdata.exp:0,device=void 0;"undefined"!=typeof gbxBridge&&gbxBridge.deviceType&&(device=gbxBridge.deviceType);var senddata={uid:_playerdata_mgr2.default.getInstance().getMeUID(),nick:_playerdata_mgr2.default.getInstance().getMeNick(),kindid:data.kindid,no_phone:!0,vipexp:vipexp,phonenum:phonenum,device:device,platform_id:_playerdata_mgr2.default.getInstance().m_sPlatformID,thirdparty:_gameconst2.default.THIRDPARTY,paymode:_gameconst2.default.CONFIG.redpaymode};_gtea2.default.rpc.Call("仓库数据","BuySecretShop",senddata,this,function(agv){this.m_bExchange=!1,this.m_Data.ui.ExchangeItemOk(agv),_UIMgr2.default.getInstance().CloseUI("等待界面"),_UIMgr2.default.getInstance().CloseUI(this.UINAME);var l=_gameconst2.default.SecretshopHideList||[];if(l.length>0&&_comfunc2.default.arrayContain(l,data.kindid)){var t=_gameconst2.default.SecretshopExList||[];t.push(data.kindid),_gameconst2.default.SecretshopExList=t}},function(errflag,errmsg){this.m_bExchange=!1,_UIMgr2.default.getInstance().CloseUI("等待界面"),_FlyText2.default.AddFlyText(errmsg)})}},{key:"OnClickBtn",value:function(event){event.target===this.m_CloseBtn?_UIMgr2.default.getInstance().CloseUI(this.UINAME):event.target===this.m_ExchangeBtn&&this.ExchangeItem(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),ExchangeConfirmUI}();exports.default=ExchangeConfirmUI},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../com/FlyText":52,"../../com/soundmgr":65}],92:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExchangePage=function(_BaseObj){function ExchangePage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExchangePage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ExchangePage.__proto__||Object.getPrototypeOf(ExchangePage)).call(this));_this.m_UI=ui,_this.m_BindObj=bindobj,_this.Init(),_this.m_szHeadFrame={};for(var i=0;i<_gameconst2.default.HEADEFFECTLIST.length;i++){var effectid=_gameconst2.default.HEADEFFECTLIST[i].toString(),itemid=effectid.replace("5","1");_this.m_szHeadFrame[itemid]=effectid}return _this.m_szOrderRecord=[],_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ExchangePage,_BaseObj3.default),_createClass(ExchangePage,[{key:"Init",value:function(){this.m_ListView=this.m_BindObj.getChildByName("ListView"),this.m_ListView.renderHandler=Laya.Handler.create(this,this.OnListRander,null,!1);for(var i=0;i<this.m_ListView.cells.length;i++){var item=this.m_ListView.cells[i];item.buybtn=item.getChildByName("Button_buy"),item.buybtn.on(Laya.Event.CLICK,this,this.OnClickBtn),item.on(Laya.Event.CLICK,this,this.OnClickBtn)}this.m_ListViewRecord=this.m_BindObj.getChildByName("ListView1"),this.m_ListViewRecord.renderHandler=Laya.Handler.create(this,this.OnListRanderRecord,null,!1)}},{key:"Open",value:function(mode,agv){this.m_BindObj.visible=!0,this.SetModeList(mode),this.Refresh(agv),this.m_UI.m_bOpen&&this.LoadRecord()}},{key:"Close",value:function(){this.Clear(),this.ClearRecord(),this.m_szOrderRecord=[],this.m_BindObj.visible=!1}},{key:"Clear",value:function(){this.m_ListView.array=[]}},{key:"ClearRecord",value:function(){this.m_ListViewRecord&&(this.m_ListViewRecord.array=[])}},{key:"SetModeList",value:function(mode){this.m_szModeList=[mode]}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource,icon=item.getChildByName("itemimage"),name=item.getChildByName("item_name"),priceicon=item.getChildByName("pricetag"),price=item.getChildByName("Text_price"),priceitem=item.getChildByName("Text_priceitem"),text_x=item.getChildByName("Text_x"),addper=item.getChildByName("shop_greentag"),addtext=addper.getChildByName("Text");if(price.visible=!0,priceicon.visible=!0,text_x.visible=!0,priceitem&&(priceitem.visible=!1),_gameconst2.default.SetIconImg(icon,data.img),name.text=data.name,data.addper>0){var addstr="加赠"+data.addper+"%";_gameconst2.default.ShopBonusStr&&(addstr="双11"),_gameconst2.default.ShopBonusBg&&_gameconst2.default.SetIconImg(addper,_gameconst2.default.ShopBonusBg),addtext.text=addstr}else addper.visible=!1;data.price.vouchers2&&data.price.vouchers2>0?(price.text=_comfunc2.default.getVouchers2Ratio(data.price.vouchers2),_gameconst2.default.SetIconImg(priceicon,"lobby/shopitem/pricetag_hongbao.png")):data.price.gems&&data.price.gems>0?(price.text=_gameconst2.default.MakeNumberSimple(data.price.gems),_gameconst2.default.SetIconImg(priceicon,"lobby/shopitem/pricetag_diamond.png")):data.price.vouchers1&&data.price.vouchers1>0?(price.text=_gameconst2.default.MakeNumberSimple(data.price.vouchers1),_gameconst2.default.SetIconImg(priceicon,"lobby/shopitem/pricetag_jiangquan.png")):data.price.gold&&data.price.gold>0?(price.text=_gameconst2.default.MakeNumberSimple(data.price.gold),_gameconst2.default.SetIconImg(priceicon,"lobby/shopitem/pricetag_coin.png")):data.price.itemlist&&data.price.itemlist.length>0&&(priceitem&&(priceitem.text=_itemkindmgr2.default.GetAddBagInfo({itemlist:data.price.itemlist}),priceitem.visible=!0),price.visible=!1,priceicon.visible=!1,text_x.visible=!1)}},{key:"OnListRanderRecord",value:function(item,idx){var data=item.dataSource,time=item.getChildByName("Text_time"),intor=item.getChildByName("Text_info1"),name=item.getChildByName("Text_info2");time.text=_comfunc2.default.GetDateStr(new Date(data.ctime)),intor.text=data.nick+"成功兑换",name.text=data.name,name.x=intor.x+intor.width+1}},{key:"Refresh",value:function(agv){if(this.m_BindObj.visible){for(var szItem=[],i=0;i<agv.length;i++){var data=agv[i];if(isinmode.bind(this)(data.type)&&data.status>0&&data.num>0){var flag=!1;if(data.exchangeitem.itemlist)for(var j=0;j<data.exchangeitem.itemlist.length;j++){var itemkindid=data.exchangeitem.itemlist[j][0];for(var itemid in this.m_szHeadFrame){var effectid=this.m_szHeadFrame[itemid];if(itemkindid==parseInt(itemid)&&_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.GetItem(parseInt(effectid))){flag=!0;break}}}var l=_gameconst2.default.SecretshopExList||[];if(_comfunc2.default.arrayContain(l,data.kindid)&&(flag=!0),!_comfunc2.default.isNil(data.maxchgnum)&&data.maxchgnum>0&&_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.GetSecrtShopItemChgMaxNum(data.kindid)>=data.maxchgnum&&(flag=!0),_gameconst2.default.CONFIG.isreview&&(_comfunc2.default.isNil(data.reviewshow)||0!=data.reviewshow||(flag=!0)),data.vipexp>0){var vipexpdata=_playerdata_mgr2.default.getInstance().getMe().m_VIPExpData;(vipexpdata?vipexpdata.exp:0)<data.vipexp&&(flag=!0)}if(data.szunshowchannel)for(var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel()),_i=0;_i<data.szunshowchannel.length;_i++)if("all"==data.szunshowchannel[_i]||data.szunshowchannel[_i]==channel){flag=!0;break}flag||szItem.push(data)}}szItem.sort(function(data1,data2){if(_comfunc2.default.isNil(data1.sort)||_comfunc2.default.isNil(data2.sort)){if(data1.kindid<data2.kindid)return-1;if(data1.kindid>data2.kindid)return 1}else{if(data1.sort<data2.sort)return-1;if(data1.sort>data2.sort)return 1}return 0}),this.Clear(),this.OnRefresh(szItem)}function isinmode(type){for(var i=0;i<this.m_szModeList.length;i++)if(this.m_szModeList[i]==type)return!0;return!1}}},{key:"OnRefresh",value:function(szItem){this.m_ListView.array=szItem}},{key:"LoadRecord",value:function(){this.m_BindObj.visible&&this.m_ListViewRecord&&_gtea2.default.rpc.Call("仓库数据","ListSecretShopOrderRecord",[this.m_szModeList[0]],this,function(agv){this.RefreshRecord(agv)},function(errflag,errmsg){})}},{key:"RefreshRecord",value:function(agv){this.m_BindObj.visible&&(this.m_szOrderRecord=agv,this.ListRecordItem())}},{key:"ListRecordItem",value:function(){this.m_ListViewRecord&&(this.ClearRecord(),this.m_ListViewRecord.array=this.m_szOrderRecord)}},{key:"ExchangeItemOk",value:function(agv){for(var szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(item.dataSource.kindid==agv.kindid){item.dataSource.lessnum=agv.num;var data={uid:_playerdata_mgr2.default.getInstance().getMeUID(),nick:_playerdata_mgr2.default.getInstance().getMeNick(),kindid:agv.kindid,name:item.dataSource.name,ctime:(new Date).getTime()/1e3};this.m_szOrderRecord.push(data),this.ListRecordItem();break}}this.m_UI.SetSecretItem(agv),_UIMgr2.default.getInstance().UIEvent("大厅界面","ExchangeItemOk",agv)}},{key:"OnClickBtn",value:function(event){for(var szItem=this.m_ListView.cells,i=0;i<szItem.length;i++){var item=szItem[i];if(item===event.target||item.buybtn===event.target){_UIMgr2.default.getInstance().UIEvent("兑换确认界面","SetData",{ui:this,data:item.dataSource,szheadframe:this.m_szHeadFrame},!0,!0);break}}event.stopPropagation(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),ExchangePage}();exports.default=ExchangePage},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../com/soundmgr":65}],93:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RecordPage=function(_BaseObj){function RecordPage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RecordPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(RecordPage.__proto__||Object.getPrototypeOf(RecordPage)).call(this));return _this.m_UI=ui,_this.m_BindObj=bindobj,_this.m_ListView=bindobj.getChildByName("ListView"),_this.m_ListView.renderHandler=Laya.Handler.create(_this,_this.OnListRander,null,!1),_this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(RecordPage,_BaseObj3.default),_createClass(RecordPage,[{key:"Open",value:function(){_gtea2.default.rpc.Call("仓库数据","ListUserSecretShopOrder",{uid:_playerdata_mgr2.default.getInstance().getMeUID()},this,function(agv,bindagv){if(this.m_BindObj.visible){var l=_gameconst2.default.SecretshopHideList||[];if(l.length>0){for(var exlist=[],i=0;i<agv.length;i++)_comfunc2.default.arrayContain(l,agv[i][2])&&exlist.push(agv[i][2]);_gameconst2.default.SecretshopExList=exlist}this.ListItem(agv)}},function(errflag,errmsg){}),this.m_BindObj.visible=!0}},{key:"Close",value:function(){this.Clear(),this.m_BindObj.visible=!1}},{key:"Clear",value:function(){this.m_ListView.array=[]}},{key:"OnListRander",value:function(item,idx){var sub=item.dataSource,time=item.getChildByName("Text_time"),intor=item.getChildByName("Text_info1"),name=item.getChildByName("Text_info2");time.text=_comfunc2.default.GetDateStr(new Date(sub[8])),intor.text="成功兑换",name.text=sub[3]+"("+sub[6]+")",name.x=intor.x+intor.width+1}},{key:"ListItem",value:function(agv){this.Clear(),agv.sort(function(sub1,sub2){if(sub1[4]<sub2[4])return-1;if(sub1[4]>sub2[4])return 1;var time1=new Date(sub1[8]).getTime(),time2=new Date(sub2[8]).getTime();return time1>time2?-1:time1<time2?1:0}),this.m_ListView.array=agv}}]),RecordPage}();exports.default=RecordPage},{"../../../app/gameconst":5,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/gtea/gtea":127,"../../../framework/utils/comfunc":144}],94:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SelectPage=function(_BaseObj){function SelectPage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SelectPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SelectPage.__proto__||Object.getPrototypeOf(SelectPage)).call(this));_this.m_UI=ui,_this.m_BindObj=bindobj,_this.m_ListView=bindobj.getChildByName("ListView"),_this.m_szAllBtn={};for(var i=0;i<_this.m_ListView.content._children.length;i++){var btn=_this.m_ListView.content._children[i];btn.on(Laya.Event.CLICK,_this,_this.OnClickBtn);var name=btn.name.split("_")[1];_this.m_szAllBtn[name]=btn}return _this.m_szTarget={hb:{page:"exchange",mode:3},jb:{page:"shop",mode:1},zs:{page:"shop",mode:2},dj:{page:"exchange",mode:2},sw:{page:"exchange",mode:1},jl:{page:"record",mode:1}},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SelectPage,_BaseObj3.default),_createClass(SelectPage,[{key:"Open",value:function(agv){var showmode=_gameconst2.default.CONFIG.isreview?4:1;this.m_nShowMode!=showmode?(this.m_nShowMode=showmode,this.RefreshBtn(agv.subpage,agv.szshowpage)):this.SelectPage(agv.subpage)}},{key:"Close",value:function(){this.m_nShowMode=0,this.ClearBtn()}},{key:"ClearBtn",value:function(){this.m_ListView.removeChildren()}},{key:"RefreshBtn",value:function(subpage,szAddBtn){this.ClearBtn(),(_comfunc2.default.isNil(szAddBtn)||0==szAddBtn.length)&&(szAddBtn=1==this.m_nShowMode?["hb","jb","zs","dj","sw","jl"]:2==this.m_nShowMode?["hb"]:["dj","jl"]);for(var i=0;i<szAddBtn.length;i++){var name=szAddBtn[i],btn=this.m_szAllBtn[name];btn.y=i*btn.height,this.m_ListView.addChild(btn)}this.SelectPage(subpage||szAddBtn[0])}},{key:"SelectPage",value:function(name){for(var szBtn=this.m_ListView.content._children,firstname=void 0,i=0;i<szBtn.length;i++){var btn=szBtn[i],btnname=btn.name.split("_")[1];btn.selected=btnname==name,btn.mouseEnabled=btnname!=name,0==i&&(firstname=btnname)}var data=this.m_szTarget[name];data?this.m_UI.SelectPage(data.page,data.mode):this.SelectPage(firstname)}},{key:"OnClickBtn",value:function(event){var name=event.target.name.split("_")[1];this.SelectPage(name),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),SelectPage}();exports.default=SelectPage},{"../../../app/gameconst":5,"../../../framework/gtea/BaseObj":126,"../../../framework/utils/comfunc":144,"../../com/soundmgr":65}],95:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_chargeitemmgr2=_interopRequireDefault(require("./chargeitemmgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ShopPage=function(_BaseObj){function ShopPage(ui,bindobj){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ShopPage);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ShopPage.__proto__||Object.getPrototypeOf(ShopPage)).call(this));_this.m_UI=ui,_this.m_BindObj=bindobj,_this.m_ListView=bindobj.getChildByName("ListView"),_this.m_ListView.renderHandler=Laya.Handler.create(_this,_this.OnListRander,null,!1);for(var i=0;i<_this.m_ListView.cells.length;i++){var item=_this.m_ListView.cells[i];item.buybtn=item.getChildByName("Button_buy"),item.buybtn.on(Laya.Event.CLICK,_this,_this.OnClickBtn),item.on(Laya.Event.CLICK,_this,_this.OnClickBtn)}return _this.m_BindObj.visible=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ShopPage,_BaseObj3.default),_createClass(ShopPage,[{key:"Open",value:function(mode){this.m_nMode=mode,this.m_BindObj.visible=!0,this.Refresh()}},{key:"Close",value:function(){this.Clear(),this.m_BindObj.visible=!1}},{key:"Clear",value:function(){this.m_ListView.array=[]}},{key:"Refresh",value:function(){if(this.m_BindObj.visible){var channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel());"gbxBridge"in window&&"ios"==gbxBridge.deviceType&&_gameconst2.default.CONFIG.iospay?this.ListItem(_itemkindmgr2.default.getInstance().ListAllShopGemByChannel(channel,1==this.m_nMode?"gold":"gems")):this.ListItem(_chargeitemmgr2.default.getInstance().GetChargeList(1==this.m_nMode?"gold":"gems"))}}},{key:"OnListRander",value:function(item,idx){var value=item.dataSource,icon=item.getChildByName("itemimage"),name=item.getChildByName("item_name"),price=item.getChildByName("Text_price"),add=item.getChildByName("Text_info1"),total=item.getChildByName("Text_info2"),data={};(data="gbxBridge"in window&&"ios"==gbxBridge.deviceType&&_gameconst2.default.CONFIG.iospay?{imgpath:value.m_sImg,name:value.m_sName,price:value.m_nPrice,value:value.m_nGems,addvalue:value.m_nAddGems,buynum:0,intor:value.m_sAbout}:value).imgpath&&_gameconst2.default.SetIconImg(icon,"item/"+data.imgpath),name.text=data.name,price.text="￥"+data.price/100,total?0==data.addvalue?(add.text="",total.text="总共"+_gameconst2.default.MakeNumberSimple(data.value)):(add.text="额外赠送"+_gameconst2.default.MakeNumberSimple(data.addvalue)+(data.buynum>0?"(仅限"+data.buynum+"次)":""),total.text="总共"+_gameconst2.default.MakeNumberSimple(data.value)):add&&(add.text=data.intor)}},{key:"ListItem",value:function(agv){this.Clear(),this.m_ListView.array=agv}},{key:"OnClickBtn",value:function(event){for(var i=0;i<this.m_ListView.cells.length;i++){var item=this.m_ListView.cells[i];if(event.target===item||event.target==item.buybtn){_UIMgr2.default.getInstance().UIEvent("大厅界面","BuyGemsGold",{mode:this.m_nMode,item:item},!0,!0);break}}event.stopPropagation(),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),ShopPage}();exports.default=ShopPage},{"../../../app/gameconst":5,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/BaseObj":126,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../com/soundmgr":65,"./chargeitemmgr":90}],96:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../../framework/gtea/gtea")),_soundmgr2=_interopRequireDefault(require("../../com/soundmgr")),_FlyText2=_interopRequireDefault(require("../../com/FlyText")),_UserHead2=_interopRequireDefault(require("../../com/UserHead")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PlayerInfo=function(_BaseUI){function PlayerInfo(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PlayerInfo);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PlayerInfo.__proto__||Object.getPrototypeOf(PlayerInfo)).call(this));return _this.UI_NAME="个人信息2",_this.m_nUID=0,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PlayerInfo,_BaseUI3.default),_createClass(PlayerInfo,[{key:"OnCreate",value:function(){if(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0}(PlayerInfo.prototype.__proto__||Object.getPrototypeOf(PlayerInfo.prototype),"OnCreate",this).call(this),this.m_Head=new _UserHead2.default(this.m_UI.Spr_Head),this.Txt_Name=this.m_UI.Text_name,this.Txt_UID=this.m_UI.Text_id,this.Txt_UID.on(Laya.Event.CLICK,this,this.TouchUID),this.Txt_Gem=this.m_UI.Text_diamond_num,this.Txt_IP=this.m_UI.Text_ip,this.Txt_IP.text="",this.m_UI.HeadList){this.HeadList=this.m_UI.HeadList,this.HeadList.renderHandler=Laya.Handler.create(this,this.OnListRander,null,!1);for(var i=0;i<this.HeadList.cells.length;i++){this.HeadList.cells[i].on(Laya.Event.CLICK,this,this.SelectHead)}}this.Btn_Ok=this.m_UI.Button_ok,this.Btn_Ok.on(Laya.Event.CLICK,this,this.OnBack),this.m_szHeadIDs=[];for(var list=_gameconst2.default.HEADEFFECTLIST||[],_i=0;_i<list.length;_i++)this.m_szHeadIDs.push(list[_i])}},{key:"OnOpen",value:function(){this.m_bLock=!1}},{key:"OnClose",value:function(){this.HeadList&&(this.HeadList.array=[]),this.m_Head.Clear()}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource,Head_Bk=item.getChildByName("headbk"),Check_Box=item.getChildByName("checkbox");0==data.id?(_gameconst2.default.SetIconImg(Head_Bk,"lobby/player_frame.png"),Head_Bk.scaleX=Head_Bk.scaleY=1):(_gameconst2.default.SetIconImg(Head_Bk,"avatar/headframe_"+data.id+".png"),Head_Bk.scaleX=Head_Bk.scaleY=1.16),Check_Box.selected=data.used,item.mouseEnabled=!data.used}},{key:"SetDataInfo",value:function(usr){var nick=usr.getNick();usr.m_UserData.m_vData.headidx;this.m_nUID=usr.m_nUID,this.Txt_Name.text=nick,this.Txt_UID.text="玩家ID:"+usr.m_nUID;var value=_gameconst2.default.PLAYERINFOGOLD?usr.getGold():usr.getGems();this.Txt_Gem.text=_comfunc2.default.getGoldRatio(value),this.m_Head.setHeadByUID(usr.m_nUID);for(var used=0,szheadlist=[],i=0;i<this.m_szHeadIDs.length;i++){var itemid=parseInt(this.m_szHeadIDs[i]),framedata=_playerdata_mgr2.default.getInstance().getMe().m_UserData.getHeadFrameData(itemid);if(framedata){var data={id:itemid,used:!1};framedata.used&&(used=itemid,data.used=!0),szheadlist.push(data)}}szheadlist.unshift({id:0,used:0==used}),this.HeadList&&(this.HeadList.array=[])}},{key:"OnLoadDataOk",value:function(agv){var uid=agv.UserData.uid,p=_playerdata_mgr2.default.getInstance().getData(uid);p.setData(agv),this.SetDataInfo(p)}},{key:"OnLoadDataErr",value:function(){}},{key:"SetInfo",value:function(agv){var uid=agv[0],ip=agv[1],usr=_playerdata_mgr2.default.getInstance().findData(uid);usr?this.SetDataInfo(usr):(this.m_nUID=uid,_gtea2.default.rpc.Call("在线管理","QueData",[uid],this,this.OnLoadDataOk,this.OnLoadDataErr)),this.Txt_IP.text=ip?"IP:"+ip:"",this.IsOpen()||_UIMgr2.default.getInstance().OpenUI(this.UI_NAME)}},{key:"TouchUID",value:function(event){}},{key:"ChangHeadFrame",value:function(id){this.m_bLock=!0,_gtea2.default.rpc.Call("人员数据","ChgHeadFrame",{uid:this.m_nUID,itemid:id,used:!0},this,function(data){this.m_bLock=!1;var usr=_playerdata_mgr2.default.getInstance().findData(this.m_nUID);usr&&(usr.m_UserData.SetHeadFrame(data),this.m_Head.setHeadByUID(this.m_nUID))},function(errflag,errmsg){this.IsOpen()&&(this.m_bLock=!1,_FlyText2.default.AddFlyText(errmsg))})}},{key:"OnSelectHead",value:function(id,send){for(var i=0;i<this.HeadList.cells.length;i++){var item=this.HeadList.cells[i],Check_Box=item.getChildByName("checkbox");item.dataSource&&(item.dataSource.id==id?(Check_Box.selected=!0,item.mouseEnabled=!1):(Check_Box.selected=!1,item.mouseEnabled=!0))}for(var _i2=0;_i2<this.HeadList.array.length;_i2++){var data=this.HeadList.array[_i2];data.used=data.id==id}send&&this.ChangHeadFrame(id)}},{key:"SelectHead",value:function(event){if(!this.m_bLock){for(var i=0;i<this.HeadList.cells.length;i++){var item=this.HeadList.cells[i];if(item===event.target&&item.dataSource){this.OnSelectHead(parseInt(item.dataSource.id),!0);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}},{key:"OnBack",value:function(){_soundmgr2.default.getInstance().playSound("snd/button.mp3"),_UIMgr2.default.getInstance().CloseUI(this.UI_NAME)}}]),PlayerInfo}();exports.default=PlayerInfo},{"../../../app/gameconst":5,"../../../framework/data/playerdata_mgr":117,"../../../framework/gtea/gtea":127,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../com/FlyText":52,"../../com/UserHead":61,"../../com/soundmgr":65}],97:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=_interopRequireDefault(require("../../framework/gtea/BaseObj")),_config2=_interopRequireDefault(require("../../framework/utils/config")),_LoadingBar2=_interopRequireDefault(require("../com/LoadingBar")),_layaMaxUI=require("../../ui/layaMaxUI");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.assign(Laya.Loader.typeMap,{tdf:"text",gz:"arraybuffer",lh:"HIERARCHY",ls:"HIERARCHY"});var LoadingUI=function(_LoadingPageUI){function LoadingUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LoadingUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(LoadingUI.__proto__||Object.getPrototypeOf(LoadingUI)).call(this));return _this.anchorX=_this.anchorY=.5,_this.m_LoadingBar=new _LoadingBar2.default(_this.bar),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(LoadingUI,_layaMaxUI.LoadingPageUI),_createClass(LoadingUI,null,[{key:"getInstance",value:function(){return LoadingUI.instance||(LoadingUI.instance=new LoadingUI,LoadingUI.instance.visible=!1,Laya.stage.addChild(LoadingUI.instance)),LoadingUI.instance}}]),_createClass(LoadingUI,[{key:"Close",value:function(){this.m_szLoadList=[],this.m_Handler=null,this.m_sCurRespath=null,this.m_bAutoClose=!1,this.m_LoadingBar.Clear(),_BaseObj2.default.FindRegObj("MainApp").removeEventListener("stagesizechg",this,this.OnResize),this.visible=!1}},{key:"Loading",value:function(data){this.m_szLoadList=data.reslist,this.m_Handler=data.backfun,this.m_bAutoClose=data.autoclose,this.m_nMaxResNum=this.m_szLoadList.length,this.m_nIdx=0,this.m_LoadingBar.Clear(),this.zOrder=100,this.visible=!0,this.SetMsg(data.msg),this.LoadRes(),this.OnResize(),_BaseObj2.default.FindRegObj("MainApp").addEventListener("stagesizechg",this,this.OnResize)}},{key:"OnResize",value:function(){this.width=_config2.default.viewSize.width,this.height=_config2.default.viewSize.height,this.x=_config2.default.center.x,this.y=_config2.default.center.y,this.bg.x=this.width/2,this.bg.y=this.height/2,this.bg.scaleX=this.bg.scaleY=_config2.default.scale,this.logo.x=this.width/2,this.bar.x=this.width/2}},{key:"LoadRes",value:function(){this.m_szLoadList&&0!=this.m_szLoadList.length?(this.m_sCurRespath=this.m_szLoadList.shift(),this.m_nIdx=this.m_nIdx+1,this.OnLoadRes()):this.LoadResOk()}},{key:"OnLoadRes",value:function(){if(this.m_sCurRespath){if(/\.js$/.test(this.m_sCurRespath)){var script=document.createElement("script");return script.type="text/javascript",script.src=this.m_sCurRespath,document.getElementsByTagName("body")[0].appendChild(script),void(script.onload=LoadOk.bind(this))}var loadtype=null;/\.gzip$/.test(this.m_sCurRespath)?loadtype=Laya.Loader.BUFFER:/\.path$/.test(this.m_sCurRespath)?loadtype=Laya.Loader.BUFFER:/\.ani$/.test(this.m_sCurRespath)?loadtype=Laya.Loader.JSON:/\.atlas$/.test(this.m_sCurRespath)?loadtype=Laya.Loader.ATLAS:/\.mp3$/.test(this.m_sCurRespath)?loadtype=Laya.Loader.SOUND:/\.ttf$/.test(this.m_sCurRespath)&&(loadtype=Laya.Loader.TTF),Laya.loader.load(this.m_sCurRespath,Laya.Handler.create(this,function(args){args?LoadOk.bind(this)():this.OnLoadRes()}),null,loadtype)}function LoadOk(){this.m_LoadingBar.setPercent(parseInt(this.m_nIdx/this.m_nMaxResNum*100)),this.LoadRes()}}},{key:"LoadResOk",value:function(){this.m_Handler&&this.m_Handler.method.apply(this.m_Handler.caller,this.m_Handler.args),this.m_bAutoClose&&this.Close()}},{key:"SetMsg",value:function(str){str&&this.m_LoadingBar.SetMsg(str)}}]),LoadingUI}();exports.default=LoadingUI},{"../../framework/gtea/BaseObj":126,"../../framework/utils/config":145,"../../ui/layaMaxUI":178,"../com/LoadingBar":56}],98:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../framework/ui/BaseUI")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_appmethod2=_interopRequireDefault(require("../com/appmethod")),_FlyText2=_interopRequireDefault(require("../com/FlyText"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LoginUI=function(_BaseUI){function LoginUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LoginUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(LoginUI.__proto__||Object.getPrototypeOf(LoginUI)).call(this));return _this.pwdKey="_haha",_this.bSession=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(LoginUI,_BaseUI3.default),_createClass(LoginUI,[{key:"OnOpen",value:function(){if(this.bSession=!1,this.ShowMsg("请登录..."),this.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr(),this.AutoLogin()||this.getWebWxLoginData()||this.ResetBtn(),_gameconst2.default.DeviceData&&_gameconst2.default.CONFIG.apilist)for(var i=0;i<_gameconst2.default.CONFIG.apilist.length;i++){var apiname=_gameconst2.default.CONFIG.apilist[i];_gtea2.default.rpc.Send("com::"+apiname,"UsrInstall",_gameconst2.default.DeviceData)}}},{key:"OnClose",value:function(){}},{key:"ShowMsg",value:function(msg){}},{key:"usrInOK",value:function(){if(""!=_gameconst2.default.THIRDPARTY){var args={roleId:_playerdata_mgr2.default.getInstance().getMeUID().toString(),roleName:_playerdata_mgr2.default.getInstance().getMeNick(),goldNum:_playerdata_mgr2.default.getInstance().getMeGold(),ctime:_playerdata_mgr2.default.getInstance().getMeCTime()};_appmethod2.default.unifiedSendUserInfo(_gameconst2.default.THIRDPARTY,args),_appmethod2.default.unifiedCheckRealName(this,function(obj,response){0==response.code&&(response.data.canplay||UIMgr.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"实名认证失败，不允许继续游戏",obj:obj,okfun:function(){_appmethod2.default.shutdownApp(),UIMgr.getInstance().CloseUI("系统确认")}},!0,!0))})}if(_gameconst2.default.DeviceData){if(_gameconst2.default.DeviceData.uid=_playerdata_mgr2.default.getInstance().getMeUID(),_gameconst2.default.DeviceData.channel=_playerdata_mgr2.default.getInstance().getMe().getChannel(),_gameconst2.default.CONFIG.apilist)for(var i=0;i<_gameconst2.default.CONFIG.apilist.length;i++){var apiname=_gameconst2.default.CONFIG.apilist[i];_gtea2.default.rpc.Send("com::"+apiname,"UsrReg",_gameconst2.default.DeviceData)}_gtea2.default.rpc.Send("人员IMEI服务","InsertImei",_gameconst2.default.DeviceData),_playerdata_mgr2.default.getInstance().getMe().m_UserData.m_vData.isnew&&_appmethod2.default.usrReg()}}},{key:"LoginOk",value:function(response){this.ShowMsg("正在进入游戏..."),"wx"in window&&response.siteAgv.platform_id&&Laya.LocalStorage.setItem("platform_id",response.siteAgv.platform_id),_playerdata_mgr2.default.getInstance().loginOK(response,this.m_AccData,this.usrInOK)}},{key:"LoginErr",value:function(code,msg,opts){console.log("login err",msg),this.bSession=!1,"phone"==this.m_AccData.mode?this.ShowMsg("首次登录游戏请用微信登录"):this.ShowMsg(msg),160==code&&"需要微信授权"==msg?this.dianyouwechatlogin():this.ResetBtn()}},{key:"onLogin",value:function(data){_comfunc2.default.isNil(this.m_AccData)&&(this.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),data.bundleid=this.m_AccData.bundleid||_gameconst2.default.BUNDLEID,data.channel=_gameconst2.default.CHANNEL,data.invitecode=_gameconst2.default.INVITECODE,data.lastuid=this.m_AccData.uid,_gtea2.default.rpc.Call("在线管理","Login",data,this,this.LoginOk,this.LoginErr),this.bSession=!0,this.ShowMsg("正在登录游戏...")}},{key:"onAccLogin",value:function(uname,pwd,defnick){this.m_AccData.mode="std",this.m_AccData.guest_id=null,this.m_AccData.uname=uname,this.m_AccData.pwd=pwd;var data={};data.nick=uname,data.platform="std",data.uname=uname,data.pwd=_gtea2.default.hash.md5(pwd+this.pwdKey,32),this.onLogin(data)}},{key:"onDirectLogin",value:function(uname){this.m_AccData.mode="direct",this.m_AccData.guest_id=null,this.m_AccData.uname=uname,this.m_AccData.pwd="";var data={nick:"player"};data.platform=_gameconst2.default.PLATFORM,data.uname=uname,data.pwd="",this.onLogin(data)}},{key:"onSwitchGameLogin",value:function(gameswichkey){this.bSession=!0,this.ShowMsg("正在进入游戏..."),_playerdata_mgr2.default.getInstance().SwichtGameLogin(gameswichkey,this,function(response){this.bSession=!1,this.ShowMsg("登录成功...")}.bind(this),function(code,msg,opts){console.log("login err",msg),this.bSession=!1,this.ShowMsg(msg)}.bind(this))}},{key:"onWechatLogin",value:function(){var code=this.m_AccData.uname,platform_id=this.m_AccData.platform_id;if(!_comfunc2.default.isNil(code)||!_comfunc2.default.isNil(platform_id)){this.m_AccData.mode="wechat",this.m_AccData.guest_id=null,this.m_AccData.pwd="";var agv={platform:"wechat",platform_id:platform_id,uname:code,pwd:""};this.onLogin(agv)}}},{key:"onVivoLogin",value:function(){var openId=this.m_AccData.openid,platform_id=this.m_AccData.platform_id,uname=this.m_AccData.uname,token=this.m_AccData.token;if(!_comfunc2.default.isNil(openId)&&!_comfunc2.default.isNil(token)||!_comfunc2.default.isNil(platform_id)){this.m_AccData.mode=_gameconst2.default.THIRDPARTY,this.m_AccData.guest_id=null;var agv={platform:_gameconst2.default.THIRDPARTY,platform_id:platform_id,openid:openId,uname:uname,token:token};this.onLogin(agv)}}},{key:"onOppoLogin",value:function(){var ssoid=this.m_AccData.ssoid,platform_id=this.m_AccData.platform_id,token=this.m_AccData.token;if(!_comfunc2.default.isNil(ssoid)&&!_comfunc2.default.isNil(token)||!_comfunc2.default.isNil(platform_id)){this.m_AccData.mode=_gameconst2.default.THIRDPARTY,this.m_AccData.guest_id=null;var agv={platform:_gameconst2.default.THIRDPARTY,platform_id:platform_id,ssoid:ssoid,token:token};this.onLogin(agv)}}},{key:"onHuaweiLogin",value:function(){var platform_id=this.m_AccData.platform_id,ts=this.m_AccData.ts,playerId=this.m_AccData.playerId,playerLevel=this.m_AccData.playerLevel,playerSSign=this.m_AccData.playerSSign;if(!(_comfunc2.default.isNil(ts)||_comfunc2.default.isNil(playerId)||_comfunc2.default.isNil(playerLevel)||_comfunc2.default.isNil(playerSSign))||!_comfunc2.default.isNil(platform_id)){this.m_AccData.mode=_gameconst2.default.THIRDPARTY,this.m_AccData.guest_id=null;var agv={platform:_gameconst2.default.THIRDPARTY,platform_id:platform_id,ts:ts,playerId:playerId,playerLevel:playerLevel,playerSSign:playerSSign};this.onLogin(agv)}}},{key:"onDianyouLogin",value:function(){var platform_id=this.m_AccData.platform_id,token=this.m_AccData.token,userId=this.m_AccData.userId;if(!_comfunc2.default.isNil(token)&&!_comfunc2.default.isNil(userId)||!_comfunc2.default.isNil(platform_id)){this.m_AccData.mode=_gameconst2.default.THIRDPARTY,this.m_AccData.guest_id=null;var agv={platform:_gameconst2.default.THIRDPARTY,platform_id:platform_id,token:token,userId:userId};this.onLogin(agv)}}},{key:"onDianyouandroidLogin",value:function(){var platform_id=this.m_AccData.platform_id,token=this.m_AccData.token,userId=this.m_AccData.userId,code=this.m_AccData.code;if(this.m_AccData.code=null,!_comfunc2.default.isNil(token)&&!_comfunc2.default.isNil(userId)||!_comfunc2.default.isNil(platform_id)){this.m_AccData.mode=_gameconst2.default.THIRDPARTY,this.m_AccData.guest_id=null;var agv={platform:_gameconst2.default.THIRDPARTY,platform_id:platform_id,token:token,userID:userId,code:code};this.onLogin(agv)}}},{key:"onBaiduLogin",value:function(){var platform_id=this.m_AccData.platform_id,bduid=this.m_AccData.bduid,bdtoken=this.m_AccData.bdtoken,bdoauthid=this.m_AccData.bdoauthid;if(!_comfunc2.default.isNil(bduid)||!_comfunc2.default.isNil(platform_id)){this.m_AccData.mode=_gameconst2.default.THIRDPARTY,this.m_AccData.guest_id=null;var agv={platform:_gameconst2.default.THIRDPARTY,platform_id:platform_id,uid:bduid,token:bdtoken,oauthid:bdoauthid};this.onLogin(agv)}}},{key:"onYybLogin",value:function(){var platform_id=this.m_AccData.platform_id,openid=this.m_AccData.openid;if(!_comfunc2.default.isNil(openid)||!_comfunc2.default.isNil(platform_id)){this.m_AccData.mode=_gameconst2.default.THIRDPARTY,this.m_AccData.guest_id=null;var agv={platform:_gameconst2.default.THIRDPARTY,platform_id:platform_id,openid:openid};this.onLogin(agv)}}},{key:"onXiaomiLogin",value:function(){var platform_id=this.m_AccData.platform_id,xmuid=this.m_AccData.xmuid,xmsession=this.m_AccData.xmsession;if(!(_comfunc2.default.isNil(xmuid)&&_comfunc2.default.isNil(xmsession)&&_comfunc2.default.isNil(platform_id))){this.m_AccData.mode=_gameconst2.default.THIRDPARTY,this.m_AccData.guest_id=null;var agv={platform:_gameconst2.default.THIRDPARTY,platform_id:platform_id,uid:xmuid,session:xmsession};this.onLogin(agv)}}},{key:"onGuestLogin",value:function(guest_id){this.m_AccData.mode="guest",this.m_AccData.guest_id=guest_id;var args={nick:this.RandDefNick(),platform:"guest",guest_id:guest_id};this.onLogin(args)}},{key:"AutoLogin",value:function(){var command=_gtea2.default.context.command,platform=command.platform;if(null!=platform&&"direct"==platform){var access_key=command.access_key;if(null!=access_key)return this.onDirectLogin(access_key),!0;var gameswichkey=command.gameswichkey;if(null!=gameswichkey)return this.onSwitchGameLogin(gameswichkey),!0}var token=command.token,uid=command.uid;return token&&uid?(this.CacheLogin(uid,token),!0):"wechat"==this.m_AccData.mode?(this.onWechatLogin(),!0):"vivo"==this.m_AccData.mode||"vivo_dljpbyol"==this.m_AccData.mode?(this.vivoLogin(),!0):"oppo"==this.m_AccData.mode||"oppo_dljpbyol"==this.m_AccData.mode?(this.oppoLogin(),!0):"huawei"==this.m_AccData.mode?(this.huaweiLogin(),!0):"dianyou"==this.m_AccData.mode?(this.dianyouLogin(),!0):"baidu"==this.m_AccData.mode?(this.baiduLogin(),!0):"yyb"==this.m_AccData.mode?(this.yybLogin(),!0):"xiaomi"==this.m_AccData.mode?(this.xiaomiLogin(),!0):void 0}},{key:"accLogin",value:function(uname,pass){this.bSession||(""!=uname&&""!=pass?this.onAccLogin(uname,pass,uname):this.ShowMsg("请输入账号名或密码!"))}},{key:"wechatThirdPartyLogin",value:function(){""==_gameconst2.default.THIRDPARTY||"dianyouandroid"==_gameconst2.default.THIRDPARTY||"dyunionpay"==_gameconst2.default.THIRDPARTY?this.wechatLogin():"vivo"==_gameconst2.default.THIRDPARTY||"vivo_dljpbyol"==_gameconst2.default.THIRDPARTY?this.vivoLogin():"oppo"==_gameconst2.default.THIRDPARTY||"oppo_dljpbyol"==_gameconst2.default.THIRDPARTY?this.oppoLogin():"huawei"==_gameconst2.default.THIRDPARTY?this.huaweiLogin():"dianyou"==_gameconst2.default.THIRDPARTY?this.dianyouLogin():"baidu"==_gameconst2.default.THIRDPARTY?this.baiduLogin():"yyb"==_gameconst2.default.THIRDPARTY?this.yybLogin():"xiaomi"==_gameconst2.default.THIRDPARTY&&this.xiaomiLogin()}},{key:"wechatLogin",value:function(agv){if(!this.bSession)if("gbxBridge"in window)_appmethod2.default.unifiedLogin("wx",this,function(obj,response){if(0==response.code){var data=response.data,code=data.code,bundleid=data.bundleid;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.uname=code,obj.m_AccData.platform_id=null,obj.m_AccData.bundleid=bundleid,obj.onWechatLogin()}else _FlyText2.default.AddFlyText(response.msg)});else{var query=window.location.search;if(!_comfunc2.default.isNil(query)&&query.length>0&&(query=query.substring(1,query.length),query=_gtea2.default.bincoder.base64.encode(query)),_gameconst2.default.WebWechatID){var url="https://open.weixin.qq.com/connect/qrconnect?appid="+_gameconst2.default.WebWechatID+"&redirect_uri="+encodeURI(_gameconst2.default.GAMEPATH)+"&response_type=code&scope=snsapi_login&state="+query+"#wechat_redirect";window.location.href=url}}}},{key:"vivoLogin",value:function(){this.bSession||"gbxBridge"in window&&_appmethod2.default.unifiedLogin(_gameconst2.default.THIRDPARTY,this,function(obj,response){if(0==response.code){var data=response.data,openId=data.openid,token=data.token,uname=data.uname,bundleid=data.bundleid;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.openid=openId,obj.m_AccData.platform_id=null,obj.m_AccData.bundleid=bundleid,obj.m_AccData.uname=uname,obj.m_AccData.token=token,obj.onVivoLogin()}else _FlyText2.default.AddFlyText(response.msg)})}},{key:"oppoLogin",value:function(){this.bSession||"gbxBridge"in window&&_appmethod2.default.unifiedLogin(_gameconst2.default.THIRDPARTY,this,function(obj,response){if(0==response.code){var data=response.data,ssoid=data.ssoid,token=data.token,bundleid=data.bundleid;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.ssoid=ssoid,obj.m_AccData.platform_id=null,obj.m_AccData.bundleid=bundleid,obj.m_AccData.token=token,obj.onOppoLogin()}else _FlyText2.default.AddFlyText(response.msg)})}},{key:"huaweiLogin",value:function(){this.bSession||"gbxBridge"in window&&_appmethod2.default.unifiedLogin(_gameconst2.default.THIRDPARTY,this,function(obj,response){if(0==response.code){var data=response.data,ts=data.ts,playerId=data.playerId,playerLevel=data.playerLevel,playerSSign=data.playerSSign,bundleid=data.bundleid;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.platform_id=null,obj.m_AccData.bundleid=bundleid,obj.m_AccData.ts=ts,obj.m_AccData.playerId=playerId,obj.m_AccData.playerLevel=playerLevel,obj.m_AccData.playerSSign=playerSSign,obj.onHuaweiLogin()}else _FlyText2.default.AddFlyText(response.msg)})}},{key:"dianyouLogin",value:function(){this.bSession||"gbxBridge"in window&&_appmethod2.default.unifiedLogin(_gameconst2.default.THIRDPARTY,this,function(obj,response){if(0==response.code){var data=response.data,userId=data.userId,token=data.token,bundleid=data.bundleid;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.platform_id=null,obj.m_AccData.bundleid=bundleid,obj.m_AccData.userId=userId,obj.m_AccData.token=token,obj.onDianyouLogin()}else _FlyText2.default.AddFlyText(response.msg)})}},{key:"dianyouandroidLogin",value:function(){this.bSession||"gbxBridge"in window&&_appmethod2.default.unifiedLogin(_gameconst2.default.THIRDPARTY,this,function(obj,response){if(0==response.code){var data=response.data,userId=data.userID,token=data.token,bundleid=data.bundleid;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.platform_id=null,obj.m_AccData.bundleid=bundleid,obj.m_AccData.userId=userId,obj.m_AccData.token=token,obj.onDianyouandroidLogin()}else _FlyText2.default.AddFlyText(response.msg)})}},{key:"dianyouwechatlogin",value:function(){_appmethod2.default.unifiedLogin("wx",this,function(obj,response){if(0==response.code){var code=response.data.code;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.code=code,obj.onDianyouandroidLogin()}else _FlyText2.default.AddFlyText(response.msg)})}},{key:"baiduLogin",value:function(){this.bSession||"gbxBridge"in window&&_appmethod2.default.unifiedLogin(_gameconst2.default.THIRDPARTY,this,function(obj,response){if(0==response.code){var data=response.data,bduid=data.bduid,bdtoken=data.bdtoken,bdoauthid=data.bdoauthid,bundleid=data.bundleid;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.bduid=bduid,obj.m_AccData.bdtoken=bdtoken,obj.m_AccData.bdoauthid=bdoauthid,obj.m_AccData.platform_id=null,obj.m_AccData.bundleid=bundleid,obj.onBaiduLogin()}else _FlyText2.default.AddFlyText(response.msg)})}},{key:"yybLogin",value:function(){this.bSession||"gbxBridge"in window&&_appmethod2.default.unifiedLogin(_gameconst2.default.THIRDPARTY,this,function(obj,response){if(0==response.code){var data=response.data,openid=data.openid,platform=data.platform,bundleid=data.bundleid;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.openid=openid,obj.m_AccData.platform=platform,obj.m_AccData.platform_id=null,obj.m_AccData.bundleid=bundleid,obj.onYybLogin()}else _FlyText2.default.AddFlyText(response.msg)})}},{key:"xiaomiLogin",value:function(){this.bSession||"gbxBridge"in window&&_appmethod2.default.unifiedLogin(_gameconst2.default.THIRDPARTY,this,function(obj,response){if(0==response.code){var data=response.data,xmuid=data.uid,xmsession=data.session,bundleid=data.bundleid;_comfunc2.default.isNil(obj.m_AccData)&&(obj.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),obj.m_AccData.xmuid=xmuid,obj.m_AccData.xmsession=xmsession,obj.m_AccData.platform_id=null,obj.m_AccData.bundleid=bundleid,obj.onXiaomiLogin()}else _FlyText2.default.AddFlyText(response.msg)})}},{key:"accReg",value:function(uname,pass,pass2){this.bSession||(""!=uname&&""!=pass?pass==pass2?this.onAccReg(uname,pass,uname):this.ShowMsg("2次输入密码不一致!"):this.ShowMsg("请输入账号名或密码!"))}},{key:"onAccReg",value:function(uname,pass,defnick){this.m_AccData.mode="std",this.m_AccData.guest_id=null,this.m_AccData.uname=uname,this.m_AccData.pwd=pass;var agv={nick:defnick,platform:this.m_AccData.mode,uname:uname,pwd:_gtea2.default.hash.md5(pass+this.pwdKey,32),bundleid:""};_gtea2.default.rpc.Call("在线管理","Reg",agv,this,function(agv){this.bSession=!1,this.CloseRegDlg();var uname=this.m_AccData.uname,pwd=this.m_AccData.pwd;this.onAccLogin(uname,pwd,uname)},function(errflag,errmsg){this.bSession=!1,this.uiobj.text_note.text=errmsg}),this.bSession=!0,this.ShowMsg("正在注册，请稍等！")}},{key:"getWebWxLoginData",value:function(){if(!("wx"in window)){var code=_gtea2.default.context.command.code;if(!_comfunc2.default.isNil(code))return _comfunc2.default.isNil(this.m_AccData)&&(this.m_AccData=_playerdata_mgr2.default.getInstance().getLastLoginUsr()),this.m_AccData.uname=code,this.m_AccData.platform_id=null,this.onWechatLogin(),!0}return!1}},{key:"GuestLogin",value:function(){this.bSession||(this.ShowMsg("正在以游客身份登录！"),this.m_AccData={},_gtea2.default.rpc.Call("在线管理","CreateGuest",{},this,function(agv){this.onGuestLogin(agv[0])},function(errflag,errmsg,agv){this.ShowMsg(errmsg),this.bSession=!1}))}},{key:"CacheLogin",value:function(uid,token){this.ShowMsg("正在进入游戏..."),_playerdata_mgr2.default.getInstance().CacheLogin(uid,token)}},{key:"PhoneLogin",value:function(phone,code){if(!this.bSession)if(_comfunc2.default.isNil(phone))this.ShowMsg("手机号不能为空！");else if(11==phone.length)if(_comfunc2.default.isNil(code)||0==code.length)this.ShowMsg("验证码不能为空！");else{this.m_AccData.mode="phone",this.m_AccData.guest_id=null,this.m_AccData.uname=phone,this.m_AccData.pwd=code;var args={nick:phone,platform:this.m_AccData.mode,phone:phone,pwd:code};this.onLogin(args)}else this.ShowMsg("请输入正确的11位手机号！")}},{key:"RandDefNick",value:function(){return"user_"+(1e4+Math.floor(1e4*Math.random()+1))}},{key:"ResetBtn",value:function(){}}]),LoginUI}();exports.default=LoginUI},{"../../app/gameconst":5,"../../framework/data/playerdata_mgr":117,"../../framework/gtea/gtea":127,"../../framework/ui/BaseUI":141,"../../framework/utils/comfunc":144,"../com/FlyText":52,"../com/appmethod":63}],99:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../framework/gtea/BaseObj")),_config2=_interopRequireDefault(require("../framework/utils/config")),_gameconst2=_interopRequireDefault(require("../app/gameconst")),_appmethod2=_interopRequireDefault(require("./com/appmethod")),_LoadingUI2=_interopRequireDefault(require("./login/LoadingUI")),_comfunc2=_interopRequireDefault(require("../framework/utils/comfunc")),_mainlink2=_interopRequireDefault(require("../framework/net/mainlink")),_UIMgr2=_interopRequireDefault(require("../framework/ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../framework/gtea/gtea")),_gamemodelmgr2=_interopRequireDefault(require("../framework/gamemodel/gamemodelmgr")),_matchobjmgr2=_interopRequireDefault(require("../framework/match/matchobjmgr")),_gameroommgr2=_interopRequireDefault(require("../framework/svrlist/gameroommgr")),_clubsys2=_interopRequireDefault(require("../framework/data/club/clubsys")),_tdf2=_interopRequireDefault(require("../framework/utils/tdf")),_itemkindmgr2=_interopRequireDefault(require("../framework/data/item/itemkindmgr")),_bridge2=_interopRequireDefault(require("./com/bridge"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MainAppBase=function(_BaseObj){function MainAppBase(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MainAppBase);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(MainAppBase.__proto__||Object.getPrototypeOf(MainAppBase)).call(this));return _BaseObj3.default.RegObj("MainApp",_this),Laya.ClassUtils.regClass("GameRoomMgr",_gameroommgr2.default),Laya.ClassUtils.regClass("MatchObjMgr",_matchobjmgr2.default),_this.szLoadList=[],_this.szDataList=[],_this.bFirstInHall=!0,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MainAppBase,_BaseObj3.default),_createClass(MainAppBase,[{key:"InApp",value:function(){_config2.default.ChkDesignResolution(),Laya.stage.on(Laya.Event.RESIZE,this,this.OnResize),_appmethod2.default.getAppVer(this,function(obj,response){0===response.code&&(_gameconst2.default.APPVERSION=response.data)});var command=_gtea2.default.context.command;if(null!=command){if("undefined"!=typeof wx){var wxargs=wx.getLaunchOptionsSync();for(var key in wxargs.query)command[key]=wxargs.query[key];console.log(wxargs),this.RegWXMPFun()}var appinfo={},glist=command.glist;if(glist){glist=decodeURIComponent(glist);var glistobj=_gtea2.default.bincoder.base64.decode(glist);glistobj.position=0,appinfo.linkaddr=glistobj.readUTF8(glistobj.length)}var platform=command.platform;null!=platform&&(appinfo.platform=platform);var namespace=command.namespace;null!=namespace&&(appinfo.namespace=namespace);var domain=command.domain;if(null!=domain&&(appinfo.domain=domain),command.channel&&(_gameconst2.default.CHANNEL=command.channel),command.invitecode&&(_gameconst2.default.INVITECODE=command.invitecode),appinfo.hasOwnProperty("linkaddr")&&appinfo.hasOwnProperty("platform")&&appinfo.hasOwnProperty("domain"))return appinfo.respath=command.respath,void this.ParseAppInfo(appinfo)}function GetOk(args){var data="string"==typeof args?JSON.parse(args):args;this.ParseAppInfo(data)}function LoadConfig(){var requesturl=void 0;requesturl=_gameconst2.default.CONFIGPHP?_gameconst2.default.CONFIGPHP+"?appid="+_gameconst2.default.APPID+"&appver="+_gameconst2.default.APPVERSION:_gameconst2.default.CONFIGPATH+"?ver="+(new Date).getTime(),this.HttpRequestGet(requesturl,GetOk)}this.OnPreAppLoadRes()||(_gameconst2.default.DEBUG?this.AppStart():"gbxBridge"in window?_appmethod2.default.getAppConfig(this,function(obj,response){console.log(response),0==response.code?GetOk.bind(obj)(response.data):LoadConfig.bind(obj)()}):LoadConfig.bind(this)())}},{key:"OnPreAppLoadRes",value:function(){return!1}},{key:"AppStart",value:function(){_bridge2.default.registFunction("onVisibilityChange",this.onVisibilityChange,this),this.ChkSvrMaintenance()||("undefined"!=typeof wx?this.OpenWXMPLogin():this.LoadRes())}},{key:"ParseAppInfo",value:function(data){if(_gameconst2.default.CONFIG=data,_gameconst2.default.LINKADDR=data.linkaddr,null!=data.namespace&&(_gameconst2.default.NAMESPACE=data.namespace),null!=data.channel){var command=_gtea2.default.context.command;command&&command.channel||(_gameconst2.default.CHANNEL=data.channel)}if(null!=data.agent_feedback&&(_gameconst2.default.AGENT_FEEDBACK=data.agent_feedback),null!=data.agent_notice&&(_gameconst2.default.AGENT_NOTICE=data.agent_notice),null!=data.gamename&&(_gameconst2.default.GAMENAME=data.gamename),null!=data.wechatpub&&(_gameconst2.default.WeChatPub=data.wechatpub),null!=data.wechatpublist&&(_gameconst2.default.WeChatPub=data.wechatpublist[0].split(":")[1]),null!=data.vouchers2ratio&&(_gameconst2.default.VOUCHERS2RATIO=data.vouchers2ratio),null!=data.vouchers2name&&(_itemkindmgr2.default.VOUCHERS2_NAME=data.vouchers2name),null!=data.channelreview)for(var i=0;i<data.channelreview.length;i++)if(_gameconst2.default.CHANNEL==data.channelreview[i]){_gameconst2.default.CONFIG.isreview=!0;break}null!=data.showagreement&&(_gameconst2.default.SHOWAGREEMENT=data.showagreement),_gameconst2.default.PLATFORM=data.platform,_gameconst2.default.DOMAIN=data.domain||"null",_gameconst2.default.GAMEPATH=data.respath,"gbxBridge"in window&&gbxBridge.version&&4===gbxBridge.version&&data.talkingdataid&&""!=data.talkingdataid&&_appmethod2.default.initTalkingData(data.talkingdataid);var versionFileName="version.json";if(!("gbxBridge"in window)){null!=data.respath&&(Laya.URL.basePath=data.respath);var hash=void 0;if(location&&location.pathname){var slashs=location.pathname.split("/"),filename=slashs[slashs.length-1];filename&&/\.index$/i.test(filename)&&(hash=filename.replace(/\.index/i,""))}versionFileName=hash?hash+".version.json":"version.json?ver="+(new Date).getTime()}Laya.ResourceVersion.type=Laya.ResourceVersion.FILENAME_VERSION,Laya.ResourceVersion.enable(versionFileName,Laya.Handler.create(this,this.AppStart))}},{key:"LoadRes",value:function(data){this.logindata=data,_LoadingUI2.default.getInstance().Loading({reslist:_comfunc2.default.clone(this.szLoadList),backfun:Laya.Handler.create(this,this.LoadResOk),msg:"正在加载大厅资源..."})}},{key:"LoadResOk",value:function(){this.logindata&&this.logindata.relogin?this.OnStartLogin():this.StartConnect()}},{key:"StartConnect",value:function(){_LoadingUI2.default.getInstance().SetMsg("正在连接网络..."),_mainlink2.default.getInstance().Start(),_mainlink2.default.getInstance().addEventListener("eve.OnConnectOk",this,this.ConnectOk),_mainlink2.default.getInstance().addEventListener("eve.OnConnectFailed",this,this.ConnectFailed)}},{key:"ConnectOk",value:function(){this.m_nFailTryNum=null,_mainlink2.default.getInstance().removeEventListener("eve.OnConnectOk",this,this.ConnectOk),_mainlink2.default.getInstance().removeEventListener("eve.OnConnectFailed",this,this.ConnectFailed),this.OnLoadUI()}},{key:"ConnectFailed",value:function(){_comfunc2.default.isNil(this.m_nFailTryNum)&&(this.m_nFailTryNum=0),this.m_nFailTryNum=this.m_nFailTryNum+1,_mainlink2.default.getInstance().removeEventListener("eve.OnConnectOk",this,this.ConnectOk),_mainlink2.default.getInstance().removeEventListener("eve.OnConnectFailed",this,this.ConnectFailed),this.m_nFailTryNum>=3?_LoadingUI2.default.getInstance().SetMsg("连接失败,请稍后再试!"):(_LoadingUI2.default.getInstance().SetMsg("连接失败,准备重新连接..."),this.timerCall(2e3,this.StartConnect))}},{key:"OnLoadUI",value:function(){_UIMgr2.default.getInstance().Init(5),_playerdata_mgr2.default.getInstance().m_szDataList=this.szDataList,this.OnStartLogin()}},{key:"OnStartLogin",value:function(){Laya.stage.on(Laya.Event.BLUR,this,this.OnPause),Laya.stage.on(Laya.Event.FOCUS,this,this.OnResume),_playerdata_mgr2.default.getInstance().AddPrepareModule("GameRoomMgr","GameRoomMgr",!0),_playerdata_mgr2.default.getInstance().AddPrepareModule("MatchObjMgr","MatchObjMgr",!0),_playerdata_mgr2.default.getInstance().RegSvrCallBack("在线管理",this),this.ChkIsMaintenance()||(this.logindata?(_LoadingUI2.default.getInstance().SetMsg("正在进入游戏..."),_UIMgr2.default.getInstance().UIEvent("登录界面","onLogin",this.logindata,!0)):(_LoadingUI2.default.getInstance().Close(),_UIMgr2.default.getInstance().OpenUI("登录界面")),this.logindata=null)}},{key:"OnInHall",value:function(){if(this.m_bInHall=!0,_LoadingUI2.default.getInstance().Close(),_UIMgr2.default.getInstance().CloseUI("登录界面"),1!=_gameconst2.default.CONFIG.jump)_appmethod2.default.gameReady(),this.bFirstInHall&&(this.bFirstInHall=!1,this.OnInHallOk(),this.SetSchemeData());else{_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"版本已升级，请下载最新版本！",obj:this,okfun:function(){var downlordurl=_gameconst2.default.CONFIG.appUrl,channel=_comfunc2.default.conversionchannel(_playerdata_mgr2.default.getInstance().getMe().getChannel()),szchannel=channel.split("/");channel=szchannel[szchannel.length-1],downlordurl=(downlordurl=downlordurl.replace("__CHANNEL__",channel)).replace("__APPID__",_gameconst2.default.CONFIG.appid),_appmethod2.default.openSystemBrowser(downlordurl)},cancelfun:function(){}},!0,!0)}}},{key:"OnInHallOk",value:function(){_playerdata_mgr2.default.getInstance().m_Me.m_UserEmail&&_playerdata_mgr2.default.getInstance().m_Me.m_UserEmail.CheckMail(),_playerdata_mgr2.default.getInstance().LoadLoginActivityData(),this.RefreshLoginTime(),_UIMgr2.default.getInstance().OpenUI("大厅界面",!0)}},{key:"RefreshLoginTime",value:function(){var nowtime=new Date,lasttime=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("lastlogintime");lasttime&&_comfunc2.default.isSameDay(nowtime,new Date(lasttime))||(lasttime=nowtime.getTime(),_playerdata_mgr2.default.getInstance().setUserSetDataByKey("noopenactivity",!1),_playerdata_mgr2.default.getInstance().setUserSetDataByKey("lastlogintime",nowtime),_playerdata_mgr2.default.getInstance().writeUserSetData())}},{key:"onVisibilityChange",value:function(back){back?this.OnPause():this.OnResume()}},{key:"OnPause",value:function(){_gameconst2.default.DEBUG||(this.m_PauseTime=new Date,_comfunc2.default.isNil(_gameconst2.default.MODELNAME)||0===_gameconst2.default.MODELNAME.length||_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,"OnPause",[]))}},{key:"OnResume",value:function(){if(!_gameconst2.default.DEBUG){var nowtime=new Date;if(this.m_PauseTime){_comfunc2.default.subAsSec(nowtime,this.m_PauseTime)>=180?this.m_bInHall&&_mainlink2.default.getInstance().DisConnect():this.dispatchEvent("OnResume")}}}},{key:"OnResize",value:function(event){_config2.default.ChkDesignResolution(),this.dispatchEvent("stagesizechg",[])}},{key:"OnTokenInvalid",value:function(){this.ReOpen({mode:1,why:"登录信息已过期，请重新登录"})}},{key:"ReOpen",value:function(agv){function OnClose(){_UIMgr2.default.getInstance().CloseUI("系统确认"),this.OnReOpen()}_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:agv.why,obj:this,okfun:OnClose,cancelfun:OnClose},!0,!0)}},{key:"OnReOpen",value:function(){_gtea2.default.rpc.Send("在线管理","LogOut",[_playerdata_mgr2.default.getInstance().getMeToken(),!1]),_UIMgr2.default.getInstance().CloseAllUI(),_UIMgr2.default.getInstance().CloseUI("大厅界面"),_gameconst2.default.MODELNAME&&_gameconst2.default.MODELNAME.length>0&&_gamemodelmgr2.default.getInstance().CloseModel(_gameconst2.default.MODELNAME),this.bFirstInHall=!0,"undefined"==typeof wx?_UIMgr2.default.getInstance().OpenUI("登录界面"):this.OpenWXMPLogin(!0)}},{key:"netOnSysKickOut",value:function(agv){this.ReOpen({mode:1,why:"与服务器断开连接,请重新打开!"})}},{key:"Logout",value:function(){_playerdata_mgr2.default.getInstance().setLastLoginUsr({}),this.OnReOpen(),_playerdata_mgr2.default.getInstance().m_Token=null}},{key:"OnConnectOk",value:function(agv){!this.m_bReconnect&&this.m_bConnectBreak&&(this.m_bReconnect=!0,this.RealConnectOk())}},{key:"OnConnectBreak",value:function(agv){this.m_bConnectBreak=!0,this.m_bInHall&&(_comfunc2.default.isNil(_gameconst2.default.MODELNAME)||0===_gameconst2.default.MODELNAME.length||_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,"OnConnectBreak",[]))}},{key:"RealConnectOk",value:function(){this.m_bReconnect=!1,this.m_bConnectBreak=!1,this.OnRealConnectOk(),this.m_PauseTime=null}},{key:"OnRealConnectOk",value:function(){if(_UIMgr2.default.getInstance().CloseUI("等待界面"),_UIMgr2.default.getInstance().CloseUI("无网络提示"),this.dispatchEvent("OnResume"),this.m_bInHall){if(_comfunc2.default.isNil(this.m_PauseTime))this.ReLoadData();else{var nowtime=new Date;this.m_PauseTime.getDate()!=nowtime.getDate()?(_playerdata_mgr2.default.getInstance().UseCacheInGame(),_playerdata_mgr2.default.getInstance().LoadLoginActivityData()):this.ReLoadData()}_matchobjmgr2.default.getInstance().addOnceEventListener("eve.MatchListChg",this,function(){_comfunc2.default.isNil(_gameconst2.default.MODELNAME)||0===_gameconst2.default.MODELNAME.length||_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,"OnConnectOk",[])})}}},{key:"ReLoadData",value:function(){_playerdata_mgr2.default.getInstance().getMe().RefreshBag(),_clubsys2.default.getInstance().Load()}},{key:"ChkIsMaintenance",value:function(){if(!_gameconst2.default.CONFIG.maintenance_s||!_gameconst2.default.CONFIG.maintenance_e)return!1;var nowtime=new Date,stime=new Date(_gameconst2.default.CONFIG.maintenance_s),etime=new Date(_gameconst2.default.CONFIG.maintenance_e);return nowtime.getTime()>=stime.getTime()&&nowtime.getTime()<=etime.getTime()&&(_LoadingUI2.default.getInstance().Close(),_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:_gameconst2.default.CONFIG.maintenance_info},!0,!0),!0)}},{key:"OnMatchWillStart",value:function(agv){if(this.m_bInHall){var usr=_BaseObj3.default.FindRegObj("RoomUser");_comfunc2.default.isNil(usr)&&_UIMgr2.default.getInstance().UIEvent("MTT报名界面","SetData",[agv[0].m_nMatchID],!0,!0),_UIMgr2.default.getInstance().UIEvent("比赛通知","SetData",agv,!0,!0)}}},{key:"SetSchemeData",value:function(){if(this.m_bInHall){var command=_gtea2.default.context.command;null!=command&&command.roomid&&command.roomid.length>=6&&(_gameconst2.default.ROOMID=command.roomid.substring(0,6),this.SetRoomKey({roomid:_gameconst2.default.ROOMID}))}}},{key:"SetRoomKey",value:function(data){this.m_bInHall&&this.OnTryRoomKeyIn(data)}},{key:"OnTryRoomKeyIn",value:function(agv){_gameconst2.default.ROOMID=agv.roomid,_UIMgr2.default.getInstance().UIEvent("大厅界面","CheckInviteInRoom",[])}},{key:"ChkSvrMaintenance",value:function(){if(!_comfunc2.default.isNil(_gameconst2.default.CONFIG.maintenance)){if(_gameconst2.default.CONFIG.maintenance){var text=new Laya.Label(_gameconst2.default.CONFIG.maintenance_info);return text.color="#ffffff",text.fontSize=30,text.anchorX=.5,text.anchorY=.5,text.centerX=0,text.centerY=0,Laya.stage.addChild(text),!0}return!1}if(_gameconst2.default.CONFIG.maintenance_s&&_gameconst2.default.CONFIG.maintenance_e){var stime=new Date(_gameconst2.default.CONFIG.maintenance_s),etime=new Date(_gameconst2.default.CONFIG.maintenance_e),nowtime=new Date;if(nowtime>=stime&&nowtime<=etime){var _text=new Laya.Label(_gameconst2.default.CONFIG.maintenance_info);return _text.color="#ffffff",_text.fontSize=30,_text.anchorX=.5,_text.anchorY=.5,_text.centerX=0,_text.centerY=0,Laya.stage.addChild(_text),!0}}return!1}},{key:"OpenWXMPLogin",value:function(relogin){}},{key:"RegWXMPFun",value:function(){"undefined"!=typeof wx&&(wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){var data=this.RandomWXMPShareData();return{title:data?data.name:_gameconst2.default.GAMENAME,imageUrl:_gameconst2.default.GAMEPATH+"shareimg/"+(data?data.image:"1.png")+"?ver="+(new Date).getTime(),query:"channel="+_gameconst2.default.CHANNEL}}.bind(this)),wx.onShow(function(args){if(this.hidetime&&(new Date).getTime()/1e3-this.hidetime.getTime()/1e3>1800){var Exit=function(){wx.exitMiniProgram({})};return void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"长时间未在线,请退出游戏重进!",obj:this,okfun:Exit,cancelfun:Exit},!0,!0)}this.hidetime=null,this.dispatchEvent("wxmpOnShow",args)}.bind(this)),wx.onHide(function(){this.hidetime=new Date,this.dispatchEvent("wxmpOnHide")}.bind(this)),_gameconst2.default.VIDEOAD=wx.createRewardedVideoAd({adUnitId:"adunit-f34234412f75e474"}),_gameconst2.default.VIDEOAD.onLoad(function(){console.log("激励视频 广告加载成功")}),_gameconst2.default.VIDEOAD.onError(function(err){console.log(err)}),_gameconst2.default.VIDEOAD.show().then(function(){console.log("激励视频 广告显示")}),_gameconst2.default.VIDEOAD.onClose(function(res){this.dispatchEvent("wxmpAdClose",res)}.bind(this)))}},{key:"WXMPShare",value:function(args){if("undefined"!=typeof wx){var data=this.RandomWXMPShareData();_comfunc2.default.isNil(args)&&(args={}),_comfunc2.default.isNil(args.title)&&(args.title=data?data.name:_gameconst2.default.GAMENAME),_comfunc2.default.isNil(args.imageUrl)&&(args.imageUrl=_gameconst2.default.GAMEPATH+"shareimg/"+(data?data.image:"1.png")+"?ver="+(new Date).getTime()),args.query="channel="+_gameconst2.default.CHANNEL,wx.shareAppMessage(args)}}},{key:"RandomWXMPShareData",value:function(){if("undefined"==typeof wx)return null;if(!this.szWxmpShareData){this.szWxmpShareData=[];var tdf=_tdf2.default.LoadTDF("data/share.tdf");if(tdf)for(var key in tdf){var value=tdf[key],name=value["活动名称"],image=value["背景图片"],reviewshow=value["审核"];_gameconst2.default.CONFIG.isreview&&0==reviewshow||this.szWxmpShareData.push({name:name,image:image})}}if(0==this.szWxmpShareData.length)return null;var random=Math.floor(Math.random()*this.szWxmpShareData.length);return this.szWxmpShareData[random]}}]),MainAppBase}();exports.default=MainAppBase},{"../app/gameconst":5,"../framework/data/club/clubsys":105,"../framework/data/item/itemkindmgr":113,"../framework/data/playerdata_mgr":117,"../framework/gamemodel/gamemodelmgr":123,"../framework/gtea/BaseObj":126,"../framework/gtea/gtea":127,"../framework/match/matchobjmgr":135,"../framework/net/mainlink":137,"../framework/svrlist/gameroommgr":139,"../framework/ui/UIMgr":142,"../framework/utils/comfunc":144,"../framework/utils/config":145,"../framework/utils/tdf":148,"./com/appmethod":63,"./com/bridge":64,"./login/LoadingUI":97}],100:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_matchroomuser2=_interopRequireDefault(require("./matchroomuser")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DiyRoomUser=function(_MatchRoomUser){function DiyRoomUser(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DiyRoomUser),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(DiyRoomUser.__proto__||Object.getPrototypeOf(DiyRoomUser)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DiyRoomUser,_matchroomuser2.default),_createClass(DiyRoomUser,[{key:"netOnMatchRankList",value:function(agv){_UIMgr2.default.getInstance().UIEvent(this.m_SceneType,"RefreshRecordRank",agv)}},{key:"OnGetRankList",value:function(agv){this.ToS("GetRankList",{})}},{key:"OnBreakPlayer",value:function(errflag,errmsg){"比赛结束"==errmsg&&(errmsg="牌局已结束!"),function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0}(DiyRoomUser.prototype.__proto__||Object.getPrototypeOf(DiyRoomUser.prototype),"OnBreakPlayer",this).call(this,errflag,errmsg)}}]),DiyRoomUser}();exports.default=DiyRoomUser},{"../../framework/ui/UIMgr":142,"./matchroomuser":103}],101:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_BaseObj2=_interopRequireDefault(require("../../framework/gtea/BaseObj")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_matchdef2=_interopRequireDefault(require("../../framework/match/matchdef")),_gamemodelmgr2=_interopRequireDefault(require("../../framework/gamemodel/gamemodelmgr")),_FlyText2=_interopRequireDefault(require("../com/FlyText")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameDeskUser=function(_gtea$CNetObj){function GameDeskUser(ctrl){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameDeskUser);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameDeskUser.__proto__||Object.getPrototypeOf(GameDeskUser)).call(this));return _BaseObj2.default.RegObj("DeskUser",_this),_this.m_GameCtrl=ctrl,_this.m_nChairNo=-1,_this.m_bCheckHeart=!1,_this.m_nAutoJoinChairNo=void 0,_this.m_bJoinGrop=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameDeskUser,_gtea2.default.CNetObj),_createClass(GameDeskUser,[{key:"OnDelThis",value:function(){_get(GameDeskUser.prototype.__proto__||Object.getPrototypeOf(GameDeskUser.prototype),"OnDelThis",this).call(this),_BaseObj2.default.UnRegObj("DeskUser")}},{key:"JoinDesk",value:function(sname,gname,deskNo,chairNo){gname+="/"+deskNo;var fullpath=_gtea2.default.rpc.MakeFullPath(sname,gname);this.m_nAutoJoinChairNo=chairNo,this.m_PlayerData=_playerdata_mgr2.default.getInstance().getMe();this.JoinGroup(fullpath,"CGameDeskUser",[_playerdata_mgr2.default.getInstance().getMeUID(),"unknown",[],{chairno:-1,direct_join:!0}])}},{key:"OnJoinGroupOk",value:function(args){_get(GameDeskUser.prototype.__proto__||Object.getPrototypeOf(GameDeskUser.prototype),"OnJoinGroupOk",this).call(this,args),this.m_bJoinGrop=!0}},{key:"OnJoinGroupErr",value:function(errflag,errmsg){_get(GameDeskUser.prototype.__proto__||Object.getPrototypeOf(GameDeskUser.prototype),"OnJoinGroupErr",this).call(this,errflag,errmsg),this.m_bJoinGrop=!1}},{key:"OnBreakPlayer",value:function(errflag,errmsg){this.m_GameCtrl.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_SNG||!_comfunc2.default.isNil(this.m_GameCtrl.m_GameDesk.m_GameRoom.m_MatchKind.m_nRedPacketRoom)&&0!=this.m_GameCtrl.m_GameDesk.m_GameRoom.m_MatchKind.m_nRedPacketRoom?302==errflag&&_FlyText2.default.AddFlyText("房间使用超时,系统自动解散!"):_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}},{key:"OnPingChg",value:function(args){}},{key:"OnRemoteCreate",value:function(agv){this.m_GameCtrl.OnSetDeskInfo(agv)}},{key:"isJoinedTable",value:function(){return this.m_bJoinGrop}},{key:"OnJoinChair",value:function(idx){this.ToS("JoinChair",[idx||this.m_nAutoJoinChairNo])}},{key:"netOnJoinChairOk",value:function(args){console.log("netOnJoinChairOk",args),this.m_nChairNo=args[0],this.ToS("Ready",[])}},{key:"netOnJoinChairErr",value:function(args){console.log("netOnJoinChairErr",args)}},{key:"netOnUserInChair",value:function(args){console.log("netOnUserInChair",args)}},{key:"netOnUserOutChair",value:function(args){console.log("netOnUserOutChair",args)}},{key:"netOnUserReady",value:function(args){this.m_GameCtrl.OnUserReady(args)}},{key:"netOnReadyErr",value:function(args){_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:args.errmsg},!0,!0)}},{key:"netOnUsrWatch",value:function(agv){this.GameCtrl.OnUsrWatch(agv)}},{key:"netOnChairStatusChg",value:function(agv){this.m_GameCtrl.OnChairStatusChg(agv)}},{key:"netOnChairInfoChg",value:function(agv){this.m_GameCtrl.OnChairInfoChg(agv)}},{key:"netOnChairUsrDataChg",value:function(agv){}},{key:"netOnPreGameStart",value:function(agv){}},{key:"netOnMatchData",value:function(agv){this.m_GameCtrl.OnSetMatchData(agv)}},{key:"netOnGameStart",value:function(agv){this.m_GameCtrl.OnGameStart(agv)}},{key:"netOnGameEnd",value:function(agv){this.m_GameCtrl.OnGameEnd(agv)}},{key:"netOnDeskDismiss",value:function(agv){}},{key:"netOnChat",value:function(agv){this.m_GameCtrl.OnUserChat(agv)}},{key:"netOnEmoji",value:function(agv){this.m_GameCtrl.OnUserEmoji(agv)}},{key:"netOnMagicEmoji",value:function(agv){this.m_GameCtrl.OnUserMagicEmoji(agv)}},{key:"netOnVoiceChat",value:function(agv){this.m_GameCtrl.OnUserVoiceChat(agv)}},{key:"netOnHeartBeat",value:function(agv){var pass=(new Date).getTime()-this.m_SendTime;this.m_GameCtrl.OnPingInfo([pass]),this.StartTimer(5e3,this.OnHeartBeat,[])}},{key:"netUserHeartBreak",value:function(agv){var chairno=agv[0];if(chairno!=this.m_nChairNo){var chair=this.m_GameCtrl.getChair(chairno);_FlyText2.default.AddFlyText(chair.m_PlayerData.getNick()+"的网络状况很差!!!")}}},{key:"netOnQueDissDesk",value:function(agv){this.m_GameCtrl.OnQueDissDesk(agv)}},{key:"netOnChoseAgreeDissDesk",value:function(agv){this.m_GameCtrl.m_DissData=agv.data,this.m_PlayerData.m_nUID==agv.uid&&1==agv.mode&&_FlyText2.default.AddFlyText("你已同意解散房间!"),1==agv.mode?this.m_GameCtrl.OpenDissolution():(_FlyText2.default.AddFlyText(agv.nick+"不同意解散房间!"),_UIMgr2.default.getInstance().CloseUI("解散房间"))}},{key:"netOnAutoDissDesk",value:function(agv){this.m_GameCtrl.OnAutoDissDesk(agv)}},{key:"netOnCheckIpLocation",value:function(agv){this.m_GameCtrl.OnCheckIpLocation(agv)}},{key:"netOnSNGResult",value:function(agv){_UIMgr2.default.getInstance().UIEvent("SNG结算界面","SetMarkData",agv,!0)}},{key:"netOnErrMsg",value:function(agv){_FlyText2.default.AddFlyText(agv.errmsg)}},{key:"netOnRefreshLocation",value:function(agv){this.m_GameCtrl.OnRefreshLocation(agv)}},{key:"netChgTrustShow",value:function(agv){this.m_GameCtrl.ChgTrustShow(agv)}},{key:"netChgMagicShieldingOk",value:function(agv){this.m_GameCtrl.ChgMagicShieldingOk(agv)}},{key:"netUserRunAway",value:function(agv){this.m_GameCtrl.UserRunAway(agv)}},{key:"WaitPingRegTimeOut",value:function(agv){this.m_GameCtrl.OnPingInfo([99999])}},{key:"StartChkHeartBeat",value:function(time){this.m_bCheckHeart&&(time?this.StartTimer(time,this.OnHeartBeat,[]):this.OnHeartBeat())}},{key:"OnHeartBeat",value:function(){this.m_SendTime=(new Date).getTime(),this.ToS("HeartBeat",[]),this.StartTimer(5e3,this.HeartBeatBreak,[])}},{key:"HeartBeatBreak",value:function(){this.m_GameCtrl.OnPingInfo([99999]),this.OnHeartBeat()}},{key:"StartTimer",value:function(time,backfun,agv){this.StopTimer(),this.m_CheckTimer=this.timerCall(time,backfun,agv)}},{key:"StopTimer",value:function(){this.killTimer(this.m_CheckTimer),this.m_CheckTimer=null}}]),GameDeskUser}();exports.default=GameDeskUser},{"../../framework/data/playerdata_mgr":117,"../../framework/gamemodel/gamemodelmgr":123,"../../framework/gtea/BaseObj":126,"../../framework/gtea/gtea":127,"../../framework/match/matchdef":132,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../com/FlyText":52}],102:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_BaseObj2=_interopRequireDefault(require("../../framework/gtea/BaseObj")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_gamemodelmgr2=_interopRequireDefault(require("../../framework/gamemodel/gamemodelmgr")),_FlyText2=_interopRequireDefault(require("../com/FlyText")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_mainlink2=_interopRequireDefault(require("../../framework/net/mainlink")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameRoomUser=function(_gtea$CNetObj){function GameRoomUser(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameRoomUser);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameRoomUser.__proto__||Object.getPrototypeOf(GameRoomUser)).call(this));return _BaseObj2.default.RegObj("RoomUser",_this),_this.m_nJoinGroupOTime=1e4,_this.m_nHeartTime=3e4,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameRoomUser,_gtea2.default.CNetObj),_createClass(GameRoomUser,[{key:"OnDelThis",value:function(){_get(GameRoomUser.prototype.__proto__||Object.getPrototypeOf(GameRoomUser.prototype),"OnDelThis",this).call(this),_BaseObj2.default.UnRegObj("RoomUser")}},{key:"JoinRoom",value:function(fullPath,gtype,lastdesk){this.m_GameType=gtype,this.m_FullPath=fullPath;var data=_gtea2.default.rpc.SplitPath(fullPath);this.m_sRoomSName=data[0],this.m_sRoomGName=data[1],this.m_PlayerData=_playerdata_mgr2.default.getInstance().getMe(),this.OnJoinRooom(lastdesk)}},{key:"OnJoinRooom",value:function(lastdesk){this.JoinGroup(this.m_FullPath,"CRoomUser",[this.m_PlayerData.m_nUID,_playerdata_mgr2.default.getInstance().m_Token,"unknown",[],lastdesk||-1],this.m_nJoinGroupOTime)}},{key:"OnJoinGroupErr",value:function(errflag,errmsg){_get(GameRoomUser.prototype.__proto__||Object.getPrototypeOf(GameRoomUser.prototype),"OnJoinGroupErr",this).call(this,errflag,errmsg),_FlyText2.default.AddFlyText("加入房间失败!"),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}},{key:"netJoinRoomErr",value:function(agv){_FlyText2.default.AddFlyText(agv[1]),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}},{key:"GameEvent",value:function(evename,agv,asyn){_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,evename,agv)}},{key:"OnRemoteCreate",value:function(agv){var pdata=agv[0],deskinfo=(agv[1],agv[2]),deskno=deskinfo[0]||-1,chairno=deskinfo[1]||-1;delete pdata.MatchScore,this.m_PlayerData.setData(pdata),this.m_nSwapDeskNum=0,this.GameEvent("InRoomOk",{deskno:deskno,chairno:chairno}),deskno>-1?this.InDesk(deskno,chairno):this.netAutoJoin(),this.StartChkHeartBeat(this.m_nHeartTime)}},{key:"OnBreakPlayer",value:function(errflag,errmsg){101!=errflag?(501==errflag&&(errmsg="牌局已结束!"),_FlyText2.default.AddFlyText(errmsg),_gamemodelmgr2.default.getInstance().ExitGameRoom(0==errflag)):_BaseObj2.default.EventToRegObj("MainApp","ReOpen",{mode:1,why:"与服务器断开连接,请重新打开!"})}},{key:"OnSvrBreak",value:function(){_FlyText2.default.AddFlyText("与服务器断开连接！"),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}},{key:"netOnWaitPairOther",value:function(agv){this.GameEvent("netOnWaitPairOther",agv)}},{key:"netAutoJoin",value:function(){this.ToS("FindJoinDesk",[])}},{key:"swapJoin",value:function(){this.m_nSwapDeskNum=this.m_nSwapDeskNum+1,this.ToS("SwapDesk",[this.m_nDeskNo,this.m_nSwapDeskNum%2!=0,!0])}},{key:"netOnAutoInDesk",value:function(agv){this.m_nDeskNo=agv[0],this.m_nChairNo=agv[1],this.InDesk(this.m_nDeskNo,this.m_nChairNo)}},{key:"netOnFindDeskFailed",value:function(agv){_FlyText2.default.AddFlyText("没有空余的桌子!"),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}},{key:"netOnHeartBeat",value:function(agv){this.StartTimer(1e4,this.OnHeartBeat,[])}},{key:"netOnRoomWillClose",value:function(agv){var msg="系统将在"+_comfunc2.default.maketimestr(agv.left)+"后关闭房间,请及时退出!";_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:msg},!0,!0)}},{key:"InDesk",value:function(deskno,chairno,mobj){this.GameEvent("OnInDesk",[deskno,chairno,mobj])}},{key:"OnToS",value:function(agv){var eventname=agv[0],eventagv=agv[1]||[];eventname&&this.ToS(eventname,eventagv)}},{key:"StartChkHeartBeat",value:function(time){time?this.StartTimer(time,this.OnHeartBeat,[]):this.OnHeartBeat()}},{key:"OnHeartBeat",value:function(){this.ToS("Echo",["OnHeartBeat",[]]),this.StartTimer(this.m_nHeartTime,this.HeartBeatBreak,[])}},{key:"HeartBeatBreak",value:function(){_FlyText2.default.AddFlyText("网络连接中断..."),_mainlink2.default.getInstance().DisConnect()}},{key:"StartTimer",value:function(time,backfun,agv){this.StopTimer(),this.m_CheckTimer=this.timerCall(time,backfun,agv)}},{key:"StopTimer",value:function(){this.killTimer(this.m_CheckTimer),this.m_CheckTimer=null}}]),GameRoomUser}();exports.default=GameRoomUser},{"../../app/gameconst":5,"../../framework/data/playerdata_mgr":117,"../../framework/gamemodel/gamemodelmgr":123,"../../framework/gtea/BaseObj":126,"../../framework/gtea/gtea":127,"../../framework/net/mainlink":137,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../com/FlyText":52}],103:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_gameroomuser2=_interopRequireDefault(require("./gameroomuser")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_matchdef2=_interopRequireDefault(require("../../framework/match/matchdef")),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_matchobjmgr2=_interopRequireDefault(require("../../framework/match/matchobjmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MatchRoomUser=function(_GameRoomUser){function MatchRoomUser(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MatchRoomUser),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(MatchRoomUser.__proto__||Object.getPrototypeOf(MatchRoomUser)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MatchRoomUser,_gameroomuser2.default),_createClass(MatchRoomUser,[{key:"JoinRoom",value:function(fullPath,gtype,matchobj){this.m_MatchObj=matchobj,_get(MatchRoomUser.prototype.__proto__||Object.getPrototypeOf(MatchRoomUser.prototype),"JoinRoom",this).call(this,fullPath,gtype)}},{key:"OnJoinRooom",value:function(){this.JoinGroup(this.m_FullPath,"CRoomUser",[this.m_PlayerData.m_nUID,_playerdata_mgr2.default.getInstance().m_Token,this.m_MatchObj.m_nMatchID],this.m_nJoinGroupOTime)}},{key:"OnJoinGroupErr",value:function(errflag,errmsg){this.m_MatchObj.m_sRoomPath="",_get(MatchRoomUser.prototype.__proto__||Object.getPrototypeOf(MatchRoomUser.prototype),"OnJoinGroupErr",this).call(this,errflag,errmsg)}},{key:"OnRemoteCreate",value:function(agv){var pdata=agv[0];this.m_MatchObj.m_szMatchRoomData=agv[1];var deskinfo=agv[2];this.m_UsrMatchData=agv[3]||{},this.m_MatchObj.m_MatchData=agv[4]||{round:1,total_round:1,pnum:0,next_pnum:-1},this.m_MatchObj.m_UsrMatchData=this.m_UsrMatchData,this.m_MatchObj.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_FNG&&delete pdata.MatchScore,this.m_PlayerData.setData(pdata),this.StartChkHeartBeat(this.m_nHeartTime),this.GameEvent("InRoomOk",{matchobj:this.m_MatchObj,userdata:this.m_UsrMatchData},!0),deskinfo[0]>-1&&this.InDesk(deskinfo[0],deskinfo[1],this.m_MatchObj)}},{key:"netOnMatchStart",value:function(agv){this.m_UsrMatchData=agv,this.m_MatchObj.m_UsrMatchData=this.m_UsrMatchData}},{key:"netOnStartMatchRound",value:function(agv){this.m_MatchObj.m_MatchData=agv,this.GameEvent("OnStartMatchRound",[this.m_MatchObj])}},{key:"netOnAutoInDesk",value:function(agv){this.InDesk(agv[0],agv[1],this.m_MatchObj,this.m_UsrMatchData)}},{key:"netOnCurLeftPlayerNumChg",value:function(agv){this.GameEvent("OnMatchCurLeftPlayerNumChg",agv)}},{key:"netOnRankChg",value:function(agv){this.m_UsrMatchData.rank=agv[0],this.m_UsrMatchData.totalnum=agv[1],this.m_UsrMatchData.curleft=agv[2],this.m_UsrMatchData.score=agv[3],this.m_MatchObj.m_UsrMatchData=this.m_UsrMatchData,this.GameEvent("OnRankChg",[this.m_MatchObj])}},{key:"netOnMatchRankList",value:function(agv){}},{key:"OnGetRankList",value:function(agv){var matchobj=agv[0];matchobj&&this.m_Matchobj==matchobj&&this.ToS("GetRankList",{})}},{key:"netOnWaitPairOther",value:function(agv){this.GameEvent("OnWaitPairOther",[this.m_MatchObj,agv.wait,agv.need])}},{key:"netOnWaitRoundEnd",value:function(agv){this.m_MatchObj.m_UsrMatchData.playinguser=agv.playinguser,this.m_MatchObj.m_UsrMatchData.playingdesk=agv.playingdesk,this.GameEvent("OnMatchWaitRoundEnd",[this.m_MatchObj])}},{key:"netOnIncDeathLine",value:function(agv){this.GameEvent("OnMatchIncDeathLine",agv)}},{key:"netOnDieOut",value:function(agv){_comfunc2.default.ObjIsValid(this.m_MatchObj)&&(this.m_MatchObj.m_bSignUp=!1,this.m_MatchObj.ClearRoomPath()),this.GameEvent("OnMatchDieOut",{mobj:this.m_MatchObj,data:agv})}},{key:"netOnSafeInNext",value:function(agv){var special=agv.special;null==special&&(special=!1),this.GameEvent("OnMatchSafeInNext",[this.m_MatchObj,special])}},{key:"netOnPromotionSuccess",value:function(agv){this.GameEvent("OnMatchPromotionSuccess",agv)}},{key:"netOnScoreChg",value:function(agv){this.GameEvent("OnMatchScoreChg",agv)}},{key:"netOnDieOutNumEnough",value:function(agv){this.GameEvent("OnMatchDieOutNumEnough",[this.m_MatchObj])}},{key:"netOnMatchEnd",value:function(agv){_comfunc2.default.ObjIsValid(this.m_MatchObj)&&this.m_MatchObj.ClearRoomPath(),this.GameEvent("OnMatchEnd",{mobj:this.m_MatchObj,data:agv})}},{key:"StartChkMatchInfo",value:function(agv){if(this.StopChkMatchInfo(),_comfunc2.default.ObjIsValid(this.m_MatchObj)&&(this.m_MatchObj.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_FNG||this.m_MatchObj.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_MTT)){var time=agv[0]||15;this.m_ChkTimer=this.timerCall(1e3*time,this.OnChkMatchInfo)}}},{key:"StopChkMatchInfo",value:function(){this.killTimer(this.m_ChkTimer),this.killTimer(this.m_ChkTimer1),this.m_ChkTimer=null,this.m_ChkTimer1=null}},{key:"OnChkMatchInfo",value:function(){this.ToS("GetMatchStatus",{}),this.m_ChkTimer1=this.timerCall(15e3,this.HeartBeatBreak)}},{key:"netOnSetCurMatchStatusInfo",value:function(agv){this.m_UsrMatchData=agv[1],this.m_MatchObj.m_UsrMatchData=this.m_UsrMatchData,this.StartChkMatchInfo([15]),this.GameEvent("OnSetCurMatchStatusInfo",{mobj:this.m_MatchObj,data:agv})}},{key:"OnRebuyChip",value:function(){this.ToS("OnUserReGame",{})}},{key:"OnCencelRebuy",value:function(){this.ToS("OnUserVoteGame",{})}},{key:"netOnBlindChg",value:function(agv){}},{key:"netResetRebuyVisible",value:function(agv){}},{key:"netOnResetGameMsg",value:function(agv){}},{key:"OnSvrBreak",value:function(errflag,errmsg){this.m_MatchObj.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_FNG&&this.m_MatchObj.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_MTT||_matchobjmgr2.default.getInstance().netOnMatchEnd({mid:this.m_MatchObj.m_nMatchID,status:7,why:errmsg}),_get(MatchRoomUser.prototype.__proto__||Object.getPrototypeOf(MatchRoomUser.prototype),"OnSvrBreak",this).call(this,errflag,errmsg)}}]),MatchRoomUser}();exports.default=MatchRoomUser},{"../../framework/data/playerdata_mgr":117,"../../framework/match/matchdef":132,"../../framework/match/matchobjmgr":135,"../../framework/utils/comfunc":144,"./gameroomuser":102}],104:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../gtea/BaseObj")),_playerdata_mgr2=_interopRequireDefault(require("../playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../utils/comfunc")),_pako2=_interopRequireDefault(require("../../utils/pako.min"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Club=function(_BaseObj){function Club(clubsys){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Club);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Club.__proto__||Object.getPrototypeOf(Club)).call(this));return _this.m_ClubSys=clubsys,_this.m_szUser=[],_this.m_szUIDList=[],_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Club,_BaseObj3.default),_createClass(Club,[{key:"getData",value:function(){return{lv:this.m_nClubLv,clubid:this.m_nClubID,name:this.m_sClubName,ctime:this.m_CreateTime,province:this.m_sProvince,about:this.m_sClubAbout,founder:{uid:this.m_sFounderUID,nick:this.m_sFounderNick},ceo:{uid:this.m_sCEOUID,nick:this.m_sCEONick},cfo:{uid:this.m_sCFOUID,nick:this.m_sCFONick},rqmode:this.m_nRequestMode,usernum:this.m_nUserNum,maxuser:this.m_nMaxUserNum,maxroom:this.m_szMaxRoomNum}}},{key:"setValue",value:function(value){return!(!value||!value.clubid)&&(this.m_nClubID=value.clubid,this.m_nClubLv=value.lv,this.m_sClubName=value.name,this.m_CreateTime=new Date(value.ctime),value.money&&(this.m_nClubGold=value.money.gold,this.m_nClubGems=value.money.gems),value.founder&&(this.m_sFounderUID=value.founder.uid,this.m_sFounderNick=value.founder.nick),value.ceo&&(this.m_sCEOUID=value.ceo.uid,this.m_sCEONick=value.ceo.nick),value.cfo&&(this.m_sCFOUID=value.cfo.uid,this.m_sCFONick=value.cfo.nick),value.chatgroup&&(this.m_sChatGroup=value.chatgroup),this.m_nRequestMode=value.rqmode,_comfunc2.default.isNil(value.usernum)||(this.m_nUserNum=value.usernum),value.uidlist&&(this.m_szUIDList=value.uidlist),this.m_sProvince=value.province||"021",this.m_sClubAbout=value.about,value.notify&&(this.m_sClubNotify=value.notify),value.option&&(this.m_szOption=value.option),this.m_nPendingRequestNum=value.rqnum||0,this.m_nMaxUserNum=value.maxuser,this.m_szMaxRoomNum=value.maxroom,this.m_nAutoCreateRoomNum=value.autocreateroom||0,this.dispatchEvent("eve.DataChg"),!0)}},{key:"setRequestMode",value:function(mode){this.m_nRequestMode=mode}},{key:"setUsers",value:function(ulist){if(ulist instanceof _gtea2.default.CByteArray){ulist.position=0;var unzippedData=_pako2.default.inflate(ulist.getBuffer());(ulist=new _gtea2.default.CByteArray).writeArrayBuffer(unzippedData.buffer),ulist.useRawInt64=!0,ulist.position=0,ulist=ulist.readValue()}for(var users=[],uidlist=[],i=0;i<ulist.length;i++){var udata=ulist[i];if(udata.uid){var usr=this.m_ClubSys.getUser(udata.uid);usr&&(usr.setValue(udata,this.m_nClubID),users[users.length]=usr,uidlist[uidlist.length]=udata.uid)}}this.m_szUser=users,this.m_szUIDList=uidlist,this.m_nUserNum=users.length,this.dispatchEvent("eve.DataChg",{})}},{key:"hasUser",value:function(uid){return this.m_szUIDList.indexOf(uid)>-1}},{key:"rmvUser",value:function(uid){this.m_szUIDList.splice(this.m_szUIDList.indexOf(uid),1)}},{key:"OnClubMoneyChg",value:function(value){value.money&&(this.m_nClubGold=value.money.gold,this.m_nClubGems=value.money.gems),this.dispatchEvent("eve.DataChg",{})}},{key:"OnClubRequestChg",value:function(value){this.m_nPendingRequestNum=value.rqnum,this.dispatchEvent("eve.RequestChg",{})}},{key:"RequireFullData",value:function(){var qagv={clubid:this.m_nClubID,uid:_playerdata_mgr2.default.getInstance().getMeUID()};_gtea2.default.rpc.Call("俱乐部服务","QueClub",qagv,this,function(agv){this.m_ClubSys.setClub(agv)},function(errflag,errmsg,opt){errflag<0&&this.RequireFullData()})}},{key:"GetCEOUID",value:function(){if(!this.m_sCEOUID||0==this.m_sCEOUID.length)return null;var agv=this.m_sCEOUID.split("/");return parseInt(agv[1])}},{key:"IsCEO",value:function(uid){var ceoid=this.GetCEOUID();return!!ceoid&&uid==ceoid}},{key:"RoomCanCreate",value:function(name){var sznotcreate=this.m_szOption.notcreate;if(!sznotcreate)return!0;for(var i=0;i<sznotcreate.length;i++)if(sznotcreate[i]==name)return!1;return!0}},{key:"RoomConditionAct",value:function(name,condition){var sznotcondition=this.m_szOption.notcondition;if(!sznotcondition)return!0;var szcondition=sznotcondition[name];if(!szcondition)return!0;for(var i=0;i<szcondition.length;i++)if(szcondition[i]==condition)return!1;return!0}},{key:"OnUserATimeChg",value:function(agv){var uid=agv.uid,atime=agv.atime,user=this.m_ClubSys.findUser(uid);if(user){var timedata=user.m_szClubs[this.m_nClubID.toString()];timedata||(timedata={}),timedata.atime=atime,user.m_szClubs[this.m_nClubID.toString()]=timedata,this.m_ClubSys.updateUsr(user)}}},{key:"OnClubOptionChg",value:function(data){this.m_szOption=data}},{key:"CanAddAutoCreate",value:function(){var autocreate=this.m_szOption.autocreate||{};return!(Object.keys(autocreate).length>=this.m_nAutoCreateRoomNum)}}]),Club}();exports.default=Club},{"../../gtea/BaseObj":126,"../../gtea/gtea":127,"../../utils/comfunc":144,"../../utils/pako.min":146,"../playerdata_mgr":117}],105:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../gtea/BaseObj")),_club2=_interopRequireDefault(require("./club")),_clubuser2=_interopRequireDefault(require("./clubuser")),_UIMgr2=_interopRequireDefault(require("../../ui/UIMgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_playerdata_mgr2=_interopRequireDefault(require("../playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../gtea/gtea")),_comfunc2=_interopRequireDefault(require("../../utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ClubSys=function(_BaseObj){function ClubSys(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClubSys);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ClubSys.__proto__||Object.getPrototypeOf(ClubSys)).call(this));return _this.m_szClubs={},_this.m_szUsers={},_this.m_szInviteList=[],_this.LocalStorage=Laya.LocalStorage,_this.clubKey=_playerdata_mgr2.default.getInstance().getMeUID()+"_club",_this.clubUsrKey=_playerdata_mgr2.default.getInstance().getMeUID()+"_clubusr",_playerdata_mgr2.default.getInstance().RegSvrCallBack("消息广播",_this),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ClubSys,_BaseObj3.default),_createClass(ClubSys,null,[{key:"getInstance",value:function(){return ClubSys.instance||(ClubSys.instance=new ClubSys),ClubSys.instance}}]),_createClass(ClubSys,[{key:"clubSet",value:function(clubid,clubdata){this.setLocalClub(clubid,clubdata)}},{key:"clubGet",value:function(clubid){var data=this.getLocalClub();return data[clubid]?data[clubid]:{}}},{key:"clubDel",value:function(clubid){var data=this.getLocalClub();data[clubid]&&(delete data[clubid],this.LocalStorage.setJSON(this.clubKey,data))}},{key:"getLocalClub",value:function(){var data=this.LocalStorage.getJSON(this.clubKey);return data||(this.LocalStorage.setJSON(this.clubKey,{}),data={}),data}},{key:"setLocalClub",value:function(clubid,clubdata){var data=this.getLocalClub();data[clubid]=clubdata,this.LocalStorage.setJSON(this.clubKey,data)}},{key:"clubUsrSet",value:function(uid,clubusrdata){this.setLocalClubUsr(uid,clubusrdata)}},{key:"clubUsrGet",value:function(uid){var data=this.getLocalClubUsr();return data[uid]?data[uid]:{}}},{key:"getLocalClubUsr",value:function(){var data=this.LocalStorage.getJSON(this.clubUsrKey);return data||(this.LocalStorage.setJSON(this.clubUsrKey,{}),data={}),data}},{key:"setLocalClubUsr",value:function(uid,clubusrdata){var data=this.getLocalClub();data[uid]=clubusrdata,this.LocalStorage.setJSON(this.clubUsrKey,data)}},{key:"Load",value:function(){_gtea2.default.rpc.Call("俱乐部服务","LoadData",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),nick:_playerdata_mgr2.default.getInstance().getMeNick()},this,function(agv){var clublist=agv[0],dellist=[];for(var key in this.m_szClubs){for(var bFind=!1,club=this.m_szClubs[key],i=0;i<clublist.length;i++){var data=clublist[i];if(data.clubid==club.m_nClubID){this.setClub(data),bFind=!0,clublist.splice(i,1);break}}bFind||dellist.push(club.m_nClubID)}for(var _i=0;_i<clublist.length;_i++)this.setClub(clublist[_i]);for(var _i2=0;_i2<dellist.length;_i2++)this.ExitClub(dellist[_i2]);this.RefreshClub()},function(errflag,errmsg,opt){})}},{key:"getUser",value:function(uid,no_add_db){var key=uid.toString(),usr=this.m_szUsers[key];if(_comfunc2.default.isNil(usr)){var cachedata=this.clubUsrGet(uid);cachedata.length>0?(usr=new _clubuser2.default(uid)).setValue(cachedata):no_add_db||(usr=new _clubuser2.default(uid),this.clubUsrSet(uid)),_comfunc2.default.isNil(usr)||(this.m_szUsers[key]=usr)}return usr}},{key:"findUser",value:function(uid){return this.getUser(uid,!0)}},{key:"updateUsr",value:function(usr){this.clubUsrSet(usr.m_nUID,usr.getValue())}},{key:"getClub",value:function(clubid){var key=clubid.toString(),club=this.m_szClubs[key];if(_comfunc2.default.isNil(club)){club=new _club2.default(this);var cachedata=this.clubGet(clubid);Object.keys(cachedata).length>0?club.setValue(cachedata,!0):this.clubSet(clubid),this.m_szClubs[key]=club}return club}},{key:"findClub",value:function(clubid){var key=clubid.toString(),club=this.m_szClubs[key];if(_comfunc2.default.isNil(club)){var cachedata=this.clubGet(clubid);Object.keys(cachedata).length>0&&((club=new _club2.default(this)).setValue(cachedata,!0),this.m_szClubs[key]=club)}return club}},{key:"findClubByChatID",value:function(chatid){for(var clubid in this.m_szClubs){var club=this.m_szClubs[clubid];if(club.m_sChatGroup==chatid)return club}return null}},{key:"setClub",value:function(value){if(_comfunc2.default.isNil(value.clubid))return null;var club=this.getClub(value.clubid);return club.setValue(value),_comfunc2.default.isNil(value.ulist)||club.setUsers(value.ulist),club}},{key:"RefreshClub",value:function(ids){_comfunc2.default.isNil(ids)&&(ids=this.getMeClub());for(var i=0;i<ids.length;i++){var clubid=ids[i],club=this.findClub(clubid);_comfunc2.default.isNil(club)||club.RequireFullData()}this.dispatchEvent("eve.ClubListChg",[])}},{key:"LoadInviteList",value:function(){_gtea2.default.rpc.Call("俱乐部服务","ListUserInvite",{uid:_playerdata_mgr2.default.getInstance().getMeUID(),num:1e3},this,function(agv){this.m_szInviteList=agv,this.dispatchEvent("eve.InviteListChg",[])},function(errflag,errmsg,opt){})}},{key:"DelInviteItem",value:function(inviteid){for(var i=0;i<this.m_szInviteList.length;i++){if(this.m_szInviteList[i].inviteid==inviteid){this.m_szInviteList.splice(i,1),this.dispatchEvent("eve.InviteListChg");break}}}},{key:"netOnClubDataChg",value:function(value){this.setClub(value)}},{key:"netOnClubMoneyChg",value:function(value){var clubid=value.clubid,club=this.getClub(clubid);_comfunc2.default.isNil(club)||club.OnClubMoneyChg(value)}},{key:"netOnClubUListChg",value:function(value){var clubid=value.clubid,club=this.getClub(clubid),isnew=!1;-1==club.m_szUIDList.indexOf(_playerdata_mgr2.default.getInstance().getMeUID())&&(isnew=!0),_comfunc2.default.isNil(club)||(club.setUsers(value.ulist),isnew||this.dispatchEvent("eve.ClubMemberChg",[]))}},{key:"netOnClubTransfer",value:function(value){this.setClub(value)}},{key:"netOnClubRequestChg",value:function(agv){var clubid=agv.clubid,club=this.getClub(clubid);_comfunc2.default.isNil(club)||club.OnClubRequestChg(agv),this.dispatchEvent("eve.ClubRequestChg",{clubid:clubid})}},{key:"netOnUserATimeChg",value:function(agv){var clubid=agv.clubid,club=this.getClub(clubid);_comfunc2.default.isNil(club)||club.OnUserATimeChg(agv),this.dispatchEvent("eve.OnUserATimeChg",{clubid:clubid})}},{key:"netOnClubOptionChg",value:function(agv){var clubid=agv.clubid,club=this.getClub(clubid);_comfunc2.default.isNil(club)||club.OnClubOptionChg(agv.option),this.dispatchEvent("eve.OnClubOptionChg",{clubid:clubid})}},{key:"netOnUserJoinClub",value:function(value){var club=this.setClub(value);club&&(FlyText.AddFlyText("恭喜您加入"+_gameconst2.default.CLUBNAME+"(ID:"+club.m_nClubID+")"),this.dispatchEvent("eve.ClubListChg",[]))}},{key:"netOnClubKickUser",value:function(value){var clubid=value.clubid,club=this.getClub(clubid);club&&(this.ExitClub(value.clubid),_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"您被请出"+_gameconst2.default.CLUBNAME+"["+club.m_sClubName+"]"},!0,!0)),this.dispatchEvent("eve.ClubListChg",[])}},{key:"netOnClubInviteChg",value:function(agv){this.LoadInviteList()}},{key:"getMineClub",value:function(){var meUID=_playerdata_mgr2.default.getInstance().getMeUID(),clist=[];for(var clubid in this.m_szClubs){var club=this.m_szClubs[clubid];_comfunc2.default.isNil(club)||club.m_sFounderUID!="usr/"+meUID||clist.push(parseInt(clubid))}return clist}},{key:"getMeClub",value:function(){var meUID=_playerdata_mgr2.default.getInstance().getMeUID(),clist=[];for(var clubid in this.m_szClubs){var club=this.m_szClubs[clubid];!_comfunc2.default.isNil(club)&&club.hasUser(meUID)&&clist.push(parseInt(clubid))}return clist}},{key:"ExitClub",value:function(clubid){var meUID=_playerdata_mgr2.default.getInstance().getMeUID(),club=this.getClub(clubid);_comfunc2.default.isNil(club)||(club.rmvUser(meUID),this.clubSet(clubid,club.getData()))}},{key:"DestroyClub",value:function(clubid){var club=this.getClub(clubid);_comfunc2.default.isNil(club)||(this.clubDel(clubid),delete this.m_szClubs[clubid.toString()],club.DelThis())}},{key:"IsMeClub",value:function(clubid){for(var szClub=this.getMeClub(),i=0;i<szClub.length;i++)if(szClub[i]==clubid)return!0;return!1}}]),ClubSys}();exports.default=ClubSys},{"../../../app/gameconst":5,"../../gtea/BaseObj":126,"../../gtea/gtea":127,"../../ui/UIMgr":142,"../../utils/comfunc":144,"../playerdata_mgr":117,"./club":104,"./clubuser":106}],106:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../gtea/BaseObj")),_playerdata_mgr2=_interopRequireDefault(require("../playerdata_mgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ClubUser=function(_BaseObj){function ClubUser(uid){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClubUser);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ClubUser.__proto__||Object.getPrototypeOf(ClubUser)).call(this));return _this.m_nUID=uid,_this.m_szClubs={},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ClubUser,_BaseObj3.default),_createClass(ClubUser,[{key:"setValue",value:function(value,clubid,loadData){return!(!value||!value.uid)&&(this.m_nUID=value.uid,this.m_sNick=value.nick,clubid&&(this.m_szClubs[clubid.toString()]={atime:value.atime,intime:value.intime}),this.m_PlayerData=_playerdata_mgr2.default.getInstance().loadData(this.m_nUID,null,loadData),this.m_PlayerData.isReady()?this.OnLoadDataOk():this.m_PlayerData.addEventListener("eve.DataReady",this,this.OnLoadDataOk),!0)}},{key:"getValue",value:function(){return{uid:this.m_nUID,nick:this.m_sNick,clubs:this.m_szClubs}}},{key:"getClubData",value:function(clubid){return this.m_szClubs[clubid.toString()]}},{key:"OnLoadDataOk",value:function(){this.dispatchEvent("eve.DataReady")}},{key:"isDataReady",value:function(){return null!=this.m_PlayerData}},{key:"OnLoadDataErr",value:function(errflag,errmsg,opt){}}]),ClubUser}();exports.default=ClubUser},{"../../gtea/BaseObj":126,"../playerdata_mgr":117}],107:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../gtea/BaseObj")),_gtea2=_interopRequireDefault(require("../../gtea/gtea")),_FlyText2=(_interopRequireDefault(require("../../utils/comfunc")),_interopRequireDefault(require("../../../appbase/com/FlyText"))),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UserEmail=function(_BaseObj){function UserEmail(uid){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UserEmail);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(UserEmail.__proto__||Object.getPrototypeOf(UserEmail)).call(this));return _this.m_eMailList={},_this.m_nUID=uid,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(UserEmail,_BaseObj3.default),_createClass(UserEmail,[{key:"Load",value:function(){_gtea2.default.rpc.Call("邮件服务","LoadData",{uid:this.m_nUID},this,function(agv){this.setData(agv[0]),console.log("加载邮件成功")},function(code,msg,opt){console.error("获取邮件失败")}),console.log("加载邮件")}},{key:"setData",value:function(data){this.m_eMailList=_gameconst2.default.ChkUserMail(data),this.dispatchEvent("eve.DataChg")}},{key:"FindByID",value:function(id){if(!this.m_eMailList)return null;for(var key in this.m_eMailList){var value=this.m_eMailList[key];if(value.mailid==id)return value}return null}},{key:"ListStatueEmailNum",value:function(read){var num=0;for(var key in this.m_eMailList){this.m_eMailList[key].read==read&&(num+=1)}return num}},{key:"ListStatueEmails",value:function(read){var s=[];for(var key in this.m_eMailList){var value=this.m_eMailList[key];value.read==read&&(s[s.length]=value)}return s}},{key:"ListAllEmail",value:function(){return this.m_eMailList}},{key:"DelEmailByID",value:function(mailid){if(!this.m_eMailList)return null;function delok(agv){}function delerr(code,errmsg,opt){}for(var key in this.m_eMailList){var value=this.m_eMailList[key];if(value.mailid==mailid){delete this.m_eMailList[key],this.dispatchEvent("eve.DataChg"),_gtea2.default.rpc.Call("邮件服务","DelMail",{uid:this.m_nUID,mailid:value.mailid},this,delok,delerr);break}}}},{key:"DelBatchEmailByID",value:function(agv){if(this.m_eMailList&&0!=agv.length){var tmplist=[];for(var key in this.m_eMailList){for(var value=this.m_eMailList[key],bFind=!1,i=0;i<agv.length;i++)if(value.mailid==agv[i]){bFind=!0;break}bFind||tmplist.push(value)}this.m_eMailList=tmplist,this.dispatchEvent("eve.DataChg"),_gtea2.default.rpc.Call("邮件服务","BatchDelMail",{uid:this.m_nUID,mails:agv},this,function(agv){},function(code,errmsg,opt){})}}},{key:"setAllMsgReaded",value:function(){if(this.m_eMailList){var chg=!1;for(var key in this.m_eMailList){var value=this.m_eMailList[key];0==value.read&&(chg=!0,value.read=!0,console.log({uid:this.m_nUID,mailid:value.mailid}),_gtea2.default.rpc.Call("邮件服务","SetMailRead",{uid:this.m_nUID,mailid:value.mailid},this,setok,seterr))}chg&&this.dispatchEvent("eve.DataChg")}function setok(agv){console.log("set all emails  read ok")}function seterr(code,errmsg,opt){console.error("set all emails  read err")}}},{key:"setMsgReadedByID",value:function(mailid){if(!this.m_eMailList)return null;function setok(agv){console.info("mail set read ok")}function seterr(code,errmsg,opt){console.error("mail set read err")}for(var key in this.m_eMailList){var value=this.m_eMailList[key];if(value.mailid==mailid&&1!=value.read){value.read=!0,this.dispatchEvent("eve.DataChg"),_gtea2.default.rpc.Call("邮件服务","SetMailRead",{uid:this.m_nUID,mailid:value.mailid},this,setok,seterr);break}}}},{key:"setBatchMsgReadedByID",value:function(agv){if(this.m_eMailList&&0!=agv.length){for(var key in this.m_eMailList)for(var value=this.m_eMailList[key],i=0;i<agv.length;i++)if(value.mailid==agv[i]&&1!=value.read){value.read=!0;break}this.dispatchEvent("eve.DataChg",{}),_gtea2.default.rpc.Call("邮件服务","BatchSetMailRead",{uid:this.m_nUID,mails:agv},this,function(agv){console.info("mails set read ok")},function(code,errmsg,opt){console.error("mails set read err")})}}},{key:"getMailAttachments",value:function(mailid){var data=this.FindByID(mailid);if(!data||0!=data.attachments_status)return _FlyText2.default.AddFlyText("没有附件可以领取!"),!1;return data.attachments_status=2,_gtea2.default.rpc.Call("邮件服务","GetAttachments",{uid:this.m_nUID,mailid:mailid},this,function(agv){_FlyText2.default.AddFlyText("领取附件成功!")},function(code,errmsg,opt){_FlyText2.default.AddFlyText(errmsg)}),!0}},{key:"CheckDelMail",value:function(num){var list=this.ListStatueEmails(!0);if(!(list.length<=num)){for(var dellist=[],i=num;i<list.length;i++){var data=list[i];dellist.push(data.mailid)}this.DelBatchEmailByID(dellist)}}},{key:"CheckMail",value:function(){this.m_AutoTimer&&this.killTimer(this.m_AutoTimer),this.Load(),this.m_AutoTimer=this.loopCall(-1,36e5,this.Load)}}]),UserEmail}();exports.default=UserEmail},{"../../../app/gameconst":5,"../../../appbase/com/FlyText":52,"../../gtea/BaseObj":126,"../../gtea/gtea":127,"../../utils/comfunc":144}],108:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var GameData=function(_BaseObj){function GameData(typename){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameData);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameData.__proto__||Object.getPrototypeOf(GameData)).call(this));return _this.m_sTypeName=typename,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameData,_BaseObj3.default),_createClass(GameData,[{key:"getData",value:function(){return this.m_Data}},{key:"setData",value:function(value){this.m_Data=value,this.dispatchEvent("eve.DataChg",{})}}]),GameData}();exports.default=GameData},{"../gtea/BaseObj":126}],109:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../../gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var DiscountShopItem=function(_BaseObj){function DiscountShopItem(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DiscountShopItem),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(DiscountShopItem.__proto__||Object.getPrototypeOf(DiscountShopItem)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DiscountShopItem,_BaseObj3.default),_createClass(DiscountShopItem,[{key:"getID",value:function(){return this.m_nID}},{key:"getType",value:function(){return Math.floor(this.m_nID/1e6)}}]),DiscountShopItem}();exports.default=DiscountShopItem},{"../../gtea/BaseObj":126}],110:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../gtea/BaseObj")),_gtea2=_interopRequireDefault(require("../../gtea/gtea")),_itemdata2=_interopRequireDefault(require("./itemdata"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ItemBag=function(_BaseObj){function ItemBag(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ItemBag);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ItemBag.__proto__||Object.getPrototypeOf(ItemBag)).call(this));return _this.m_szItems={},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ItemBag,_BaseObj3.default),_createClass(ItemBag,[{key:"setData",value:function(v){this.m_nGems=v.gems,this.m_nGold=v.gold,this.m_nFrozenGold=v.frozen_gold,this.m_nFrozenGems=v.frozen_gems,this.m_nVouchers1=v.vouchers1,this.m_nVouchers2=v.vouchers2,this.m_nVouchers3=v.vouchers3,this.m_SecrtShopRecord=v.secrtshoprecord;for(var items=v.items,itemlist=this.m_szItems,i=0;i<itemlist.length;i++)itemlist[i].Clear();if(itemlist=[],items)for(var _i=0;_i<items.length;_i++){var d=items[_i],itemdata=new _itemdata2.default(d);itemlist[_i]=itemdata}this.m_szItems=itemlist,this.m_vData=v,this.dispatchEvent("eve.DataChg",{})}},{key:"getData",value:function(){return this.m_vData}},{key:"ListStatusItem",value:function(status){for(var items=[],i=0;i<this.m_szItems.length;i++){var itemdata=this.m_szItems[i];itemdata.getStatus()==status&&(items[items.length]=itemdata)}return items}},{key:"ListAllItems",value:function(){return this.m_szItems}},{key:"listKind",value:function(kind){for(var items=[],i=0;i<this.m_szItems.length;i++){var itemdata=this.m_szItems[i];itemdata.getType()==kind&&(items[items.length]=itemdata)}return items}},{key:"getItemNum",value:function(kindid){for(var num=0,itemlist=this.m_szItems,i=0;i<itemlist.length;i++){var bagitem=itemlist[i];bagitem.m_nKindID==kindid&&(num+=bagitem.m_nNum)}return num}},{key:"GetItem",value:function(kind){for(var i=0;i<this.m_szItems.length;i++){var itemdata=this.m_szItems[i];if(itemdata.m_nKindID===kind)return itemdata}return null}},{key:"GetTypeStatusItem",value:function(itype,status){for(var i=0;i<this.m_szItems.length;i++){var itemdata=this.m_szItems[i];if(itemdata.getType()==itype&&itemdata.getStatus()==status)return itemdata}return null}},{key:"RefreshGems",value:function(uid){_gtea2.default.rpc.Call("仓库数据","RefGems",{uid:uid},this,function(agv){this.m_nGems=agv[0],this.m_vData.gems=agv[0],this.dispatchEvent("eve.DataChg",{})},function(code,msg,opts){})}},{key:"RefreshBag",value:function(uid){_gtea2.default.rpc.Call("仓库数据","LoadData",{uid:uid},this,function(agv){this.setData(agv[0])},function(code,msg,opts){})}},{key:"GetSecrtShopItemChgNum",value:function(itemid){return this.m_SecrtShopRecord&&this.m_SecrtShopRecord.data[itemid.toString()]||0}},{key:"GetSecrtShopItemChgMaxNum",value:function(itemid){if(!this.m_SecrtShopRecord)return 0;var total=this.m_SecrtShopRecord.data.total;return total&&total[itemid.toString()]||0}}]),ItemBag}();exports.default=ItemBag},{"../../gtea/BaseObj":126,"../../gtea/gtea":127,"./itemdata":111}],111:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../gtea/BaseObj")),_itemkindmgr2=_interopRequireDefault(require("./itemkindmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ItemData=function(_BaseObj){function ItemData(v){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ItemData);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ItemData.__proto__||Object.getPrototypeOf(ItemData)).call(this));return v&&_this.setData(v),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ItemData,_BaseObj3.default),_createClass(ItemData,[{key:"Clear",value:function(){this.m_sItemID=null,this.m_nUID=null,this.m_nKindID=0,this.m_nNum=0,this.m_ExtData=null,this.m_ItemKind=null}},{key:"setData",value:function(v){v.kindid?(this.m_sItemID=v.itemid,this.m_nKindID=v.kindid,this.m_nNum=v.num,this.m_nUID=v.uid,this.m_ExtData=v.extdata):(this.m_nKindID=v[0],this.m_nNum=v[1],this.m_ExtData=v[2],this.m_sItemID="",this.m_nUID=0),this.m_ItemKind=_itemkindmgr2.default.getInstance().Find(this.m_nKindID)}},{key:"setSimData",value:function(kindid,num){this.m_nKindID=kindid,this.m_nNum=num,this.m_ExtData=null,this.m_sItemID="",this.m_nUID=0,this.m_ItemKind=_itemkindmgr2.default.getInstance().Find(this.m_nKindID)}},{key:"getData",value:function(){return{itemid:this.m_sItemID,kindid:this.m_nKindID,num:this.m_nNum,uid:this.m_nUID,extdata:this.m_ExtData}}},{key:"getKindID",value:function(){return this.m_nKindID}},{key:"getType",value:function(){return this.m_ItemKind.getType()}},{key:"getSubType",value:function(){return this.m_ItemKind.getSubType()}},{key:"getName",value:function(){return this.m_ItemKind.getName()}},{key:"getAbout",value:function(){return this.m_ItemKind.getAbout()}},{key:"getImgName",value:function(){return this.m_ItemKind.getImgName()}},{key:"isUnique",value:function(){return this.m_ItemKind.isUnique()}},{key:"getItemNum",value:function(){return this.m_nNum}},{key:"getStatus",value:function(){return this.m_ExtData&&this.m_ExtData.status?this.m_ExtData.status:0}},{key:"setStatus",value:function(st){this.m_ExtData||(this.m_ExtData=[]),this.m_ExtData.status=st}},{key:"getDurability",value:function(){return this.m_ExtData&&this.m_ExtData.durability?this.m_ExtData.durability:-1}},{key:"setDurability",value:function(v){this.m_ExtData||(this.m_ExtData=[]),this.m_ExtData.durability=v}},{key:"getOTime",value:function(){return this.m_ExtData&&this.m_ExtData.otime?this.m_ExtData.otime:null}},{key:"getCTime",value:function(){return this.m_ExtData&&this.m_ExtData.ctime?this.m_ExtData.ctime:null}}]),ItemData}();exports.default=ItemData},{"../../gtea/BaseObj":126,"./itemkindmgr":113}],112:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../../gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var ItemKind=function(_BaseObj){function ItemKind(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ItemKind),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ItemKind.__proto__||Object.getPrototypeOf(ItemKind)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ItemKind,_BaseObj3.default),_createClass(ItemKind,[{key:"getID",value:function(){return this.m_nID}},{key:"getType",value:function(){return Math.floor(this.m_nID/1e5)}},{key:"getSubType",value:function(){var subid=this.m_nID%1e5;return Math.floor(subid/1e3)}},{key:"getName",value:function(){return this.m_sName}},{key:"getPrice",value:function(){return this.m_sPrice}},{key:"getGemPrice",value:function(){return this.m_nPrice}},{key:"getImgName",value:function(){return this.m_sImg}},{key:"getAbout",value:function(){return this.m_sAbout}},{key:"getMaxNum",value:function(){return this.m_nMaxNum}},{key:"getDurability",value:function(){return this.m_nDurability}},{key:"getEffectList",value:function(){return this.m_szEffect}},{key:"getEffect",value:function(name,def){if(def||(def=0),!this.m_szEffect)return 0;for(var i=0;i<this.m_szEffect.length;i++){var e=this.m_szEffect[i];if(e[0]==name)return e[1]}return def}}]),ItemKind}();exports.default=ItemKind,ItemKind.TYPE_NORMAL=10,ItemKind.TYPE_FMCG=11,ItemKind.TYPE_FMCG_LMIMIT=12,ItemKind.TYPE_REAL=13,ItemKind.TYPE_GEMS=14,ItemKind.TYPE_BUFF=15},{"../../gtea/BaseObj":126}],113:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../gtea/BaseObj")),_gtea2=_interopRequireDefault(require("../../gtea/gtea")),_itemkind2=_interopRequireDefault(require("./itemkind")),_shopitemkind2=_interopRequireDefault(require("./shopitemkind")),_discountshopitem2=_interopRequireDefault(require("./discountshopitem")),_tdf2=_interopRequireDefault(require("../../utils/tdf")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_comfunc2=_interopRequireDefault(require("../../utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ItemKindMgr=function(_BaseObj){function ItemKindMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ItemKindMgr);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ItemKindMgr.__proto__||Object.getPrototypeOf(ItemKindMgr)).call(this)),kindlist=_tdf2.default.LoadTDF("data/item/itemkind.tdf")||Laya.loader.getRes("data/item/itemkind.json"),kinds={};if(kindlist)for(var name in kindlist){var kind=new _itemkind2.default;kind.m_nID=kindlist[name]["编号"],kind.m_sName=kindlist[name]["名称"],kind.m_nMaxNum=kindlist[name]["数量上限"],kind.m_sImg="item/"+kindlist[name]["图标"],kind.m_sAbout=kindlist[name]["说明"],kind.m_nCanGiving=_comfunc2.default.isNil(kindlist[name]["可赠送"])?0:kindlist[name]["可赠送"],kind.m_nCanShow=_comfunc2.default.isNil(kindlist[name]["是否显示"])?1:kindlist[name]["是否显示"],kind.m_szMixItem=_comfunc2.default.isNil(kindlist[name]["合成商品"])?[]:kindlist[name]["合成商品"],kinds["id_"+String(kind.m_nID)]=kind}_this.m_szKinds=kinds;var effectlist=_tdf2.default.LoadTDF("data/item/itemeffect.tdf")||Laya.loader.getRes("data/item/itemeffect.json");if(effectlist)for(var _name in effectlist){var _kind=_this.Find(effectlist[_name]["物品编号"]);_kind&&(_kind.m_szEffect=effectlist[_name]["效果"])}var shopkindlist=_tdf2.default.LoadTDF("data/item/shop.tdf")||Laya.loader.getRes("data/item/shop.json"),shopkinds=[];if(shopkindlist){for(var _name2 in shopkindlist){var _kind2=new _shopitemkind2.default;_kind2.m_nID=shopkindlist[_name2]["物品编号"],_kind2.m_nGold=shopkindlist[_name2]["金币"],_kind2.m_nGems=shopkindlist[_name2]["宝石"],_kind2.m_nNum=shopkindlist[_name2]["数量"],_kind2.m_nSortIdx=shopkindlist[_name2]["排序"],_kind2.m_bHot=1==shopkindlist[_name2]["热销"],_kind2.m_bNew=1==shopkindlist[_name2]["新品"],_kind2.m_sInfo=shopkindlist[_name2]["商品说明"],_kind2.m_ItemKind=_this.Find(_kind2.m_nID),_kind2.m_nSortIdx||(_kind2.m_nSortIdx=1),shopkinds[shopkinds.length]=_kind2}shopkinds.sort(function(a,b){return a.m_nSortIdx<b.m_nSortIdx||!(a.m_nSortIdx>b.m_nSortIdx)&&(0!=a.m_nGems||0!=b.m_nGems?a.m_nGems<b.m_nGems:a.m_nGold<b.m_nGold)})}_this.m_szShopItemKind=shopkinds;var gemkindlist=_tdf2.default.LoadTDF("data/item/shopgems.tdf")||Laya.loader.getRes("data/item/shopgems.json"),gemkinds=[];if(gemkindlist){for(var _name3 in gemkindlist){var gemkind=new _itemkind2.default;gemkind.m_nID=gemkindlist[_name3]["编号"],gemkind.m_nProductID=gemkindlist[_name3]["商品编号"],gemkind.m_sName=gemkindlist[_name3]["名称"],gemkind.m_nPrice=gemkindlist[_name3]["价格"],gemkind.m_sAbout=gemkindlist[_name3]["说明"],gemkind.m_sImg="item/"+gemkindlist[_name3]["显示图片"],gemkind.m_szEffect=gemkindlist[_name3]["内含物品"],gemkind.m_sChannel=gemkindlist[_name3]["渠道"]||"all",gemkind.m_sShowType=gemkindlist[_name3]["显示"]||"",gemkind.m_nGems=gemkindlist[_name3]["钻石"],gemkind.m_nAddGems=gemkindlist[_name3]["加送"],gemkind.m_sType=gemkindlist[_name3]["类型"],gemkinds[gemkinds.length]=gemkind}gemkinds.sort(function(a,b){if(a.getType()>b.getType())return-1;if(a.getType()<b.getType())return 1;if(0!=a.m_nPrice&&0!=b.m_nPrice){if(a.m_nPrice<b.m_nPrice)return-1;if(a.m_nPrice>b.m_nPrice)return 1}return 0})}return _this.m_szShopGemKind=gemkinds,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ItemKindMgr,_BaseObj3.default),_createClass(ItemKindMgr,null,[{key:"getInstance",value:function(){return ItemKindMgr.instance||(ItemKindMgr.instance=new ItemKindMgr),ItemKindMgr.instance}},{key:"GetAddBagInfo",value:function(dlist){var info=[],gold=dlist.gold,gems=dlist.gems,vouchers1=dlist.vouchers1,vouchers2=dlist.vouchers2,vip=dlist.vip;if(dlist.real_item){var real_item_type=_typeof(dlist.real_item);if("string"===real_item_type)dlist.real_item.length>0&&(info[info.length]=dlist.real_item);else if("object"===real_item_type){var ritem=ItemKindMgr.GetRealItemStr(dlist.real_item);ritem.length>0&&(info=info.concat(ritem))}}var itemlist=dlist.itemlist;if(itemlist&&itemlist.length>0)for(var s_ItemKindMgr=ItemKindMgr.getInstance(),i=0;i<itemlist.length;i++){var subitem=itemlist[i],itemkindid=subitem[0],num=subitem[1],itemkind=s_ItemKindMgr.Find(itemkindid);num>0&&itemkind&&(info[info.length]=itemkind.getName()+"×"+num)}return gems&&gems>0&&(info[info.length]=gems+ItemKindMgr.GEMS_NAME),vouchers1&&vouchers1>0&&(info[info.length]=vouchers1+"奖券"),vouchers2&&vouchers2>0&&!_gameconst2.default.CONFIG.isreview&&(info[info.length]=_comfunc2.default.getVouchers2Ratio(vouchers2)+ItemKindMgr.VOUCHERS2_NAME),"object"===(void 0===vip?"undefined":_typeof(vip))&&vip.viplv&&vip.vipday&&vip.viplv>0&&vip.vipday>0&&(info[info.length]=String.format("【VIP%s】%s天",vip.viplv,vip.vipday)),gold&&gold>0&&(info[info.length]=_gameconst2.default.MakeNumberSimple(_comfunc2.default.getGoldRatio(gold))+ItemKindMgr.GOLD_NAME),info.length>0?info.join(","):"未知物品"}},{key:"GetRealItemStr",value:function(real_item){for(var ret=[],len=real_item.length,i=0;i<len;i++){var item=real_item[i],info=ItemKindMgr.GetOneRealItemStr(item);info&&(ret[ret.length]=info)}return ret}},{key:"GetOneRealItemStr",value:function(item){var tname=item[0],value=item[1],data=item[2];return"phonepay"==tname?String(value)+"元话费":"item"==tname?data?data.name+"*"+value:String(value):"redpacket"!=tname||_gameconst2.default.CONFIG.isreview?"pingan_wifi_card"==tname?String(value)+"平安wifi流量卡1张":"about"==tname?String(value):"coconutscore"==tname?parseInt(value/100)+"椰子积分":"shellscore"==tname?parseInt(value/100)+"贝壳积分":null:String(parseInt(value)/100)+"元红包"}}]),_createClass(ItemKindMgr,[{key:"LoadDiscountShopItem",value:function(){_gtea2.default.rpc.Call("背包数据","ListDiscountShopItem",[],this,function(agv){var kinds=[],currenttime=new Date;for(var key in agv){var kind=new _discountshopitem2.default;kind.m_nID=agv[key][0],kind.m_nPercent=agv[key][1],kind.m_BTime=agv[key][2],kind.m_ETime=agv[key][3],kind.m_Time=agv[key][4],kind.m_UpdataTime=currenttime,kinds[kinds.length]=kind}this.m_DiscountShopItemKind=kinds},function(agv){})}},{key:"Find",value:function(id){return this.m_szKinds["id_"+String(id)]}},{key:"FindShopItem",value:function(id){for(var i=0;i<this.m_szShopItemKind.length;i++)if(this.m_szShopItemKind[i].m_nID==id)return this.m_szShopItemKind[i];return null}},{key:"ListAllShopItem",value:function(){return this.m_szShopItemKind}},{key:"ListAllShopGem",value:function(){return this.m_szShopGemKind}},{key:"ListAllShopGemByChannel",value:function(channel,mode){channel=_comfunc2.default.conversionchannel(channel),mode||(mode="gems");for(var retagv=[],i=0;i<this.m_szShopGemKind.length;i++){var gemkind=this.m_szShopGemKind[i];gemkind.m_sType==mode&&(gemkind.m_sChannel!=channel&&"all"!=gemkind.m_sChannel&&"all"!=channel||retagv.push(gemkind))}return retagv}},{key:"ListAllDiscountShopItem",value:function(){return this.m_DiscountShopItemKind}},{key:"ListDiscountType",value:function(type){var kinds=[];for(var key in this.m_DiscountShopItemKind)this.m_DiscountShopItemKind[key].getType()==type&&(kinds[kinds.length]=this.m_DiscountShopItemKind[key]);return kinds}},{key:"FindDiscountShopItem",value:function(id){for(var key in this.m_DiscountShopItemKind)if(this.m_DiscountShopItemKind[key].getID()==id)return this.m_DiscountShopItemKind[key];return null}}]),ItemKindMgr}();exports.default=ItemKindMgr,ItemKindMgr.GEMS_NAME="钻石",ItemKindMgr.GOLD_NAME="金币",ItemKindMgr.VOUCHERS2_NAME="红包"},{"../../../app/gameconst":5,"../../gtea/BaseObj":126,"../../gtea/gtea":127,"../../utils/comfunc":144,"../../utils/tdf":148,"./discountshopitem":109,"./itemkind":112,"./shopitemkind":114}],114:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../../gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var ShopItemKind=function(_BaseObj){function ShopItemKind(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ShopItemKind),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(ShopItemKind.__proto__||Object.getPrototypeOf(ShopItemKind)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(ShopItemKind,_BaseObj3.default),_createClass(ShopItemKind,[{key:"getKindID",value:function(){return this.m_nID}},{key:"getType",value:function(){return this.m_ItemKind.getType()}},{key:"getSubType",value:function(){return this.m_ItemKind.getSubType()}},{key:"getName",value:function(){return this.m_ItemKind.getName()}},{key:"getGold",value:function(){return this.m_nGold}},{key:"getGems",value:function(){return this.m_nGems}},{key:"getInfo",value:function(){return this.m_sInfo}},{key:"getNum",value:function(){return this.m_nNum}},{key:"getHot",value:function(){return this.m_bHot}},{key:"getNew",value:function(){return this.m_bNew}},{key:"getAbout",value:function(){return this.m_ItemKind.getAbout()}},{key:"getImgName",value:function(){return this.m_ItemKind.getImgName()}},{key:"getDurability",value:function(){return this.m_ItemKind.getDurability()}}]),ShopItemKind}();exports.default=ShopItemKind},{"../../gtea/BaseObj":126}],115:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var MatchScore=function(_BaseObj){function MatchScore(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MatchScore),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(MatchScore.__proto__||Object.getPrototypeOf(MatchScore)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MatchScore,_BaseObj3.default),_createClass(MatchScore,[{key:"getData",value:function(){return{uid:this.m_nUID,nick:this.m_sNick,score:this.m_nScore,maxscore:this.m_nMaxScore,num:this.m_nNum,maxnum:this.m_nMaxNum,gold:this.m_nGold,silver:this.m_nSilver,copper:this.m_nCopper,rank:this.m_nRank,maxrank:this.m_nMaxRank,topnum:this.m_nTopNum,dayscore:this.m_nDayScore,maxdayscore:this.m_nMaxDayScore,extinfo:this.m_ExtInfo,gameround:this.m_nGameRound,gametime:this.m_nGameTime,status:this.m_nStatus,starttime:this.m_StartTime,endtime:this.m_EndTime}}},{key:"setData",value:function(value){var lastscore=this.m_nScore,lastrank=this.m_nRank;if(this.m_nUID=value.uid,this.m_sNick=value.nick||"",this.m_nScore=value.score,this.m_nMaxScore=value.maxscore||0,this.m_nNum=value.num||0,this.m_nMaxNum=value.maxnum||0,this.m_nGold=value.gold||0,this.m_nSilver=value.silver||0,this.m_nCopper=value.copper||0,this.m_nRank=value.rank||0,this.m_nMaxRank=value.maxrank||0,this.m_nTopNum=value.topnum||0,this.m_nGameRound=value.gameround||0,this.m_nDayScore=value.dayscore||0,this.m_nMaxDayScore=value.maxdayscore||0,this.m_ExtInfo=value.extinfo,this.m_nStatus=value.status||0,this.m_nGameTime=value.gametime||0,this.m_StartTime=value.starttime,this.m_EndTime=value.endtime,this.dispatchEvent("eve.DataChg",{}),lastscore&&this.m_nScore!=lastscore){var data={uid:this.m_nUID,lastrank:lastrank,currank:this.m_nRank,lastscore:lastscore,curscore:this.m_nScore};this.dispatchEvent("MasterScoreChg",data)}}}]),MatchScore}();exports.default=MatchScore},{"../gtea/BaseObj":126}],116:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_gtea2=_interopRequireDefault(require("../gtea/gtea")),_playerdata_mgr2=_interopRequireDefault(require("./playerdata_mgr")),_userdata2=_interopRequireDefault(require("./userdata")),_gamedata2=_interopRequireDefault(require("./gamedata")),_itembag2=_interopRequireDefault(require("./item/itembag")),_useremail2=_interopRequireDefault(require("./email/useremail")),_matchscore2=_interopRequireDefault(require("./matchscore")),_taskdata2=_interopRequireDefault(require("./task/taskdata")),_clubsys2=_interopRequireDefault(require("./club/clubsys")),_userredpacket2=_interopRequireDefault(require("./userredpacket"));_interopRequireDefault(require("../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PlayerData=function(_BaseObj){function PlayerData(uid){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PlayerData);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PlayerData.__proto__||Object.getPrototypeOf(PlayerData)).call(this));return _this.s_PlayerDataMgr=_playerdata_mgr2.default.getInstance(),_this.m_nUID=uid,_this.m_sKey="uid_"+uid,_this.m_szGameData={},_this.m_DataMap={},_this.m_szAllData={},_this._initSetTypeData(),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PlayerData,_BaseObj3.default),_createClass(PlayerData,[{key:"_initSetTypeData",value:function(){this.m_ValueFunc={UserData:function(v){return this.m_UserData||(this.m_UserData=new _userdata2.default),this.m_UserData.setData(v),this.m_nUID=this.m_UserData.m_nUID,this.m_UserData}.bind(this),GameData:function(v){for(var key in v){var gamedata=this.m_szGameData[key];gamedata||(gamedata=new _gamedata2.default(key),this.m_szGameData[key]=gamedata),gamedata.setData(v[key])}return this.m_szGameData}.bind(this),UserBag:function(v){return this.m_ItemBag||(this.m_ItemBag=new _itembag2.default),this.m_ItemBag.setData(v),this.m_ItemBag}.bind(this),Mails:function(v){return this.m_UserEmail||(this.m_UserEmail=new _useremail2.default(this.m_nUID)),this.m_UserEmail.setData(v),this.m_UserEmail.m_PlayerData=this,this.m_UserEmail}.bind(this),Gift:function(v){return this.m_GiftData=v,this.m_GiftData}.bind(this),VIP:function(v){return this.m_VIPData=v,this.m_VIPData}.bind(this),Bank:function(v){return this.m_UserBank=v,this.dispatchEvent("eve.UserBankChg"),this.m_UserBank}.bind(this),Honor:function(v){return this.m_HonorData=v,this.m_HonorData}.bind(this),DailyTask:function(v){return this.m_DaliyTask||(this.m_DaliyTask=new _taskdata2.default),this.m_DaliyTask.setData(v),this.m_DaliyTask}.bind(this),SpinTask:function(v){return this.m_SpinTask||(this.m_SpinTask=new _taskdata2.default),this.m_SpinTask.setData(v),this.m_SpinTask}.bind(this),WeekTask:function(v){return this.m_WeekTask||(this.m_WeekTask=new _taskdata2.default),this.m_WeekTask.setData(v),this.m_WeekTask}.bind(this),GrowUpTask:function(v){return this.m_GrowUpTask||(this.m_GrowUpTask=new _taskdata2.default),this.m_GrowUpTask.setData(v),this.m_GrowUpTask}.bind(this),HonorTask:function(v){return this.m_HonorTask||(this.m_HonorTask=new _taskdata2.default),this.m_HonorTask.setData(v),this.m_HonorTask}.bind(this),GameRoom:function(v){return this.m_szGameRoom=v,this.dispatchEvent("eve.GameRoomChg"),this.m_szGameRoom}.bind(this),MatchScore:function(v){return this.m_MatchScore||(this.m_MatchScore=new _matchscore2.default),this.m_MatchScore.setData(v),this.m_MatchScore}.bind(this),Invite:function(v){return this.m_Invite=v,this.m_Invite}.bind(this),Authentiation:function(v){return this.m_Authentiation=v,this.m_Authentiation}.bind(this),Club:function(v){if(this.m_ClubData=v,this.m_nUID==this.s_PlayerDataMgr.getMeUID()){for(var ids=[],clubsys=_clubsys2.default.getInstance(),i=0;i<v.length;i++){var d=v[i];ids[i]=d.clubid,clubsys.setClub(d)}clubsys.RefreshClub(ids)}return this.m_ClubData}.bind(this),DearPay:function(v){return this.m_DearPay=v,this.m_DearPay}.bind(this),UserCup:function(v){return this.m_UserCup=v,this.dispatchEvent("eve.UserCupChg"),this.m_UserCup}.bind(this),UserRedPacket:function(v){return this.m_UserRedPacket||(this.m_UserRedPacket=new _userredpacket2.default),this.m_UserRedPacket.setData(v),this.m_UserRedPacket}.bind(this),VIPExp:function(v){return this.m_VIPExpData=v,this.dispatchEvent("eve.VipExpChg"),this.m_VIPExpData}.bind(this),InviteTask:function(v){return this.m_InviteTask=v,this.m_InviteTask}.bind(this),GiftDaySign:function(v){return this.m_GiftDaySign=v,this.m_GiftDaySign}.bind(this),GiftDaySign2:function(v){return this.m_GiftDaySign2=v,this.m_GiftDaySign2}.bind(this),GiftDaySign3:function(v){return this.m_GiftDaySign3=v,this.m_GiftDaySign3}.bind(this)}}},{key:"setTypeData",value:function(name,value,br_chg,no_write){var func=this.m_ValueFunc[name];func&&(this.m_DataMap[name]=func(value),PlayerData.s_CacheType.indexOf(name)>-1&&(this.m_szAllData[name]=value)),no_write||this.s_PlayerDataMgr.WriteCache(this),br_chg&&this.dispatchEvent("eve.DataChg")}},{key:"getTypeData",value:function(name){return this.m_DataMap[name]}},{key:"addTypeEventListener",value:function(dtype,etype,obj,func){var udata=this.getTypeData(dtype);return udata?udata.addEventListener(etype,obj,func):null}},{key:"removeTypeEventListener",value:function(dtype,etype,obj,func){var udata=this.getTypeData(dtype);return udata?udata.removeEventListener(etype,obj):null}},{key:"getGiftData",value:function(name){return this.m_GiftData?this.m_GiftData[name]:null}},{key:"setData",value:function(v){for(var key in v)v.hasOwnProperty(key)&&this.setTypeData(key,v[key],!1,!0);0!==this.m_nUID&&this.s_PlayerDataMgr.setData(this),this.dispatchEvent("eve.DataChg")}},{key:"getData",value:function(){return this.m_szAllData}},{key:"MarkDirty",value:function(){this.s_PlayerDataMgr.WriteCache(this)}},{key:"LoadData",value:function(weeklist){this.m_bLoading||(this.m_bLoading=!0,_gtea2.default.rpc.Call("在线管理","QueData",[this.m_nUID,weeklist],this,this.onLoadDataOk,this.onLoadDataErr))}},{key:"onLoadDataOk",value:function(agv){this.m_bLoading=!1,this.setData(agv),this.dispatchEvent("eve.DataReady",this)}},{key:"onLoadDataErr",value:function(code,msg,opts){this.m_bLoading=!1,this.dispatchEvent("eve.DataFailed",[code,msg,opts])}},{key:"isReady",value:function(weeklist){if(!this.m_UserData)return!1;if(weeklist)for(var i=0;i<weeklist;i++)if(!this.getTypeData(weeklist[i]))return!1;return!0}},{key:"makeDefData",value:function(){}},{key:"getNick",value:function(){return this.m_UserData?this.m_UserData.m_sNick:""}},{key:"getGold",value:function(noAddFrozen){return this.m_ItemBag?noAddFrozen?this.m_ItemBag.m_nGold:this.m_ItemBag.m_nGold+this.m_ItemBag.m_nFrozenGold:0}},{key:"getGems",value:function(noAddFrozen){return this.m_ItemBag?noAddFrozen?this.m_ItemBag.m_nGold:this.m_ItemBag.m_nGems+this.m_ItemBag.m_nFrozenGems:0}},{key:"getVouchers1",value:function(){return this.m_ItemBag?this.m_ItemBag.m_nVouchers1:0}},{key:"getVouchers2",value:function(){return this.m_ItemBag?this.m_ItemBag.m_nVouchers2:0}},{key:"getVIPLv",value:function(){return this.m_VIPData?this.m_VIPData.getVIPLv():0}},{key:"getSex",value:function(){return this.m_UserData.m_nSex}},{key:"getHeadIdx",value:function(){return this.m_UserData.getKeyValue("headidx",0)}},{key:"getChannel",value:function(){return this.m_UserData.m_sChannel}},{key:"getPlatform",value:function(){return this.m_UserData.m_sPlatform}},{key:"getCTime",value:function(){return this.m_UserData.m_CTime}},{key:"getGameData",value:function(t){return this.m_szGameData[t]}},{key:"getUserData",value:function(){return this.m_UserData}},{key:"getBagData",value:function(){return this.m_ItemBag}},{key:"RefreshGems",value:function(){this.m_ItemBag.RefreshGems(this.m_nUID)}},{key:"RefreshBag",value:function(){this.m_ItemBag.RefreshBag(this.m_nUID)}},{key:"RefreshUserRedPacket",value:function(){this.m_UserRedPacket&&this.m_UserRedPacket.RefreshData(this.m_nUID)}},{key:"hasDearPay",value:function(){return!!this.m_DearPay&&this.m_DearPay.payuid>0}},{key:"GetMasterScore",value:function(){if(this.m_MatchScore)return this.m_MatchScore.m_nScore}}]),PlayerData}();exports.default=PlayerData,PlayerData.s_CacheType=["UserData","GameData","UserBag","GameRoom"]},{"../../app/gameconst":5,"../gtea/BaseObj":126,"../gtea/gtea":127,"./club/clubsys":105,"./email/useremail":107,"./gamedata":108,"./item/itembag":110,"./matchscore":115,"./playerdata_mgr":117,"./task/taskdata":118,"./userdata":120,"./userredpacket":121}],117:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_gtea2=_interopRequireDefault(require("../gtea/gtea")),_playerdata2=_interopRequireDefault(require("./playerdata")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_mainlink2=_interopRequireDefault(require("../net/mainlink")),_UNameCheck2=_interopRequireDefault(require("../utils/UNameCheck")),_comfunc2=_interopRequireDefault(require("../utils/comfunc")),_pako2=_interopRequireDefault(require("../utils/pako.min"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PlayerDataMgr=function(_BaseObj){function PlayerDataMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PlayerDataMgr);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(PlayerDataMgr.__proto__||Object.getPrototypeOf(PlayerDataMgr)).call(this));return _this.m_DataCookieVer=1,_this.m_szNetCallback=[],_this.m_szDataMap={},_this.m_szLoadingMap={},_this.m_szCallBackID=[],_this.m_bCacheInMode=null,_this.m_Me=null,_this.m_Token="",_this.m_SiteAgv="",_this.m_szDataList=["UserBag","GameData"],_this.m_szODataList=[],_this.m_szDataCache={},_this.m_szPrepareModule={},_this.LocalStorage=Laya.LocalStorage,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(PlayerDataMgr,_BaseObj3.default),_createClass(PlayerDataMgr,null,[{key:"getInstance",value:function(){return PlayerDataMgr.instance||(PlayerDataMgr.instance=new PlayerDataMgr),PlayerDataMgr.instance}}]),_createClass(PlayerDataMgr,[{key:"dataSet",value:function(uid,data){this.setLocalPlayerData(uid,data)}},{key:"dataGet",value:function(uid){var data=this.getLocalPlayerData();return data[uid]?data[uid]:{}}},{key:"dataRmv",value:function(uid){var data=this.getLocalPlayerData();data[uid]&&(delete data[uid],this.LocalStorage.setJSON("playerdata",data))}},{key:"getLocalPlayerData",value:function(){var data=this.LocalStorage.getJSON("playerdata");return data||(this.LocalStorage.setJSON("playerdata",{}),data={}),data}},{key:"setLocalPlayerData",value:function(uid,playerdata){var data=this.getLocalPlayerData();data[uid.toString()]=playerdata,this.LocalStorage.setJSON("playerdata",data)}},{key:"PrepareCfgPath",value:function(uid){this.m_sConfigPath="userconfig_"+uid,this.initUserSetData()}},{key:"findDataCache",value:function(uid){var key="uid_"+uid;return this.m_szDataCache[key]}},{key:"getDataCache",value:function(uid){var key="uid_"+uid,data=this.m_szDataCache[key];if(!data){var _data=this.dataGet(uid);_data&&(data=_data.data,this.m_szDataCache[key]=data)}return data}},{key:"findData",value:function(uid){var key="uid_"+uid,pdata=this.m_szDataMap[key];if(_comfunc2.default.ObjIsValid(pdata))return pdata;delete this.m_szDataMap[key]}},{key:"setData",value:function(data){var key=data.m_sKey;this.m_szDataMap[key]=data}},{key:"getData",value:function(uid,no_create){var pdata=this.findData(uid);if(!pdata){var cachedata=this.getDataCache(uid);cachedata?(pdata=new _playerdata2.default(uid)).setData(cachedata):no_create||(pdata=new _playerdata2.default(uid))}return pdata}},{key:"loadData",value:function(uid,weeklist,forceLoad){var data=this.getData(uid,!0);if(weeklist)for(var dlist=this.m_szODataList,i=0;i<dlist.length;i++)weeklist.inclueds(dlist[i])&&(weeklist[weeklist.length]=dlist[i]);else weeklist=this.m_szODataList;if(data&&!forceLoad&&data.isReady(weeklist))return data;var key="uid_"+uid.toString();return(data=this.m_szLoadingMap[key])?data:((data=new _playerdata2.default(uid)).LoadData(weeklist),this.m_szLoadingMap[key]=data,data)}},{key:"WriteCache",value:function(pdata){var data={ver:this.m_DataCookieVer,data:pdata.getData()};this.dataSet(pdata.m_nUID,data)}},{key:"toData",value:function(value){if(value.UserData){var uid=value.UserData.uid,pdata=this.getData(uid);return pdata.setData(value),pdata}return null}},{key:"GetReadyListData",value:function(list,datalist,okfunc,errfunc,isrefresh){var ulist=[],temp={};if(okfunc=okfunc||function(){},errfunc=errfunc||function(){},list&&0!=list.length){if(datalist=datalist||{},isrefresh)ulist=list;else for(var key in list){var uid=list[key];if(temp[String(uid)]);else{var pdata=this.getData(uid);if(pdata.getTypeData("UserData"))for(var i in datalist){var data=pdata.getTypeData(datalist[i]);(!data||"object"==(void 0===data?"undefined":_typeof(data))&&Object.keys(data).length>0)&&(ulist.push(uid),temp[uid.toString()]=1)}else ulist[ulist.length]=uid,temp[String(uid)]=1}}ulist&&ulist.length>0?_gtea2.default.rpc.Call("在线管理","LoadDataBatch",[ulist,datalist],this,function(agv){for(var _key in agv[0]){var _pdata=agv[0][_key],_uid=parseInt(_key);this.getData(_uid).setData(_pdata)}okfunc()},function(code,msg,opt){errfunc()}):okfunc()}}},{key:"setMe",value:function(data){this.m_Me=data,this.m_SiteAgv&&this.m_SiteAgv.extinfo&&(this.m_SiteAgv.extinfo.regurl&&(_gameconst2.default.GAMEPATH=this.m_SiteAgv.extinfo.regurl),this.m_SiteAgv.extinfo.game&&(_gameconst2.default.LobbyMode=this.m_SiteAgv.extinfo.game),this.m_SiteAgv.extinfo.goldproportion&&(_gameconst2.default.GOLDRATIO=this.m_SiteAgv.extinfo.goldproportion),this.m_SiteAgv.extinfo.rtnurl&&(_gameconst2.default.ReturnUrl=this.m_SiteAgv.extinfo.rtnurl))}},{key:"getMe",value:function(){return this.m_Me?this.m_Me:{}}},{key:"getMeUID",value:function(){return this.m_Me?this.m_Me.m_nUID:0}},{key:"getMeToken",value:function(){return this.m_Token}},{key:"getMeNick",value:function(){return this.m_Me.getNick()}},{key:"getMeGold",value:function(noAddFrozen){return this.m_Me.getGold(noAddFrozen)}},{key:"getMeGems",value:function(noAddFrozen){return this.m_Me.getGems(noAddFrozen)}},{key:"getMeVouchers1",value:function(){return this.m_Me.getVouchers1()}},{key:"getMeVouchers2",value:function(){return this.m_Me.getVouchers2()}},{key:"getMeVIPLv",value:function(){return this.m_Me.getVIPLv()}},{key:"getMeCTime",value:function(){return this.m_Me.getCTime()}},{key:"getMeSiteAgv",value:function(){return this.m_SiteAgv}},{key:"AddPrepareModule",value:function(name,classname,block){this.m_szPrepareModule[name]={classname:classname,block:block}}},{key:"InitPrepareInGame",value:function(){var uid=this.getMeUID(),mlist=this.m_szPrepareModule;for(var name in mlist){var minfo=mlist[name];if(minfo.obj)minfo.obj.Load(uid);else{var mclass=Laya.ClassUtils.getClass(minfo.classname);if(mclass){var m=mclass.getInstance();mlist[name].obj=m,m.Load(uid)}}}}},{key:"getLocalData",value:function(key){var data_str=this.LocalStorage.getItem(key);if(null==data_str||0==data_str.length)return null;var bytes=_gtea2.default.bincoder.base64.decode(data_str);bytes.position=0;try{var unzippedData=_pako2.default.inflate(bytes.getBuffer());(bytes=new _gtea2.default.CByteArray).writeArrayBuffer(unzippedData.buffer),bytes.position=0}catch(e){return null}return bytes.readValue()}},{key:"loadMeData",value:function(okfun,errfun,cache_in){var defdata=[["sex",Math.floor(2*Math.random()+1)],["headidx",Math.floor(45*Math.random()+1)]],param=[this.m_Token,this.m_szDataList,defdata,!1];function onLoadDataOk(response){var data={token:this.m_Token,data:response,siteAgv:this.m_SiteAgv},bytes=new _gtea2.default.CByteArray;bytes.writeValue(data),bytes.position=0;var zippedData=_pako2.default.deflate(bytes.getBuffer());(bytes=new _gtea2.default.CByteArray).writeArrayBuffer(zippedData.buffer),bytes.position=0,Laya.LocalStorage.setItem("accdata",_gtea2.default.bincoder.base64.encode(bytes)),this.m_Me.setData(response),okfun()}function onLoadDataErr(code,msg,opts){errfun()}cache_in?_gtea2.default.rpc.Call("在线管理","CacheUsrIn",[this.m_Token,this.m_szDataList,!1],this,onLoadDataOk,onLoadDataErr):_gtea2.default.rpc.Call("在线管理","UsrIn",param,this,onLoadDataOk,onLoadDataErr)}},{key:"loginOK",value:function(agv,accinfo,backfun){var uid=agv.uid;accinfo.uid=uid,accinfo.utime=new Date,accinfo.platform_id=agv.siteAgv.platform_id,this.m_sPlatform=accinfo.mode,this.m_sPlatformID=accinfo.platform_id,this.setLastLoginUsr(accinfo);var data=this.getData(uid);this.m_Token=agv.token,this.m_SiteAgv=agv.siteAgv,this.setMe(data),this.PrepareCfgPath(uid),this.loadMeData(function(){this.InitPrepareInGame(),this.chkPrepareDataReady(backfun),console.log("usrin ok")}.bind(this),function(){console.log("usrin err")}.bind(this))}},{key:"SwichtGameLogin",value:function(key,obj,okfun,errfun){_gameconst2.default.SwichtLogin=!0,_gtea2.default.rpc.Call("游戏切换网关","Login",[key,this.m_szDataList],this,function(response){var uid=response.uid,token=response.token,gdata=response.gdata;this.m_nUID=uid,this.m_Token=token,this.m_SiteAgv=response.data,this.m_SiteAgv=gdata._accData.siteAgv;var data=this.getData(uid);data.setData(gdata),this.setMe(data),this.PrepareCfgPath(uid),okfun.call(obj,response),this.InitPrepareInGame(),this.chkPrepareDataReady()},function(code,msg,opts){errfun.call(obj,code,msg)})}},{key:"SwichtGame",value:function(game){_gtea2.default.rpc.Call("游戏切换网关","OpenGame",{uid:this.m_nUID,token:this.m_Token,game:game},this,onOpenOk,onOpenErr)}},{key:"CacheLogin",value:function(uid,token){uid=parseInt(uid);var data=this.getData(uid);this.m_Token=token,this.setMe(data),this.PrepareCfgPath(uid),this.loadMeData(function(){this.InitPrepareInGame(),this.chkPrepareDataReady(),console.log("cachein ok")}.bind(this),function(){console.log("cachein err")}.bind(this),!0)}},{key:"chkPrepareDataReady",value:function(backfun){var mlist=this.m_szPrepareModule;for(var name in mlist){var minfo=mlist[name];if(minfo.block){if(!minfo.obj)return void this.timerCall(100,this.chkPrepareDataReady,[backfun]);if(!minfo.obj.isReady())return void this.timerCall(100,this.chkPrepareDataReady,[backfun])}}this.InGame(backfun)}},{key:"Logout",value:function(){this.resetLastLoginUsr(),this.m_Me&&(_gtea2.default.rpc.Send("在线管理","LogOut",[this.getMeToken()]),this.m_Me.DelThis(),this.m_Me=null),this.m_szNetCallback=[],this.UnRegCallBack()}},{key:"getLastLoginUsr",value:function(){return Laya.LocalStorage.getJSON("lastacc")||{}}},{key:"setLastLoginUsr",value:function(usr){usr=_comfunc2.default.date2String(usr),Laya.LocalStorage.setJSON("lastacc",usr)}},{key:"resetLastLoginUsr",value:function(){var usr=this.getLastLoginUsr();usr.uid=0,usr.guest_id=null,usr.pwd=null,"std"!=usr.mode&&(usr.platform_id=null,usr.uname=null,usr.mode=null),this.setLastLoginUsr(usr)}},{key:"UseCacheInGame",value:function(backfun){var lastusr=this.getLastLoginUsr(),uid=lastusr.uid;if(!uid||0==uid)return!1;this.PrepareCfgPath(uid);var accdata=this.getLocalData("accdata");if(!accdata||!accdata.token)return!1;var pdata=this.getData(uid);function onLoad(){this.LoadMeData(function(){console.log("缓存进入成功"),backfun&&backfun()}.bind(this),function(errflag,errmsg,opt){0==errflag?(this.resetLastLoginUsr(),_BaseObj3.default.EventToRegObj("MainApp","OnTokenInvalid",[])):this.timerCall(3e3,onLoad.bind(this))}.bind(this),!0)}return this.m_Token=accdata.token,this.m_SiteAgv=accdata.siteAgv,this.m_sPlatform=lastusr.mode,pdata.setData(accdata.data),this.setMe(pdata),this.InitPrepareInGame(),onLoad.bind(this),this.chkPrepareDataReady(),!0}},{key:"ChkCacheToken",value:function(){function onLoad(){this.LoadMeData(function(resp){console.log("缓存进入成功")}.bind(this),function(code,msg,opt){code<=-1?this.timerCall(3e3,onLoad):(this.resetLastLoginUsr(),_BaseObj3.default.EventToRegObj("MainApp","OnTokenInvalid",[]))}.bind(this),!0)}onLoad()}},{key:"ChkCacheTokenEx",value:function(backfun){_gtea2.default.rpc.Call("在线管理","ChkTokenExpire",[this.m_Token],this,function(resp){backfun(!0)},function(code,errmsg,opt){backfun(0!=code)})}},{key:"OnUserAct",value:function(){_gtea2.default.rpc.Send("在线管理","Act",[this.m_Token])}},{key:"OffLineMode",value:function(uid){this.m_Token=null;var medata=null;0==uid?(medata=new _playerdata2.default(0)).makeDefData():medata=this.getData(uid),this.setMe(medata),_BaseObj3.default.EventToRegObj("MainApp","OnInHall",[])}},{key:"isOfflineMode",value:function(){return!this.m_Token}},{key:"netOnOnineDataChg",value:function(agv){this.m_Me.setTypeData(agv[0],agv[1],!0)}},{key:"InGame",value:function(backfun){this.timerCall(3e4,this.OnUserAct),this.loopCall(-1,18e4,this.OnUserAct),this.RegCallBack(),this.m_MainLink=_mainlink2.default.getInstance(),this.m_MainLink.addEventListener("eve.OnConnectOk",this,this.OnConnectOk),this.m_MainLink.addEventListener("eve.OnConnectBreak",this,this.OnConnectBreak),this.m_MainLink.addEventListener("eve.OnConnectFailed",this,this.OnConnectFailed),this.m_MainLink.m_bInGame=!0,_BaseObj3.default.EventToRegObj("MainApp","OnInHall",[]),backfun&&backfun()}},{key:"OnConnectBreak",value:function(){_BaseObj3.default.EventToRegObj("MainApp","OnConnectBreak",[])}},{key:"OnConnectFailed",value:function(){}},{key:"OnConnectOk",value:function(){function onChkRet(ok){ok?(this.RegCallBack(),this.InitPrepareInGame(),_BaseObj3.default.EventToRegObj("MainApp","OnConnectOk",[])):(this.resetLastLoginUsr(),_BaseObj3.default.EventToRegObj("MainApp","OnTokenInvalid",[]))}this.m_Token?this.ChkCacheTokenEx.call(this,onChkRet.bind(this)):onChkRet(!0)}},{key:"UnRegCallBack",value:function(){null!=this.m_CallBackID1&&(_gtea2.default.rpc.UnRegCallBack(this.m_CallBackID1),this.m_CallBackID1=void 0),null!=this.m_CallBackID2&&(_gtea2.default.rpc.UnRegCallBack(this.m_CallBackID2),this.m_CallBackID2=void 0)}},{key:"OnSvrCallBack",value:function(eveid,agv){if(558285717==eveid)this.netOnOnineDataChg(agv);else for(var i=0;i<this.m_szNetCallback.length;i++){var data=this.m_szNetCallback[i];data[0]==eveid&&data[4].call(data[3],agv)}}},{key:"RegCallBack",value:function(){this.UnRegCallBack(),this.m_Token&&(this.m_CallBackID1=_gtea2.default.rpc.RegCallBack("在线管理","SetCltCallBack",[this.m_Token],this,this.OnSvrCallBack));var uid=this.getMeUID();uid&&(this.m_CallBackID2=_gtea2.default.rpc.RegCallBack("消息广播","SetCltCallBack",[uid],this,this.OnSvrCallBack))}},{key:"RegSvrCallBack",value:function(group,obj){var _this2=this;Object.getOwnPropertyNames(Object.getPrototypeOf(obj)).forEach(function(key){var func=obj[key];if("function"==typeof func&&"net"===key.slice(0,3)){var evename=key.slice(3);_this2.m_szNetCallback.push([_gtea2.default.str2key(evename),group,evename,obj,func])}})}},{key:"UnRegSvrCallBack",value:function(group,obj){for(var _this3=this,szdel=[],i=0;i<this.m_szNetCallback.length;i++){var agv=this.m_szNetCallback[i];agv[1]===group&&agv[3]===obj&&szdel.push(i)}szdel.forEach(function(idx){_this3.m_szNetCallback.splice(idx,1)})}},{key:"PopChargeGems",value:function(chargeamt){var price=chargeamt.price;price||(price=100);var itemID=chargeamt.itemID,productID=chargeamt.productID;productID||(productID="item1");var productName=chargeamt.productName;productName||(productName="钻石");var chargeAgv={itemID:itemID,productID:productID,price:price,uid:this.m_Me.m_nUID,productName:productName,siteAgv:this.m_SiteAgv};console.log(chargeAgv)}},{key:"RefGems",value:function(){_gtea2.default.rpc.Send("在线管理","RefGems",[this.m_Me.m_nUID])}},{key:"initUserSetData",value:function(){this.m_UserSetAccData||(this.m_UserSetAccData=Laya.LocalStorage.getJSON(this.m_sConfigPath)||{music:!0,sound:!0,shake:!0,NextTimesShowLogin:!1})}},{key:"writeUserSetData",value:function(){this.m_UserSetAccData&&Laya.LocalStorage.setJSON(this.m_sConfigPath,this.m_UserSetAccData)}},{key:"getUserSetDataByKey",value:function(key,_default){var ret=void 0;return this.m_UserSetAccData&&(ret=this.m_UserSetAccData[key]),null!=ret&&null!=ret||(ret=_default),ret}},{key:"setUserSetDataByKey",value:function(key,value){if(key){this.m_UserSetAccData[key]=value;var eventname="eve.SetDataChg_"+key;this.dispatchEvent(eventname)}}},{key:"LoadInvite",value:function(){return!(this.m_Me.m_Invite&&this.m_Me.m_Invite.invite.length>0)&&(_gtea2.default.rpc.Call("人员邀请","LoadData",{uid:this.getMeUID(),auto:!0},this,function(resp){this.m_Me.m_Invite=resp[0],this.dispatchEvent("eve.OnInviteChg")},function(code,errmsg,opt){console.error(errmsg)}),!0)}},{key:"OnResume",value:function(){this.m_MainLink.isConnected()&&(this.RegCallBack(),this.InitPrepareInGame())}},{key:"LoadLoginActivityData",value:function(){_gtea2.default.rpc.Call("登录活动","LoadData",{uid:this.getMeUID()},this,function(resp){this.m_Me.m_LoginActivity=resp[0],this.dispatchEvent("eve.LoginActivityDataChg")},function(code,errmsg,opt){})}},{key:"LoginActivityHasReward",value:function(actid){if(!this.m_Me.m_LoginActivity)return!1;var actdata=this.m_Me.m_LoginActivity.data[String(actid)];if(!actdata)return!1;for(var i=0;i<actdata.szday.length;i++){if(1==actdata.szday[i].reward)return!0}return!1}},{key:"getPhoneCode",value:function(phone,code_type,obj,okfunc,errfunc,chkuid,bind,platform,isPop){if(_comfunc2.default.isNil(platform)){var usr=this.getLastLoginUsr();usr&&(platform=usr.platform,_comfunc2.default.isNil(platform)&&(platform=usr.mode))}if(_comfunc2.default.isNil(platform)&&(platform="phone"),_UNameCheck2.default.isMobilePhoneNum(phone)){var qagv={phone:phone,code_type:code_type,platform:platform,code_pop:Boolean(isPop),chkuid:chkuid};_gtea2.default.rpc.Call("在线管理","GetPhoneCode",qagv,this,function(agv){okfunc&&okfunc.bind(obj)(agv)},function(errflag,errmsg,agv){errfunc&&errfunc.bind(obj)(2,errmsg,bind)})}else errfunc&&errfunc.bind(obj)(1,"错误的手机号",bind)}}]),PlayerDataMgr}();exports.default=PlayerDataMgr},{"../../app/gameconst":5,"../gtea/BaseObj":126,"../gtea/gtea":127,"../net/mainlink":137,"../utils/UNameCheck":143,"../utils/comfunc":144,"../utils/pako.min":146,"./playerdata":116}],118:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../gtea/BaseObj")),_taskitem2=_interopRequireDefault(require("./taskitem"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TaskData=function(_BaseObj){function TaskData(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TaskData);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(TaskData.__proto__||Object.getPrototypeOf(TaskData)).call(this));return _this.m_szTaskItem=[],_this.m_szReached=[],_this.m_LastTime=null,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(TaskData,_BaseObj3.default),_createClass(TaskData,[{key:"OnDelThis",value:function(){for(var i=0;i<this.m_szTaskItem.length;i++){this.m_szTaskItem[i].OnDelThis()}this.m_szTaskItem=[],this.m_szReached=[]}},{key:"setData",value:function(data){var cur=data[0];this.m_szReached=data[1],this.m_LastTime=data[2];for(var i=0;i<this.m_szTaskItem.length;i++){this.m_szTaskItem[i].m_bMarked=!1}for(var _i=0;_i<cur.length;_i++){var node=cur[_i],taskid=node[0],condition=node[1],hnode=this.FindTask(taskid);hnode||(hnode=new _taskitem2.default(taskid),this.m_szTaskItem.push(hnode)),hnode.setData(taskid,condition),hnode.m_bMarked=!0}for(var nlist=[],_i2=0;_i2<this.m_szTaskItem.length;_i2++){var _h=this.m_szTaskItem[_i2];_h.m_bMarked?(_h.m_bMarked=!1,nlist.push(_h)):_h.DelThis()}this.m_szTaskItem=nlist,this.dispatchEvent("eve.DataChg")}},{key:"FindTask",value:function(taskid){for(var i=0;i<this.m_szTaskItem.length;i++){var node=this.m_szTaskItem[i];if(node.m_nTaskID==taskid)return node}return null}},{key:"FindReachTask",value:function(taskid){for(var i=0;i<this.m_szReached.length;i++){var node=this.m_szReached[i];if(node[0]==taskid)return node}return null}},{key:"IsReach",value:function(taskid){return null!=this.FindReachTask(taskid)}},{key:"HasReachReward",value:function(except){for(var i=0;i<this.m_szReached.length;i++){var node=this.m_szReached[i];if(node[0]!=except&&0==node[2])return!0}return!1}}]),TaskData}();exports.default=TaskData},{"../../gtea/BaseObj":126,"./taskitem":119}],119:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../../gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var TaskItem=function(_BaseObj){function TaskItem(taskID){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TaskItem);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(TaskItem.__proto__||Object.getPrototypeOf(TaskItem)).call(this));return _this.m_nTaskID=taskID,_this.m_bMarked=!1,_this.m_szCondition=[],_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(TaskItem,_BaseObj3.default),_createClass(TaskItem,[{key:"OnDelThis",value:function(){this.m_nTaskID=0,this.m_bMarked=!1,this.m_szCondition=[],function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0}(TaskItem.prototype.__proto__||Object.getPrototypeOf(TaskItem.prototype),"OnDelThis",this).call(this)}},{key:"setData",value:function(taskid,condition){this.m_nTaskID=taskid,this.m_szCondition=[];for(var i=0;i<condition.length;i++){var node=condition[i];this.m_szCondition.push([node[0],node[1],node[2]])}}},{key:"RefreshCondition",value:function(condition){for(var i=0;i<condition.length;i++){var node=condition[i],targetid=node[0],neednum=node[1];this.ChgCondition(targetid,neednum)||this.m_szCondition.push([targetid,neednum,0])}}},{key:"ChgCondition",value:function(targetid,neednum){for(var i=0;i<this.m_szCondition.length;i++){var node=this.m_szCondition[i];if(node[0]==targetid)return node[1]=neednum,!0}return!1}},{key:"ChgTarget",value:function(targetid,num){for(var i=0;i<this.m_szCondition.length;i++){var node=this.m_szCondition[i];if(node[0]==targetid)return!(node[2]>=node[1])&&(node[2]=node[2]+num,node[2]=math.max(node[2],0),node[2]=math.min(node[1],node[2]),!0)}return!1}},{key:"SetTarget",value:function(targetid,num){for(var i=0;i<this.m_szCondition.length;i++){var node=this.m_szCondition[i];if(node[0]==targetid)return node[2]!=node[1]&&(!(node[2]>=num)&&(node[2]=num,node[2]=math.max(node[2],0),node[2]=math.min(node[1],node[2]),!0))}return!1}},{key:"ResetTarget",value:function(){for(var i=0;i<this.m_szCondition.length;i++)this.m_szCondition[i][2]=0;return!1}},{key:"CanReach",value:function(){for(var i=0;i<this.m_szCondition.length;i++){var node=this.m_szCondition[i];if(node[3]-node[2]<0)return!1}return!0}},{key:"getData",value:function(){return[this.m_nTaskID,this.m_szCondition]}}]),TaskItem}();exports.default=TaskItem},{"../../gtea/BaseObj":126}],120:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var UserData=function(_BaseObj){function UserData(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UserData),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(UserData.__proto__||Object.getPrototypeOf(UserData)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(UserData,_BaseObj3.default),_createClass(UserData,[{key:"getData",value:function(){return this.m_vData}},{key:"setData",value:function(value){this.m_nUID=value.uid,this.m_sNick=value.nick,this.m_nSex=value.sex,this.m_sChannel=value.channel,this.m_sPlatform=value.platform,this.m_sHeadUrl=value.headurl,this.m_HeadFrame=value.headframe,value.ctime&&(this.m_CTime=new Date(value.ctime).getTime()),this.m_vCharm=value.charm,this.m_nSex&&0!=this.m_nSex||(this.m_nSex=1),this.m_vData=value,this.dispatchEvent("eve.DataChg",{})}},{key:"getKeyValue",value:function(key,def){return this.m_vData&&this.m_vData[key]||def}},{key:"SetHeadFrame",value:function(data){this.m_HeadFrame=data,this.m_vData.headframe=data,this.dispatchEvent("eve.DataChg",{})}},{key:"getHeadFrameData",value:function(itemid){return this.m_HeadFrame?this.m_HeadFrame[String(itemid)]:null}},{key:"getUsedHeadFrameData",value:function(){if(!this.m_HeadFrame)return null;var nowtime=new Date;for(var key in this.m_HeadFrame){var data=this.m_HeadFrame[key];if(data.used&&nowtime.getTime()<new Date(data.time).getTime())return data}return null}}]),UserData}();exports.default=UserData},{"../gtea/BaseObj":126}],121:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_gtea2=_interopRequireDefault(require("../gtea/gtea"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UserRedPacket=function(_BaseObj){function UserRedPacket(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UserRedPacket),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(UserRedPacket.__proto__||Object.getPrototypeOf(UserRedPacket)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(UserRedPacket,_BaseObj3.default),_createClass(UserRedPacket,[{key:"setData",value:function(value){this.m_szData=value,this.dispatchEvent("eve.DataChg")}},{key:"getData",value:function(){return this.m_szData}},{key:"GetGameRoundData",value:function(kindid){var data=this.m_szData["gameround_"+kindid];return data?(data.turnnum||(data.turnnum=0),data.total||(data.total=0),data):{num:0,turnnum:0,total:0,utime:new Date}}},{key:"GetRedPacketData",value:function(){var data=this.m_szData.redpacket;return data||{num:0,total:0,utime:new Date}}},{key:"RefreshData",value:function(uid){_gtea2.default.rpc.Call("人员红包数据","LoadData",{uid:uid},this,function(agv){this.setData(agv[0])}.bind(this),function(errflag,errmsg,opt){})}}]),UserRedPacket}();exports.default=UserRedPacket},{"../gtea/BaseObj":126,"../gtea/gtea":127}],122:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_gamemodelmgr2=_interopRequireDefault(require("./gamemodelmgr")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_UIMgr2=_interopRequireDefault(require("../ui/UIMgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameModel=function(_BaseObj){function GameModel(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameModel),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameModel.__proto__||Object.getPrototypeOf(GameModel)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameModel,_BaseObj3.default),_createClass(GameModel,[{key:"InGame",value:function(modeldata){this.ClearBG(),this.m_GameRoomClass&&(this.m_GameRoom&&this.m_GameRoom.DelThis(),this.m_GameRoom=new this.m_GameRoomClass),_gameconst2.default.MODELNAME=modeldata.name,_gamemodelmgr2.default.getInstance().LoadGameModelOk()}},{key:"OnClose",value:function(){this.m_GameRoom&&this.m_GameRoom.DelThis(),this.m_GameRoom=null,this.m_GameRoomClass=null,this.ClearBG(),_gameconst2.default.MODELNAME=""}},{key:"ClearGame",value:function(rejoin){_UIMgr2.default.getInstance().CloseAllUI(),this.m_GameRoom.ExitRoom(rejoin)}},{key:"ClearBG",value:function(){this.m_Bg&&(this.m_Bg.destroy(),this.m_Bg=null)}},{key:"ExitGame",value:function(agv){this.ClearGame(agv[0]),_UIMgr2.default.getInstance().OpenUI("大厅界面",agv[0])}},{key:"InJoyGame",value:function(agv){this.m_GameRoom&&this.m_GameRoom.InJoyGame(agv)}},{key:"InFreeGame",value:function(agv){this.m_GameRoom&&this.m_GameRoom.InFreeRoom(agv)}},{key:"InDiyGame",value:function(agv){this.m_GameRoom&&this.m_GameRoom.InDiyRoom(agv[0])}},{key:"InSNGGame",value:function(agv){this.m_GameRoom&&this.m_GameRoom.InSNGRoom(agv)}},{key:"InFNGGame",value:function(agv){this.m_GameRoom&&this.m_GameRoom.InFNGRoom(agv)}},{key:"InMTTGame",value:function(agv){this.m_GameRoom&&this.m_GameRoom.InMTTRoom(agv)}},{key:"InRoomOk",value:function(agv){this.m_GameRoom&&this.m_GameRoom.InRoomOk(agv)}},{key:"OnInDesk",value:function(agv){_gameconst2.default.AUTOOPEN=[],this.m_GameRoom&&this.m_GameRoom.JoinDesk(agv)}},{key:"OnStartMatchRound",value:function(agv){this.m_GameRoom&&this.m_GameRoom.StartMatchRound(agv)}},{key:"OnRankChg",value:function(agv){this.m_GameRoom&&this.m_GameRoom.MatchRankChg(agv)}},{key:"OnWaitPairOther",value:function(agv){this.m_GameRoom&&this.m_GameRoom.InMatchWaitIn({mode:1,mobj:agv[0],wait:agv[1],need:agv[2]})}},{key:"OnMatchWaitRoundEnd",value:function(agv){this.m_GameRoom&&this.m_GameRoom.MatchWaitRoundEnd(agv)}},{key:"OnMatchIncDeathLine",value:function(agv){this.m_GameRoom&&this.m_GameRoom.MatchIncDeathLine(agv)}},{key:"OnMatchDieOut",value:function(agv){this.m_GameRoom&&this.m_GameRoom.MatchDieOut(agv)}},{key:"OnMatchSafeInNext",value:function(agv){this.m_GameRoom&&this.m_GameRoom.MatchSafeInNext(agv)}},{key:"OnMatchDieOutNumEnough",value:function(agv){this.m_GameRoom&&this.m_GameRoom.MatchDieOutNumEnough(agv)}},{key:"OnMatchEnd",value:function(agv){this.m_GameRoom&&this.m_GameRoom.MatchEnd(agv)}},{key:"OnSetCurMatchStatusInfo",value:function(agv){this.m_GameRoom&&this.m_GameRoom.SetCurMatchStatusInfo(agv)}},{key:"CallSvr",value:function(agv){this.m_GameRoom&&this.m_GameRoom.m_GameDesk&&this.m_GameRoom.m_GameDesk.CallSvr(agv)}},{key:"DissDesk",value:function(){this.m_GameRoom&&this.m_GameRoom.m_GameDesk&&this.m_GameRoom.m_GameDesk.DissDesk()}},{key:"ReJoin",value:function(agv){this.m_GameRoom&&this.m_GameRoom.m_GameDesk&&this.m_GameRoom.ReJoin(agv[0])}},{key:"SwapDesk",value:function(agv){this.m_GameRoom&&this.m_GameRoom.SwapDesk()}},{key:"OnConnectBreak",value:function(agv){this.m_GameRoom.m_GameDesk||_UIMgr2.default.getInstance().UIEvent("等待界面","OnSetWaitText",["网络连接中断,正在重新连接...",36e5],!0,!0),_UIMgr2.default.getInstance().CloseUI("加入房间"),this.StartChkTimer()}},{key:"OnConnectOk",value:function(agv){this.StopChkTimer(),this.m_GameRoom.ReJoin()||_UIMgr2.default.getInstance().UIEvent("大厅界面","RefreshCurGame")}},{key:"OnPause",value:function(){this.m_GameRoom&&this.m_GameRoom.AppPause()}},{key:"StartChkTimer",value:function(){this.StopChkTimer(),this.m_ChkTimer=this.timerCall(3e4,this.BreakLine)}},{key:"StopChkTimer",value:function(){this.killTimer(this.m_ChkTimer),this.m_ChkTimer=null}},{key:"BreakLine",value:function(){this.StopChkTimer(),_UIMgr2.default.getInstance().OpenUI("无网络提示")}},{key:"OnInPlayBack",value:function(agv){this.m_GameRoom&&this.m_GameRoom.InPlayBack(agv)}}]),GameModel}();exports.default=GameModel},{"../../app/gameconst":5,"../gtea/BaseObj":126,"../ui/UIMgr":142,"./gamemodelmgr":123}],123:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_FlyText2=_interopRequireDefault(require("../../appbase/com/FlyText")),_LoadingUI2=_interopRequireDefault(require("../../appbase/login/LoadingUI")),_respathlist2=_interopRequireDefault(require("../../app/respathlist")),_comfunc2=_interopRequireDefault(require("../utils/comfunc")),_UIMgr2=_interopRequireDefault(require("../ui/UIMgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameModelMgr=function(_BaseObj){function GameModelMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameModelMgr);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameModelMgr.__proto__||Object.getPrototypeOf(GameModelMgr)).call(this));return _this.szModelList={},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameModelMgr,_BaseObj3.default),_createClass(GameModelMgr,null,[{key:"getInstance",value:function(){return GameModelMgr.instance||(GameModelMgr.instance=new GameModelMgr),GameModelMgr.instance}}]),_createClass(GameModelMgr,[{key:"LoadGameModel",value:function(agv){var modeldata=null;if(modeldata=1==agv.type?_gameconst2.default.GetGameModel(agv.value):_gameconst2.default.GetGameModelByGtype(agv.value))if(this.backfun=agv.backfun,_gameconst2.default.MODELNAME!=modeldata.name){_gameconst2.default.MODELNAME&&_gameconst2.default.MODELNAME.length>0&&this.CloseModel(_gameconst2.default.MODELNAME);var gamemodel=this.szModelList[modeldata.name];gamemodel?gamemodel.InGame(modeldata):_LoadingUI2.default.getInstance().Loading({reslist:_comfunc2.default.clone(_respathlist2.default.ResList[modeldata.res]),backfun:Laya.Handler.create(this,function(modeldata){var modelclass=Laya.ClassUtils.getClass(modeldata.modelclass);modelclass?(gamemodel=new modelclass,this.szModelList[modeldata.name]=gamemodel,gamemodel.InGame(modeldata)):_FlyText2.default.AddFlyText("游戏模块不存在!")},[modeldata]),autoclose:!0,msg:"正在加载游戏资源..."})}else this.LoadGameModelOk();else _FlyText2.default.AddFlyText("游戏模块错误!")}},{key:"CloseModel",value:function(name){var gamemodel=this.szModelList[name];gamemodel&&gamemodel.OnClose()}},{key:"LoadGameModelOk",value:function(){_UIMgr2.default.getInstance().CloseUI("等待界面"),this.backfun.method.apply(this.backfun.caller,this.backfun.args)}},{key:"Event",value:function(name,evename,agv){var gamemodel=this.szModelList[name];gamemodel&&gamemodel.hasOwnProperty(evename)&&gamemodel[evename](agv)}},{key:"ExitGameRoom",value:function(rejoin){_UIMgr2.default.getInstance().CloseUI("等待界面"),_gameconst2.default.MODELNAME&&0!=_gameconst2.default.MODELNAME.length&&this.Event(_gameconst2.default.MODELNAME,"ExitGame",[rejoin])}}]),GameModelMgr}();exports.default=GameModelMgr},{"../../app/gameconst":5,"../../app/respathlist":49,"../../appbase/com/FlyText":52,"../../appbase/login/LoadingUI":97,"../gtea/BaseObj":126,"../ui/UIMgr":142,"../utils/comfunc":144}],124:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../gtea/BaseObj")),_comfunc2=_interopRequireDefault(require("../../../utils/comfunc")),_gamemodelmgr2=_interopRequireDefault(require("../../gamemodelmgr")),_matchdef2=_interopRequireDefault(require("../../../match/matchdef")),_UIMgr2=_interopRequireDefault(require("../../../ui/UIMgr")),_playerdata_mgr2=_interopRequireDefault(require("../../../data/playerdata_mgr")),_FlyText2=_interopRequireDefault(require("../../../../appbase/com/FlyText")),_gameconst2=_interopRequireDefault(require("../../../../app/gameconst")),_matchobjmgr2=_interopRequireDefault(require("../../../match/matchobjmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameDesk=function(_BaseObj){function GameDesk(gametype,con,gameroom){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameDesk);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameDesk.__proto__||Object.getPrototypeOf(GameDesk)).call(this));return _this.m_nGameType=gametype,_this.m_Con=con,_this.m_GameRoom=gameroom,_this.SetDeskTop(),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameDesk,_BaseObj3.default),_createClass(GameDesk,[{key:"OnDelThis",value:function(){this.ClearCtrl(),this.m_DeskTop&&this.m_DeskTop.DelThis(),this.m_DeskTop=null,this.m_GameRoom=null,this.m_Con=null,this.m_CtrlClass=null}},{key:"ClearCtrl",value:function(){this.m_GameCtrl&&this.m_GameCtrl.DelThis(),this.m_GameCtrl=null,this.m_bMatchWaitIn=!1}},{key:"SetDeskTop",value:function(){}},{key:"SetCtrl",value:function(){}},{key:"InitCtrl",value:function(){this.ClearCtrl(),this.m_CtrlClass&&(this.m_GameCtrl=new this.m_CtrlClass,this.m_GameCtrl.OnCreate(this))}},{key:"RefreshLocation",value:function(agv){}},{key:"JoinDesk",value:function(agv){this.InitCtrl(),this.OnJoinDesk(agv)}},{key:"OnJoinDesk",value:function(agv){this.m_GameCtrl&&this.m_GameCtrl.OnInDesk(agv)}},{key:"ExitGame",value:function(){if(_comfunc2.default.ObjIsValid(this.m_GameCtrl))switch(this.m_nGameType){case _matchdef2.default.MATCH_MODE.MM_FREE:_gamemodelmgr2.default.getInstance().ExitGameRoom(!1);break;case _matchdef2.default.MATCH_MODE.MM_DIY:this.ExitDiyGame();break;case _matchdef2.default.MATCH_MODE.MM_SNG:this.ExitSNGGame();break;case _matchdef2.default.MATCH_MODE.MM_FNG:case _matchdef2.default.MATCH_MODE.MM_MTT:this.ExitFNGGame();break;default:_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}else _gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}},{key:"ExitDiyGame",value:function(){var mode=1;function OnOk(){if(_UIMgr2.default.getInstance().CloseUI("系统确认"),1==mode)this.CallSvr({evename:"UserSubjectiveOut",data:{}});else if(3==mode)return void this.CallSvr({evename:"RunAway",data:{}});_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}function OnCancel(){_UIMgr2.default.getInstance().CloseUI("系统确认")}if(this.m_GameCtrl.ChkGamePlaying()&&!this.m_GameCtrl.m_bWatching){mode=2;var text="牌局已开始,是否确定暂时离开?";return this.m_GameCtrl.m_MatchObj.m_Option.match.diygolddata&&this.m_GameCtrl.m_MatchObj.m_Option.match.diygolddata.canrunaway&&(mode=3,text="牌局已开始,是否确定逃跑?"),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:text,obj:this,okfun:OnOk,cancelfun:OnCancel},!0,!0)}if(0==this.m_GameCtrl.m_nGameRunTimes&&_comfunc2.default.ObjIsValid(this.m_GameCtrl.m_MatchObj)){if("usr"==this.m_GameCtrl.m_MatchObj.getOwnerType()&&this.m_GameCtrl.m_MatchObj.getOwner()==_playerdata_mgr2.default.getInstance().getMeUID())return void this.DissDesk();var gamedata=this.m_GameCtrl.GetMeMatchGameData();gamedata&&!gamedata.isplay?(mode=1,_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"你确定要离开房间?\n(离开后将退出本场牌局)",obj:this,okfun:OnOk,cancelfun:OnCancel},!0,!0)):OnOk.bind(this)()}}},{key:"ExitSNGGame",value:function(){this.m_GameCtrl.ChkGamePlaying()?_FlyText2.default.AddFlyText("该房间中途不允许退出!"):_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"你确定要退出比赛?\n(退出比赛将返回报名费)",obj:this,okfun:function(){if(this.m_GameCtrl.ChkGamePlaying())return _FlyText2.default.AddFlyText("该房间中途不允许退出!"),void _UIMgr2.default.getInstance().CloseUI("系统确认");this.CallSvr({evename:"ForceExit",data:{}}),this.m_GameRoom.ForceOut(),_playerdata_mgr2.default.getInstance().getMe().m_szGameRoom=[],_UIMgr2.default.getInstance().CloseUI("系统确认"),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)},cancelfun:function(){_UIMgr2.default.getInstance().CloseUI("系统确认")}},!0,!0)}},{key:"ExitFNGGame",value:function(){_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"此时退出房间将不返还报名费并由机器人代打,是否退出房间?",obj:this,okfun:function(){this.CallSvr({evename:"ForceExit",data:{}}),this.m_GameRoom.ForceOut(),this.m_GameCtrl.m_MatchObj&&(this.m_GameCtrl.m_MatchObj.ClearRoomPath(),this.m_GameCtrl.m_MatchObj.m_Status=MATCH_STATUS.MST_CANCEL,_gameconst2.default.EXITKINDID.push(this.m_GameCtrl.m_MatchObj.m_pKind.m_nKindID)),_UIMgr2.default.getInstance().CloseUI("系统确认"),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)},cancelfun:function(){_UIMgr2.default.getInstance().CloseUI("系统确认")}},!0,!0)}},{key:"JoinChairErr",value:function(agv){_UIMgr2.default.getInstance().CloseUI("等待界面"),_FlyText2.default.AddFlyText(agv[1]),_comfunc2.default.ObjIsValid(this.m_GameCtrl.m_MatchObj)&&"usr"==this.m_GameCtrl.m_MatchObj.getOwnerType()&&_matchobjmgr2.default.getInstance().netOnMatchEnd({mid:this.m_GameCtrl.m_MatchObj.m_nMatchID,status:7,why:agv[1]}),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}},{key:"OnMatchEnd",value:function(agv){this.m_CurMatch&&(this.m_CurMatch.removeEventListener("eve.onMatchEnd",this),this.m_CurMatch=null)}},{key:"CallSvr",value:function(agv){this.m_GameCtrl&&this.m_GameCtrl.CallSvr(agv.evename,agv.data)}},{key:"DissDesk",value:function(){this.m_GameCtrl&&this.m_GameCtrl.DissDesk()}},{key:"InPlayBack",value:function(agv){this.InitCtrl(),this.OnInPlayBack(agv)}},{key:"OnInPlayBack",value:function(agv){}},{key:"AddChatReplay",value:function(mode,data){}},{key:"AppPause",value:function(){this.m_GameCtrl&&this.m_GameCtrl.AppPause()}},{key:"InMatchWaitIn",value:function(agv){this.InitCtrl(),this.m_bMatchWaitIn=!0,this.m_GameCtrl.m_MatchObj=agv.mobj,this.OnInMatchWaitIn(agv)}},{key:"OnInMatchWaitIn",value:function(agv){_UIMgr2.default.getInstance().UIEvent("等待界面","OnSetWaitText",["等待分配桌子...",36e5],!0,!0)}},{key:"StartMatchRound",value:function(agv){}},{key:"MatchRankChg",value:function(agv){}},{key:"WaitPairOther",value:function(agv){}},{key:"MatchWaitRoundEnd",value:function(agv){}},{key:"MatchIncDeathLine",value:function(agv){}},{key:"MatchDieOut",value:function(agv){}},{key:"MatchSafeInNext",value:function(agv){}},{key:"MatchDieOutNumEnough",value:function(agv){}},{key:"MatchEnd",value:function(agv){}}]),GameDesk}();exports.default=GameDesk},{"../../../../app/gameconst":5,"../../../../appbase/com/FlyText":52,"../../../data/playerdata_mgr":117,"../../../gtea/BaseObj":126,"../../../match/matchdef":132,"../../../match/matchobjmgr":135,"../../../ui/UIMgr":142,"../../../utils/comfunc":144,"../../gamemodelmgr":123}],125:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../gtea/BaseObj")),_gameroomuser2=_interopRequireDefault(require("../../../appbase/net/gameroomuser")),_diyroomuser2=_interopRequireDefault(require("../../../appbase/net/diyroomuser")),_matchroomuser2=_interopRequireDefault(require("../../../appbase/net/matchroomuser")),_comfunc2=_interopRequireDefault(require("../../utils/comfunc")),_matchkind2=_interopRequireDefault(require("../../match/matchkind")),_gamemodelmgr2=_interopRequireDefault(require("../gamemodelmgr")),_UIMgr2=_interopRequireDefault(require("../../ui/UIMgr")),_gameroommgr2=_interopRequireDefault(require("../../svrlist/gameroommgr")),_matchdef2=_interopRequireDefault(require("../../match/matchdef")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_playerdata_mgr2=_interopRequireDefault(require("../../data/playerdata_mgr")),_matchobjmgr2=_interopRequireDefault(require("../../match/matchobjmgr")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BaseGameRoom=function(_BaseObj){function BaseGameRoom(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseGameRoom);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BaseGameRoom.__proto__||Object.getPrototypeOf(BaseGameRoom)).call(this));return _this.m_FreeRoomUserClass=_gameroomuser2.default,_this.m_DiyRoomUserClass=_diyroomuser2.default,_this.m_MatchRoomUserClass=_matchroomuser2.default,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BaseGameRoom,_BaseObj3.default),_createClass(BaseGameRoom,[{key:"OnDelThis",value:function(){this.ExitRoom(),this.m_MatchKind=null,this.m_DeskClass=null}},{key:"DelDesk",value:function(){this.m_GameDesk&&this.m_GameDesk.DelThis(),this.m_GameDesk=null}},{key:"DelRoomUser",value:function(rejoin){_comfunc2.default.ObjIsValid(this.m_RoomUser)&&this.m_RoomUser.DelThis(),this.m_RoomUser=null}},{key:"ChkRoomUser",value:function(){_comfunc2.default.ObjIsValid(this.m_RoomUser)||(this.m_RoomUser=_BaseObj3.default.FindRegObj("RoomUser"))}},{key:"ExitRoom",value:function(rejoin){this.DelDesk(),this.DelRoomUser(rejoin),rejoin||(this.m_nLastDeskNo=null),this.m_JoinAgv=null}},{key:"ForceOut",value:function(){this.ChkRoomUser(),_comfunc2.default.ObjIsValid(this.m_RoomUser)&&this.m_RoomUser.ToS("ForceExit")}},{key:"InFreeRoom",value:function(agv){if(!this.m_GameDesk){var room=null,kind=_matchkind2.default.Find(agv.kindid);if(this.m_MatchKind=kind,!kind)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间类型错误!"},!0,!0);if(agv.fullpath){if(!(room=_gameroommgr2.default.getInstance().findRoomByFullPath(agv.fullpath)))return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间未开启!"},!0,!0)}else{var game=_gameroommgr2.default.getInstance().findGame("free/"+kind.m_sName);if(!game)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间不存在!"},!0,!0);room=game.randRoom(kind.m_nKindID)}if(!room)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间未开启!"},!0,!0);var szPath=room.m_sFullPath.split("/");this.SetDesk(_matchdef2.default.MATCH_MODE.MM_FREE,szPath[1]),this.JoinRoom({roomtype:_matchdef2.default.MATCH_MODE.MM_FREE,fullpath:room.m_sFullPath,gamename:_gameconst2.default.MODELNAME})}}},{key:"InJoyGame",value:function(agv){if(!this.m_GameDesk){var room=null;if(agv.fullpath){if(!(room=_gameroommgr2.default.getInstance().findRoomByFullPath(agv.fullpath)))return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间未开启!"},!0,!0)}else{var game=_gameroommgr2.default.getInstance().findGame("joy/"+agv.gtype);if(!game)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间不存在!"},!0,!0);room=game.findRoom(agv.room_name)}if(!room)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间未开启!"},!0,!0);var szPath=room.m_sFullPath.split("/");this.SetDesk(_matchdef2.default.MATCH_MODE.MM_JOY,szPath[1]),this.JoinRoom({roomtype:_matchdef2.default.MATCH_MODE.MM_FREE,fullpath:room.m_sFullPath,gamename:_gameconst2.default.MODELNAME})}}},{key:"InJoyRoom",value:function(agv){if(!this.m_GameDesk){var room=null;if(agv.fullpath){if(!(room=_gameroommgr2.default.getInstance().findRoomByFullPath(agv.fullpath)))return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间未开启!"},!0,!0)}else{var game=_gameroommgr2.default.getInstance().findGame("joy/"+kind.m_sName);if(!game)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间不存在!"},!0,!0);room=game.randRoom()}if(!room)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间未开启!"},!0,!0);var szPath=room.m_sFullPath.split("/");this.SetDesk(_matchdef2.default.MATCH_MODE.MM_JOY,szPath[1]),this.JoinRoom({roomtype:_matchdef2.default.MATCH_MODE.MM_JOY,fullpath:room.m_sFullPath,gamename:_gameconst2.default.MODELNAME})}}},{key:"InDiyRoom",value:function(mobj){if(!this.m_GameDesk)if(_comfunc2.default.ObjIsValid(mobj))if(mobj.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_DIY){var szFun=[this.ChkInRoomAA];(function ChkInRoomFun(){_comfunc2.default.ObjIsValid(mobj)?0!=szFun.length?szFun.shift().bind(this)(mobj,function(can){can&&(_UIMgr2.default.getInstance().CloseUI("系统确认"),ChkInRoomFun.bind(this)())}):this.SureInDiyRoom(mobj):this.InDiyRoomErr(null,"房间不存在",!0)}).bind(this)()}else this.InDiyRoomErr(mobj.m_nMatchID,"房间类型错误!");else this.InDiyRoomErr(mobj.m_nMatchID,"房间不存在!")}},{key:"ChkInRoomAA",value:function(mobj,backfun){function OnOk(){backfun.bind(this)(!0)}mobj.IsPayed(_playerdata_mgr2.default.getInstance().getMeUID())?OnOk.bind(this)():_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"您是否确定进入AA房费模式房间?(每人需要"+mobj.m_Option.room.gems+_gameconst2.default.GEMSNAME+")",obj:this,okfun:function(){if(_playerdata_mgr2.default.getInstance().getMeGems()<mobj.m_Option.room.gems)return backfun.bind(this)(!1),void this.InDiyRoomErr(mobj.m_nMatchID,_gameconst2.default.GEMSNAME+"不足，AA房间模式，每人需要"+mobj.m_Option.room.gems+_gameconst2.default.GEMSNAME+"！");OnOk.bind(this)()},cancelfun:function(){backfun.bind(this)(!1),this.InDiyRoomErr(mobj.m_nMatchID)}},!0,!0)}},{key:"SureInDiyRoom",value:function(mobj){if(_comfunc2.default.ObjIsValid(mobj)){var inroom_agv={path:mobj.m_sRoomPath,scene:_gameconst2.default.GetGameName(mobj.m_Option.match.gtype),matchobj:mobj,ltime:mobj.m_nBLTime};if(mobj.hasRoomPath())return mobj.m_bInRoom=!0,void this.OnInDiyRoom(inroom_agv);_UIMgr2.default.getInstance().UIEvent("等待界面","OnSetWaitText",["正在查询房间信息...",36e5],!0,!0),mobj.QueMatchRoomPath(function(agv){_comfunc2.default.ObjIsValid(mobj)?mobj.hasRoomPath()?(mobj.m_bInRoom=!0,inroom_agv.path=mobj.m_sRoomPath,this.OnInDiyRoom(inroom_agv)):(mobj.setStatus(6),this.InDiyRoomErr(mobj.m_nMatchID,"进入失败, 房间已关闭!")):this.InDiyRoomErr(null,"房间不存在",!0)}.bind(this),function(errflag,errmsg){this.InDiyRoomErr(mobj.m_nMatchID,"房间未开启或已解散!")}.bind(this))}else this.InDiyRoomErr(null,"房间不存在",!0)}},{key:"OnInDiyRoom",value:function(agv){var path=agv.path,scene=agv.scene,matchobj=agv.matchobj;if(!path)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"进入失败, 无效的房间路径!"},!0,!0);_UIMgr2.default.getInstance().CloseUI("加入房间"),_UIMgr2.default.getInstance().CloseUI("创建房间"),_UIMgr2.default.getInstance().CloseUI("俱乐部界面");var szPath=matchobj.m_sRoomPath.split("/");this.SetDesk(_matchdef2.default.MATCH_MODE.MM_DIY,szPath[1]),this.JoinRoom({roomtype:_matchdef2.default.MATCH_MODE.MM_DIY,path:path,scene:scene,matchobj:matchobj})}},{key:"InDiyRoomErr",value:function(mid,errmsg,nodel){_UIMgr2.default.getInstance().CloseUI("等待界面"),_UIMgr2.default.getInstance().CloseUI("系统确认"),nodel||_matchobjmgr2.default.getInstance().netOnExitPrivateRoom({mid:mid}),errmsg&&_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:errmsg},!0,!0)}},{key:"InSNGRoom",value:function(agv){if(!this.m_GameDesk){var room=null,kind=_matchkind2.default.Find(agv.kindid);if(this.m_MatchKind=kind,!kind)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"比赛类型错误!"},!0,!0);if(agv.fullpath){if(!(room=_gameroommgr2.default.getInstance().findRoomByFullPath(agv.fullpath)))return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间未开启!"},!0,!0)}else{var game=_gameroommgr2.default.getInstance().findGame("sng/"+kind.m_sName);if(!game)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"比赛不存在!"},!0,!0);room=game.randRoom(kind.m_nKindID)}if(!room)return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间未开启!"},!0,!0);var gamename=kind.m_sModuleName;if(!gamename)gamename=room.m_sFullPath.split("/")[1];this.SetDesk(_matchdef2.default.MATCH_MODE.MM_SNG,gamename),this.JoinRoom({roomtype:_matchdef2.default.MATCH_MODE.MM_SNG,fullpath:room.m_sFullPath,gamename:_gameconst2.default.MODELNAME,hasfullpath:!!agv.fullpath})}}},{key:"InFNGRoom",value:function(agv){if(!this.m_GameDesk){var mobj=agv[0];if(!_comfunc2.default.ObjIsValid(mobj))return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"比赛不存在!"},!0,!0);if(!mobj.hasRoomPath())return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"比赛房间不存在!"},!0,!0);this.m_MatchKind=mobj.m_pKind;var szPath=mobj.m_sRoomPath.split("/");this.SetDesk(_matchdef2.default.MATCH_MODE.MM_FNG,szPath[1]),this.JoinRoom({roomtype:_matchdef2.default.MATCH_MODE.MM_FNG,path:mobj.m_sRoomPath,scene:szPath[1],matchobj:mobj})}}},{key:"InMTTRoom",value:function(agv){if(!this.m_GameDesk){var mobj=agv[0];if(!_comfunc2.default.ObjIsValid(mobj))return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"比赛不存在!"},!0,!0);if(!mobj.hasRoomPath())return _gamemodelmgr2.default.getInstance().ExitGameRoom(!1),void _UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"比赛房间不存在!"},!0,!0);this.m_MatchKind=mobj.m_pKind;var szPath=mobj.m_sRoomPath.split("/");this.SetDesk(_matchdef2.default.MATCH_MODE.MM_MTT,szPath[1]),5!=mobj.m_Status&&this.InMatchWaitIn({mode:2,mobj:mobj}),this.JoinRoom({roomtype:_matchdef2.default.MATCH_MODE.MM_MTT,path:mobj.m_sRoomPath,scene:szPath[1],matchobj:mobj})}}},{key:"SetDesk",value:function(gametype,gamename){this.m_nGameType=gametype,this.m_sGameName=gamename,this.OnSetDesk(),_UIMgr2.default.getInstance().CloseUI("大厅界面")}},{key:"OnSetDesk",value:function(){!this.m_GameDesk&&this.m_DeskClass&&(this.m_GameDesk=new this.m_DeskClass(this.m_nGameType,_UIMgr2.default.getInstance().GetLayer(3),this),this.m_GameDesk.SetCtrl())}},{key:"JoinRoom",value:function(joinagv,rejoin,otime){this.m_JoinAgv=joinagv,otime=otime||1e4,this.DelRoomUser(rejoin);var roomuser_class=null;switch(joinagv.roomtype){case _matchdef2.default.MATCH_MODE.MM_FREE:case _matchdef2.default.MATCH_MODE.MM_SNG:case _matchdef2.default.MATCH_MODE.MM_JOY:roomuser_class=this.m_FreeRoomUserClass;break;case _matchdef2.default.MATCH_MODE.MM_DIY:roomuser_class=this.m_DiyRoomUserClass;break;case _matchdef2.default.MATCH_MODE.MM_FNG:case _matchdef2.default.MATCH_MODE.MM_MTT:roomuser_class=this.m_MatchRoomUserClass}if(roomuser_class)switch(this.m_RoomUser=new roomuser_class,this.m_RoomUser.m_nJoinGroupOTime=otime,joinagv.roomtype){case _matchdef2.default.MATCH_MODE.MM_FREE:case _matchdef2.default.MATCH_MODE.MM_SNG:case _matchdef2.default.MATCH_MODE.MM_JOY:this.m_RoomUser.JoinRoom(joinagv.fullpath,joinagv.gamename,this.m_nLastDeskNo);break;case _matchdef2.default.MATCH_MODE.MM_DIY:case _matchdef2.default.MATCH_MODE.MM_FNG:case _matchdef2.default.MATCH_MODE.MM_MTT:this.m_RoomUser.JoinRoom(joinagv.path,joinagv.scene,joinagv.matchobj)}}},{key:"InRoomOk",value:function(agv){var matchobj=agv.matchobj,userdata=agv.userdata;_comfunc2.default.isNil(matchobj)||_comfunc2.default.isNil(userdata)||(matchobj.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_FNG?5==userdata.status&&(matchobj.ClearRoomPath(),_FlyText2.default.AddFlyText("很遗憾,您被淘汰了!"),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)):matchobj.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_MTT&&(5==userdata.status?(matchobj.ClearRoomPath(),_FlyText2.default.AddFlyText("很遗憾,您被淘汰了!"),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)):3!=userdata.status&&4!=userdata.status||(_UIMgr2.default.getInstance().CloseUI("等待界面"),matchobj.m_MatchData.next_pnum<0?(this.InMatchWaitIn({mode:1,mobj:matchobj}),this.MatchRankChg([matchobj])):this.ShowMatchWait(matchobj))))}},{key:"JoinDesk",value:function(agv){if(_UIMgr2.default.getInstance().CloseUI("等待界面"),_UIMgr2.default.getInstance().CloseUI("比赛等待界面"),this.OnSetDesk(),this.m_GameDesk){this.m_nLastDeskNo=agv[0];var indeskagv={sname:this.m_RoomUser.m_sRoomSName,gname:this.m_RoomUser.m_sRoomGName,desk:agv[0],chair:agv[1],matchobj:agv[2]};this.m_GameDesk.JoinDesk(indeskagv)}}},{key:"ReJoin",value:function(cleardeskno){if(!this.m_JoinAgv)return!1;if(this.m_JoinAgv.roomtype!=_matchdef2.default.MATCH_MODE.MM_FREE){var curmatch=_matchobjmgr2.default.getInstance().GetCurrentMatch();if(this.m_JoinAgv.roomtype==_matchdef2.default.MATCH_MODE.MM_DIY){if(1!=curmatch.mode)return _FlyText2.default.AddFlyText("房间已解散!!!"),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1),!0;this.m_JoinAgv.matchobj=curmatch.mobj}return cleardeskno&&(this.m_nLastDeskNo=null),this.JoinRoom(this.m_JoinAgv,!0),!0}_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"房间连接中断,请重新进入!",obj:this,okfun:function(){_gamemodelmgr2.default.getInstance().ExitGameRoom(!1)}},!0,!0)}},{key:"SwapDesk",value:function(){this.m_JoinAgv&&(this.DelDesk(),this.m_RoomUser.swapJoin())}},{key:"AutoJoinDesk",value:function(){this.ChkRoomUser(),this.m_RoomUser.netAutoJoin()}},{key:"InPlayBack",value:function(agv){var matchobj=agv[0],data=agv[1];if(matchobj.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_SNG){var szstr=data.videoid.split("/"),kindid=Number(szstr[1]);this.m_MatchKind=_matchkind2.default.Find(kindid)}}},{key:"InMatchWaitIn",value:function(agv){this.m_GameDesk&&this.m_GameDesk.InMatchWaitIn(agv)}},{key:"CallSvr",value:function(agv){_comfunc2.default.ObjIsValid(this.m_RoomUser)&&this.m_RoomUser.ToS(agv.evename,agv.data)}},{key:"StartMatchRound",value:function(agv){_FlyText2.default.AddFlyText("第"+agv[0].m_MatchData.round+"轮比赛开始!"),this.m_GameDesk&&this.m_GameDesk.StartMatchRound(agv)}},{key:"MatchRankChg",value:function(agv){this.m_GameDesk&&this.m_GameDesk.MatchRankChg(agv),_UIMgr2.default.getInstance().UIEvent("比赛等待界面","RefreshInfo",agv)}},{key:"MatchWaitRoundEnd",value:function(agv){this.m_GameDesk&&this.m_GameDesk.MatchWaitRoundEnd(agv),this.ShowMatchWait(agv[0])}},{key:"MatchIncDeathLine",value:function(agv){_FlyText2.default.AddFlyText("淘汰分数线增长至"+agv[0]),this.m_GameDesk&&this.m_GameDesk.MatchIncDeathLine(agv)}},{key:"MatchDieOut",value:function(agv){_FlyText2.default.AddFlyText("很遗憾,您被淘汰了!"),_UIMgr2.default.getInstance().CloseUI("比赛等待界面"),this.m_GameDesk&&this.m_GameDesk.MatchDieOut(agv),this.ShowMatchResult(agv)}},{key:"MatchSafeInNext",value:function(agv){_UIMgr2.default.getInstance().CloseUI("系统确认"),agv[1]?_FlyText2.default.AddFlyText("本轮轮空,您已成功晋级下一轮!"):_FlyText2.default.AddFlyText("您已成功晋级下一轮!"),this.m_GameDesk&&this.m_GameDesk.MatchSafeInNext(agv)}},{key:"MatchDieOutNumEnough",value:function(agv){_FlyText2.default.AddFlyText("淘汰人数已满,停止淘汰!"),this.m_GameDesk&&this.m_GameDesk.MatchDieOutNumEnough(agv),this.m_GameDesk.m_bMatchWaitIn&&this.ShowMatchWait(agv[0])}},{key:"MatchEnd",value:function(agv){this.m_GameDesk&&this.m_GameDesk.MatchEnd(agv),this.ShowMatchResult(agv)}},{key:"SetCurMatchStatusInfo",value:function(agv){var mobj=agv.mobj,data=agv.data,deskinfo=data[0],userdata=data[1];data[2];if(5==userdata.status)return mobj.m_bSignUp=!1,mobj.ClearRoomPath(),void this.MatchDieOut({mobj:mobj,data:[userdata.rank]});4!=userdata.status?deskinfo&&-1!=deskinfo[0]&&this.JoinDesk([deskinfo[0],deskinfo[1],mobj]):this.ShowMatchWait(mobj)}},{key:"ShowMatchResult",value:function(agv){agv.mobj.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_FNG&&agv.mobj.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_MTT||(_UIMgr2.default.getInstance().UIEvent("比赛结算界面","SetMarkData",{rank:agv.data[0],kindid:agv.mobj.m_pKind.m_nKindID,mid:agv.mobj.m_nMatchID,chkred:!0},!0,!0),_gamemodelmgr2.default.getInstance().ExitGameRoom(!1))}},{key:"ShowMatchWait",value:function(mobj){this.DelDesk(),_UIMgr2.default.getInstance().CloseUI("等待界面"),_UIMgr2.default.getInstance().UIEvent("比赛等待界面","RefreshInfo",[mobj],!0,!0)}},{key:"AppPause",value:function(){this.m_GameDesk&&this.m_GameDesk.AppPause()}}]),BaseGameRoom}();exports.default=BaseGameRoom},{"../../../app/gameconst":5,"../../../appbase/com/FlyText":52,"../../../appbase/net/diyroomuser":100,"../../../appbase/net/gameroomuser":102,"../../../appbase/net/matchroomuser":103,"../../data/playerdata_mgr":117,"../../gtea/BaseObj":126,"../../match/matchdef":132,"../../match/matchkind":133,"../../match/matchobjmgr":135,"../../svrlist/gameroommgr":139,"../../ui/UIMgr":142,"../../utils/comfunc":144,"../gamemodelmgr":123}],126:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_gtea=require("./gtea"),_gtea2=(obj=_gtea)&&obj.__esModule?obj:{default:obj};var BaseObj=function(_gtea$CBaseObj){function BaseObj(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseObj);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BaseObj.__proto__||Object.getPrototypeOf(BaseObj)).call(this));return _this.szTweenList={},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BaseObj,_gtea2.default.CBaseObj),_createClass(BaseObj,null,[{key:"RegObj",value:function(name,obj){obj&&_get(BaseObj.__proto__||Object.getPrototypeOf(BaseObj),"RegTopModule",this).call(this,name,obj)}},{key:"UnRegObj",value:function(name){_get(BaseObj.__proto__||Object.getPrototypeOf(BaseObj),"UnRegTopModule",this).call(this,name)}},{key:"FindRegObj",value:function(name){return _get(BaseObj.__proto__||Object.getPrototypeOf(BaseObj),"FindTopModule",this).call(this,name)}},{key:"EventToRegObj",value:function(name,evename,args){var obj=BaseObj.FindRegObj(name);obj&&obj.Event(evename,args)}},{key:"getEventObj",value:function(){return BaseObj.EventObj||(BaseObj.EventObj=new BaseObj),BaseObj.EventObj}}]),_createClass(BaseObj,[{key:"OnDelThis",value:function(){this.szTweenList=null,this.szFunctions=null,_get(BaseObj.prototype.__proto__||Object.getPrototypeOf(BaseObj.prototype),"OnDelThis",this).call(this)}},{key:"_eventDispatchHook",value:function(evt){var bind=evt.bind;bind.func.call(bind.obj,evt.agv)}},{key:"addEventListener",value:function(evename,obj,func,once){if(!this.m_bDeled){var bind={obj:obj,func:func};_get(BaseObj.prototype.__proto__||Object.getPrototypeOf(BaseObj.prototype),"addEventListener",this).call(this,evename,obj,this._eventDispatchHook,bind)}}},{key:"addOnceEventListener",value:function(evename,obj,func){if(!this.m_bDeled){var bind={obj:obj,func:func};_get(BaseObj.prototype.__proto__||Object.getPrototypeOf(BaseObj.prototype),"addOnceEventListener",this).call(this,evename,obj,this._eventDispatchHook,bind)}}},{key:"onTimer",value:function(agv){agv.func.apply(this,agv.args)}},{key:"timerCall",value:function(delay,func,args){var agv={func:func.bind(this),args:args};return _get(BaseObj.prototype.__proto__||Object.getPrototypeOf(BaseObj.prototype),"timerCall",this).call(this,delay,this.onTimer,agv)}},{key:"loopCall",value:function(firstdelay,delay,func,args){var agv={func:func.bind(this),args:args};return _get(BaseObj.prototype.__proto__||Object.getPrototypeOf(BaseObj.prototype),"loopCall",this).call(this,firstdelay,delay,this.onTimer,agv)}},{key:"HttpRequestGet",value:function(url,backfun){var httprequest=new Laya.HttpRequest;httprequest.once(Laya.Event.COMPLETE,this,backfun),httprequest.send(url,null,"get")}},{key:"TweenLite",value:function(target,args,time,ease,backfun){var key=(new Date).getTime().toString()+"_"+Math.floor(9999999*Math.random()+1e3).toString();key=_gtea2.default.hash.md5(key,32);var tween=Laya.Tween.to(target,args,time,ease,Laya.Handler.create(this,function(key){var data=this.szTweenList[key];data&&(data.backfun&&data.backfun.method.apply(data.backfun.caller,data.backfun.args),this.killTween(key))},[key]),0,!1,!1);return this.szTweenList[key]={tween:tween,backfun:backfun},key}},{key:"killTween",value:function(key){if(key){var data=this.szTweenList[key];data&&(Laya.Tween.clear(data.tween),delete this.szTweenList[key])}}},{key:"killAllTween",value:function(){for(var key in this.szTweenList){var data=this.szTweenList[key];Laya.Tween.clear(data.tween)}this.szTweenList={}}}]),BaseObj}();exports.default=BaseObj},{"./gtea":127}],127:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.default=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"===(void 0===value?"undefined":_typeof(value))&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"bincoder",function(){return bincoder});var _BigInteger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);__webpack_require__.d(__webpack_exports__,"bigInt",function(){return _BigInteger__WEBPACK_IMPORTED_MODULE_0__.default});var _eventdispatcher__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);__webpack_require__.d(__webpack_exports__,"CEventDispatcher",function(){return _eventdispatcher__WEBPACK_IMPORTED_MODULE_1__.default}),__webpack_require__.d(__webpack_exports__,"CEvent",function(){return _eventdispatcher__WEBPACK_IMPORTED_MODULE_1__.CEvent});var _baseobj__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11);__webpack_require__.d(__webpack_exports__,"CBaseObj",function(){return _baseobj__WEBPACK_IMPORTED_MODULE_2__.default});var _netobj__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(13);__webpack_require__.d(__webpack_exports__,"CNetObj",function(){return _netobj__WEBPACK_IMPORTED_MODULE_3__.default});var _socket__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16);__webpack_require__.d(__webpack_exports__,"CSocket",function(){return _socket__WEBPACK_IMPORTED_MODULE_4__.default});var _glink__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(17);__webpack_require__.d(__webpack_exports__,"CGLink",function(){return _glink__WEBPACK_IMPORTED_MODULE_5__.default});var _utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8);__webpack_require__.d(__webpack_exports__,"utils",function(){return _utils__WEBPACK_IMPORTED_MODULE_6__.default});var _rpc__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(14);__webpack_require__.d(__webpack_exports__,"rpc",function(){return _rpc__WEBPACK_IMPORTED_MODULE_7__.default});var _trace__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6);__webpack_require__.d(__webpack_exports__,"trace",function(){return _trace__WEBPACK_IMPORTED_MODULE_8__.default});var _hash__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3);__webpack_require__.d(__webpack_exports__,"hash",function(){return _hash__WEBPACK_IMPORTED_MODULE_9__.default});var _bincoder__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10),_bytearray__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4);__webpack_require__.d(__webpack_exports__,"CByteArray",function(){return _bytearray__WEBPACK_IMPORTED_MODULE_11__.default});var __propun={writable:!1,enumerable:!1,configurable:!0},__propun_r={writable:!1,enumerable:!1,configurable:!0};function un_r(obj,name,value){return value||(value=obj[name]),__propun.value=value,Object.defineProperty(obj,name,__propun_r),value}function __hasOwnProperty(name,o){return o=o||this,Object.hasOwnProperty.call(o,name)||function classHas(name,o){if(Object.hasOwnProperty.call(o,name))return!0;var s=o.__proto__;return null==s?null:classHas(name,s)}(name,o.__proto__)}function Delcalre_Class(o,fullName,_super){void 0===_super&&(_super=void 0);var obj,name,value,p=o.prototype;obj=p,name="hasOwnProperty",(value=__hasOwnProperty)||(value=obj[name]),__propun.value=value,Object.defineProperty(obj,name,__propun),un_r(p,"__className",fullName),un_r(o,"__className",fullName)}Delcalre_Class(_eventdispatcher__WEBPACK_IMPORTED_MODULE_1__.default,"gtea.CEventDispatcher"),Delcalre_Class(_baseobj__WEBPACK_IMPORTED_MODULE_2__.default,"gtea.CBaseObj",_eventdispatcher__WEBPACK_IMPORTED_MODULE_1__.default),Delcalre_Class(_netobj__WEBPACK_IMPORTED_MODULE_3__.default,"gtea.CNetObj",_baseobj__WEBPACK_IMPORTED_MODULE_2__.default),Delcalre_Class(_glink__WEBPACK_IMPORTED_MODULE_5__.default,"gtea.CGLink",_baseobj__WEBPACK_IMPORTED_MODULE_2__.default);var bincoder={hex:_bincoder__WEBPACK_IMPORTED_MODULE_10__.hex,base64:_bincoder__WEBPACK_IMPORTED_MODULE_10__.base64};__webpack_exports__.default={bigInt:_BigInteger__WEBPACK_IMPORTED_MODULE_0__.default,utils:_utils__WEBPACK_IMPORTED_MODULE_6__.default,rpc:_rpc__WEBPACK_IMPORTED_MODULE_7__.default,trace:_trace__WEBPACK_IMPORTED_MODULE_8__.default,bincoder:bincoder,hash:_hash__WEBPACK_IMPORTED_MODULE_9__.default,CByteArray:_bytearray__WEBPACK_IMPORTED_MODULE_11__.default,CEventDispatcher:_eventdispatcher__WEBPACK_IMPORTED_MODULE_1__.default,CEvent:_eventdispatcher__WEBPACK_IMPORTED_MODULE_1__.CEvent,CSocket:_socket__WEBPACK_IMPORTED_MODULE_4__.default,CBaseObj:_baseobj__WEBPACK_IMPORTED_MODULE_2__.default,CNetObj:_netobj__WEBPACK_IMPORTED_MODULE_3__.default,CGLink:_glink__WEBPACK_IMPORTED_MODULE_5__.default,context:_utils__WEBPACK_IMPORTED_MODULE_6__.default.context,Init:_utils__WEBPACK_IMPORTED_MODULE_6__.default.Init,str2key:_hash__WEBPACK_IMPORTED_MODULE_9__.default.str2key}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var bigInt=function(undefined){var BASE=1e7,LOG_BASE=7,MAX_INT=9007199254740992,MAX_INT_ARR=smallToArray(MAX_INT),DEFAULT_ALPHABET="0123456789abcdefghijklmnopqrstuvwxyz",supportsNativeBigInt="function"==typeof BigInt;function Integer(v,radix,alphabet,caseSensitive){return void 0===v?Integer[0]:void 0===radix||10==+radix&&!alphabet?parseValue(v):parseBase(v,radix,alphabet,caseSensitive)}function BigInteger(value,sign){this.value=value,this.sign=sign,this.isSmall=!1}function SmallInteger(value){this.value=value,this.sign=value<0,this.isSmall=!0}function NativeBigInt(value){this.value=value}function isPrecise(n){return-MAX_INT<n&&n<MAX_INT}function smallToArray(n){return n<1e7?[n]:n<1e14?[n%1e7,Math.floor(n/1e7)]:[n%1e7,Math.floor(n/1e7)%1e7,Math.floor(n/1e14)]}function arrayToSmall(arr){trim(arr);var length=arr.length;if(length<4&&compareAbs(arr,MAX_INT_ARR)<0)switch(length){case 0:return 0;case 1:return arr[0];case 2:return arr[0]+arr[1]*BASE;default:return arr[0]+(arr[1]+arr[2]*BASE)*BASE}return arr}function trim(v){for(var i=v.length;0===v[--i];);v.length=i+1}function createArray(length){for(var x=new Array(length),i=-1;++i<length;)x[i]=0;return x}function truncate(n){return n>0?Math.floor(n):Math.ceil(n)}function add(a,b){var sum,i,l_a=a.length,l_b=b.length,r=new Array(l_a),carry=0,base=BASE;for(i=0;i<l_b;i++)sum=a[i]+b[i]+carry,carry=sum>=base?1:0,r[i]=sum-carry*base;for(;i<l_a;)sum=a[i]+carry,carry=sum===base?1:0,r[i++]=sum-carry*base;return carry>0&&r.push(carry),r}function addAny(a,b){return a.length>=b.length?add(a,b):add(b,a)}function addSmall(a,carry){var sum,i,l=a.length,r=new Array(l),base=BASE;for(i=0;i<l;i++)sum=a[i]-base+carry,carry=Math.floor(sum/base),r[i]=sum-carry*base,carry+=1;for(;carry>0;)r[i++]=carry%base,carry=Math.floor(carry/base);return r}function subtract(a,b){var i,difference,a_l=a.length,b_l=b.length,r=new Array(a_l),borrow=0,base=BASE;for(i=0;i<b_l;i++)(difference=a[i]-borrow-b[i])<0?(difference+=base,borrow=1):borrow=0,r[i]=difference;for(i=b_l;i<a_l;i++){if(!((difference=a[i]-borrow)<0)){r[i++]=difference;break}difference+=base,r[i]=difference}for(;i<a_l;i++)r[i]=a[i];return trim(r),r}function subtractSmall(a,b,sign){var i,difference,l=a.length,r=new Array(l),carry=-b,base=BASE;for(i=0;i<l;i++)difference=a[i]+carry,carry=Math.floor(difference/base),difference%=base,r[i]=difference<0?difference+base:difference;return"number"==typeof(r=arrayToSmall(r))?(sign&&(r=-r),new SmallInteger(r)):new BigInteger(r,sign)}function multiplyLong(a,b){var product,carry,i,a_i,b_j,a_l=a.length,b_l=b.length,l=a_l+b_l,r=createArray(l),base=BASE;for(i=0;i<a_l;++i){a_i=a[i];for(var j=0;j<b_l;++j)b_j=b[j],product=a_i*b_j+r[i+j],carry=Math.floor(product/base),r[i+j]=product-carry*base,r[i+j+1]+=carry}return trim(r),r}function multiplySmall(a,b){var product,i,l=a.length,r=new Array(l),base=BASE,carry=0;for(i=0;i<l;i++)product=a[i]*b+carry,carry=Math.floor(product/base),r[i]=product-carry*base;for(;carry>0;)r[i++]=carry%base,carry=Math.floor(carry/base);return r}function shiftLeft(x,n){for(var r=[];n-- >0;)r.push(0);return r.concat(x)}function multiplySmallAndArray(a,b,sign){return new BigInteger(a<BASE?multiplySmall(b,a):multiplyLong(b,smallToArray(a)),sign)}function square(a){var product,carry,i,a_i,a_j,l=a.length,r=createArray(l+l),base=BASE;for(i=0;i<l;i++){a_i=a[i],carry=0-a_i*a_i;for(var j=i;j<l;j++)a_j=a[j],product=a_i*a_j*2+r[i+j]+carry,carry=Math.floor(product/base),r[i+j]=product-carry*base;r[i+l]=carry}return trim(r),r}function divModSmall(value,lambda){var i,q,remainder,divisor,length=value.length,quotient=createArray(length),base=BASE;for(remainder=0,i=length-1;i>=0;--i)divisor=remainder*base+value[i],q=truncate(divisor/lambda),remainder=divisor-q*lambda,quotient[i]=0|q;return[quotient,0|remainder]}function divModAny(self,v){var value,n=parseValue(v);if(supportsNativeBigInt)return[new NativeBigInt(self.value/n.value),new NativeBigInt(self.value%n.value)];var quotient,a=self.value,b=n.value;if(0===b)throw new Error("Cannot divide by zero");if(self.isSmall)return n.isSmall?[new SmallInteger(truncate(a/b)),new SmallInteger(a%b)]:[Integer[0],self];if(n.isSmall){if(1===b)return[self,Integer[0]];if(-1==b)return[self.negate(),Integer[0]];var abs=Math.abs(b);if(abs<BASE){value=divModSmall(a,abs),quotient=arrayToSmall(value[0]);var remainder=value[1];return self.sign&&(remainder=-remainder),"number"==typeof quotient?(self.sign!==n.sign&&(quotient=-quotient),[new SmallInteger(quotient),new SmallInteger(remainder)]):[new BigInteger(quotient,self.sign!==n.sign),new SmallInteger(remainder)]}b=smallToArray(abs)}var comparison=compareAbs(a,b);if(-1===comparison)return[Integer[0],self];if(0===comparison)return[Integer[self.sign===n.sign?1:-1],Integer[0]];value=a.length+b.length<=200?function(a,b){var quotientDigit,shift,carry,borrow,i,l,q,a_l=a.length,b_l=b.length,base=BASE,result=createArray(b.length),divisorMostSignificantDigit=b[b_l-1],lambda=Math.ceil(base/(2*divisorMostSignificantDigit)),remainder=multiplySmall(a,lambda),divisor=multiplySmall(b,lambda);for(remainder.length<=a_l&&remainder.push(0),divisor.push(0),divisorMostSignificantDigit=divisor[b_l-1],shift=a_l-b_l;shift>=0;shift--){for(quotientDigit=base-1,remainder[shift+b_l]!==divisorMostSignificantDigit&&(quotientDigit=Math.floor((remainder[shift+b_l]*base+remainder[shift+b_l-1])/divisorMostSignificantDigit)),carry=0,borrow=0,l=divisor.length,i=0;i<l;i++)carry+=quotientDigit*divisor[i],q=Math.floor(carry/base),borrow+=remainder[shift+i]-(carry-q*base),carry=q,borrow<0?(remainder[shift+i]=borrow+base,borrow=-1):(remainder[shift+i]=borrow,borrow=0);for(;0!==borrow;){for(quotientDigit-=1,carry=0,i=0;i<l;i++)(carry+=remainder[shift+i]-base+divisor[i])<0?(remainder[shift+i]=carry+base,carry=0):(remainder[shift+i]=carry,carry=1);borrow+=carry}result[shift]=quotientDigit}return remainder=divModSmall(remainder,lambda)[0],[arrayToSmall(result),arrayToSmall(remainder)]}(a,b):function(a,b){for(var guess,xlen,highx,highy,check,a_l=a.length,b_l=b.length,result=[],part=[],base=BASE;a_l;)if(part.unshift(a[--a_l]),trim(part),compareAbs(part,b)<0)result.push(0);else{xlen=part.length,highx=part[xlen-1]*base+part[xlen-2],highy=b[b_l-1]*base+b[b_l-2],xlen>b_l&&(highx=(highx+1)*base),guess=Math.ceil(highx/highy);do{if(compareAbs(check=multiplySmall(b,guess),part)<=0)break;guess--}while(guess);result.push(guess),part=subtract(part,check)}return result.reverse(),[arrayToSmall(result),arrayToSmall(part)]}(a,b),quotient=value[0];var qSign=self.sign!==n.sign,mod=value[1],mSign=self.sign;return"number"==typeof quotient?(qSign&&(quotient=-quotient),quotient=new SmallInteger(quotient)):quotient=new BigInteger(quotient,qSign),"number"==typeof mod?(mSign&&(mod=-mod),mod=new SmallInteger(mod)):mod=new BigInteger(mod,mSign),[quotient,mod]}function compareAbs(a,b){if(a.length!==b.length)return a.length>b.length?1:-1;for(var i=a.length-1;i>=0;i--)if(a[i]!==b[i])return a[i]>b[i]?1:-1;return 0}function isBasicPrime(v){var n=v.abs();return!n.isUnit()&&(!!(n.equals(2)||n.equals(3)||n.equals(5))||!(n.isEven()||n.isDivisibleBy(3)||n.isDivisibleBy(5))&&(!!n.lesser(49)||void 0))}function millerRabinTest(n,a){for(var d,i,x,nPrev=n.prev(),b=nPrev,r=0;b.isEven();)b=b.divide(2),r++;next:for(i=0;i<a.length;i++)if(!n.lesser(a[i])&&!(x=bigInt(a[i]).modPow(b,n)).isUnit()&&!x.equals(nPrev)){for(d=r-1;0!=d;d--){if((x=x.square().mod(n)).isUnit())return!1;if(x.equals(nPrev))continue next}return!1}return!0}BigInteger.prototype=Object.create(Integer.prototype),SmallInteger.prototype=Object.create(Integer.prototype),NativeBigInt.prototype=Object.create(Integer.prototype),BigInteger.prototype.add=function(v){var n=parseValue(v);if(this.sign!==n.sign)return this.subtract(n.negate());var a=this.value,b=n.value;return n.isSmall?new BigInteger(addSmall(a,Math.abs(b)),this.sign):new BigInteger(addAny(a,b),this.sign)},BigInteger.prototype.plus=BigInteger.prototype.add,SmallInteger.prototype.add=function(v){var n=parseValue(v),a=this.value;if(a<0!==n.sign)return this.subtract(n.negate());var b=n.value;if(n.isSmall){if(isPrecise(a+b))return new SmallInteger(a+b);b=smallToArray(Math.abs(b))}return new BigInteger(addSmall(b,Math.abs(a)),a<0)},SmallInteger.prototype.plus=SmallInteger.prototype.add,NativeBigInt.prototype.add=function(v){return new NativeBigInt(this.value+parseValue(v).value)},NativeBigInt.prototype.plus=NativeBigInt.prototype.add,BigInteger.prototype.subtract=function(v){var n=parseValue(v);if(this.sign!==n.sign)return this.add(n.negate());var a=this.value,b=n.value;return n.isSmall?subtractSmall(a,Math.abs(b),this.sign):function(a,b,sign){var value;return compareAbs(a,b)>=0?value=subtract(a,b):(value=subtract(b,a),sign=!sign),"number"==typeof(value=arrayToSmall(value))?(sign&&(value=-value),new SmallInteger(value)):new BigInteger(value,sign)}(a,b,this.sign)},BigInteger.prototype.minus=BigInteger.prototype.subtract,SmallInteger.prototype.subtract=function(v){var n=parseValue(v),a=this.value;if(a<0!==n.sign)return this.add(n.negate());var b=n.value;return n.isSmall?new SmallInteger(a-b):subtractSmall(b,Math.abs(a),a>=0)},SmallInteger.prototype.minus=SmallInteger.prototype.subtract,NativeBigInt.prototype.subtract=function(v){return new NativeBigInt(this.value-parseValue(v).value)},NativeBigInt.prototype.minus=NativeBigInt.prototype.subtract,BigInteger.prototype.negate=function(){return new BigInteger(this.value,!this.sign)},SmallInteger.prototype.negate=function(){var sign=this.sign,small=new SmallInteger(-this.value);return small.sign=!sign,small},NativeBigInt.prototype.negate=function(){return new NativeBigInt(-this.value)},BigInteger.prototype.abs=function(){return new BigInteger(this.value,!1)},SmallInteger.prototype.abs=function(){return new SmallInteger(Math.abs(this.value))},NativeBigInt.prototype.abs=function(){return new NativeBigInt(this.value>=0?this.value:-this.value)},BigInteger.prototype.multiply=function(v){var abs,l1,l2,n=parseValue(v),a=this.value,b=n.value,sign=this.sign!==n.sign;if(n.isSmall){if(0===b)return Integer[0];if(1===b)return this;if(-1===b)return this.negate();if((abs=Math.abs(b))<BASE)return new BigInteger(multiplySmall(a,abs),sign);b=smallToArray(abs)}return l1=a.length,l2=b.length,new BigInteger(-.012*l1-.012*l2+15e-6*l1*l2>0?function multiplyKaratsuba(x,y){var n=Math.max(x.length,y.length);if(n<=30)return multiplyLong(x,y);n=Math.ceil(n/2);var b=x.slice(n),a=x.slice(0,n),d=y.slice(n),c=y.slice(0,n),ac=multiplyKaratsuba(a,c),bd=multiplyKaratsuba(b,d),abcd=multiplyKaratsuba(addAny(a,b),addAny(c,d)),product=addAny(addAny(ac,shiftLeft(subtract(subtract(abcd,ac),bd),n)),shiftLeft(bd,2*n));return trim(product),product}(a,b):multiplyLong(a,b),sign)},BigInteger.prototype.times=BigInteger.prototype.multiply,SmallInteger.prototype._multiplyBySmall=function(a){return isPrecise(a.value*this.value)?new SmallInteger(a.value*this.value):multiplySmallAndArray(Math.abs(a.value),smallToArray(Math.abs(this.value)),this.sign!==a.sign)},BigInteger.prototype._multiplyBySmall=function(a){return 0===a.value?Integer[0]:1===a.value?this:-1===a.value?this.negate():multiplySmallAndArray(Math.abs(a.value),this.value,this.sign!==a.sign)},SmallInteger.prototype.multiply=function(v){return parseValue(v)._multiplyBySmall(this)},SmallInteger.prototype.times=SmallInteger.prototype.multiply,NativeBigInt.prototype.multiply=function(v){return new NativeBigInt(this.value*parseValue(v).value)},NativeBigInt.prototype.times=NativeBigInt.prototype.multiply,BigInteger.prototype.square=function(){return new BigInteger(square(this.value),!1)},SmallInteger.prototype.square=function(){var value=this.value*this.value;return isPrecise(value)?new SmallInteger(value):new BigInteger(square(smallToArray(Math.abs(this.value))),!1)},NativeBigInt.prototype.square=function(v){return new NativeBigInt(this.value*this.value)},BigInteger.prototype.divmod=function(v){var result=divModAny(this,v);return{quotient:result[0],remainder:result[1]}},NativeBigInt.prototype.divmod=SmallInteger.prototype.divmod=BigInteger.prototype.divmod,BigInteger.prototype.divide=function(v){return divModAny(this,v)[0]},NativeBigInt.prototype.over=NativeBigInt.prototype.divide=function(v){return new NativeBigInt(this.value/parseValue(v).value)},SmallInteger.prototype.over=SmallInteger.prototype.divide=BigInteger.prototype.over=BigInteger.prototype.divide,BigInteger.prototype.mod=function(v){return divModAny(this,v)[1]},NativeBigInt.prototype.mod=NativeBigInt.prototype.remainder=function(v){return new NativeBigInt(this.value%parseValue(v).value)},SmallInteger.prototype.remainder=SmallInteger.prototype.mod=BigInteger.prototype.remainder=BigInteger.prototype.mod,BigInteger.prototype.pow=function(v){var value,x,y,n=parseValue(v),a=this.value,b=n.value;if(0===b)return Integer[1];if(0===a)return Integer[0];if(1===a)return Integer[1];if(-1===a)return n.isEven()?Integer[1]:Integer[-1];if(n.sign)return Integer[0];if(!n.isSmall)throw new Error("The exponent "+n.toString()+" is too large.");if(this.isSmall&&isPrecise(value=Math.pow(a,b)))return new SmallInteger(truncate(value));for(x=this,y=Integer[1];!0&b&&(y=y.times(x),--b),0!==b;)b/=2,x=x.square();return y},SmallInteger.prototype.pow=BigInteger.prototype.pow,NativeBigInt.prototype.pow=function(v){var n=parseValue(v),a=this.value,b=n.value,_0=BigInt(0),_1=BigInt(1),_2=BigInt(2);if(b===_0)return Integer[1];if(a===_0)return Integer[0];if(a===_1)return Integer[1];if(a===BigInt(-1))return n.isEven()?Integer[1]:Integer[-1];if(n.isNegative())return new NativeBigInt(_0);for(var x=this,y=Integer[1];(b&_1)===_1&&(y=y.times(x),--b),b!==_0;)b/=_2,x=x.square();return y},BigInteger.prototype.modPow=function(exp,mod){if(exp=parseValue(exp),(mod=parseValue(mod)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=Integer[1],base=this.mod(mod);for(exp.isNegative()&&(exp=exp.multiply(Integer[-1]),base=base.modInv(mod));exp.isPositive();){if(base.isZero())return Integer[0];exp.isOdd()&&(r=r.multiply(base).mod(mod)),exp=exp.divide(2),base=base.square().mod(mod)}return r},NativeBigInt.prototype.modPow=SmallInteger.prototype.modPow=BigInteger.prototype.modPow,BigInteger.prototype.compareAbs=function(v){var n=parseValue(v),a=this.value,b=n.value;return n.isSmall?1:compareAbs(a,b)},SmallInteger.prototype.compareAbs=function(v){var n=parseValue(v),a=Math.abs(this.value),b=n.value;return n.isSmall?(b=Math.abs(b),a===b?0:a>b?1:-1):-1},NativeBigInt.prototype.compareAbs=function(v){var a=this.value,b=parseValue(v).value;return(a=a>=0?a:-a)===(b=b>=0?b:-b)?0:a>b?1:-1},BigInteger.prototype.compare=function(v){if(v===1/0)return-1;if(v===-1/0)return 1;var n=parseValue(v),a=this.value,b=n.value;return this.sign!==n.sign?n.sign?1:-1:n.isSmall?this.sign?-1:1:compareAbs(a,b)*(this.sign?-1:1)},BigInteger.prototype.compareTo=BigInteger.prototype.compare,SmallInteger.prototype.compare=function(v){if(v===1/0)return-1;if(v===-1/0)return 1;var n=parseValue(v),a=this.value,b=n.value;return n.isSmall?a==b?0:a>b?1:-1:a<0!==n.sign?a<0?-1:1:a<0?1:-1},SmallInteger.prototype.compareTo=SmallInteger.prototype.compare,NativeBigInt.prototype.compare=function(v){if(v===1/0)return-1;if(v===-1/0)return 1;var a=this.value,b=parseValue(v).value;return a===b?0:a>b?1:-1},NativeBigInt.prototype.compareTo=NativeBigInt.prototype.compare,BigInteger.prototype.equals=function(v){return 0===this.compare(v)},NativeBigInt.prototype.eq=NativeBigInt.prototype.equals=SmallInteger.prototype.eq=SmallInteger.prototype.equals=BigInteger.prototype.eq=BigInteger.prototype.equals,BigInteger.prototype.notEquals=function(v){return 0!==this.compare(v)},NativeBigInt.prototype.neq=NativeBigInt.prototype.notEquals=SmallInteger.prototype.neq=SmallInteger.prototype.notEquals=BigInteger.prototype.neq=BigInteger.prototype.notEquals,BigInteger.prototype.greater=function(v){return this.compare(v)>0},NativeBigInt.prototype.gt=NativeBigInt.prototype.greater=SmallInteger.prototype.gt=SmallInteger.prototype.greater=BigInteger.prototype.gt=BigInteger.prototype.greater,BigInteger.prototype.lesser=function(v){return this.compare(v)<0},NativeBigInt.prototype.lt=NativeBigInt.prototype.lesser=SmallInteger.prototype.lt=SmallInteger.prototype.lesser=BigInteger.prototype.lt=BigInteger.prototype.lesser,BigInteger.prototype.greaterOrEquals=function(v){return this.compare(v)>=0},NativeBigInt.prototype.geq=NativeBigInt.prototype.greaterOrEquals=SmallInteger.prototype.geq=SmallInteger.prototype.greaterOrEquals=BigInteger.prototype.geq=BigInteger.prototype.greaterOrEquals,BigInteger.prototype.lesserOrEquals=function(v){return this.compare(v)<=0},NativeBigInt.prototype.leq=NativeBigInt.prototype.lesserOrEquals=SmallInteger.prototype.leq=SmallInteger.prototype.lesserOrEquals=BigInteger.prototype.leq=BigInteger.prototype.lesserOrEquals,BigInteger.prototype.isEven=function(){return 0==(1&this.value[0])},SmallInteger.prototype.isEven=function(){return 0==(1&this.value)},NativeBigInt.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},BigInteger.prototype.isOdd=function(){return 1==(1&this.value[0])},SmallInteger.prototype.isOdd=function(){return 1==(1&this.value)},NativeBigInt.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},BigInteger.prototype.isPositive=function(){return!this.sign},SmallInteger.prototype.isPositive=function(){return this.value>0},NativeBigInt.prototype.isPositive=SmallInteger.prototype.isPositive,BigInteger.prototype.isNegative=function(){return this.sign},SmallInteger.prototype.isNegative=function(){return this.value<0},NativeBigInt.prototype.isNegative=SmallInteger.prototype.isNegative,BigInteger.prototype.isUnit=function(){return!1},SmallInteger.prototype.isUnit=function(){return 1===Math.abs(this.value)},NativeBigInt.prototype.isUnit=function(){return this.abs().value===BigInt(1)},BigInteger.prototype.isZero=function(){return!1},SmallInteger.prototype.isZero=function(){return 0===this.value},NativeBigInt.prototype.isZero=function(){return this.value===BigInt(0)},BigInteger.prototype.isDivisibleBy=function(v){var n=parseValue(v);return!n.isZero()&&(!!n.isUnit()||(0===n.compareAbs(2)?this.isEven():this.mod(n).isZero()))},NativeBigInt.prototype.isDivisibleBy=SmallInteger.prototype.isDivisibleBy=BigInteger.prototype.isDivisibleBy,BigInteger.prototype.isPrime=function(strict){var isPrime=isBasicPrime(this);if(void 0!==isPrime)return isPrime;var n=this.abs(),bits=n.bitLength();if(bits<=64)return millerRabinTest(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var logN=Math.log(2)*bits.toJSNumber(),t=Math.ceil(!0===strict?2*Math.pow(logN,2):logN),a=[],i=0;i<t;i++)a.push(bigInt(i+2));return millerRabinTest(n,a)},NativeBigInt.prototype.isPrime=SmallInteger.prototype.isPrime=BigInteger.prototype.isPrime,BigInteger.prototype.isProbablePrime=function(iterations){var isPrime=isBasicPrime(this);if(void 0!==isPrime)return isPrime;for(var n=this.abs(),t=void 0===iterations?5:iterations,a=[],i=0;i<t;i++)a.push(bigInt.randBetween(2,n.minus(2)));return millerRabinTest(n,a)},NativeBigInt.prototype.isProbablePrime=SmallInteger.prototype.isProbablePrime=BigInteger.prototype.isProbablePrime,BigInteger.prototype.modInv=function(n){for(var q,lastT,lastR,t=bigInt.zero,newT=bigInt.one,r=parseValue(n),newR=this.abs();!newR.isZero();)q=r.divide(newR),lastT=t,lastR=r,t=newT,r=newR,newT=lastT.subtract(q.multiply(newT)),newR=lastR.subtract(q.multiply(newR));if(!r.isUnit())throw new Error(this.toString()+" and "+n.toString()+" are not co-prime");return-1===t.compare(0)&&(t=t.add(n)),this.isNegative()?t.negate():t},NativeBigInt.prototype.modInv=SmallInteger.prototype.modInv=BigInteger.prototype.modInv,BigInteger.prototype.next=function(){var value=this.value;return this.sign?subtractSmall(value,1,this.sign):new BigInteger(addSmall(value,1),this.sign)},SmallInteger.prototype.next=function(){var value=this.value;return value+1<MAX_INT?new SmallInteger(value+1):new BigInteger(MAX_INT_ARR,!1)},NativeBigInt.prototype.next=function(){return new NativeBigInt(this.value+BigInt(1))},BigInteger.prototype.prev=function(){var value=this.value;return this.sign?new BigInteger(addSmall(value,1),!0):subtractSmall(value,1,this.sign)},SmallInteger.prototype.prev=function(){var value=this.value;return value-1>-MAX_INT?new SmallInteger(value-1):new BigInteger(MAX_INT_ARR,!0)},NativeBigInt.prototype.prev=function(){return new NativeBigInt(this.value-BigInt(1))};for(var powersOfTwo=[1];2*powersOfTwo[powersOfTwo.length-1]<=BASE;)powersOfTwo.push(2*powersOfTwo[powersOfTwo.length-1]);var powers2Length=powersOfTwo.length,highestPower2=powersOfTwo[powers2Length-1];function shift_isSmall(n){return Math.abs(n)<=BASE}function bitwise(x,y,fn){y=parseValue(y);for(var xSign=x.isNegative(),ySign=y.isNegative(),xRem=xSign?x.not():x,yRem=ySign?y.not():y,xDigit=0,yDigit=0,xDivMod=null,yDivMod=null,result=[];!xRem.isZero()||!yRem.isZero();)xDivMod=divModAny(xRem,highestPower2),xDigit=xDivMod[1].toJSNumber(),xSign&&(xDigit=highestPower2-1-xDigit),yDivMod=divModAny(yRem,highestPower2),yDigit=yDivMod[1].toJSNumber(),ySign&&(yDigit=highestPower2-1-yDigit),xRem=xDivMod[0],yRem=yDivMod[0],result.push(fn(xDigit,yDigit));for(var sum=0!==fn(xSign?1:0,ySign?1:0)?bigInt(-1):bigInt(0),i=result.length-1;i>=0;i-=1)sum=sum.multiply(highestPower2).add(bigInt(result[i]));return sum}BigInteger.prototype.shiftLeft=function(v){var n=parseValue(v).toJSNumber();if(!shift_isSmall(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftRight(-n);var result=this;if(result.isZero())return result;for(;n>=powers2Length;)result=result.multiply(highestPower2),n-=powers2Length-1;return result.multiply(powersOfTwo[n])},NativeBigInt.prototype.shiftLeft=SmallInteger.prototype.shiftLeft=BigInteger.prototype.shiftLeft,BigInteger.prototype.shiftRight=function(v){var remQuo,n=parseValue(v).toJSNumber();if(!shift_isSmall(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftLeft(-n);for(var result=this;n>=powers2Length;){if(result.isZero()||result.isNegative()&&result.isUnit())return result;remQuo=divModAny(result,highestPower2),result=remQuo[1].isNegative()?remQuo[0].prev():remQuo[0],n-=powers2Length-1}return(remQuo=divModAny(result,powersOfTwo[n]))[1].isNegative()?remQuo[0].prev():remQuo[0]},NativeBigInt.prototype.shiftRight=SmallInteger.prototype.shiftRight=BigInteger.prototype.shiftRight,BigInteger.prototype.not=function(){return this.negate().prev()},NativeBigInt.prototype.not=SmallInteger.prototype.not=BigInteger.prototype.not,BigInteger.prototype.and=function(n){return bitwise(this,n,function(a,b){return a&b})},NativeBigInt.prototype.and=SmallInteger.prototype.and=BigInteger.prototype.and,BigInteger.prototype.or=function(n){return bitwise(this,n,function(a,b){return a|b})},NativeBigInt.prototype.or=SmallInteger.prototype.or=BigInteger.prototype.or,BigInteger.prototype.xor=function(n){return bitwise(this,n,function(a,b){return a^b})},NativeBigInt.prototype.xor=SmallInteger.prototype.xor=BigInteger.prototype.xor;var LOBMASK_I=1<<30,LOBMASK_BI=(BASE&-BASE)*(BASE&-BASE)|LOBMASK_I;function roughLOB(n){var v=n.value,x="number"==typeof v?v|LOBMASK_I:"bigint"==typeof v?v|BigInt(LOBMASK_I):v[0]+v[1]*BASE|LOBMASK_BI;return x&-x}function max(a,b){return a=parseValue(a),b=parseValue(b),a.greater(b)?a:b}function min(a,b){return a=parseValue(a),b=parseValue(b),a.lesser(b)?a:b}function gcd(a,b){if(a=parseValue(a).abs(),b=parseValue(b).abs(),a.equals(b))return a;if(a.isZero())return b;if(b.isZero())return a;for(var d,t,c=Integer[1];a.isEven()&&b.isEven();)d=min(roughLOB(a),roughLOB(b)),a=a.divide(d),b=b.divide(d),c=c.multiply(d);for(;a.isEven();)a=a.divide(roughLOB(a));do{for(;b.isEven();)b=b.divide(roughLOB(b));a.greater(b)&&(t=b,b=a,a=t),b=b.subtract(a)}while(!b.isZero());return c.isUnit()?a:a.multiply(c)}BigInteger.prototype.bitLength=function(){var n=this;return n.compareTo(bigInt(0))<0&&(n=n.negate().subtract(bigInt(1))),0===n.compareTo(bigInt(0))?bigInt(0):bigInt(function integerLogarithm(value,base){if(base.compareTo(value)<=0){var tmp=integerLogarithm(value,base.square(base)),p=tmp.p,e=tmp.e,t=p.multiply(base);return t.compareTo(value)<=0?{p:t,e:2*e+1}:{p:p,e:2*e}}return{p:bigInt(1),e:0}}(n,bigInt(2)).e).add(bigInt(1))},NativeBigInt.prototype.bitLength=SmallInteger.prototype.bitLength=BigInteger.prototype.bitLength;var parseBase=function(text,base,alphabet,caseSensitive){alphabet=alphabet||DEFAULT_ALPHABET,text=String(text),caseSensitive||(text=text.toLowerCase(),alphabet=alphabet.toLowerCase());var i,length=text.length,absBase=Math.abs(base),alphabetValues={};for(i=0;i<alphabet.length;i++)alphabetValues[alphabet[i]]=i;for(i=0;i<length;i++){var c=text[i];if("-"!==c&&c in alphabetValues&&alphabetValues[c]>=absBase){if("1"===c&&1===absBase)continue;throw new Error(c+" is not a valid digit in base "+base+".")}}base=parseValue(base);var digits=[],isNegative="-"===text[0];for(i=isNegative?1:0;i<text.length;i++){var c=text[i];if(c in alphabetValues)digits.push(parseValue(alphabetValues[c]));else{if("<"!==c)throw new Error(c+" is not a valid character");var start=i;do{i++}while(">"!==text[i]&&i<text.length);digits.push(parseValue(text.slice(start+1,i)))}}return parseBaseFromArray(digits,base,isNegative)};function parseBaseFromArray(digits,base,isNegative){var i,val=Integer[0],pow=Integer[1];for(i=digits.length-1;i>=0;i--)val=val.add(digits[i].times(pow)),pow=pow.times(base);return isNegative?val.negate():val}function toBase(n,base){if((base=bigInt(base)).isZero()){if(n.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(base.equals(-1)){if(n.isZero())return{value:[0],isNegative:!1};if(n.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-n.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var arr=Array.apply(null,Array(n.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return arr.unshift([1]),{value:[].concat.apply([],arr),isNegative:!1}}var neg=!1;if(n.isNegative()&&base.isPositive()&&(neg=!0,n=n.abs()),base.isUnit())return n.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(n.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:neg};for(var divmod,out=[],left=n;left.isNegative()||left.compareAbs(base)>=0;){divmod=left.divmod(base),left=divmod.quotient;var digit=divmod.remainder;digit.isNegative()&&(digit=base.minus(digit).abs(),left=left.next()),out.push(digit.toJSNumber())}return out.push(left.toJSNumber()),{value:out.reverse(),isNegative:neg}}function toBaseString(n,base,alphabet){var arr=toBase(n,base);return(arr.isNegative?"-":"")+arr.value.map(function(x){return function(digit,alphabet){return digit<(alphabet=alphabet||DEFAULT_ALPHABET).length?alphabet[digit]:"<"+digit+">"}(x,alphabet)}).join("")}function parseStringValue(v){if(isPrecise(+v)){var x=+v;if(x===truncate(x))return supportsNativeBigInt?new NativeBigInt(BigInt(x)):new SmallInteger(x);throw new Error("Invalid integer: "+v)}var sign="-"===v[0];sign&&(v=v.slice(1));var split=v.split(/e/i);if(split.length>2)throw new Error("Invalid integer: "+split.join("e"));if(2===split.length){var exp=split[1];if("+"===exp[0]&&(exp=exp.slice(1)),(exp=+exp)!==truncate(exp)||!isPrecise(exp))throw new Error("Invalid integer: "+exp+" is not a valid exponent.");var text=split[0],decimalPlace=text.indexOf(".");if(decimalPlace>=0&&(exp-=text.length-decimalPlace-1,text=text.slice(0,decimalPlace)+text.slice(decimalPlace+1)),exp<0)throw new Error("Cannot include negative exponent part for integers");text+=new Array(exp+1).join("0"),v=text}var isValid=/^([0-9][0-9]*)$/.test(v);if(!isValid)throw new Error("Invalid integer: "+v);if(supportsNativeBigInt)return new NativeBigInt(BigInt(sign?"-"+v:v));for(var r=[],max=v.length,l=LOG_BASE,min=max-l;max>0;)r.push(+v.slice(min,max)),(min-=l)<0&&(min=0),max-=l;return trim(r),new BigInteger(r,sign)}function parseValue(v){return"number"==typeof v?function(v){if(supportsNativeBigInt)return new NativeBigInt(BigInt(v));if(isPrecise(v)){if(v!==truncate(v))throw new Error(v+" is not an integer.");return new SmallInteger(v)}return parseStringValue(v.toString())}(v):"string"==typeof v?parseStringValue(v):"bigint"==typeof v?new NativeBigInt(v):v}BigInteger.prototype.toArray=function(radix){return toBase(this,radix)},SmallInteger.prototype.toArray=function(radix){return toBase(this,radix)},NativeBigInt.prototype.toArray=function(radix){return toBase(this,radix)},BigInteger.prototype.toString=function(radix,alphabet){if(void 0===radix&&(radix=10),10!==radix)return toBaseString(this,radix,alphabet);for(var digit,v=this.value,l=v.length,str=String(v[--l]);--l>=0;)digit=String(v[l]),str+="0000000".slice(digit.length)+digit;var sign=this.sign?"-":"";return sign+str},SmallInteger.prototype.toString=function(radix,alphabet){return void 0===radix&&(radix=10),10!=radix?toBaseString(this,radix,alphabet):String(this.value)},NativeBigInt.prototype.toString=SmallInteger.prototype.toString,NativeBigInt.prototype.toJSON=BigInteger.prototype.toJSON=SmallInteger.prototype.toJSON=function(){return this.toString()},BigInteger.prototype.valueOf=function(){return parseInt(this.toString(),10)},BigInteger.prototype.toJSNumber=BigInteger.prototype.valueOf,SmallInteger.prototype.valueOf=function(){return this.value},SmallInteger.prototype.toJSNumber=SmallInteger.prototype.valueOf,NativeBigInt.prototype.valueOf=NativeBigInt.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var i=0;i<1e3;i++)Integer[i]=parseValue(i),i>0&&(Integer[-i]=parseValue(-i));return Integer.one=Integer[1],Integer.zero=Integer[0],Integer.minusOne=Integer[-1],Integer.max=max,Integer.min=min,Integer.gcd=gcd,Integer.lcm=function(a,b){return a=parseValue(a).abs(),b=parseValue(b).abs(),a.divide(gcd(a,b)).multiply(b)},Integer.isInstance=function(x){return x instanceof BigInteger||x instanceof SmallInteger||x instanceof NativeBigInt},Integer.randBetween=function(a,b){a=parseValue(a),b=parseValue(b);var low=min(a,b),range=max(a,b).subtract(low).add(1);if(range.isSmall)return low.add(Math.floor(Math.random()*range));for(var digits=toBase(range,BASE).value,result=[],restricted=!0,i=0;i<digits.length;i++){var top=restricted?digits[i]:BASE,digit=truncate(Math.random()*top);result.push(digit),digit<top&&(restricted=!1)}return low.add(Integer.fromArray(result,BASE,!1))},Integer.fromArray=function(digits,base,isNegative){return parseBaseFromArray(digits.map(parseValue),parseValue(base||10),isNegative)},Integer}();__webpack_exports__.default=bigInt},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CEvent",function(){return CEvent});var _hash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),CEvent=function(){function CEvent(evename,dispatcher,agv){this.m_sEveName=evename,this.m_Dispatcher=dispatcher,this.m_Agv=agv,this.m_Stop=!1}return Object.defineProperty(CEvent.prototype,"bind",{get:function(){return this.m_Bind},set:function(val){this.m_Bind=val},enumerable:!0,configurable:!0}),Object.defineProperty(CEvent.prototype,"evename",{get:function(){return this.m_sEveName},enumerable:!0,configurable:!0}),Object.defineProperty(CEvent.prototype,"dispatcher",{get:function(){return this.m_Dispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(CEvent.prototype,"agv",{get:function(){return this.m_Agv},enumerable:!0,configurable:!0}),CEvent.prototype.stopFollowUp=function(){this.m_Stop=!0},Object.defineProperty(CEvent.prototype,"willstop",{get:function(){return this.m_Stop},enumerable:!0,configurable:!0}),CEvent.prototype.OnClearData=function(){this.m_sEveName="",this.m_Dispatcher=null,this.m_Agv=void 0,this.m_Stop=!1},CEvent}(),CEventListenerNode=function(){function CEventListenerNode(evename,obj,func,once,bind){this.m_nEveID=_hash__WEBPACK_IMPORTED_MODULE_0__.default.str2key(evename),this.m_sEveName=evename,this.m_Ctx=obj,this.m_Func=func,this.m_Bind=bind,this.m_bOnce=once,this.m_bDelThis=!1}return CEventListenerNode.prototype.call=function(evt){evt.bind=this.m_Bind,this.m_Func.call(this.m_Ctx,evt)},CEventListenerNode}(),CEventDispatcher=function(){function CEventDispatcher(){this.m_nDispatching=0,this.m_szEventListener=new Array,this.m_szWillAdd=new Array,this.m_szWillRemove=new Array}return CEventDispatcher.prototype.clearEventListener=function(){this.m_szEventListener=new Array,this.m_szWillAdd=new Array,this.m_szWillRemove=new Array,this.m_nDispatching=0},CEventDispatcher.prototype._addEventListener=function(evename,obj,func,once,bind){var node=new CEventListenerNode(evename,obj,func,once,bind);if(this.m_nDispatching>0)this.m_szWillAdd.push(node);else{for(var nodes=this.m_szEventListener,len=nodes.length,i=0;i<len;i++){var cnode=nodes[i];if(cnode.m_sEveName==evename&&cnode.m_Ctx==obj)return}nodes.push(node)}},CEventDispatcher.prototype.addEventListener=function(evename,obj,func,bind){return void 0===bind&&(bind=void 0),this._addEventListener(evename,obj,func,!1,bind)},CEventDispatcher.prototype.addOnceEventListener=function(evename,obj,func,bind){return void 0===bind&&(bind=void 0),this._addEventListener(evename,obj,func,!0,bind)},CEventDispatcher.prototype._chkDispatchingRemove=function(evename,obj){var node,i=0,nodes=this.m_szWillAdd,len=nodes.length;for(i=0;i<len;i++)if((node=nodes[i]).m_sEveName===evename&&node.m_Ctx==obj)return void nodes.splice(i,1);for(nodes=this.m_szEventListener,len=nodes.length,i=0;i<len;i++)if((node=nodes[i]).m_sEveName===evename&&node.m_Ctx==obj){node.m_bDelThis=!0;break}this.m_szWillRemove.push({evename:evename,obj:obj})},CEventDispatcher.prototype.removeEventListener=function(evename,obj){if(!(this.m_nDispatching>0)){for(var nodes=this.m_szEventListener,len=nodes.length,i=0;i<len;i++){var node=nodes[i];if(node.m_sEveName===evename&&node.m_Ctx==obj)return nodes.splice(i,1),!0}return!1}this._chkDispatchingRemove(evename,obj)},CEventDispatcher.prototype._dispatchEventEnd=function(){var i,rm_nodes=this.m_szWillRemove,len=rm_nodes.length;for(i=0;i<len;i++){var rm_node=rm_nodes[i];this.removeEventListener(rm_node.evename,rm_node.obj)}this.m_szWillRemove=new Array;var nodes=this.m_szWillAdd;for(len=nodes.length,i=0;i<len;i++){var node=nodes[i];this._addEventListener(node.m_sEveName,node.m_Ctx,node.m_Func,node.m_bOnce,node.m_Bind)}this.m_szWillAdd=new Array},CEventDispatcher.prototype.dispatchEvent=function(evename,agv){var i;void 0===agv&&(agv=void 0),++this.m_nDispatching;var node,evt=new CEvent(evename,this,agv),chg=!1,rm_list=new Array,nodes=this.m_szEventListener,len=nodes.length;for(i=0;i<len;i++)if((node=nodes[i]).m_bDelThis)rm_list.push(node),chg=!0;else if(node.m_sEveName===evename&&(node.call(evt),node.m_bOnce&&(rm_list.push(node),chg=!0),evt.willstop))break;if(chg)for(len=rm_list.length,i=0;i<len;i++)node=rm_list[i],this.removeEventListener(node.m_sEveName,node.m_Ctx);0==--this.m_nDispatching&&this._dispatchEventEnd()},CEventDispatcher}();__webpack_exports__.default=CEventDispatcher},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _bytearray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_md5__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),__crc32_table__=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],hash=function(){function hash(){}return hash.unsigned=function(num){return num<0?num>>>0:num},hash.str2key=function(str){if(null==str||null==str||0==str.length)return 0;var c,hash_val=2863311530,bytes=new _bytearray__WEBPACK_IMPORTED_MODULE_0__.default;bytes.writeUTF8(str),bytes.position=0;for(var len=bytes.bytesAvailable,i=0;i<len;i++)c=bytes.readByte(),hash_val^=0==(1&i)?hash_val<<7^c^hash_val>>>3:~((hash_val<<11)+(c^hash_val>>>5));return hash.unsigned(hash_val)},hash.crc32=function(buf,previous){for(var table=__crc32_table__,crc=-1^~~previous,len=buf.bytesAvailable,n=0;n<len;n++)crc=table[255&(crc^buf.readByte())]^crc>>>8;return(-1^crc)>>>0},hash.adler32=function(buf,previous){for(var s1=65535&previous,s2=previous>>>16&65535,len=buf.bytesAvailable;len>0;){var k=len<5552?len:5552;for(len-=k;k>=16;){for(var i=0;i<16;i++)s1+=buf.readByte(),s2+=s1;k-=16}if(0!=k)do{s1+=buf.readByte(),s2+=s1}while(--k);s1%=65521,s2%=65521}return s2<<16|s1},hash.Address2Array=function(sname,gname,objidxh,objidxl){void 0===objidxh&&(objidxh=0),void 0===objidxl&&(objidxl=0);var addr=[hash.str2key(sname)];return(gname.length>0||objidxh>0||objidxl>0)&&addr.push(hash.str2key(gname)),(objidxh>0||objidxl>0)&&(addr.push(objidxh),addr.push(objidxl)),addr},hash.md5=function(val){var bytes=_md5__WEBPACK_IMPORTED_MODULE_1__.default.val2Bytes(val);return _md5__WEBPACK_IMPORTED_MODULE_1__.default.hash(bytes)},hash.md5_hmac=function(key,val){var bkey=_md5__WEBPACK_IMPORTED_MODULE_1__.default.val2Bytes(key),bytes=_md5__WEBPACK_IMPORTED_MODULE_1__.default.val2Bytes(val);return _md5__WEBPACK_IMPORTED_MODULE_1__.default.hash_hmac(bkey,bytes)},hash}();__webpack_exports__.default=hash},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var VALUE_CODEC_MASK,_gconst__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_trace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_bitwise__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_BigInteger__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8);!function(VALUE_CODEC_MASK){VALUE_CODEC_MASK[VALUE_CODEC_MASK.VCM_INTLIMIT=0]="VCM_INTLIMIT",VALUE_CODEC_MASK[VALUE_CODEC_MASK.VCM_NODATETIME=1]="VCM_NODATETIME"}(VALUE_CODEC_MASK||(VALUE_CODEC_MASK={}));var CByteArray=function(){function CByteArray(){this.m_nGTPMask=0,this.m_bUseDateTimeMS=!1,this.m_bRawInt64=!1,this.m_bParseDate=!0,this.m_nLength=0,this.m_nPosition=0,this.m_nAllocatedLen=16,this.m_Data=new Uint8Array(16),this.m_DataView=new DataView(this.m_Data.buffer),this.gtpMask=0}return Object.defineProperty(CByteArray.prototype,"gtpMask",{set:function(val){this.m_nGTPMask=val,this.m_bRawInt64=!_bitwise__WEBPACK_IMPORTED_MODULE_2__.default.int32getbit(this.m_nGTPMask,VALUE_CODEC_MASK.VCM_INTLIMIT),this.m_bUseDateTimeMS=!_bitwise__WEBPACK_IMPORTED_MODULE_2__.default.int32getbit(this.m_nGTPMask,VALUE_CODEC_MASK.VCM_NODATETIME)},enumerable:!0,configurable:!0}),Object.defineProperty(CByteArray.prototype,"useDateTimeMS",{get:function(){return this.m_bUseDateTimeMS},enumerable:!0,configurable:!0}),Object.defineProperty(CByteArray.prototype,"useRawInt64",{get:function(){return this.m_bRawInt64},set:function(val){this.m_bRawInt64=val},enumerable:!0,configurable:!0}),Object.defineProperty(CByteArray.prototype,"useParseDate",{get:function(){return this.m_bParseDate},set:function(val){this.m_bParseDate=val},enumerable:!0,configurable:!0}),CByteArray.prototype.ensureWrite=function(lengthToEnsure){this.m_nLength<lengthToEnsure&&(this.length=lengthToEnsure)},CByteArray.prototype.resizeBuffer=function(len){try{var newByteView=new Uint8Array(len);this.m_Data.length<=len?newByteView.set(this.m_Data):newByteView.set(this.m_Data.subarray(0,len)),this.m_Data=newByteView,this.m_DataView=new DataView(newByteView.buffer),this.m_nAllocatedLen=len}catch(err){throw"CByteArray::resizeBuffer err:"+len}},Object.defineProperty(CByteArray.prototype,"length",{get:function(){return this.m_nLength},set:function(value){if(this.m_nAllocatedLen<value){var len=Math.floor(Math.max(value,2*this.m_nAllocatedLen));this.resizeBuffer(len)}this.m_nLength=value},enumerable:!0,configurable:!0}),Object.defineProperty(CByteArray.prototype,"bytesAvailable",{get:function(){return this.m_nLength-this.m_nPosition},enumerable:!0,configurable:!0}),Object.defineProperty(CByteArray.prototype,"position",{get:function(){return this.m_nPosition},set:function(pos){pos<this.m_nLength?this.m_nPosition=pos<0?0:pos:(this.m_nPosition=pos,this.length=pos)},enumerable:!0,configurable:!0}),CByteArray.prototype.clear=function(){this.m_nPosition=0,this.m_nLength=0},CByteArray.prototype.getBuffer=function(clone){if(void 0===clone&&(clone=!1),!clone)return this.m_Data.buffer;var tmp=new Uint8Array(this.m_nLength);return tmp.set(this.m_Data.subarray(0,this.m_nLength)),tmp.buffer},CByteArray.prototype.removeFront=function(len){if(len<0)throw"popFront error - Out of bounds";if(0!=len){if(len==this.m_nLength)return this.m_nLength=0,void(this.m_nPosition=0);this.m_Data.set(this.m_Data,len),this.m_nPosition=Math.max(0,this.m_nPosition-len),this.m_nLength-=len}},CByteArray.prototype.getByte=function(pos){return this.m_DataView.getUint8(pos)},CByteArray.prototype.setByte=function(pos,v){this.m_DataView.setUint8(pos,v)},CByteArray.prototype.readChar=function(){return this.m_DataView.getInt8(this.m_nPosition++)},CByteArray.prototype.readByte=function(){return this.m_DataView.getUint8(this.m_nPosition++)},CByteArray.prototype.readBytes=function(len){void 0===len&&(len=0),len=len<=0?this.m_nLength-this.m_nPosition:Math.min(len,this.m_nLength-this.m_nPosition);var bytes=new CByteArray;return bytes.m_bParseDate=this.m_bParseDate,bytes.gtpMask=this.m_nGTPMask,bytes.ensureWrite(len),bytes.m_Data.set(this.m_Data.subarray(this.m_nPosition,this.m_nPosition+len)),this.m_nPosition+=len,bytes.m_nLength=len,bytes},CByteArray.prototype.readUint8Array=function(len){void 0===len&&(len=0),len=len<=0?this.m_nLength-this.m_nPosition:Math.min(len,this.m_nLength-this.m_nPosition);var bytes=this.m_Data.subarray(this.m_nPosition,this.m_nPosition+len);return this.m_nPosition+=len,bytes},CByteArray.prototype.readUInt29=function(){var value=0,b=255&this.readByte();return b<128?b:(value=(127&b)<<7,(b=255&this.readByte())<128?value|b:(value=(value|127&b)<<7,(b=255&this.readByte())<128?value|b:(value=(value|127&b)<<8,b=255&this.readByte(),value|b)))},CByteArray.prototype.readInt=function(mvpos){void 0===mvpos&&(mvpos=!0);var val=this.m_DataView.getInt32(this.m_nPosition,!0);return mvpos&&(this.m_nPosition+=4),val},CByteArray.prototype.readUInt=function(mvpos){void 0===mvpos&&(mvpos=!0);var val=this.m_DataView.getUint32(this.m_nPosition,!0);return mvpos&&(this.m_nPosition+=4),val},CByteArray.prototype.readInt64=function(){if(this.m_bRawInt64){for(var bytes=[],i=0;i<8;i++)bytes.push(this.readByte());return _bitwise__WEBPACK_IMPORTED_MODULE_2__.default.bytestoint64(bytes)}var len=this.readUInt29();return 0==len?Object(_BigInteger__WEBPACK_IMPORTED_MODULE_3__.default)(0):Object(_BigInteger__WEBPACK_IMPORTED_MODULE_3__.default)(this.readUTF8(len))},CByteArray.prototype.readInt64Ex=function(){var int64_ret=this.readInt64();return int64_ret.greaterOrEquals(-9007199254740991)&&int64_ret.lesserOrEquals(9007199254740991)?int64_ret.toJSNumber():int64_ret},CByteArray.prototype.readDate=function(type){void 0===type&&(type=_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DATE);var int64_ret=this.readInt64();return type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DATE&&(int64_ret=int64_ret.multiply(1e3)),this.m_bParseDate?new Date(int64_ret.toJSNumber()):this.m_bUseDateTimeMS?int64_ret.toJSNumber():int64_ret.divide(1e3).toJSNumber()},CByteArray.prototype.readUTF8=function(len){var fromCodePoint=String.fromCodePoint;null==fromCodePoint&&(fromCodePoint=_utils__WEBPACK_IMPORTED_MODULE_4__.default.utf8_2_utf16_char);for(var value="",end=this.m_nPosition+len,c1=0,c2=0,c3=0,c4=0,c5=0,c6=0;this.m_nPosition<end;)if((c1=this.m_DataView.getUint8(this.m_nPosition++))<=127){if(0==c1)break;value+=fromCodePoint(c1)}else if(192==(224&c1))c2=this.m_DataView.getUint8(this.m_nPosition++),value+=fromCodePoint((31&c1)<<6|63&c2);else if(224==(240&c1))c2=this.m_DataView.getUint8(this.m_nPosition++),c3=this.m_DataView.getUint8(this.m_nPosition++),value+=fromCodePoint((15&c1)<<12|(63&c2)<<6|63&c3);else if(240==(248&c1))c2=this.m_DataView.getUint8(this.m_nPosition++),c3=this.m_DataView.getUint8(this.m_nPosition++),c4=this.m_DataView.getUint8(this.m_nPosition++),value+=fromCodePoint((7&c1)<<18|(63&c2)<<12|(63&c3)<<6|63&c4);else if(248==(252&c1))c2=this.m_DataView.getUint8(this.m_nPosition++),c3=this.m_DataView.getUint8(this.m_nPosition++),c4=this.m_DataView.getUint8(this.m_nPosition++),c5=this.m_DataView.getUint8(this.m_nPosition++),value+=fromCodePoint((3&c1)<<24|(63&c2)<<12|(63&c3)<<12|(63&c4)<<6|63&c5);else{if(252!=(254&c1))throw RangeError("Illegal starting byte: "+c1);c2=this.m_DataView.getUint8(this.m_nPosition++),c3=this.m_DataView.getUint8(this.m_nPosition++),c4=this.m_DataView.getUint8(this.m_nPosition++),c5=this.m_DataView.getUint8(this.m_nPosition++),c6=this.m_DataView.getUint8(this.m_nPosition++),value+=fromCodePoint((1&c1)<<30|(63&c2)<<24|(63&c3)<<18|(63&c4)<<12|(63&c5)<<6|63&c6)}return value},CByteArray.prototype.writeChar=function(val){this.ensureWrite(this.m_nPosition+1),this.m_DataView.setInt8(this.m_nPosition,val),this.m_nPosition+=1},CByteArray.prototype.writeByte=function(val){this.ensureWrite(this.m_nPosition+1),this.m_DataView.setUint8(this.m_nPosition,val),this.m_nPosition+=1},CByteArray.prototype.writeBytes=function(bytes){var len=bytes.bytesAvailable;0!=len&&(this.ensureWrite(this.m_nPosition+len),this.m_Data.set(bytes.m_Data.subarray(0,len),this.m_nPosition),this.m_nPosition+=len)},CByteArray.prototype.writeArrayBuffer=function(val,len){void 0===len&&(len=0),len<=0&&(len=val.byteLength),this.ensureWrite(this.m_nPosition+len);var b=new Uint8Array(val);len!=val.byteLength?this.m_Data.set(b.subarray(0,len),this.m_nPosition):this.m_Data.set(b,this.m_nPosition),this.m_nPosition+=len},CByteArray.prototype.writeUInt29=function(val){if(val<128)this.writeByte(val);else if(val<16384)this.writeByte(val>>7&127|128),this.writeByte(127&val);else if(val<2097152)this.writeByte(val>>14&127|128),this.writeByte(val>>7&127|128),this.writeByte(127&val);else{if(!(val<1073741824))throw"Integer out of range: "+val;this.writeByte(val>>22&127|128),this.writeByte(val>>15&127|128),this.writeByte(val>>8&127|128),this.writeByte(255&val)}},CByteArray.prototype.writeInt=function(val){this.ensureWrite(this.m_nPosition+4),this.m_DataView.setInt32(this.m_nPosition,val,!0),this.m_nPosition+=4},CByteArray.prototype.writeUint=function(val){this.ensureWrite(this.m_nPosition+4),this.m_DataView.setUint32(this.m_nPosition,val,!0),this.m_nPosition+=4},CByteArray.prototype.writeInt64=function(val){this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_INT64),this.writeInt64Val(val)},CByteArray.prototype.writeInt64Val=function(val){var i;if(this.m_bRawInt64){var bytes=_bitwise__WEBPACK_IMPORTED_MODULE_2__.default.int64tobytes(val);if(null==bytes)for(_trace__WEBPACK_IMPORTED_MODULE_1__.default.error("negative bigInt is too large."+val.toString()),i=0;i<8;i++)this.writeByte(0);else for(i=0;i<bytes.length;i++)this.writeByte(bytes[i])}else{var str_val=val.toString();this.writeUInt29(_utils__WEBPACK_IMPORTED_MODULE_4__.default.UTF8Len(str_val)),this.writeUTF8(str_val)}},CByteArray.prototype.writeUTF8=function(val){for(var i=0,sz=val.length;i<sz;i++){var c=val.charCodeAt(i);c<=127?this.writeByte(c):c<=2047?(this.writeByte(192|c>>6),this.writeByte(128|63&c)):c<=65535?(this.writeByte(224|c>>12),this.writeByte(128|c>>6&63),this.writeByte(128|63&c)):c<=2097151?(this.writeByte(240|c>>18),this.writeByte(128|c>>12&63),this.writeByte(128|c>>6&63),this.writeByte(128|63&c)):c<=67108863?(this.writeByte(248|c>>24),this.writeByte(128|c>>18&63),this.writeByte(128|c>>12&63),this.writeByte(128|c>>6&63),this.writeByte(128|63&c)):c<=2147483647&&(this.writeByte(252|c>>30),this.writeByte(128|c>>24&63),this.writeByte(128|c>>18&63),this.writeByte(128|c>>12&63),this.writeByte(128|c>>6&63),this.writeByte(128|63&c))}},CByteArray.prototype.readValue=function(objRef){var len,i,bytes,ele_num,type=this.readByte();if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_NULL)return null;if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_BOOL)return 1==this.readByte();if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_BYTE)return this.readByte();if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_INT32){var int_ret=this.readInt();return null!=objRef&&objRef.push(int_ret),int_ret}if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_INT64){var int64_ret=this.readInt64Ex();return null!=objRef&&objRef.push(int64_ret),int64_ret}if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DOUBLE){if(0==(len=this.readUInt29()))return 0;var double_ret=parseFloat(this.readUTF8(len));return null!=objRef&&objRef.push(double_ret),double_ret}if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_STRING){if(0==(len=this.readUInt29()))return"";var str_ret=this.readUTF8(len);return null!=objRef&&objRef.push(str_ret),str_ret}if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DATE||type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DATETIME){var date_ret=this.readDate(type);return null!=objRef&&objRef.push(date_ret),date_ret}if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_BIN){if(0==(len=this.readUInt29()))return new CByteArray;var bin_ret=this.readBytes(len);return null!=objRef&&objRef.push(bin_ret),bin_ret}if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_OBJREF&&null!=objRef){var ref=this.readUInt29();if(ref>=0&&ref<objRef.length)return objRef[ref];throw"obj reference out of range"}if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_ARRAY){var array_ret=[];if(0==(len=this.readUInt29()))return array_ret;for((bytes=this.readBytes(len)).position=0,ele_num=bytes.readUInt29(),i=0;i<ele_num;i++)array_ret.push(bytes.readValue(objRef));return null!=objRef&&objRef.push(array_ret),array_ret}if(type==_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DICT){var obj_ret={};if(0==(len=this.readUInt29()))return obj_ret;for((bytes=this.readBytes(len)).position=0,ele_num=bytes.readUInt29(),i=0;i<ele_num;i++){var key=bytes.readValue(objRef),val=bytes.readValue(objRef);"string"==typeof key&&(obj_ret[key]=val)}return null!=objRef&&objRef.push(obj_ret),obj_ret}throw"ReadValue unknown type "+type},CByteArray.chkCanWrite=function(val){var tname=void 0===val?"undefined":_typeof(val);return"boolean"===tname||"string"==tname||"number"==tname||"object"==tname},CByteArray.prototype.writeValue=function(val){var str_val,tname=void 0===val?"undefined":_typeof(val);if("boolean"===tname)return this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_BOOL),this.writeByte(~~val),!0;if("string"==tname)return str_val=val.toString(),this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_STRING),this.writeUInt29(_utils__WEBPACK_IMPORTED_MODULE_4__.default.UTF8Len(str_val)),this.writeUTF8(str_val),!0;if("number"==tname)return(str_val=val.toString()).indexOf(".")>-1?(this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DOUBLE),this.writeUInt29(_utils__WEBPACK_IMPORTED_MODULE_4__.default.UTF8Len(str_val)),this.writeUTF8(str_val)):val>2147483647||val<-2147483648?this.writeInt64(Object(_BigInteger__WEBPACK_IMPORTED_MODULE_3__.default)(val)):(this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_INT32),this.writeInt(val)),!0;if("object"==tname){if(null===val)return this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_NULL),!0;if(val instanceof Boolean)return this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_BOOL),this.writeByte(~~val),!0;if(val instanceof String)return str_val=val.toString(),this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_STRING),this.writeUInt29(_utils__WEBPACK_IMPORTED_MODULE_4__.default.UTF8Len(str_val)),this.writeUTF8(str_val),!0;if(_BigInteger__WEBPACK_IMPORTED_MODULE_3__.default.isInstance(val))return this.writeInt64(val),!0;if(val instanceof Number)return(str_val=val.toString()).indexOf(".")>-1?(this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DOUBLE),this.writeUInt29(_utils__WEBPACK_IMPORTED_MODULE_4__.default.UTF8Len(str_val)),this.writeUTF8(str_val)):val>2147483647||val<-2147483648?this.writeInt64(Object(_BigInteger__WEBPACK_IMPORTED_MODULE_3__.default)(str_val)):(this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_INT32),this.writeInt(parseInt(str_val))),!0;if(val instanceof Date){var time_val=Object(_BigInteger__WEBPACK_IMPORTED_MODULE_3__.default)(val.getTime());return this.m_bUseDateTimeMS?this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DATETIME):(this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DATE),time_val=time_val.divide(1e3)),this.writeInt64Val(time_val),!0}if(val instanceof CByteArray){var bin_val=val;return this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_BIN),bin_val.position=0,this.writeUInt29(bin_val.length),this.writeBytes(bin_val),!0}var i,bytes;if(val instanceof Array){for((bytes=new CByteArray).m_bUseDateTimeMS=this.m_bUseDateTimeMS,bytes.m_bRawInt64=this.m_bRawInt64,bytes.writeUInt29(val.length),i=0;i<val.length;i++)bytes.writeValue(val[i]);return bytes.position=0,this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_ARRAY),this.writeUInt29(bytes.length),this.writeBytes(bytes),!0}var key,keys=[];for(key in val){var elem=val[key];"string"==typeof key&&CByteArray.chkCanWrite(elem)&&keys.push(key)}for((bytes=new CByteArray).m_bUseDateTimeMS=this.m_bUseDateTimeMS,bytes.m_bRawInt64=this.m_bRawInt64,bytes.writeUInt29(keys.length),i=0;i<keys.length;i++)key=keys[i],bytes.writeValue(key),bytes.writeValue(val[key]);return bytes.position=0,this.writeByte(_gconst__WEBPACK_IMPORTED_MODULE_0__.VALUE_KIND.VALUE_DICT),this.writeUInt29(bytes.length),this.writeBytes(bytes),!0}return!1},CByteArray}();__webpack_exports__.default=CByteArray},function(module,__webpack_exports__,__webpack_require__){var VALUE_KIND,NET_MSG_TYPE,TRACE_TYPE,RPC_SYSERR;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"VALUE_KIND",function(){return VALUE_KIND}),__webpack_require__.d(__webpack_exports__,"NET_MSG_TYPE",function(){return NET_MSG_TYPE}),__webpack_require__.d(__webpack_exports__,"TRACE_TYPE",function(){return TRACE_TYPE}),__webpack_require__.d(__webpack_exports__,"RPC_SYSERR",function(){return RPC_SYSERR}),__webpack_require__.d(__webpack_exports__,"getRPCSysErrMsg",function(){return getRPCSysErrMsg}),function(VALUE_KIND){VALUE_KIND[VALUE_KIND.VALUE_NULL=0]="VALUE_NULL",VALUE_KIND[VALUE_KIND.VALUE_UNPARSE=1]="VALUE_UNPARSE",VALUE_KIND[VALUE_KIND.VALUE_BOOL=2]="VALUE_BOOL",VALUE_KIND[VALUE_KIND.VALUE_BYTE=3]="VALUE_BYTE",VALUE_KIND[VALUE_KIND.VALUE_INT32=4]="VALUE_INT32",VALUE_KIND[VALUE_KIND.VALUE_INT64=5]="VALUE_INT64",VALUE_KIND[VALUE_KIND.VALUE_DOUBLE=6]="VALUE_DOUBLE",VALUE_KIND[VALUE_KIND.VALUE_STRING=7]="VALUE_STRING",VALUE_KIND[VALUE_KIND.VALUE_DATE=8]="VALUE_DATE",VALUE_KIND[VALUE_KIND.VALUE_BIN=9]="VALUE_BIN",VALUE_KIND[VALUE_KIND.VALUE_DATETIME=11]="VALUE_DATETIME",VALUE_KIND[VALUE_KIND.VALUE_ARRAY=32]="VALUE_ARRAY",VALUE_KIND[VALUE_KIND.VALUE_DICT=33]="VALUE_DICT",VALUE_KIND[VALUE_KIND.VALUE_REPEAT=48]="VALUE_REPEAT",VALUE_KIND[VALUE_KIND.VALUE_OBJREF=49]="VALUE_OBJREF"}(VALUE_KIND||(VALUE_KIND={})),function(NET_MSG_TYPE){NET_MSG_TYPE[NET_MSG_TYPE.NMT_UNKNOWN=0]="NMT_UNKNOWN",NET_MSG_TYPE[NET_MSG_TYPE.NMT_SOCK_CONNECT=1]="NMT_SOCK_CONNECT",NET_MSG_TYPE[NET_MSG_TYPE.NMT_SOCK_CONNECT_RET=2]="NMT_SOCK_CONNECT_RET",NET_MSG_TYPE[NET_MSG_TYPE.NMT_SOCK_CONNECT_ECHO=3]="NMT_SOCK_CONNECT_ECHO",NET_MSG_TYPE[NET_MSG_TYPE.NMT_SOCK_CONNECT_ECHO_RET=4]="NMT_SOCK_CONNECT_ECHO_RET",NET_MSG_TYPE[NET_MSG_TYPE.NMT_RPC=17]="NMT_RPC",NET_MSG_TYPE[NET_MSG_TYPE.NMT_RPC_RET=18]="NMT_RPC_RET",NET_MSG_TYPE[NET_MSG_TYPE.NMT_PUSH=19]="NMT_PUSH",NET_MSG_TYPE[NET_MSG_TYPE.NMT_P2P=20]="NMT_P2P",NET_MSG_TYPE[NET_MSG_TYPE.NMT_NETGROUP_JOIN=33]="NMT_NETGROUP_JOIN",NET_MSG_TYPE[NET_MSG_TYPE.NMT_NETGROUP_JOIN_RET=34]="NMT_NETGROUP_JOIN_RET",NET_MSG_TYPE[NET_MSG_TYPE.NMT_NETGROUP_TOS=35]="NMT_NETGROUP_TOS",NET_MSG_TYPE[NET_MSG_TYPE.NMT_NETGROUP_TOC=36]="NMT_NETGROUP_TOC",NET_MSG_TYPE[NET_MSG_TYPE.NMT_NETGROUP_MIRROR_OP=37]="NMT_NETGROUP_MIRROR_OP",NET_MSG_TYPE[NET_MSG_TYPE.NMT_NETGROUP_CLTQUIT=38]="NMT_NETGROUP_CLTQUIT",NET_MSG_TYPE[NET_MSG_TYPE.NMT_NETGROUP_SVRKICK=39]="NMT_NETGROUP_SVRKICK",NET_MSG_TYPE[NET_MSG_TYPE.NMT_SOCK_SESSION_CMD=64]="NMT_SOCK_SESSION_CMD",NET_MSG_TYPE[NET_MSG_TYPE.NMT_BREAK_SERVICE=65]="NMT_BREAK_SERVICE",NET_MSG_TYPE[NET_MSG_TYPE.NMT_TRACE=255]="NMT_TRACE"}(NET_MSG_TYPE||(NET_MSG_TYPE={})),function(TRACE_TYPE){TRACE_TYPE[TRACE_TYPE.TRACE_UNKNOWN=0]="TRACE_UNKNOWN",TRACE_TYPE[TRACE_TYPE.TRACE_ERROR=1]="TRACE_ERROR",TRACE_TYPE[TRACE_TYPE.TRACE_SYSNOTE=2]="TRACE_SYSNOTE",TRACE_TYPE[TRACE_TYPE.TRACE_WARNING=3]="TRACE_WARNING",TRACE_TYPE[TRACE_TYPE.TRACE_INFO=4]="TRACE_INFO",TRACE_TYPE[TRACE_TYPE.TRACE_SCRIPT=5]="TRACE_SCRIPT",TRACE_TYPE[TRACE_TYPE.TRACE_TOC=6]="TRACE_TOC",TRACE_TYPE[TRACE_TYPE.TRACE_ONC=7]="TRACE_ONC",TRACE_TYPE[TRACE_TYPE.TRACE_TOS=8]="TRACE_TOS",TRACE_TYPE[TRACE_TYPE.TRACE_ONS=9]="TRACE_ONS",TRACE_TYPE[TRACE_TYPE.TRACE_RPC=10]="TRACE_RPC",TRACE_TYPE[TRACE_TYPE.TRACE_ONRPC=11]="TRACE_ONRPC",TRACE_TYPE[TRACE_TYPE.TRACE_RPC_RET=12]="TRACE_RPC_RET",TRACE_TYPE[TRACE_TYPE.TRACE_RPC_ONRET=13]="TRACE_RPC_ONRET",TRACE_TYPE[TRACE_TYPE.TRACE_SVRPUSH=14]="TRACE_SVRPUSH",TRACE_TYPE[TRACE_TYPE.TRACE_DEBUG=15]="TRACE_DEBUG",TRACE_TYPE[TRACE_TYPE.TRACE_INVALID=16]="TRACE_INVALID"}(TRACE_TYPE||(TRACE_TYPE={})),function(RPC_SYSERR){RPC_SYSERR[RPC_SYSERR.SYSERR_SOCKETERR=-1]="SYSERR_SOCKETERR",RPC_SYSERR[RPC_SYSERR.SYSERR_NOSERVICE=-2]="SYSERR_NOSERVICE",RPC_SYSERR[RPC_SYSERR.SYSERR_NOGROUP=-3]="SYSERR_NOGROUP",RPC_SYSERR[RPC_SYSERR.SYSERR_TIMEOUT=-4]="SYSERR_TIMEOUT",RPC_SYSERR[RPC_SYSERR.SYSERR_ACCESSDENIED=-5]="SYSERR_ACCESSDENIED",RPC_SYSERR[RPC_SYSERR.SYSERR_OPEN_UNKNOWNMODE=-6]="SYSERR_OPEN_UNKNOWNMODE",RPC_SYSERR[RPC_SYSERR.SYSERR_OPEN_NOFILE=-7]="SYSERR_OPEN_NOFILE",RPC_SYSERR[RPC_SYSERR.SYSERR_OPEN_WRITING=-8]="SYSERR_OPEN_WRITING",RPC_SYSERR[RPC_SYSERR.SYSERR_AGV_ERR=-9]="SYSERR_AGV_ERR",RPC_SYSERR[RPC_SYSERR.SYSERR_SVRERR=-10]="SYSERR_SVRERR"}(RPC_SYSERR||(RPC_SYSERR={}));var RPC_SYSERR_MSG=["网络连接中断","服务不存在","网络组不存在","调用超时","调用权限错","不支持的文件打开模式","文件不存在","文件已被写占用","调用参数错误","服务端异常"];function getRPCSysErrMsg(code){var idx=Math.abs(code)-1;return idx<0||idx>=RPC_SYSERR_MSG.length?"UnKnonw Error":RPC_SYSERR_MSG[idx]}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _gconst__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),s_nMask=3,s_nShowStyle=0,trace=function(){function trace(){}return trace.chkShow=function(t){return 1==(s_nMask>>t&1)},trace.setShow=function(t,show){var cmask=1<<t;show?s_nMask|=cmask:s_nMask&=~cmask},trace.setDebugMode=function(debug){var i;if(debug)for(i=0;i<_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_INVALID;i++)trace.setShow(i,!0);else for(i=0;i<_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_INVALID;i++)i<=_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_SYSNOTE?trace.setShow(i,!0):trace.setShow(i,!1)},trace.setShowStyle=function(style){s_nShowStyle=style},trace.print=function(t){for(var msgs=[],_i=1;_i<arguments.length;_i++)msgs[_i-1]=arguments[_i];if(trace.chkShow(t)){var tname="";t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_UNKNOWN?tname="Unknown":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_ERROR?tname="Error":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_SYSNOTE?tname="System":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_WARNING?tname="Warning":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_INFO?tname="Log":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_SCRIPT?tname="Script":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_TOC?tname="ToC":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_ONC?tname="OnC":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_TOS?tname="ToS":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_ONS?tname="OnS":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_RPC?tname="SendRPC":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_ONRPC?tname="OnRPC":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_RPC_RET?tname="RetRPC":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_RPC_ONRET?tname="OnRPCRet":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_SVRPUSH?tname="SvrPush":t==_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_DEBUG&&(tname="Debug");var date=new Date,head="["+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds()+"."+date.getMilliseconds()+"] ";if(head+=tname+" : ",1==msgs.length&&"string"==typeof msgs[0])console.log(head,msgs[0]);else switch(s_nShowStyle){case 1:console.log(head+JSON.stringify(msgs));break;default:console.log(head,msgs)}}},trace.sys=function(){for(var msgs=[],_i=0;_i<arguments.length;_i++)msgs[_i]=arguments[_i];trace.print.apply(trace,[_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_SYSNOTE].concat(msgs))},trace.error=function(){for(var msgs=[],_i=0;_i<arguments.length;_i++)msgs[_i]=arguments[_i];trace.print.apply(trace,[_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_ERROR].concat(msgs))},trace.warning=function(){for(var msgs=[],_i=0;_i<arguments.length;_i++)msgs[_i]=arguments[_i];trace.print.apply(trace,[_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_WARNING].concat(msgs))},trace.log=function(){for(var msgs=[],_i=0;_i<arguments.length;_i++)msgs[_i]=arguments[_i];trace.print.apply(trace,[_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_INFO].concat(msgs))},trace.onc=function(){for(var msgs=[],_i=0;_i<arguments.length;_i++)msgs[_i]=arguments[_i];trace.print.apply(trace,[_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_ONC].concat(msgs))},trace.ons=function(){for(var msgs=[],_i=0;_i<arguments.length;_i++)msgs[_i]=arguments[_i];trace.print.apply(trace,[_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_ONS].concat(msgs))},trace.rpc=function(){for(var msgs=[],_i=0;_i<arguments.length;_i++)msgs[_i]=arguments[_i];trace.print.apply(trace,[_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_RPC].concat(msgs))},trace.rpc_ret=function(){for(var msgs=[],_i=0;_i<arguments.length;_i++)msgs[_i]=arguments[_i];trace.print.apply(trace,[_gconst__WEBPACK_IMPORTED_MODULE_0__.TRACE_TYPE.TRACE_RPC_RET].concat(msgs))},trace}();__webpack_exports__.default=trace},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _BigInteger__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),bitwise=function(){function bitwise(){}return bitwise.int32getbit=function(val,off){var mask=1<<off;return 0!=(val&mask)},bitwise.int32setbit=function(val,off,bit){var mask=1<<off;return bit?val|mask:val&(mask=4294967295&~mask)&4294967295},bitwise.int64tobit=function(val){var i,bytes=val.toArray(2),negative=bytes.isNegative,vals=bytes.value,bitLen=vals.length,bitwise=negative?[1]:[0];for(i=1;i<64-bitLen;i++)bitwise.push(0);for(i=0;i<bitLen;i++)bitwise.push(vals[i]);if(negative){var pos=-1;for(i=63;i>0;i--)if(1==bitwise[i]){pos=i;break}if(-1==pos)return null;for(i=pos-1;i>0;i--)bitwise[i]=0==bitwise[i]?1:0}return bitwise},bitwise.int64tobytes=function(val){var i,bytes=[],negative=val.isNegative();if(negative){var bit=bitwise.int64tobit(val);if(null==bit)return null;for(i=0;i<63;i+=8){for(var str="",j=0;j<8;j++)str+=bit[i+j];bytes.push(parseInt(str,2))}}else{var data=val.toArray(256),vals=data.value,byteLen=vals.length;for(i=0;i<8-byteLen;i++)bytes.push(0);for(i=0;i<byteLen;i++)bytes.push(vals[i])}return bytes.reverse()},bitwise.bytestoint64=function(bytes){var i;for(i=bytes.length;i<8;i++)bytes.push(0);if(0==(128&(bytes=bytes.reverse())[0]))return _BigInteger__WEBPACK_IMPORTED_MODULE_0__.default.fromArray(bytes,256);for(i=0;i<8;i++)bytes[i]=255&~bytes[i];var ret=_BigInteger__WEBPACK_IMPORTED_MODULE_0__.default.fromArray(bytes,256,!0);return ret.subtract(1)},bitwise}();__webpack_exports__.default=bitwise},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var m_bInited=!1,m_szUpdateFunc=new Array,m_nLastUpdateTime=Date.now(),m_nProcessID=Math.round(Math.random()*Math.pow(2,32)),utils=function(){function utils(){}return utils.UTF8Len=function(str){for(var ch,len=0,i=0;i<str.length;i++)(ch=str.charCodeAt(i))<=127?len++:ch<=2047?len+=2:ch<=65535?len+=3:ch<=2097151?len+=4:ch<=67108863?len+=5:ch<=2147483647&&(len+=6);return len},utils.unsigned=function(num){return num<0?num>>>0:num},utils.utf8_2_utf16_char=function(code){if(code<=65535)return String.fromCharCode(code);var cp=code;return cp-=65536,String.fromCharCode(55296+(cp>>10),cp%1024+56320)},utils.RegSysUpdate=function(func){m_szUpdateFunc.push(func)},utils.getProcessID=function(){return m_nProcessID},utils.Init=function(autoUpdate){if(void 0===autoUpdate&&(autoUpdate=!0),!m_bInited){var url,ctx={};if(window&&window.location&&(window.location.hash&&(url=window.location.hash.replace("#","")),!url&&window.location.search&&(url=window.location.search.replace("?",""))),url)for(var datas=url.split("&"),i=0;i<datas.length;i++){var data=datas[i],key=data.split("=")[0],value=data.split("=")[1];ctx[key]=value}utils.context.command=ctx,autoUpdate&&utils.UseAutoUpdate(),m_bInited=!0}},utils.OnUpdate=function(){var now=Date.now(),elapse=now-m_nLastUpdateTime;m_szUpdateFunc.forEach(function(func){func(elapse,now)}),m_nLastUpdateTime=now},utils.UseAutoUpdate=function(){setInterval(utils.OnUpdate,10)},utils.context={},utils}();__webpack_exports__.default=utils},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _bytearray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_bincoder__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10),sPadding=new Uint8Array(64);sPadding[0]=128;var context=function(){function context(){this.count=new Uint32Array(2),this.count[0]=0,this.count[1]=0,this.state=new Uint32Array(4),this.state[0]=1732584193,this.state[1]=4023233417,this.state[2]=2562383102,this.state[3]=271733878,this.buf=new Uint8Array(64)}return context.prototype.state2Bytes=function(){var i,bytes=new _bytearray__WEBPACK_IMPORTED_MODULE_0__.default;for(i=0;i<4;i++)bytes.writeUint(this.state[i]);return bytes.position=0,bytes},context}();function safeAdd(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|65535&lsw}function bitRotateLeft(num,cnt){return num<<cnt|num>>>32-cnt}function md5cmn(q,a,b,x,s,t){return safeAdd(bitRotateLeft(safeAdd(safeAdd(a,q),safeAdd(x,t)),s),b)}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t)}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t)}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t)}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t)}function _MD5Transform(state,block){var x=function(block){var i,val,x=[];for(i=0;i<16;i++)val=bitRotateLeft(block[4*i],0),val|=bitRotateLeft(block[4*i+1],8),val|=bitRotateLeft(block[4*i+2],16),val|=bitRotateLeft(block[4*i+3],24),x[i]=val;return x}(block),a=state[0],b=state[1],c=state[2],d=state[3],olda=a,oldb=b,oldc=c,oldd=d;a=md5ff(a,b,c,d,x[0],7,-680876936),d=md5ff(d,a,b,c,x[1],12,-389564586),c=md5ff(c,d,a,b,x[2],17,606105819),b=md5ff(b,c,d,a,x[3],22,-1044525330),a=md5ff(a,b,c,d,x[4],7,-176418897),d=md5ff(d,a,b,c,x[5],12,1200080426),c=md5ff(c,d,a,b,x[6],17,-1473231341),b=md5ff(b,c,d,a,x[7],22,-45705983),a=md5ff(a,b,c,d,x[8],7,1770035416),d=md5ff(d,a,b,c,x[9],12,-1958414417),c=md5ff(c,d,a,b,x[10],17,-42063),b=md5ff(b,c,d,a,x[11],22,-1990404162),a=md5ff(a,b,c,d,x[12],7,1804603682),d=md5ff(d,a,b,c,x[13],12,-40341101),c=md5ff(c,d,a,b,x[14],17,-1502002290),b=md5ff(b,c,d,a,x[15],22,1236535329),a=md5gg(a,b,c,d,x[1],5,-165796510),d=md5gg(d,a,b,c,x[6],9,-1069501632),c=md5gg(c,d,a,b,x[11],14,643717713),b=md5gg(b,c,d,a,x[0],20,-373897302),a=md5gg(a,b,c,d,x[5],5,-701558691),d=md5gg(d,a,b,c,x[10],9,38016083),c=md5gg(c,d,a,b,x[15],14,-660478335),b=md5gg(b,c,d,a,x[4],20,-405537848),a=md5gg(a,b,c,d,x[9],5,568446438),d=md5gg(d,a,b,c,x[14],9,-1019803690),c=md5gg(c,d,a,b,x[3],14,-187363961),b=md5gg(b,c,d,a,x[8],20,1163531501),a=md5gg(a,b,c,d,x[13],5,-1444681467),d=md5gg(d,a,b,c,x[2],9,-51403784),c=md5gg(c,d,a,b,x[7],14,1735328473),b=md5gg(b,c,d,a,x[12],20,-1926607734),a=md5hh(a,b,c,d,x[5],4,-378558),d=md5hh(d,a,b,c,x[8],11,-2022574463),c=md5hh(c,d,a,b,x[11],16,1839030562),b=md5hh(b,c,d,a,x[14],23,-35309556),a=md5hh(a,b,c,d,x[1],4,-1530992060),d=md5hh(d,a,b,c,x[4],11,1272893353),c=md5hh(c,d,a,b,x[7],16,-155497632),b=md5hh(b,c,d,a,x[10],23,-1094730640),a=md5hh(a,b,c,d,x[13],4,681279174),d=md5hh(d,a,b,c,x[0],11,-358537222),c=md5hh(c,d,a,b,x[3],16,-722521979),b=md5hh(b,c,d,a,x[6],23,76029189),a=md5hh(a,b,c,d,x[9],4,-640364487),d=md5hh(d,a,b,c,x[12],11,-421815835),c=md5hh(c,d,a,b,x[15],16,530742520),b=md5hh(b,c,d,a,x[2],23,-995338651),a=md5ii(a,b,c,d,x[0],6,-198630844),d=md5ii(d,a,b,c,x[7],10,1126891415),c=md5ii(c,d,a,b,x[14],15,-1416354905),b=md5ii(b,c,d,a,x[5],21,-57434055),a=md5ii(a,b,c,d,x[12],6,1700485571),d=md5ii(d,a,b,c,x[3],10,-1894986606),c=md5ii(c,d,a,b,x[10],15,-1051523),b=md5ii(b,c,d,a,x[1],21,-2054922799),a=md5ii(a,b,c,d,x[8],6,1873313359),d=md5ii(d,a,b,c,x[15],10,-30611744),c=md5ii(c,d,a,b,x[6],15,-1560198380),b=md5ii(b,c,d,a,x[13],21,1309151649),a=md5ii(a,b,c,d,x[4],6,-145523070),d=md5ii(d,a,b,c,x[11],10,-1120210379),c=md5ii(c,d,a,b,x[2],15,718787259),b=md5ii(b,c,d,a,x[9],21,-343485551),state[0]=safeAdd(a,olda),state[1]=safeAdd(b,oldb),state[2]=safeAdd(c,oldc),state[3]=safeAdd(d,oldd)}function _MD5Update(ctx,input,inputLen){var i,index=ctx.count[0]>>3&63;(ctx.count[0]+=inputLen<<3)<inputLen<<3&&ctx.count[1]++,ctx.count[1]+=inputLen>>29;var partLen=64-index;if(inputLen<partLen)i=0;else{for(ctx.buf.set(input.subarray(0,partLen),index),_MD5Transform(ctx.state,ctx.buf),i=partLen;i+63<inputLen;i+=64)_MD5Transform(ctx.state,input.subarray(i,i+64));index=0}ctx.buf.set(input.subarray(i,inputLen),index)}function _MD5Final(ctx){var bits=function(input,len){var i,j,output=new Uint8Array(len);for(i=0,j=0;j<len;i++,j+=4)output[j]=255&input[i],output[j+1]=input[i]>>8&255,output[j+2]=input[i]>>16&255,output[j+3]=input[i]>>24&255;return output}(ctx.count,8),index=ctx.count[0]>>3&63,padLen=index<56?56-index:120-index;_MD5Update(ctx,sPadding,padLen),_MD5Update(ctx,bits,8)}function _RawMD5(bytes){bytes.position=0;var ctx=new context;return _MD5Update(ctx,bytes.readUint8Array(-1),bytes.length),_MD5Final(ctx),ctx.state2Bytes()}var md5=function(){function md5(){}return md5.hash=function(bytes){return _bincoder__WEBPACK_IMPORTED_MODULE_1__.hex.encode(_RawMD5(bytes))},md5.hash_hmac=function(key,bytes){var i,ipad=new Uint8Array(64),opad=new Uint8Array(64);for(key.position=0,bytes.position=0,key.length>16&&(key=_RawMD5(key)),i=0;i<key.length;i++){var pkey=key.readByte();ipad[i]=pkey,opad[i]=pkey}for(i=0;i<64;i++)ipad[i]=54^ipad[i],opad[i]=92^opad[i];var ctx=new context;_MD5Update(ctx,ipad,64),_MD5Update(ctx,bytes.readUint8Array(-1),bytes.length),_MD5Final(ctx);var digest=ctx.state2Bytes();return _MD5Update(ctx=new context,opad,64),_MD5Update(ctx,digest.readUint8Array(-1),digest.length),_MD5Final(ctx),_bincoder__WEBPACK_IMPORTED_MODULE_1__.hex.encode(ctx.state2Bytes())},md5.val2Bytes=function(val){var tname=void 0===val?"undefined":_typeof(val),bytes=void 0;return"string"==tname?(bytes=new _bytearray__WEBPACK_IMPORTED_MODULE_0__.default).writeUTF8(val):"object"==tname&&(val instanceof _bytearray__WEBPACK_IMPORTED_MODULE_0__.default?bytes=val:val instanceof String&&(bytes=new _bytearray__WEBPACK_IMPORTED_MODULE_0__.default).writeUTF8(val.toString())),bytes},md5}();__webpack_exports__.default=md5},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"hex",function(){return hex}),__webpack_require__.d(__webpack_exports__,"base64",function(){return base64});var _bytearray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),hex=function(){function hex(){}return hex.encode=function(bytes){for(var val="",len=bytes.bytesAvailable,i=0;i<len;i++){var byte=bytes.readByte(),byte_str=byte.toString(16);1==byte_str.length&&(byte_str="0"+byte_str),val+=byte_str}return val},hex.decode=function(val){for(var bytes=new _bytearray__WEBPACK_IMPORTED_MODULE_0__.default,len=val.length,i=0;i<len;i+=2){var byte_str=val.charAt(i);byte_str+=val.charAt(i+1),bytes.writeByte(parseInt(byte_str,16))}return bytes.position=0,bytes},hex}(),s64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s64DecodeArr=[-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-1,-2,-2,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,62,-2,-2,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,-3,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,-2,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2],base64=function(){function base64(){}return base64.encode=function(bytes){for(var byte1,byte2,byte3,val="",len=3*Math.floor(bytes.bytesAvailable/3),leftnum=bytes.bytesAvailable-len,i=0;i<len;i+=3)byte1=bytes.readByte(),byte2=bytes.readByte(),byte3=bytes.readByte(),val+=s64EncodeChars[byte1>>2],val+=s64EncodeChars[(3&byte1)<<4|byte2>>4],val+=s64EncodeChars[(15&byte2)<<2|byte3>>6],val+=s64EncodeChars[63&byte3];switch(leftnum){case 1:byte1=bytes.readByte(),val+=s64EncodeChars[byte1>>2],val+=s64EncodeChars[(3&byte1)<<4],val+="==";break;case 2:byte1=bytes.readByte(),byte2=bytes.readByte(),val+=s64EncodeChars[byte1>>2],val+=s64EncodeChars[(3&byte1)<<4|byte2>>4],val+=s64EncodeChars[(15&byte2)<<2],val+="="}return val},base64.Is64CoderChar=function(data){if(data<=0||data>127)return!1;var decode=s64DecodeArr[data];return-2!=decode&&-1!=decode&&-3!=decode},base64.decode=function(str){var bytes=new _bytearray__WEBPACK_IMPORTED_MODULE_0__.default;if(0==str.length||str.length%4)return bytes;for(var i=0;i<str.length;i+=4){var ch=str.substr(i,4),ch1=ch.charCodeAt(0),ch2=ch.charCodeAt(1),ch3=ch.charCodeAt(2),ch4=ch.charCodeAt(3);if(!base64.Is64CoderChar(ch1)||!base64.Is64CoderChar(ch2))break;var byte=s64DecodeArr[ch1]<<2|s64DecodeArr[ch2]>>4;if(bytes.writeByte(byte),!base64.Is64CoderChar(ch3))break;if(byte=s64DecodeArr[ch2]<<4|s64DecodeArr[ch3]>>2,bytes.writeByte(byte),!base64.Is64CoderChar(ch4))break;byte=(3&s64DecodeArr[ch3])<<6|s64DecodeArr[ch4],bytes.writeByte(byte)}return bytes},base64}()},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _extendStatics,_eventdispatcher__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_timer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(12),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8),_hash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),__extends=(_extendStatics=function(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),CBaseObj=function(_super){function CBaseObj(){var _this=_super.call(this)||this;return _this.m_TimerMgr=_timer__WEBPACK_IMPORTED_MODULE_1__.default.getInstance(),_this.m_nObjFlag=0,_this.m_szEventCache={},CBaseObj.ObjSysInit(),_this.m_nObjFlag=++CBaseObj.s_ObjIdx,_this.m_GOID=[_utils__WEBPACK_IMPORTED_MODULE_2__.default.getProcessID(),Math.round(Math.random()*Math.pow(2,32)),Math.round(Math.random()*Math.pow(2,32)),_this.m_nObjFlag],_this.m_szModule=null,_this.m_pFather=null,_this.m_pChildHead=null,_this.m_pChildTail=null,_this.m_pPrevObj=null,_this.m_pNextObj=null,_this.m_bDeled=!1,_this.m_bRegUpdate=!1,CBaseObj.s_szObjList[_this.m_nObjFlag.toString()]=_this,_this.m_szTimer=[],_this}return __extends(CBaseObj,_super),CBaseObj.FindObj=function(objid){var key=objid.toString();return CBaseObj.s_szObjList[key]},CBaseObj.ObjIsValid=function(obj){return null!=obj&&!obj.bDel},CBaseObj.NextFrameRun=function(func){CBaseObj.s_szNextFrameRun.push(func)},CBaseObj.ObjSysInit=function(){CBaseObj.s_bSysInited||(CBaseObj.s_bSysInited=!0,CBaseObj.s_RootObj=new CBaseObj)},CBaseObj.ObjSysUpdate=function(elapse,now){CBaseObj.s_szNextFrameRun.length>0&&(CBaseObj.s_szNextFrameRun.forEach(function(func){func()}),CBaseObj.s_szNextFrameRun=new Array),CBaseObj.s_szUpdateObjList.length>0&&CBaseObj.s_szUpdateObjList.forEach(function(obj){obj.OnUpdate(elapse,now)})},CBaseObj.FindTopModule=function(mname){return null==CBaseObj.s_RootObj&&(CBaseObj.s_RootObj=new CBaseObj),CBaseObj.s_RootObj.FindModule(mname)},CBaseObj.RegTopModule=function(mname,obj){return null==CBaseObj.s_RootObj&&(CBaseObj.s_RootObj=new CBaseObj),CBaseObj.s_RootObj.RegModule(mname,obj)},CBaseObj.UnRegTopModule=function(mname){null==CBaseObj.s_RootObj&&(CBaseObj.s_RootObj=new CBaseObj),CBaseObj.s_RootObj.UnRegModule(mname)},CBaseObj.ScanNetFunc=function(processor,funclist){for(var __proto__=Object.getPrototypeOf(processor);__proto__;){for(var keys=Object.getOwnPropertyNames(__proto__),i=0;i<keys.length;i++){var key=keys[i],func=processor[key];if("function"==typeof func){var func_type=key.slice(0,3);if("net"===func_type){var evename=key.slice(3),eveid=_hash__WEBPACK_IMPORTED_MODULE_3__.default.str2key(evename),evekey=eveid.toString();funclist.hasOwnProperty(evekey)||(funclist[evekey]={func:func,eve:evename,processor:processor})}}}__proto__=__proto__.__proto__}},Object.defineProperty(CBaseObj.prototype,"objflag",{get:function(){return this.m_nObjFlag},enumerable:!0,configurable:!0}),Object.defineProperty(CBaseObj.prototype,"goid",{get:function(){return this.m_GOID},enumerable:!0,configurable:!0}),Object.defineProperty(CBaseObj.prototype,"bDel",{get:function(){return this.m_bDeled},enumerable:!0,configurable:!0}),CBaseObj.prototype.RegUpdate=function(){this.m_bRegUpdate||(CBaseObj.s_szUpdateObjList.push(this),this.m_bRegUpdate=!0)},CBaseObj.prototype.UnRegUpdate=function(){if(this.m_bRegUpdate){for(var olist=CBaseObj.s_szUpdateObjList,i=0;i<olist.length;i++)if(olist[i]==this){olist.splice(i,1);break}this.m_bRegUpdate=!1}},CBaseObj.prototype.ClearEventCache=function(){this.m_szEventCache={}},CBaseObj.prototype.Event=function(evename,args){var func=this.m_szEventCache[evename];null==func&&this.hasOwnProperty(evename)&&("function"==typeof(func=this[evename])?this.m_szEventCache[evename]=func:func=void 0),null!=func&&func.call(this,args)},CBaseObj.prototype.DelThis=function(){this.m_bDeled||(this.OnPreDelThis(),this.DellAllChildren(),this.killAllTimer(),this.clearEventListener(),this.OnDelThis(),this.dispatchEvent("eve.OnDelThis"),this.m_szModule=null,delete CBaseObj.s_szObjList[this.m_nObjFlag.toString()],CBaseObj.s_szObjList[this.m_nObjFlag.toString()]=void 0,this.m_nObjFlag=0,this.m_bDeled=!0)},CBaseObj.prototype.OnPreDelThis=function(){},CBaseObj.prototype.OnDelThis=function(){},CBaseObj.prototype.OnUpdate=function(elapse,now){},CBaseObj.prototype.timerCall=function(delay,func,args){void 0===args&&(args=null);var timerid=this.m_TimerMgr.timerCall(delay,this,func,args);return this.m_szTimer.push(timerid),timerid},CBaseObj.prototype.loopCall=function(firstdelay,delay,func,args){void 0===args&&(args=null);var timerid=this.m_TimerMgr.loopCall(firstdelay,delay,this,func,args);return this.m_szTimer.push(timerid),timerid},CBaseObj.prototype.killTimer=function(key){for(var tlist=this.m_szTimer,tlist_length=tlist.length,i=0;i<tlist_length;i++)if(tlist[i]==key)return this.m_TimerMgr.killTimer(key),void tlist.splice(i,1)},CBaseObj.prototype.killAllTimer=function(){for(var tlist=this.m_szTimer,tlist_length=tlist.length,i=0;i<tlist_length;i++)this.m_TimerMgr.killTimer(tlist[i]);this.m_szTimer=[]},CBaseObj.prototype.ClearAllTimer=function(){this.killAllTimer()},CBaseObj.prototype.add_child=function(child){null!=child.m_pFather&&child.m_pFather.remove_child(child),null==this.m_pChildHead&&(this.m_pChildHead=child),null==this.m_pChildTail?this.m_pChildTail=child:(this.m_pChildTail.m_pNextObj=child,child.m_pPrevObj=this.m_pChildTail,this.m_pChildTail=child),child.m_pFather=this,this.OnAddChild(child)},CBaseObj.prototype.remove_child=function(child){null!=child&&this==child.m_pFather&&(this.m_pChildHead==child&&(this.m_pChildHead=child.m_pNextObj),this.m_pChildTail==child&&(this.m_pChildTail=child.m_pPrevObj),null!=child.m_pPrevObj&&(child.m_pPrevObj.m_pNextObj=child.m_pNextObj),null!=child.m_pNextObj&&(child.m_pNextObj.m_pPrevObj=child.m_pPrevObj),child.m_pFather=null,child.m_pNextObj=null,child.m_pPrevObj=null,this.OnRemoveChild(child))},CBaseObj.prototype.DellAllChildren=function(){for(var child=this.m_pChildTail,prev=null;null!=child;)prev=child.m_pPrevObj,child.DelThis(),child=prev},CBaseObj.prototype.OnAddChild=function(child){},CBaseObj.prototype.OnRemoveChild=function(child){},CBaseObj.prototype._RawFindModule=function(name){if(null==this.m_szModule)return null;var obj=this.m_szModule[name];return null==obj||obj.m_bDeled?(delete this.m_szModule[name],this.m_szModule[name]=void 0,null):obj},CBaseObj.prototype.RegModule=function(name,obj){return"father"!=name&&"this"!=name&&"self"!=name&&"root"!=name&&(null==this.m_szModule&&(this.m_szModule={}),null==this._RawFindModule(name)&&(this.m_szModule[name]=obj,!0))},CBaseObj.prototype.UnRegModule=function(name){null!=this.m_szModule&&(delete this.m_szModule[name],this.m_szModule[name]=void 0)},CBaseObj.prototype.FindModule=function(name){var obj=this._RawFindModule(name);return null!=obj?obj:null==this.m_pFather?null:this.m_pFather.FindModule(name)},CBaseObj.s_bSysInited=!1,CBaseObj.s_ObjIdx=0,CBaseObj.s_szObjList={},CBaseObj.s_szNextFrameRun=new Array,CBaseObj.s_szUpdateObjList=new Array,CBaseObj}(_eventdispatcher__WEBPACK_IMPORTED_MODULE_0__.default);__webpack_exports__.default=CBaseObj},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var TimerStatus,_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);!function(TimerStatus){TimerStatus[TimerStatus.TTSTATE_UNKNOW=0]="TTSTATE_UNKNOW",TimerStatus[TimerStatus.TTSTATE_WAITADD=1]="TTSTATE_WAITADD",TimerStatus[TimerStatus.TTSTATE_PENDING=2]="TTSTATE_PENDING",TimerStatus[TimerStatus.TTSTATE_PROCADD=3]="TTSTATE_PROCADD",TimerStatus[TimerStatus.TTSTATE_PROCREMOVE=4]="TTSTATE_PROCREMOVE",TimerStatus[TimerStatus.TTSTATE_RMV=5]="TTSTATE_RMV"}(TimerStatus||(TimerStatus={}));var CTimerTask=function(){function CTimerTask(mgr,flag,obj,func,agv){this.m_Status=TimerStatus.TTSTATE_UNKNOW,this.m_Mgr=mgr,this.m_nTimerFlag=flag,this.m_Ctx=obj,this.m_Func=func,this.m_Agv=agv,this.m_bLoop=!1,this.m_nDelay=0,this.m_nNextDelay=0,this.m_nEndTime=0}return CTimerTask.prototype.RemoveFromList=function(){return null==this.m_List?(this.m_Prev=void 0,this.m_Next=void 0,!1):(this.m_List.remove(this),!0)},CTimerTask.prototype.Unlink=function(){this.m_Prev=void 0,this.m_Next=void 0,this.m_List=void 0},CTimerTask.prototype.SetTime=function(delay,now){this.m_nDelay=delay,this.m_nEndTime=now+this.m_nDelay},CTimerTask.prototype.Cancel=function(){this.m_Status!=TimerStatus.TTSTATE_RMV&&(this.m_Status=TimerStatus.TTSTATE_RMV,this.RemoveFromList())},CTimerTask.prototype.OnTimer=function(now){switch(this.m_Status==TimerStatus.TTSTATE_PENDING&&(this.m_Status=this.m_bLoop?TimerStatus.TTSTATE_PROCADD:TimerStatus.TTSTATE_PROCREMOVE),this.m_Status){case TimerStatus.TTSTATE_PROCADD:this.m_Func.call(this.m_Ctx,this.m_Agv),this.m_Status==TimerStatus.TTSTATE_PROCADD?(this.SetTime(this.m_nNextDelay,now),this.m_Mgr.addTask(this)):this.m_Mgr.killTimer(this.m_nTimerFlag);break;case TimerStatus.TTSTATE_PROCREMOVE:this.m_Func.call(this.m_Ctx,this.m_Agv),this.m_Mgr.killTimer(this.m_nTimerFlag);break;default:this.m_Status=TimerStatus.TTSTATE_RMV,this.RemoveFromList()}},CTimerTask}(),CTimerTaskList=function(){function CTimerTaskList(){this.m_nNodeNum=0}return Object.defineProperty(CTimerTaskList.prototype,"length",{get:function(){return this.m_nNodeNum},enumerable:!0,configurable:!0}),Object.defineProperty(CTimerTaskList.prototype,"front",{get:function(){return this.m_Head},enumerable:!0,configurable:!0}),Object.defineProperty(CTimerTaskList.prototype,"back",{get:function(){return this.m_Tail},enumerable:!0,configurable:!0}),CTimerTaskList.prototype.push_back=function(node){node.RemoveFromList(),null==this.m_Head&&(this.m_Head=node),null!=this.m_Tail&&(this.m_Tail.m_Next=node),node.m_Prev=this.m_Tail,node.m_List=this,this.m_Tail=node,++this.m_nNodeNum},CTimerTaskList.prototype.remove=function(node){node.m_List==this&&(this.m_Head==node&&(this.m_Head=node.m_Next),this.m_Tail==node&&(this.m_Tail=node.m_Prev),null!=node.m_Prev&&(node.m_Prev.m_Next=node.m_Next),null!=node.m_Next&&(node.m_Next.m_Prev=node.m_Prev),node.m_List=void 0,node.m_Prev=void 0,node.m_Next=void 0,--this.m_nNodeNum)},CTimerTaskList.prototype.pop_front=function(){if(0!=this.m_nNodeNum){var node=this.m_Head;return null!=node&&this.remove(node),node}},CTimerTaskList.prototype.clear=function(){if(0!=this.m_nNodeNum){for(var next,node=this.m_Head;null!=node;)next=node.m_Next,node.m_List==this&&node.Unlink(),node=next;this.m_Head=void 0,this.m_Tail=void 0,this.m_nNodeNum=0}},CTimerTaskList}(),TVN_SIZE=64,TVR_SIZE=256,TVN_MASK=TVN_SIZE-1,TVR_MASK=TVR_SIZE-1,CTaskVec=function(size){this.m_nIndex=0,this.m_Vec=[];for(var i=0;i<size;i++)this.m_Vec.push(new CTimerTaskList)},CTimerMgr=function(){function CTimerMgr(){this.m_nLastUpdate=0,this.m_nTickCount=0,this.m_bTimerUpdating=!1,this.m_nTimerNum=0,this.m_nMaxTimerNum=0,this.m_nTimerSeed=0,this.m_szTimerWill=new CTimerTaskList,this.m_szAllTask=[],this.m_szTaskVec=[new CTaskVec(TVR_SIZE),new CTaskVec(TVN_SIZE),new CTaskVec(TVN_SIZE),new CTaskVec(TVN_SIZE),new CTaskVec(TVN_SIZE)],_utils__WEBPACK_IMPORTED_MODULE_0__.default.RegSysUpdate(this.OnUpdate.bind(this))}return CTimerMgr.getInstance=function(){return null==CTimerMgr.s_Instance&&(CTimerMgr.s_Instance=new CTimerMgr),CTimerMgr.s_Instance},Object.defineProperty(CTimerMgr.prototype,"tickCount",{get:function(){return this.m_nTickCount},enumerable:!0,configurable:!0}),Object.defineProperty(CTimerMgr.prototype,"timerNum",{get:function(){return this.m_nTimerNum},enumerable:!0,configurable:!0}),Object.defineProperty(CTimerMgr.prototype,"timerMaxNum",{get:function(){return this.m_nMaxTimerNum},enumerable:!0,configurable:!0}),CTimerMgr.prototype.addTask=function(task){this.m_nMaxTimerNum=Math.max(this.m_nMaxTimerNum,++this.m_nTimerNum),this.m_bTimerUpdating?(task.m_Status=TimerStatus.TTSTATE_WAITADD,this.m_szTimerWill.push_back(task)):this._addTask(task)},CTimerMgr.prototype._addTask=function(task){task.m_Status=TimerStatus.TTSTATE_PENDING;var vec,i,endtime=task.m_nEndTime,idx=endtime-this.m_nTickCount;idx<0?vec=this.m_szTaskVec[0].m_Vec[this.m_szTaskVec[0].m_nIndex]:idx<TVR_SIZE?(i=endtime&TVR_MASK,vec=this.m_szTaskVec[0].m_Vec[i]):idx<16384?(i=endtime>>>8&TVN_MASK,vec=this.m_szTaskVec[1].m_Vec[i]):idx<1048576?(i=endtime>>>14&TVN_MASK,vec=this.m_szTaskVec[2].m_Vec[i]):idx<67108864?(i=endtime>>>20&TVN_MASK,vec=this.m_szTaskVec[3].m_Vec[i]):idx<4294967295&&(i=endtime>>>26&TVN_MASK,vec=this.m_szTaskVec[4].m_Vec[i]),null!=vec&&vec.push_back(task)},CTimerMgr.prototype.CascadeTask=function(timevec){for(var list=timevec.m_Vec[timevec.m_nIndex],task=list.pop_front();null!=task;)this._addTask(task),task=list.pop_front();timevec.m_nIndex=timevec.m_nIndex+1&TVN_MASK},CTimerMgr.prototype.OnUpdate=function(elapse,now){if(0==this.m_nLastUpdate&&(this.m_nLastUpdate=now),now>this.m_nLastUpdate){this.m_bTimerUpdating=!0;for(var timeframe=now-this.m_nLastUpdate,i=0;i<timeframe;i++){if(0==this.m_szTaskVec[0].m_nIndex){var n=1;do{this.CascadeTask(this.m_szTaskVec[n])}while(1==this.m_szTaskVec[n].m_nIndex&&++n<5)}var vec=this.m_szTaskVec[0].m_Vec[this.m_szTaskVec[0].m_nIndex];this.m_nTimerNum-=vec.length;for(var node=vec.pop_front();null!=node;)node.OnTimer(this.m_nTickCount),node=vec.pop_front();this.m_szTaskVec[0].m_nIndex=this.m_szTaskVec[0].m_nIndex+1&TVR_MASK,++this.m_nTickCount}this.m_bTimerUpdating=!1;for(var task=this.m_szTimerWill.pop_front();null!=task;)task.SetTime(task.m_nDelay,this.m_nTickCount),this._addTask(task),task=this.m_szTimerWill.pop_front()}this.m_nLastUpdate=now},CTimerMgr.prototype.AllocTask=function(delay,obj,func,args){var task=new CTimerTask(this,++this.m_nTimerSeed,obj,func,args);return task.SetTime(delay,this.m_nTickCount),this.m_szAllTask.push(task),task},CTimerMgr.prototype.timerCall=function(delay,obj,func,args){void 0===args&&(args=null),args||(args=[]);var task=this.AllocTask(delay,obj,func,args);return task.m_bLoop=!1,this.addTask(task),task.m_nTimerFlag},CTimerMgr.prototype.loopCall=function(firstdelay,delay,obj,func,args){void 0===args&&(args=null),args||(args=[]);var task=this.AllocTask(firstdelay,obj,func,args);return task.m_bLoop=!0,task.m_nNextDelay=delay,this.addTask(task),task.m_nTimerFlag},CTimerMgr.prototype.killTimer=function(timerid){if(null!=timerid&&null!=timerid)for(var tlist=this.m_szAllTask,tlist_len=tlist.length,i=0;i<tlist_len;i++){var timer=tlist[i];if(timer.m_nTimerFlag==timerid)return timer.Cancel(),void tlist.splice(i,1)}},CTimerMgr}();__webpack_exports__.default=CTimerMgr},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _extendStatics2,NetObjCKind,_gconst__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_trace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_rpc__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14),_hash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3),_baseobj__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(11),_msgcenter__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(15),__extends=(_extendStatics2=function(d,b){return(_extendStatics2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics2(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});!function(NetObjCKind){NetObjCKind[NetObjCKind.NOCK_None=0]="NOCK_None",NetObjCKind[NetObjCKind.NOCK_Main=1]="NOCK_Main",NetObjCKind[NetObjCKind.NOCK_Mirror=2]="NOCK_Mirror",NetObjCKind[NetObjCKind.NOCK_Ghost=3]="NOCK_Ghost"}(NetObjCKind||(NetObjCKind={}));var CNetObj=function(_super){function CNetObj(){var _this=_super.call(this)||this;return _this.m_NetObjCKind=NetObjCKind.NOCK_None,_this.m_nPingDelay=15e3,_this.m_nWaitPingOTime=4*_this.m_nPingDelay,_this.m_GNID=[0,0,0,0],_this.m_sGNID="",_this.m_MainGNID=[0,0,0,0],_this.m_sFullPath="",_this.m_sSName="",_this.m_sGName="",_this.m_JoinGroupTimer=0,_this.m_nPing=65535,_this.m_WaitPingTimer=0,_this.m_bShowTrace=!0,_this.m_nMsgPakNum=0,_this.m_szSendMsgPending=[],_this.m_Processor=_this,_this.m_szNetFunc={},_this._scannNetFunc(),_this.m_bDispatchNetEve=!1,_this}return __extends(CNetObj,_super),CNetObj.prototype.BindProcessor=function(p){this.m_Processor=p,this._scannNetFunc()},CNetObj.prototype.RegNetFunc=function(ename,func,processor){var eveid=_hash__WEBPACK_IMPORTED_MODULE_3__.default.str2key(ename);this.m_szNetFunc[eveid.toString()]={func:func,eve:ename,processor:processor}},Object.defineProperty(CNetObj.prototype,"useDispatchNetEve",{get:function(){return this.m_bDispatchNetEve},set:function(val){this.m_bDispatchNetEve=val},enumerable:!0,configurable:!0}),Object.defineProperty(CNetObj.prototype,"pakMsgNum",{set:function(val){this.m_nMsgPakNum!=val&&(this.m_nMsgPakNum=val)},enumerable:!0,configurable:!0}),Object.defineProperty(CNetObj.prototype,"hasPakMsgPending",{get:function(){return this.m_szSendMsgPending.length>0},enumerable:!0,configurable:!0}),CNetObj.prototype._scannNetFunc=function(){this.m_szNetFunc={},_baseobj__WEBPACK_IMPORTED_MODULE_4__.default.ScanNetFunc(this.m_Processor,this.m_szNetFunc)},Object.defineProperty(CNetObj.prototype,"groupSName",{get:function(){return this.m_sSName},enumerable:!0,configurable:!0}),Object.defineProperty(CNetObj.prototype,"GNID",{get:function(){return this.m_sGNID},enumerable:!0,configurable:!0}),Object.defineProperty(CNetObj.prototype,"rawGNID",{get:function(){return this.m_GNID},enumerable:!0,configurable:!0}),CNetObj.prototype.OnPreDelThis=function(){if(this.SendPendingPakMsg(),_msgcenter__WEBPACK_IMPORTED_MODULE_5__.default.removeNetObj(this.objflag),this.m_NetObjCKind==NetObjCKind.NOCK_Main&&this.m_GNID.length>0){var msg={t:_gconst__WEBPACK_IMPORTED_MODULE_0__.NET_MSG_TYPE.NMT_NETGROUP_CLTQUIT,a:this.m_GNID,f:[0,0,0,this.objflag],c:0,v:{}};_msgcenter__WEBPACK_IMPORTED_MODULE_5__.default.SendMsg(msg)}},CNetObj.prototype.JoinGroup=function(fpath,tname,agv,outTime){if(void 0===outTime&&(outTime=15e3),this.m_NetObjCKind==NetObjCKind.NOCK_None){0!=this.m_JoinGroupTimer&&(this.killTimer(this.m_JoinGroupTimer),this.m_JoinGroupTimer=0),this.m_NetObjCKind=NetObjCKind.NOCK_Main;var sgname=_rpc__WEBPACK_IMPORTED_MODULE_2__.default.SplitPath(fpath);this.m_sSName=sgname[0],this.m_sGName=sgname[1],0==this.m_sGName.length?(this.m_sGName=this.m_sSName,this.m_sSName="local::LocalService"):this.m_sSName=_rpc__WEBPACK_IMPORTED_MODULE_2__.default.MakeSName(this.m_sSName),this.m_sFullPath=_rpc__WEBPACK_IMPORTED_MODULE_2__.default.MakeFullPath(this.m_sSName,this.m_sGName),this.m_bShowTrace&&_trace__WEBPACK_IMPORTED_MODULE_1__.default.log("try join NetGroup "+this.m_sFullPath+" - "+tname," : ",agv),this.m_JoinGroupTimer=this.timerCall(outTime,this.JoinGroupOutTime,[]),_msgcenter__WEBPACK_IMPORTED_MODULE_5__.default.AddWaitJoinNetObj(this);var msg={t:_gconst__WEBPACK_IMPORTED_MODULE_0__.NET_MSG_TYPE.NMT_NETGROUP_JOIN,a:_hash__WEBPACK_IMPORTED_MODULE_3__.default.Address2Array(this.m_sSName,this.m_sGName,_hash__WEBPACK_IMPORTED_MODULE_3__.default.str2key(tname)),f:this.goid,c:1,v:[tname,agv]};_msgcenter__WEBPACK_IMPORTED_MODULE_5__.default.SendMsg(msg)}else _trace__WEBPACK_IMPORTED_MODULE_1__.default.error("CNetObjC::JoinGroup Err ! ObjKind Err")},CNetObj.prototype.JoinGroupOutTime=function(agv){},CNetObj.prototype.ToS=function(evename,agv){var msg;if(this.m_nMsgPakNum<=0)return msg={t:_gconst__WEBPACK_IMPORTED_MODULE_0__.NET_MSG_TYPE.NMT_NETGROUP_TOS,a:this.m_GNID,f:this.goid,c:_hash__WEBPACK_IMPORTED_MODULE_3__.default.str2key(evename),v:agv},void _msgcenter__WEBPACK_IMPORTED_MODULE_5__.default.SendMsg(msg);msg={c:_hash__WEBPACK_IMPORTED_MODULE_3__.default.str2key(evename),v:agv},this.m_szSendMsgPending.push(msg),this.m_szSendMsgPending.length>=this.m_nMsgPakNum&&this.SendPendingPakMsg()},CNetObj.prototype.SendPendingPakMsg=function(){0!=this.m_szSendMsgPending.length&&(_gconst__WEBPACK_IMPORTED_MODULE_0__.NET_MSG_TYPE.NMT_NETGROUP_TOS,this.m_GNID,this.goid,this.m_szSendMsgPending,this.m_szSendMsgPending=[])},CNetObj.prototype.WaitPingRetTimeOut=function(){this.m_WaitPingTimer=0,this.SvrBreak(2,"Ping值过高")},CNetObj.prototype.SendPing=function(){this.ToS("Echo",["SendPingRet",[Date.now()]]),this.m_WaitPingTimer=this.timerCall(this.m_nWaitPingOTime,this.WaitPingRetTimeOut)},CNetObj.prototype.netSendPingRet=function(agv){0!=this.m_WaitPingTimer&&(this.killTimer(this.m_WaitPingTimer),this.m_WaitPingTimer=0);var beg=agv[0];this.m_nPing=Math.ceil((Date.now()-beg)/2),_trace__WEBPACK_IMPORTED_MODULE_1__.default.log("NetObj Ping: "+this.m_nPing),this.dispatchEvent("OnPingChg",[this.m_nPing]),this.timerCall(this.m_nPingDelay,this.SendPing)},CNetObj.prototype.JoinGroupOk=function(gnid){this.m_GNID=gnid,this.m_sGNID=JSON.stringify(this.m_GNID),this.m_bShowTrace&&_trace__WEBPACK_IMPORTED_MODULE_1__.default.log("JoinGroupOK "+this.m_sFullPath+" "+gnid),this.OnJoinGroupOk()},CNetObj.prototype.JoinGroupErr=function(errflag,errmsg,agv){this.m_bShowTrace&&_trace__WEBPACK_IMPORTED_MODULE_1__.default.log("JoinGroupErr "+this.m_sFullPath+" Err "+errflag+" - "+errmsg+" : ",agv),this.OnJoinGroupErr(errflag,errmsg,agv)},CNetObj.prototype.SvrBreak=function(errflag,errmsg){this.OnSvrBreak(errflag,errmsg),_baseobj__WEBPACK_IMPORTED_MODULE_4__.default.NextFrameRun(this.DelThis.bind(this))},CNetObj.prototype.BreakPlayer=function(errflag,errmsg,agv){this.OnBreakPlayer(errflag,errmsg,agv),_baseobj__WEBPACK_IMPORTED_MODULE_4__.default.NextFrameRun(this.DelThis.bind(this))},CNetObj.prototype.RemoteCreate=function(gnid,agv,maingnid,isghost){void 0===isghost&&(isghost=!1),this.m_GNID=gnid,this.m_MainGNID=maingnid,this.m_sGNID=JSON.stringify(this.m_GNID),this.m_NetObjCKind==NetObjCKind.NOCK_None&&(this.m_NetObjCKind=isghost?NetObjCKind.NOCK_Ghost:NetObjCKind.NOCK_Mirror),this.m_bShowTrace&&_trace__WEBPACK_IMPORTED_MODULE_1__.default.log("RemoteCreate ",this.m_GNID),this.m_NetObjCKind==NetObjCKind.NOCK_Main&&this.timerCall(1e3,this.SendPing),this.OnRemoteCreate(agv)},CNetObj.prototype.OnS=function(eveid,agv){var find=!1,netfunc=this.m_szNetFunc[eveid.toString()];if("object"===(void 0===netfunc?"undefined":_typeof(netfunc))){var func=netfunc.func;if(netfunc.eve,"function"==typeof func){find=!0;var processor=netfunc.processor;null==processor&&(processor=this.m_Processor),func.call(processor,agv)}}this.m_bDispatchNetEve&&(find=!0,this.dispatchEvent("net",{eveid:eveid,agv:agv})),find||_trace__WEBPACK_IMPORTED_MODULE_1__.default.warning("NetObj OnS Not Find. ["+eveid+"] : ",agv)},CNetObj.prototype.NetObjLeave=function(){this.SendPendingPakMsg(),this.OnNetObjLeave(),this.m_NetObjCKind!=NetObjCKind.NOCK_Main&&this.DelThis()},CNetObj.prototype.OnJoinGroupOk=function(){this.dispatchEvent("eve.OnJoinGroupOk")},CNetObj.prototype.OnJoinGroupErr=function(errflag,errmsg,agv){this.dispatchEvent("eve.OnJoinGroupErr",[errflag,errmsg,agv])},CNetObj.prototype.OnCreateMirrorObj=function(classname){},CNetObj.prototype.OnNetObjLeave=function(){this.dispatchEvent("eve.OnNetObjLeave")},CNetObj.prototype.OnRemoteCreate=function(agv){this.dispatchEvent("eve.OnRemoteCreate",agv)},CNetObj.prototype.OnBreakPlayer=function(errflag,errmsg,agv){this.dispatchEvent("eve.OnBreakPlayer",[errflag,errmsg,agv])},CNetObj.prototype.OnSvrBreak=function(errflag,errmsg){this.dispatchEvent("eve.OnSvrBreak",[errflag,errmsg])},CNetObj}(_baseobj__WEBPACK_IMPORTED_MODULE_4__.default);__webpack_exports__.default=CNetObj},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _msgcenter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),m_sNameSpace="",m_sDomain="",rpc=function(){function rpc(){}return rpc.SetNameSpace=function(sname){m_sNameSpace=sname},rpc.GetNameSpace=function(){return m_sNameSpace},rpc.SetDomain=function(domain){m_sDomain=domain},rpc.GetDomain=function(){return m_sDomain},rpc.MakeSName=function(name,useDomain){if(void 0===useDomain&&(useDomain=!0),0==name.length)return name;var space,domain,fullname,sname,pos=(fullname=name).indexOf("::");return-1==pos?(space=m_sNameSpace,sname=fullname):(space=fullname.substr(0,pos),sname=fullname.substr(pos+2)),-1==(pos=(fullname=sname).indexOf("#"))?(domain=m_sDomain,sname=fullname):(domain=fullname.substr(pos+1),sname=fullname.substr(0,pos),"null"==domain&&(domain="")),name=0==space.length||"null"==space?sname:space+"::"+sname,useDomain&&domain.length>0&&"null"!=domain&&(name+="#"+domain),name},rpc.MakeFullPath=function(sname,gname){return sname=rpc.MakeSName(sname),gname.length>0?gname+"@"+sname:sname},rpc.SplitPath=function(path){var sname,gname,pos=path.indexOf("@");return-1==pos?(sname=path,gname=""):(gname=path.substr(0,pos),sname=path.substr(pos+1)),[sname,gname]},rpc.Call=function(path,evename,agv,ctx,okfunc,errfunc,extinfo){void 0===extinfo&&(extinfo=null),_msgcenter__WEBPACK_IMPORTED_MODULE_0__.default.RPC_Call(path,evename,agv,ctx,okfunc,errfunc,extinfo)},rpc.Send=function(path,evename,agv){_msgcenter__WEBPACK_IMPORTED_MODULE_0__.default.RPC_Send(path,evename,agv)},rpc.RegCallBack=function(path,evename,agv,ctx,cbkfunc,extinfo){return void 0===extinfo&&(extinfo=null),_msgcenter__WEBPACK_IMPORTED_MODULE_0__.default.RPC_RegCallBack(path,evename,agv,ctx,cbkfunc,extinfo)},rpc.UnRegCallBack=function(sessionid){_msgcenter__WEBPACK_IMPORTED_MODULE_0__.default.RPC_UnRegCallBack(sessionid)},rpc.UnRegCallBackAll=function(){_msgcenter__WEBPACK_IMPORTED_MODULE_0__.default.RPC_UnRegCallBackAll()},rpc}();__webpack_exports__.default=rpc},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CMsgProcessor",function(){return CMsgProcessor});var _extendStatics3,m_MsgProcessor,_eventdispatcher__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),__extends=(_extendStatics3=function(d,b){return(_extendStatics3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics3(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),CMsgProcessor=function(_super){function CMsgProcessor(){return _super.call(this)||this}return __extends(CMsgProcessor,_super),CMsgProcessor.prototype.SendMsg=function(msg){},CMsgProcessor.prototype.RecvMsg=function(sock,msg){},CMsgProcessor.prototype.RPC_Call=function(path,evename,agv,ctx,okfunc,errfunc,extinfo){void 0===extinfo&&(extinfo=null)},CMsgProcessor.prototype.RPC_Send=function(path,evename,agv){},CMsgProcessor.prototype.RPC_RegCallBack=function(path,evename,agv,ctx,cbkfunc,extinfo){return void 0===extinfo&&(extinfo=null),0},CMsgProcessor.prototype.RPC_UnRegCallBack=function(sessionid){},CMsgProcessor.prototype.RPC_UnRegCallBackAll=function(){},CMsgProcessor.prototype.removeNetObj=function(objidx){},CMsgProcessor.prototype.AddWaitJoinNetObj=function(netobj){},CMsgProcessor}(_eventdispatcher__WEBPACK_IMPORTED_MODULE_0__.default),CMsgCenter=function(){function CMsgCenter(){}return CMsgCenter.RegProcessor=function(processor){m_MsgProcessor=processor},CMsgCenter.SendMsg=function(msg){m_MsgProcessor.SendMsg(msg)},CMsgCenter.RecvMsg=function(sock,msg){m_MsgProcessor.RecvMsg(sock,msg)},CMsgCenter.RPC_Call=function(path,evename,agv,ctx,okfunc,errfunc,extinfo){void 0===extinfo&&(extinfo=null),m_MsgProcessor.RPC_Call(path,evename,agv,ctx,okfunc,errfunc,extinfo)},CMsgCenter.RPC_Send=function(path,evename,agv){m_MsgProcessor.RPC_Send(path,evename,agv)},CMsgCenter.RPC_RegCallBack=function(path,evename,agv,ctx,cbkfunc,extinfo){return void 0===extinfo&&(extinfo=null),m_MsgProcessor.RPC_RegCallBack(path,evename,agv,ctx,cbkfunc,extinfo)},CMsgCenter.RPC_UnRegCallBack=function(sessionid){m_MsgProcessor.RPC_UnRegCallBack(sessionid)},CMsgCenter.RPC_UnRegCallBackAll=function(){m_MsgProcessor.RPC_UnRegCallBackAll()},CMsgCenter.removeNetObj=function(objidx){m_MsgProcessor.removeNetObj(objidx)},CMsgCenter.AddWaitJoinNetObj=function(netobj){m_MsgProcessor.AddWaitJoinNetObj(netobj)},CMsgCenter}();__webpack_exports__.default=CMsgCenter},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _extendStatics4,SOCK_STATUS,_gconst__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_eventdispatcher__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_timer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),_bytearray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),_hash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3),_trace__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6),_msgcenter__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(15),__extends=(_extendStatics4=function(d,b){return(_extendStatics4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics4(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});!function(SOCK_STATUS){SOCK_STATUS[SOCK_STATUS.SOCK_IDLE=0]="SOCK_IDLE",SOCK_STATUS[SOCK_STATUS.SOCK_CONNECTING=1]="SOCK_CONNECTING",SOCK_STATUS[SOCK_STATUS.SOCK_HANDING=2]="SOCK_HANDING",SOCK_STATUS[SOCK_STATUS.SOCK_ACTIVE=3]="SOCK_ACTIVE",SOCK_STATUS[SOCK_STATUS.SOCK_WAIT_CLOSE=4]="SOCK_WAIT_CLOSE"}(SOCK_STATUS||(SOCK_STATUS={}));var CSocket=function(_super){function CSocket(){var _this=_super.call(this)||this;return _this.m_TimerMgr=_timer__WEBPACK_IMPORTED_MODULE_2__.default.getInstance(),_this.m_sAddress="",_this.m_sHost="",_this.m_nPort=0,_this.m_bUsingBinaryTransfer=!0,_this.m_Socket=null,_this.m_Status=SOCK_STATUS.SOCK_IDLE,_this.m_RecvBufStr="",_this.m_SendBufStr="",_this.m_bEnableIndex=!1,_this.m_bEnableSignkey=!1,_this.m_nNetPakIdx=0,_this.m_nSignKey=0,_this.m_nGTPMask=1,_this.m_bParseDate=!0,_this.m_nPing=65535,_this.m_PingTimer=0,_this.m_nPingDelay=3e4,_this.m_WaitPingRetTimer=0,_this.m_bCanceled=!1,_this.m_SignKeyFnc=_hash__WEBPACK_IMPORTED_MODULE_4__.default.crc32,_this.m_RecvBuf=new _bytearray__WEBPACK_IMPORTED_MODULE_3__.default,_this.m_SendBuf=new _bytearray__WEBPACK_IMPORTED_MODULE_3__.default,_this}return __extends(CSocket,_super),Object.defineProperty(CSocket.prototype,"usingBinaryTransfer",{get:function(){return this.m_bUsingBinaryTransfer},set:function(val){this.m_bUsingBinaryTransfer=val},enumerable:!0,configurable:!0}),Object.defineProperty(CSocket.prototype,"useParseDate",{set:function(val){this.m_bParseDate=val,this.m_RecvBuf.useParseDate=val},enumerable:!0,configurable:!0}),Object.defineProperty(CSocket.prototype,"host",{get:function(){return this.m_sHost},enumerable:!0,configurable:!0}),Object.defineProperty(CSocket.prototype,"port",{get:function(){return this.m_nPort},enumerable:!0,configurable:!0}),Object.defineProperty(CSocket.prototype,"pingDelay",{get:function(){return this.m_nPingDelay},set:function(v){this.m_nPingDelay=v},enumerable:!0,configurable:!0}),CSocket.prototype.SetAddr=function(addr,ssl,autoSSLPort){void 0===ssl&&(ssl=!1),void 0===autoSSLPort&&(autoSSLPort=!0);var info=addr.split(":");return 2==info.length&&(this.m_sHost=info[0],this.m_nPort=parseInt(info[1]),ssl&&autoSSLPort&&(this.m_nPort+=1e3),this.m_sAddress=(ssl?"wss://":"ws://")+this.m_sHost+":"+this.m_nPort,!0)},CSocket.prototype.Connect=function(){this.m_Status=SOCK_STATUS.SOCK_CONNECTING,this.m_Socket=new WebSocket(this.m_sAddress),this.m_Socket.binaryType="arraybuffer";var self=this;this.m_Socket.onopen=function(evt){self.onRawConnectOk()},this.m_Socket.onerror=function(evt){_trace__WEBPACK_IMPORTED_MODULE_5__.default.error(self.m_sAddress,"网络连接出错")},this.m_Socket.onclose=function(evt){switch(self.m_Status){case SOCK_STATUS.SOCK_HANDING:case SOCK_STATUS.SOCK_CONNECTING:self.onConnectFailed();break;case SOCK_STATUS.SOCK_ACTIVE:self.onConnectBreak();break;default:self.onRawClose()}},this.m_Socket.onmessage=function(evt){self.onRecvData(evt.data)}},CSocket.prototype.Cancel=function(){switch(this.m_bCanceled=!0,this.m_Status){case SOCK_STATUS.SOCK_HANDING:case SOCK_STATUS.SOCK_CONNECTING:break;default:this.DisConnect()}},CSocket.prototype.DisConnect=function(){this.BreakConnect()},CSocket.prototype.onRawConnectOk=function(){if(null!=this.m_Socket){this.m_Status=SOCK_STATUS.SOCK_CONNECTING;var j={v:1,p:"websocket",bindata:this.m_bUsingBinaryTransfer,gtp:{mask:{datetime:!0,rawInt64:!0}},time:Math.round(Date.now()/1e3)},s="connect."+JSON.stringify(j)+".end";this.m_Socket.send(s)}},CSocket.prototype.onConnectFailed=function(){this.dispatchEvent("OnConnectFailed",{})},CSocket.prototype.onConnectBreak=function(){this.onRawClose(),this.dispatchEvent("OnConnectBreak",{})},CSocket.prototype.onRawClose=function(){this.clearPingTimer(),this.m_Socket=null,this.m_RecvBuf=new _bytearray__WEBPACK_IMPORTED_MODULE_3__.default,this.m_RecvBuf.useParseDate=this.m_bParseDate,this.m_SendBuf=new _bytearray__WEBPACK_IMPORTED_MODULE_3__.default,this.m_Status=SOCK_STATUS.SOCK_IDLE,this.m_RecvBuf.gtpMask=this.m_nGTPMask,this.m_SendBuf.gtpMask=this.m_nGTPMask},CSocket.prototype.BreakConnect=function(){null!=this.m_Socket&&this.m_Socket.close()},CSocket.prototype._checkSignKeyBinary=function(bytes,key){var keyc=this.m_SignKeyFnc(bytes,this.m_nSignKey);return _hash__WEBPACK_IMPORTED_MODULE_4__.default.unsigned(keyc)===_hash__WEBPACK_IMPORTED_MODULE_4__.default.unsigned(key)||(_trace__WEBPACK_IMPORTED_MODULE_5__.default.sys("sign key incorrect."),!1)},CSocket.prototype._checkSignKeyString=function(msg){var p,k,s;0===(msg=msg.replace(/^\s*{\s*/,"").replace(/\s*}\s*$/,"")).indexOf('"p"')?(s=msg.lastIndexOf(","),p=msg.slice(0,s),k=msg.slice(s+1)):(s=msg.indexOf(","),k=msg.slice(0,s),p=msg.slice(s+1)),p=p.replace(/^"p"\s*:\s*/,""),k=k.replace(/^"k"\s*:\s*/,"");var bytes=new _bytearray__WEBPACK_IMPORTED_MODULE_3__.default;return bytes.writeUTF8(p),bytes.position=0,this._checkSignKeyBinary(bytes,parseInt(k))},CSocket.prototype.onRecvData=function(data){var isok=!0;this.m_bUsingBinaryTransfer?(this.m_RecvBuf.position=this.m_RecvBuf.length,this.m_RecvBuf.writeArrayBuffer(data,data.byteLength),isok=this.onParsePakBin()):(this.m_RecvBufStr+=data,isok=this.onParsePakStr()),isok||(_trace__WEBPACK_IMPORTED_MODULE_5__.default.error("parse pak failed."),this.BreakConnect())},CSocket.prototype.SendMsg=function(msg){if(null==this.m_Socket||this.m_Status!=SOCK_STATUS.SOCK_ACTIVE)return!1;if(this.m_bEnableIndex&&(msg.i=++this.m_nNetPakIdx),this.m_bUsingBinaryTransfer){var msg_bin=new _bytearray__WEBPACK_IMPORTED_MODULE_3__.default;msg_bin.gtpMask=this.m_nGTPMask,msg_bin.writeValue(msg),msg_bin.position=0,this.m_bEnableSignkey?(this.m_SendBuf.writeUint(4+msg_bin.bytesAvailable),this.m_SendBuf.writeUint(this.m_SignKeyFnc(msg_bin,this.m_nSignKey)),msg_bin.position=0):this.m_SendBuf.writeUint(msg_bin.bytesAvailable),this.m_SendBuf.writeBytes(msg_bin),this.m_Socket.send(this.m_SendBuf.getBuffer(!0)),this.m_SendBuf.clear()}else{var pkg={p:msg};if(this.m_bEnableSignkey){var bytes=new _bytearray__WEBPACK_IMPORTED_MODULE_3__.default;bytes.writeUTF8(JSON.stringify(msg)),bytes.position=0;var key=this.m_SignKeyFnc(bytes,this.m_nSignKey);pkg.k=key}this.m_SendBufStr=JSON.stringify(pkg)+"\n",this.m_Socket.send(this.m_SendBufStr),this.m_SendBufStr=""}return!0},CSocket.prototype.onParsePakBin=function(){var buf=this.m_RecvBuf;for(buf.position=0;buf.length>=17;){var paklen=buf.readUInt();if(buf.bytesAvailable<paklen)return buf.position=0,!0;var key=0;this.m_bEnableSignkey&&(key=buf.readUInt());var pakdata=buf.readBytes(paklen-4);if(buf.removeFront(4+paklen),pakdata.position=0,this.m_bEnableSignkey){if(!this._checkSignKeyBinary(pakdata,key))return!1;pakdata.position=0}var pak=pakdata.readValue();null!=pak&&this.onRecvMsg(pak)}return!0},CSocket.prototype.onParsePakStr=function(){for(var s=-1;(s=this.m_RecvBufStr.indexOf("\n"))>-1;){var msg=this.m_RecvBufStr.slice(0,s);if(this.m_RecvBufStr=this.m_RecvBufStr.slice(s+1),this.m_bEnableSignkey&&!this._checkSignKeyString(msg))return!1;var pak=JSON.parse(msg).p;null!=pak&&this.onRecvMsg(pak)}return!0},CSocket.prototype.onRecvMsg=function(msg){switch(this.m_Status){case SOCK_STATUS.SOCK_CONNECTING:this.onHanding(msg);break;case SOCK_STATUS.SOCK_ACTIVE:this.onProcMsg(msg)}},CSocket.prototype.onHanding=function(msg){if(this.m_bCanceled)this.DisConnect();else{var v=msg.v[0];if(this.m_bEnableIndex=v.i,this.m_bEnableSignkey=v.k,this.m_bEnableSignkey){for(var glid=msg.f,glid_bin=new _bytearray__WEBPACK_IMPORTED_MODULE_3__.default,i=0;i<glid.length;i++)glid_bin.writeUint(glid[i]);glid_bin.position=0,this.m_nSignKey=_hash__WEBPACK_IMPORTED_MODULE_4__.default.crc32(glid_bin,1397109228)}var gtp_ext=v.ext;this.onGTPHand(gtp_ext),this.m_nNetPakIdx=0,this.m_Status=SOCK_STATUS.SOCK_ACTIVE,this.dispatchEvent("OnConnectOk",{}),this.onSendPing()}},CSocket.prototype.onGTPHand=function(mask){if("object"==(void 0===mask?"undefined":_typeof(mask))&&(mask.hasOwnProperty("gtpmask")&&(this.m_nGTPMask=mask.gtpmask),mask.hasOwnProperty("gtpsign")))switch(mask.gtpsign){case"adler32":this.m_SignKeyFnc=_hash__WEBPACK_IMPORTED_MODULE_4__.default.adler32}this.m_RecvBuf.gtpMask=this.m_nGTPMask,this.m_SendBuf.gtpMask=this.m_nGTPMask},CSocket.prototype.onProcMsg=function(msg){msg.c=_hash__WEBPACK_IMPORTED_MODULE_4__.default.unsigned(msg.c);var t=msg.t;switch(t){case _gconst__WEBPACK_IMPORTED_MODULE_0__.NET_MSG_TYPE.NMT_SOCK_CONNECT_ECHO:this.onEchoCmd(msg);break;default:_msgcenter__WEBPACK_IMPORTED_MODULE_6__.default.RecvMsg(this,msg)}},CSocket.prototype.clearPingTimer=function(){0!=this.m_PingTimer&&(this.m_TimerMgr.killTimer(this.m_PingTimer),this.m_PingTimer=0),0!=this.m_WaitPingRetTimer&&(this.m_TimerMgr.killTimer(this.m_WaitPingRetTimer),this.m_WaitPingRetTimer=0)},CSocket.prototype.onEchoCmd=function(msg){var c=msg.c;switch(c){case 672364671:this.m_PingTimer=0,this.clearPingTimer(),this.m_nPing=Date.now()-msg.v[0],this.dispatchEvent("OnPingChg",[this.m_nPing]),_trace__WEBPACK_IMPORTED_MODULE_5__.default.log("CSocket Ping "+this.m_nPing),this.m_PingTimer=this.m_TimerMgr.timerCall(this.m_nPingDelay,this,this.onSendPing)}},CSocket.prototype.onWaitPingRetOTime=function(){this.m_WaitPingRetTimer=0,this.clearPingTimer(),this.onConnectBreak()},CSocket.prototype.onSendPing=function(){this.clearPingTimer();var msg={t:_gconst__WEBPACK_IMPORTED_MODULE_0__.NET_MSG_TYPE.NMT_SOCK_CONNECT_ECHO,a:[1],c:672364671,v:[Date.now()]};this.SendMsg(msg),this.m_WaitPingRetTimer=this.m_TimerMgr.timerCall(2*this.m_nPingDelay,this,this.onWaitPingRetOTime)},CSocket}(_eventdispatcher__WEBPACK_IMPORTED_MODULE_1__.default);__webpack_exports__.default=CSocket},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _extendStatics5,_trace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_baseobj__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),_socket__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),_netmsgmgr__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18),__extends=(_extendStatics5=function(d,b){return(_extendStatics5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics5(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),CGLink=function(_super){function CGLink(){var _this=_super.call(this)||this;return _this.m_Socket=null,_this.m_bUsingBinaryTransfer=!0,_this.m_bParseDate=!0,_this.m_szSocketPending=new Array,_this}return __extends(CGLink,_super),Object.defineProperty(CGLink.prototype,"usingBinaryTransfer",{get:function(){return this.m_bUsingBinaryTransfer},set:function(val){this.m_bUsingBinaryTransfer=val},enumerable:!0,configurable:!0}),Object.defineProperty(CGLink.prototype,"useParseDate",{get:function(){return this.m_bParseDate},set:function(val){this.m_bParseDate=val},enumerable:!0,configurable:!0}),CGLink.prototype.shuffle=function(a){for(var i=a.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1)),x=a[i];a[i]=a[j],a[j]=x}return a},CGLink.prototype.SockConnectOk=function(evt){if(null==this.m_Socket){var sock=evt.dispatcher;this.m_szSocketPending.forEach(function(socket,idx,array){socket.clearEventListener(),socket!=sock&&socket.Cancel()}),this.m_szSocketPending=new Array,this.m_Socket=sock,_trace__WEBPACK_IMPORTED_MODULE_0__.default.sys("SGLink connect "+sock.host+":"+sock.port+" OK."),sock.addEventListener("OnConnectBreak",this,this.ConnectBreak),_netmsgmgr__WEBPACK_IMPORTED_MODULE_3__.default.getInstance().SetLink(sock),this.OnLinkReady()}},CGLink.prototype.ConnectFailed=function(evt){var sock=evt.dispatcher;sock.clearEventListener();for(var i=0;i<this.m_szSocketPending.length;i++)if(this.m_szSocketPending[i]==sock){this.m_szSocketPending.splice(i,1);break}0==this.m_szSocketPending.length&&this.OnConnectFailed()},CGLink.prototype.SetAddr=function(address,ssl,autoSSLPort){void 0===ssl&&(ssl=!1),void 0===autoSSLPort&&(autoSSLPort=!0),-1===address.indexOf(":")&&(address=atob(address.replace(/\w/g,function($1){for(var f=String.fromCharCode,i=1,c=$1.charCodeAt(0),s=[97,122,65,90,48,57];i<6;i++){if(c===s[i])return f(s[i-1]);i++}return f(c+1)})));var addrs=this.shuffle(address.split(";"));"https:"!==location.protocol||ssl||(ssl=!0);for(var i=0;i<addrs.length;i++){var sock=new _socket__WEBPACK_IMPORTED_MODULE_2__.default;sock.SetAddr(addrs[i],ssl,autoSSLPort),sock.usingBinaryTransfer=this.m_bUsingBinaryTransfer,sock.addEventListener("OnConnectFailed",this,this.ConnectFailed),sock.addEventListener("OnConnectOk",this,this.SockConnectOk),this.m_szSocketPending.push(sock)}},CGLink.prototype.Connect=function(){for(var i=0;i<this.m_szSocketPending.length;i++){var sock=this.m_szSocketPending[i];sock.useParseDate=this.m_bParseDate,sock.Connect()}},CGLink.prototype.OnLinkReady=function(){this.dispatchEvent("eve.OnLinkReady")},CGLink.prototype.OnConnectFailed=function(){this.dispatchEvent("eve.OnConnectFailed")},CGLink.prototype.ConnectBreak=function(evt){this.m_Socket=null,_netmsgmgr__WEBPACK_IMPORTED_MODULE_3__.default.getInstance().SetLink(null),this.dispatchEvent("eve.OnConnectBreak"),this.OnConnectBreak()},CGLink.prototype.OnConnectBreak=function(){},CGLink.prototype.DisConnect=function(){for(var i=0;i<this.m_szSocketPending.length;i++){var sock=this.m_szSocketPending[i];sock.clearEventListener(),sock.DisConnect()}this.m_szSocketPending=[],null!=this.m_Socket&&(this.m_Socket.DisConnect(),this.m_Socket=null)},CGLink}(_baseobj__WEBPACK_IMPORTED_MODULE_1__.default);__webpack_exports__.default=CGLink},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _extendStatics6,RPC_SESSION_TYPE,_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_hash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_trace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6),_gconst__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),_BigInteger__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),_msgcenter__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(15),_rpc__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(14),__extends=(_extendStatics6=function(d,b){return(_extendStatics6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics6(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});!function(RPC_SESSION_TYPE){RPC_SESSION_TYPE[RPC_SESSION_TYPE.SESSION_UNKNOWN=0]="SESSION_UNKNOWN",RPC_SESSION_TYPE[RPC_SESSION_TYPE.SESSION_CALL=1]="SESSION_CALL",RPC_SESSION_TYPE[RPC_SESSION_TYPE.SESSION_CALLBACK=2]="SESSION_CALLBACK",RPC_SESSION_TYPE[RPC_SESSION_TYPE.SESSION_SERVICEREG=3]="SESSION_SERVICEREG",RPC_SESSION_TYPE[RPC_SESSION_TYPE.SESSION_SERVICEBREAK=4]="SESSION_SERVICEBREAK"}(RPC_SESSION_TYPE||(RPC_SESSION_TYPE={}));var CRPCSession=function(){function CRPCSession(idx,path,evename,agv,ctx,okfunc,errfunc,cbkfunc,bind){this.m_Type=RPC_SESSION_TYPE.SESSION_UNKNOWN,this.m_nOutTime=0,this.m_nExpiresTime=0,this.m_nSessionIdx=idx,this.m_sPath=_rpc__WEBPACK_IMPORTED_MODULE_6__.default.MakeSName(path);var paths=_rpc__WEBPACK_IMPORTED_MODULE_6__.default.SplitPath(this.m_sPath);this.m_sSName=paths[0],this.m_sGName=paths[1],this.m_Agv=agv,this.m_sEveName=evename,this.m_Ctx=ctx,this.m_OkFunc=okfunc,this.m_ErrFunc=errfunc,this.m_CBKFunc=cbkfunc,this.m_BindAgv=bind,this.m_GOID=[_utils__WEBPACK_IMPORTED_MODULE_0__.default.getProcessID(),Math.round(Math.random()*Math.pow(2,32)),Math.round(Math.random()*Math.pow(2,32)),this.m_nSessionIdx]}return CRPCSession.prototype.SendMsg=function(){var eveid=_hash__WEBPACK_IMPORTED_MODULE_1__.default.str2key(this.m_sEveName);_trace__WEBPACK_IMPORTED_MODULE_2__.default.rpc("Call "+this.m_sPath+" {"+this.m_sEveName+"} : ",this.m_Agv);var msg={t:_gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_RPC,a:_hash__WEBPACK_IMPORTED_MODULE_1__.default.Address2Array(this.m_sSName,this.m_sGName),f:this.m_GOID,c:eveid,v:this.m_Agv};CNetMsgMgr.getInstance().SendMsg(msg)},CRPCSession.prototype.RetCallOk=function(agv){_trace__WEBPACK_IMPORTED_MODULE_2__.default.rpc_ret("Call "+this.m_sPath+" {"+this.m_sEveName+"} OK : ",agv),this.m_OkFunc.call(this.m_Ctx,agv,this.m_BindAgv)},CRPCSession.prototype.RetCallErr=function(errflag,errmsg,agv){_trace__WEBPACK_IMPORTED_MODULE_2__.default.rpc_ret("Call "+this.m_sPath+" {"+this.m_sEveName+"} Failed "+errflag+" - "+errmsg+" : ",agv),this.m_ErrFunc.call(this.m_Ctx,errflag,errmsg,agv,this.m_BindAgv)},CRPCSession.prototype.CallBack=function(eveid,agv){this.m_CBKFunc.call(this.m_Ctx,eveid,agv,this.m_BindAgv)},CRPCSession}(),CNetMsgMgr=function(_super){function CNetMsgMgr(){var _this=_super.call(this)||this;return _this.m_nRPCNextUpdate=0,_this.m_nMPKNextUpdate=0,_this.m_nRPCSessionIdx=0,_this.m_szRPCSession=new Array,_this.m_szMsgPending=new Array,_this.m_Socket=null,_this.m_szJoinNetObj=new Array,_this.m_szNetObj={},_this.m_bFroeachNetObjing=!1,_this.m_szWaitRemoveNetObj=[],_msgcenter__WEBPACK_IMPORTED_MODULE_5__.default.RegProcessor(_this),_utils__WEBPACK_IMPORTED_MODULE_0__.default.RegSysUpdate(_this.OnUpdate.bind(_this)),_this}return __extends(CNetMsgMgr,_super),CNetMsgMgr.getInstance=function(){return CNetMsgMgr.s_Instance},CNetMsgMgr.prototype.SetLink=function(sock){if(this.m_Socket=sock,null!=sock){for(var i=0;i<this.m_szMsgPending.length;i++)sock.SendMsg(this.m_szMsgPending[i]);this.m_szMsgPending=new Array}},CNetMsgMgr.prototype.OnUpdate=function(elapse,now){this.OnUpdatePRC(elapse,now),this.OnUpdateMsgPak(elapse,now)},CNetMsgMgr.prototype.OnUpdateMsgPak=function(elapse,now){if(!(this.m_nMPKNextUpdate>now)){var nlist=this.m_szNetObj;for(var key in nlist){var obj=nlist[key];null!=obj&&obj.hasPakMsgPending&&obj.SendPendingPakMsg()}this.m_nMPKNextUpdate+=50}},CNetMsgMgr.prototype.OnUpdatePRC=function(elapse,now){if(!(this.m_nRPCNextUpdate>now)){var i,dlist=[],slist=this.m_szRPCSession;for(i=0;i<slist.length;i++){var session=slist[i];switch(session.m_Type){case RPC_SESSION_TYPE.SESSION_CALL:session.m_nExpiresTime<=now&&(session.RetCallErr(_gconst__WEBPACK_IMPORTED_MODULE_3__.RPC_SYSERR.SYSERR_TIMEOUT,Object(_gconst__WEBPACK_IMPORTED_MODULE_3__.getRPCSysErrMsg)(_gconst__WEBPACK_IMPORTED_MODULE_3__.RPC_SYSERR.SYSERR_TIMEOUT),{}),dlist.push(session.m_nSessionIdx));break;case RPC_SESSION_TYPE.SESSION_CALLBACK:session.m_nExpiresTime<=now&&(session.SendMsg(),session.m_nExpiresTime=now+session.m_nOutTime)}}for(i=0;i<dlist.length;i++)this.popRPCSession(dlist[i]);this.m_nRPCNextUpdate+=1e3}},CNetMsgMgr.prototype.SendMsg=function(msg){null===this.m_Socket?this.m_szMsgPending.push(msg):this.m_Socket.SendMsg(msg)},CNetMsgMgr.prototype.RecvMsg=function(sock,msg){var t=msg.t,target=msg.a,from=msg.f,cmd=msg.c,agv=msg.v;switch(t){case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_RPC_RET:case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_PUSH:this.OnRPC(t,target,cmd,agv);break;case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_NETGROUP_JOIN_RET:case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_NETGROUP_TOC:case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_NETGROUP_MIRROR_OP:case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_NETGROUP_SVRKICK:case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_BREAK_SERVICE:this.OnNetObjEvt(t,target,from,cmd,agv)}},CNetMsgMgr.prototype.findRPCSession=function(sessionid){for(var i=0;i<this.m_szRPCSession.length;i++){var session=this.m_szRPCSession[i];if(session.m_nSessionIdx==sessionid)return session}return null},CNetMsgMgr.prototype.popRPCSession=function(sessionid){for(var i=0;i<this.m_szRPCSession.length;i++){var session=this.m_szRPCSession[i];if(session.m_nSessionIdx==sessionid)return delete this.m_szRPCSession[i],this.m_szRPCSession.splice(i,1),!0}return!1},CNetMsgMgr.prototype.OnRPC=function(t,target,cmd,agv){var session,sessionid=target[3];switch(t){case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_RPC_RET:null!=(session=this.findRPCSession(sessionid))&&(1==cmd?session.RetCallOk(agv):session.RetCallErr(agv[0],agv[1],agv[2]),session.m_Type==RPC_SESSION_TYPE.SESSION_CALL&&this.popRPCSession(sessionid));break;case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_PUSH:null!=(session=this.findRPCSession(sessionid))&&session.m_Type==RPC_SESSION_TYPE.SESSION_CALLBACK&&session.CallBack(cmd,agv)}},CNetMsgMgr.prototype.Cov2Address=function(addr_in){if(null==addr_in)return[0,0,0,0];if(4==addr_in.length)return[_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(addr_in[0]),_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(addr_in[1]),_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(addr_in[2]),_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(addr_in[3])];if(2==addr_in.length){var addr_o=[],tmp=Object(_BigInteger__WEBPACK_IMPORTED_MODULE_4__.default)(addr_in[0]);return addr_o.push(_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(tmp.and(4294967295).toJSNumber())),addr_o.push(_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(tmp.shiftRight(32).toJSNumber())),tmp=Object(_BigInteger__WEBPACK_IMPORTED_MODULE_4__.default)(addr_in[1]),addr_o.push(_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(tmp.and(4294967295).toJSNumber())),addr_o.push(_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(tmp.shiftRight(32).toJSNumber())),addr_o}return[0,0,0,0]},CNetMsgMgr.prototype.OnNetObjEvt=function(t,target,from,cmd,agv){var netobj,i;switch(target=this.Cov2Address(target),from=this.Cov2Address(from),t){case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_NETGROUP_JOIN_RET:if(null==(netobj=this.popWaitJoinNetObj(target[3])))return;1==cmd?(netobj.JoinGroupOk(from),this.m_szNetObj[netobj.GNID]=netobj):netobj.JoinGroupErr(agv[0],agv[1],agv[2]);break;case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_NETGROUP_TOC:if(null==(netobj=this.findNetObj(target)))break;if(1318246593!==cmd)netobj.OnS(cmd,agv);else{var msgs=agv;for(i=0;i<msgs.length;i++){var msg=msgs[i];if(2==msg.length)netobj.OnS(_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(msg[0]),msg[1]);else if(3==msg.length){var vnetobj=this.findNetObj(this.Cov2Address(msg[1]));null!=vnetobj&&vnetobj.OnS(_hash__WEBPACK_IMPORTED_MODULE_1__.default.unsigned(msg[0]),msg[3])}}}break;case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_NETGROUP_MIRROR_OP:var tmp=[agv[0],agv[1]],gnid=this.Cov2Address(tmp),gnidstr=JSON.stringify(gnid),classname=agv[2],isghost=agv[3],createagv=agv[4],mainNetobj=this.findNetObj(target);null!=mainNetobj&&(0==cmd?gnidstr==mainNetobj.GNID?mainNetobj.RemoteCreate(gnid,createagv,gnid,isghost):null!=(netobj=mainNetobj.OnCreateMirrorObj(classname))&&netobj.RemoteCreate(gnid,createagv,mainNetobj.rawGNID,isghost):mainNetobj.NetObjLeave());break;case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_NETGROUP_SVRKICK:if(null==(netobj=this.findNetObj(target)))_trace__WEBPACK_IMPORTED_MODULE_2__.default.ons("ServiceKickOut ",agv);else{var errflag=agv[0],errmsg=agv[1],subagv=agv[2];netobj.BreakPlayer(errflag,errmsg,subagv)}break;case _gconst__WEBPACK_IMPORTED_MODULE_3__.NET_MSG_TYPE.NMT_BREAK_SERVICE:var slist=agv;for(i=0;i<slist.length;i++)this.OnServiceBreak(slist[i])}},CNetMsgMgr.prototype.RPC_OKFunc_Def=function(agv,bind){},CNetMsgMgr.prototype.RPC_ErrFunc_Def=function(errflag,errmsg,agv,bind){},CNetMsgMgr.prototype.RPC_CBKFunc_Def=function(eveid,agv,bind){},CNetMsgMgr.prototype.RPC_Call=function(path,evename,agv,ctx,okfunc,errfunc,extinfo){void 0===extinfo&&(extinfo=null);var bind={},otime=3e4;null!=extinfo&&(bind=extinfo.bind||{},otime=extinfo.otime||3e4);var session=new CRPCSession(++this.m_nRPCSessionIdx,path,evename,agv,ctx,okfunc,errfunc,this.RPC_CBKFunc_Def,bind);session.m_Type=RPC_SESSION_TYPE.SESSION_CALL,session.m_nOutTime=otime,session.m_nExpiresTime=-1==otime?Number.MAX_VALUE:Date.now()+otime,this.m_szRPCSession.push(session),session.SendMsg()},CNetMsgMgr.prototype.RPC_Send=function(path,evename,agv){var session=new CRPCSession(++this.m_nRPCSessionIdx,path,evename,agv,{},this.RPC_OKFunc_Def,this.RPC_ErrFunc_Def,this.RPC_CBKFunc_Def,{});session.SendMsg()},CNetMsgMgr.prototype.RPC_RegCallBack=function(path,evename,agv,ctx,cbkfunc,extinfo){void 0===extinfo&&(extinfo=null);var bind={},loopdelay=-1;null!=extinfo&&(loopdelay=extinfo.loopdelay||-1,bind=extinfo.bind);var session=new CRPCSession(++this.m_nRPCSessionIdx,path,evename,agv,ctx,this.RPC_OKFunc_Def,this.RPC_ErrFunc_Def,cbkfunc,bind);return session.m_Type=RPC_SESSION_TYPE.SESSION_CALLBACK,session.m_nOutTime=loopdelay,session.m_nExpiresTime=-1==loopdelay?Number.MAX_VALUE:Date.now()+loopdelay,this.m_szRPCSession.push(session),session.SendMsg(),session.m_nSessionIdx},CNetMsgMgr.prototype.RPC_UnRegCallBack=function(sessionid){this.popRPCSession(sessionid)},CNetMsgMgr.prototype.RPC_UnRegCallBackAll=function(){var i,dlist=[];for(i=0;i<this.m_szRPCSession.length;i++){var session=this.m_szRPCSession[i];session.m_Type==RPC_SESSION_TYPE.SESSION_CALLBACK&&dlist.push(session.m_nSessionIdx)}for(i=0;i<dlist.length;i++)this.popRPCSession(dlist[i])},CNetMsgMgr.prototype.AddWaitJoinNetObj=function(obj){this.m_szJoinNetObj.push(obj)},CNetMsgMgr.prototype.popWaitJoinNetObj=function(objidx){for(var nlist=this.m_szJoinNetObj,i=0;i<nlist.length;i++){var obj=nlist[i];if(obj.objflag==objidx)return nlist.splice(i,1)[0]}},CNetMsgMgr.prototype.findNetObj=function(gnid){return this.m_szNetObj[JSON.stringify(gnid)]},CNetMsgMgr.prototype.removeNetObj=function(objidx){if(this.m_bFroeachNetObjing)this.m_szWaitRemoveNetObj.push(objidx);else{var nlist=this.m_szNetObj;for(var key in nlist){var obj=nlist[key];if(null!=obj&&obj.objflag==objidx)return delete this.m_szNetObj[key],void(this.m_szNetObj[key]=void 0)}}},CNetMsgMgr.prototype._tryRmvNetObj=function(){for(var dlist=this.m_szWaitRemoveNetObj,i=0;i<dlist.length;i++)this.removeNetObj(dlist[i])},CNetMsgMgr.prototype.OnServiceBreak=function(sname){this.m_bFroeachNetObjing=!0;var nlist=this.m_szNetObj;for(var key in nlist){var obj=nlist[key];null!=obj&&obj.groupSName==sname&&obj.SvrBreak(1,"服务器关闭")}this.m_bFroeachNetObjing=!1,this._tryRmvNetObj()},CNetMsgMgr.s_Instance=new CNetMsgMgr,CNetMsgMgr}(_msgcenter__WEBPACK_IMPORTED_MODULE_5__.CMsgProcessor);__webpack_exports__.default=CNetMsgMgr}]).default},{}],128:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_matchkind2=_interopRequireDefault(require("./matchkind")),_matchdef2=_interopRequireDefault(require("./matchdef")),_matchreward2=_interopRequireDefault(require("./matchreward"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BaseMatchKind=function(_BaseObj){function BaseMatchKind(mode,kindid,class_tab){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseMatchKind);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BaseMatchKind.__proto__||Object.getPrototypeOf(BaseMatchKind)).call(this));return _this.m_MatchMode=mode,_this.m_nKindID=parseInt(kindid),_this.m_nMinPlayerNum=2,_this.m_nChairNum=2,_this.m_szTicket=[],_this.m_szReward=[],class_tab&&BaseMatchKind.Reg(class_tab,_this),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BaseMatchKind,_BaseObj3.default),_createClass(BaseMatchKind,null,[{key:"Reg",value:function(kind_class,kind){BaseMatchKind.MatchKind||(BaseMatchKind.MatchKind=_matchkind2.default),BaseMatchKind.MatchKind.Find(kind.m_nKindID)&&console.log("警告！重复的比赛编码！",kind.m_nKindID);var kindlist=kind_class.s_szAllKind;kindlist||(kind_class.s_szAllKind=[],kindlist=kind_class.s_szAllKind);for(var i=0;i<kindlist.length;i++)if(kindlist[i].m_nKindID==kind.m_nKindID)return void(kindlist[i]=kind);kindlist.push(kind),kindlist.sort(function(e1,e2){return e1.m_nKindID<e2.m_nKindID})}},{key:"Find",value:function(kind_class,kindid){var kindlist=kind_class.s_szAllKind;if(!kindlist)return null;for(var i=0;i<kindlist.length;i++){var kind=kindlist[i];if(kind.m_nKindID==kindid)return kind}return null}},{key:"ParseDiyTicket",value:function(diydata){var ticket=[],service={},diy_ticket=diydata.ticket;if("object"===(void 0===diy_ticket?"undefined":_typeof(diy_ticket))){if(diy_ticket.item){var item_type=_typeof(diy_ticket.item);"object"===item_type?ticket[ticket.length]={type:"item",itemlist:[[diy_ticket.item[0],diy_ticket.item[1]]]}:"string"!==item_type&&"number"!==item_type||(ticket[ticket.length]={type:"item",itemlist:[[parseInt(diy_ticket.item),1]]})}if(diy_ticket.gems&&diy_ticket.gems>=0){var t={type:"gems",gems:diy_ticket.gems};ticket[ticket.length]=t}if(diy_ticket.gold&&diy_ticket.gold>=0){var _t={type:"gold",gold:diy_ticket.gold};ticket[ticket.length]=_t}if(diy_ticket.vouchers1&&diy_ticket.vouchers1>=0){var _t2={type:"vouchers1",vouchers1:diy_ticket.vouchers1};ticket[ticket.length]=_t2}}var ticket_service=diydata.ticket_service;if("object"===(void 0===ticket_service?"undefined":_typeof(ticket_service))){if(ticket_service.item){var _item_type=_typeof(ticket_service.item);"object"===_item_type?service.itemlist=[[ticket_service.item[0],ticket_service.item[1]]]:"string"!==_item_type&&"number"!==_item_type||(service.itemlist=[[parseInt(ticket_service.item),1]])}ticket_service.gems>0&&(service.gems=ticket_service.gems),ticket_service.gold>0&&(service.gold=ticket_service.gold),ticket_service.vouchers1>0&&(service.vouchers1=ticket_service.vouchers1)}return[ticket,service]}}]),_createClass(BaseMatchKind,[{key:"DefParse",value:function(value,gtype){this.m_sName=value["名称"],this.m_sShowName=value["显示名字"],this.m_sModuleName=value["游戏模块"],this.m_nMinPlayerNum=value["开桌人数"],this.m_nChairNum=value["椅子数"];var ticket=value["门票"];this.m_nTicketGold=parseInt(value["参赛费"]),this.m_nTicketGems=parseInt(value["钻石"]),this.m_nTicketVouchers1=parseInt(value["奖券"]),this.m_nTicketGold||(this.m_nTicketGold=0),this.m_nTicketGems||(this.m_nTicketGems=0),this.m_nTicketVouchers1||(this.m_nTicketVouchers1=0),this.m_szTicketService=value["服务费"],"object"!==_typeof(this.m_szTicketService)&&(this.m_szTicketService={});var tlist=[];ticket&&(ticket instanceof Array?ticket.length>0&&tlist.push({type:"item",itemlist:[[ticket[0],ticket[1]]]}):0!==ticket&&tlist.push({type:"item",itemlist:[[ticket,1]]})),this.m_nTicketGems>0&&tlist.push({type:"gems",gems:this.m_nTicketGems}),this.m_nTicketGold>0&&tlist.push({type:"gold",gold:this.m_nTicketGold}),this.m_nTicketVouchers1>0&&tlist.push({type:"vouchers1",vouchers1:this.m_nTicketVouchers1}),this.m_szTicket=tlist;var reward=value["奖励"];if(gtype&&reward&&"string"==typeof reward&&reward.length>0){var fpath="data/match/"+gtype+"/reward/"+reward;this.m_szReward=_matchreward2.default.Find(fpath)}this.m_szReward||(this.m_szReward=[])}},{key:"hasTicket",value:function(tname){for(var tlist=this.m_szTicket,i=0;i<tlist.length;i++){if(tname==tlist[i].type)return!0}return!1}},{key:"_getTicketValue",value:function(ticket){return"gold"==ticket.type?{gold:ticket.gold}:"gems"==ticket.type?{gems:ticket.gems}:"item"==ticket.type?{itemlist:ticket.itemlist}:"money"==ticket.type?{gold:ticket.gold,gems:ticket.gems}:"vouchers1"==ticket.type?{vouchers1:ticket.vouchers1}:null}},{key:"getTicket",value:function(tname){for(var tlist=this.m_szTicket,i=0;i<tlist.length;i++){var sub=tlist[i];if(tname==sub.type)return sub}return null}},{key:"getTicketValue",value:function(tname){for(var tlist=this.m_szTicket,i=0;i<tlist.length;i++){var sub=tlist[i];if(tname==sub.type)return this._getTicketValue(sub)}return null}},{key:"useTicket",value:function(itemid){var ticket=this.getTicket("item");if(!ticket)return!1;for(var itemlist=ticket.itemlist,k=0;k<itemlist.length;k++)if(itemlist[k][0]==itemid)return!0;return!1}},{key:"getRaceType",value:function(lv){return _matchdef2.default.MATCH_RACE.MR_DIEOUT_NORMAL}},{key:"getReward",value:function(rank){return rank<0&&rank>=this.m_szReward.length?null:this.m_szReward[rank-1]}},{key:"getMaxRewardRank",value:function(){return this.m_szReward?this.m_szReward.length:0}},{key:"getRewardStr",value:function(reward){return reward?_matchreward2.default.GetRewardStr(reward):null}},{key:"getAddon",value:function(chiplv,buytimes){return buytimes?[null,null,1]:[null,null]}},{key:"allUsrInStart",value:function(){return!0}},{key:"getRebuy",value:function(chiplv,buytimes){return[null,null,1]}},{key:"getCanRebuyNum",value:function(chiplv,buytimes){return[null,null,1]}}]),BaseMatchKind}();exports.default=BaseMatchKind},{"../gtea/BaseObj":126,"./matchdef":132,"./matchkind":133,"./matchreward":136}],129:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_gtea2=_interopRequireDefault(require("../gtea/gtea")),_matchkind2=_interopRequireDefault(require("./matchkind")),_matchdef2=_interopRequireDefault(require("./matchdef")),_matchobjmgr2=_interopRequireDefault(require("./matchobjmgr")),_playerdata_mgr2=_interopRequireDefault(require("../data/playerdata_mgr")),_basematchkind2=_interopRequireDefault(require("./basematchkind"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FNGMatch=function(_BaseObj){function FNGMatch(kindid,mmgr){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FNGMatch);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FNGMatch.__proto__||Object.getPrototypeOf(FNGMatch)).call(this));return _this.m_pKind=_matchkind2.default.Find(kindid),_this.m_MatchMode=_matchdef2.default.MATCH_MODE.MM_FNG,_this.m_MatchObjMgr=mmgr,_this.m_bSignUped=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FNGMatch,_BaseObj3.default),_createClass(FNGMatch,[{key:"setData",value:function(v){this.m_Data=v,this.m_bSignUped=v.sign_up,this.dispatchEvent("eve.DataChg")}},{key:"setSignUserNum",value:function(v){this.m_Data?this.m_Data.signup_num=v.signup_num:this.m_Data=v,this.dispatchEvent("eve.DataChg")}},{key:"setSignUpStatus",value:function(st,no_br){this.m_bSignUped!=st&&(st&&(this.m_bSignUped=st),no_br||this.dispatchEvent("eve.DataChg"))}},{key:"getReward",value:function(){return this.m_pKind.m_szReward}},{key:"GetSignNum",value:function(){return this.m_Data?this.m_Data.signup_num:0}},{key:"GetStartNum",value:function(){return this.m_pKind.m_nMinUser}},{key:"GetOnlineNum",value:function(){return null==this.m_Data?0:this.m_Data.signup_num+this.m_Data.playing_num}},{key:"isSignUp",value:function(){if(this.m_bSignUped)return!0;for(var now=new Date,mlist=_matchobjmgr2.default.getInstance().ListFNGMatch(),i=0;i<mlist.length;i++){var mobj=mlist[i];if(mobj.m_Status<=_matchdef2.default.MATCH_STATUS.MST_MATCH&&mobj.m_bSignUp&&mobj.m_EndTime&&mobj.m_EndTime<now)return!0}return!1}},{key:"SignUp",value:function(){if(!this.m_bSignUped&&!this.m_bPreSigning){var agv={uid:_playerdata_mgr2.default.getInstance().getMeUID(),token:_playerdata_mgr2.default.getInstance().getMeToken(),matchkind:this.m_pKind.m_nKindID,masterscore:_playerdata_mgr2.default.getInstance().getMe().GetMasterScore(),channel:_playerdata_mgr2.default.getInstance().getMe().getChannel()};this.m_bPreSigning=!0,_gtea2.default.rpc.Call("比赛管理","SignUpFNG",agv,this,function(resp){this.m_bPreSigning=!1,this.setSignUpStatus(!0,!0),this.setData(resp),this.dispatchEvent("eve.SignUpOK")},function(code,msg,opt){this.m_bPreSigning=!1,this.dispatchEvent("eve.SignUpFailed",{errflag:code,errmsg:msg})})}}},{key:"CancelSignUp",value:function(){var agv={uid:_playerdata_mgr2.default.getInstance().getMeUID(),token:_playerdata_mgr2.default.getInstance().getMeToken(),matchkind:this.m_pKind.m_nKindID};_gtea2.default.rpc.Call("比赛管理","UsrCancelSignUpFNG",agv,this,function(resp){this.setData(resp),this.setSignUpStatus(!1,!0),this.dispatchEvent("eve.CancelSignUpOK")},function(code,msg,opt){this.dispatchEvent("eve.CancelSignUpFailed",{errflag:code,errmsg:msg})})}},{key:"getTicket",value:function(){if(this.m_szOption&&this.m_szOption.diy){var data=_basematchkind2.default.ParseDiyTicket(this.m_szOption.diy),ticket=data[0],service=data[1];if(ticket.length>0||Object.keys(service).length>0)return[ticket,service]}return[this.m_pKind.m_szTicket,this.m_pKind.m_szTicketService]}},{key:"getMatchName",value:function(){return this.m_pKind.m_sShowName||this.m_pKind.m_sName}},{key:"getTicketEx",value:function(){for(var ticket=this.getTicket()[0],service=this.getTicket()[1],szticket={gems:0,gold:0,vouchers1:0,itemlist:[]},i=0;i<ticket.length;i++){var sub=ticket[i];sub.gems&&(szticket.gems=sub.gems),sub.gold&&(szticket.gold=sub.gold),sub.vouchers1&&(szticket.vouchers1=sub.vouchers1),sub.itemlist&&(szticket.itemlist=sub.itemlist)}return[szticket,service]}},{key:"TicketEmpty",value:function(){var szticket=this.getTicketEx()[0];return!(szticket.gems>0)&&(!(szticket.gold>0)&&(!(szticket.vouchers1>0)&&!(szticket.itemlist.length>0)))}}]),FNGMatch}();exports.default=FNGMatch},{"../data/playerdata_mgr":117,"../gtea/BaseObj":126,"../gtea/gtea":127,"./basematchkind":128,"./matchdef":132,"./matchkind":133,"./matchobjmgr":135}],130:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_basematchkind2=_interopRequireDefault(require("./basematchkind")),_matchdef2=_interopRequireDefault(require("./matchdef"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var KindFree=function(_BaseMatchKind){function KindFree(kindid,class_tab){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,KindFree),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(KindFree.__proto__||Object.getPrototypeOf(KindFree)).call(this,_matchdef2.default.MATCH_MODE.MM_FREE,kindid,class_tab))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(KindFree,_basematchkind2.default),_createClass(KindFree,[{key:"DefParse",value:function(value,gtype){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(KindFree.prototype.__proto__||Object.getPrototypeOf(KindFree.prototype),"DefParse",this).call(this,value,gtype),this.m_szTicket[0]={type:"gold",gold:value["参赛费"],rollback:0}}}]),KindFree}();exports.default=KindFree},{"./basematchkind":128,"./matchdef":132}],131:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var MasterScoreMgr=function(_BaseObj){function MasterScoreMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MasterScoreMgr);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(MasterScoreMgr.__proto__||Object.getPrototypeOf(MasterScoreMgr)).call(this));_this.m_szScoreRank=[];var tdf=Laya.loader.getRes("data/match/masterscorerank.json");if(tdf)for(var key in tdf)_this.m_szScoreRank[_this.m_szScoreRank.length]={rank:parseInt(key),name:tdf[key]["段位名称"],minscore:tdf[key]["最低分"],maxscore:tdf[key]["最高分"],neednum:tdf[key]["激活次数"],reward:tdf[key]["奖励"],icon:tdf[key]["图标"]};return _this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MasterScoreMgr,_BaseObj3.default),_createClass(MasterScoreMgr,null,[{key:"getInstance",value:function(){return MasterScoreMgr.instance||(MasterScoreMgr.instance=new MasterScoreMgr),MasterScoreMgr.instance}}]),_createClass(MasterScoreMgr,[{key:"GetRank",value:function(score,num){this.m_szScoreRank.length;return 0}},{key:"GetDataByScore",value:function(score,num){this.m_szScoreRank.length;return null}},{key:"GetDataByRank",value:function(rank){if(rank<=0)return null;for(var i=0;i<this.m_szScoreRank.length;i++){var data=this.m_szScoreRank[i];if(data.rank==rank)return data}return null}}]),MasterScoreMgr}();exports.default=MasterScoreMgr},{"../gtea/BaseObj":126}],132:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MatchDef=function MatchDef(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MatchDef)};exports.default=MatchDef,MatchDef.MATCH_MODE={MM_UNKNOWN:0,MM_FREE:1,MM_SNG:2,MM_MTT:3,MM_DIY:4,MM_FNG:5,MM_JOY:6},MatchDef.MATCH_STATUS={MST_IDLE:0,MST_SINGUP:1,MST_WAIT_CHECKIN:2,MST_PREPAREROOM:3,MST_ENTRANCE:4,MST_MATCH:5,MST_END:6,MST_CANCEL:7},MatchDef.MATCH_RACE={MR_DIEOUT_NORMAL:1,MR_DIEOUT_LOOP:2},MatchDef.DIEOUT_RULE={DR_NO:0,DR_LOWSCORE:1,DR_DESK:2,DR_RANK:3,DR_LOSER:4,DR_FINAL4:5},MatchDef.RAND_DESK_RULE={RDR_RAND:1,RDR_SNAKE:2,RDR_SWITZER:3,RDR_GROUP:4},MatchDef.AGENT_RoundStatus={RS_IDLE:1,RS_WAIT_ARRIVAL:2,RS_MATCH:3,RS_IN_NEXT:4,RS_DIE:5}},{}],133:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_basematchkind2=_interopRequireDefault(require("./basematchkind")),_matchdef2=_interopRequireDefault(require("./matchdef"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MatchKind=function(){function MatchKind(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MatchKind)}return _createClass(MatchKind,null,[{key:"Reg",value:function(mode,kind){MatchKind.m_szMatchKinds||(MatchKind.m_szMatchKinds={}),MatchKind.m_szMatchKinds[String(mode)]=kind}},{key:"Find",value:function(kindid){for(var mode in MatchKind.BaseMatchKind||(MatchKind.BaseMatchKind=_basematchkind2.default),MatchKind.m_szMatchKinds||(MatchKind.m_szMatchKinds={}),MatchKind.m_szMatchKinds){var kind=MatchKind.BaseMatchKind.Find(MatchKind.m_szMatchKinds[mode],kindid);if(kind)return kind}return null}},{key:"CreateDiy",value:function(data){var kind=MatchKind.m_szMatchKinds[String(_matchdef2.default.MATCH_MODE.MM_DIY)];return kind&&kind.ChkValid(data)?new kind(data):null}},{key:"List",value:function(mode){var kindtype=MatchKind.m_szMatchKinds[String(mode)];return kindtype?kindtype.s_szAllKind:{}}},{key:"FindKindByTicketID",value:function(itemid){for(var mode in MatchKind.BaseMatchKind||(MatchKind.BaseMatchKind=_basematchkind2.default),MatchKind.m_szMatchKinds){var kindlist=MatchKind.m_szMatchKinds[mode].s_szAllKind;if(kindlist)for(var i=0;i<kindlist.length;i++){var kind=kindlist[i];if(kind.useTicket(itemid))return kind}}return null}}]),MatchKind}();exports.default=MatchKind},{"./basematchkind":128,"./matchdef":132}],134:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_gtea2=_interopRequireDefault(require("../gtea/gtea")),_matchobjmgr2=_interopRequireDefault(require("./matchobjmgr")),_matchdef2=_interopRequireDefault(require("./matchdef")),_basematchkind2=_interopRequireDefault(require("./basematchkind")),_matchkind2=_interopRequireDefault(require("./matchkind")),_comfunc2=_interopRequireDefault(require("../utils/comfunc")),_matchreward2=_interopRequireDefault(require("./matchreward")),_playerdata_mgr2=_interopRequireDefault(require("../data/playerdata_mgr")),_UIMgr2=_interopRequireDefault(require("../ui/UIMgr")),_gamemodelmgr2=_interopRequireDefault(require("../gamemodel/gamemodelmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MatchObj=function(_BaseObj){function MatchObj(mid){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MatchObj);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(MatchObj.__proto__||Object.getPrototypeOf(MatchObj)).call(this));return _this.m_nMatchID=mid,_this.m_bFroceOut=!1,_this.m_bDirty=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MatchObj,_BaseObj3.default),_createClass(MatchObj,[{key:"OnDelThis",value:function(){this.m_bDirty&&this.writeDataCache()}},{key:"MarkDirty",value:function(){this.m_bDirty||(this.m_bDirty=!0,_matchobjmgr2.default.getInstance().MarkDirty(this))}},{key:"setData",value:function(v,no_db){if(this.m_nMatchID=v.mid,this.m_OwnerID=v.ownerid,this.m_MatchMode=v.mode||v.matchmode,this.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_DIY?this.m_pKind=_matchkind2.default.CreateDiy(v.option.match):this.m_pKind=_matchkind2.default.Find(v.kindid),!this.m_pKind)return!1;if(this.m_Status=v.status,this.m_Option=v.option,this.m_BegTime=new Date(v.btime),this.m_nLifeTime=v.life,this.m_EndTime=new Date(v.etime),this.m_nBLTime=v.bltime,this.m_RefreshTime=new Date,this.m_nSignNum=v.signnum,this.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_FNG&&this.m_Status<_matchdef2.default.MATCH_STATUS.MST_END&&(this.m_EndTime=_comfunc2.default.addMin(this.m_BegTime,60)),this.m_EndTime||(this.m_EndTime=_comfunc2.default.addMin(this.m_BegTime,this.m_nLifeTime)),this.m_InKey=v.inkey,this.m_szGameData=v.gamedata,null==this.m_nBLTime){var now=new Date;this.m_nBLTime=_comfunc2.default.subAsSec(this.m_BegTime,now)}if(this.m_Option&&this.m_Option.diy&&"string"==typeof this.m_Option.diy.reward){var fpath="data/match/"+this.m_Option.diy.reward;this.m_szMatchReward=_matchreward2.default.Find(fpath)}return _comfunc2.default.isNil(v.signup)||(this.m_bSignUp=v.signup),this.m_sRoomPath=v.inroom,this.m_bDieOut=v.dieout,this.m_Status>=_matchdef2.default.MATCH_STATUS.MST_END&&(this.m_sRoomPath=null),this.m_bIsWhiteList=v.is_whitelist||!1,no_db||this.MarkDirty(),this.dispatchEvent("eve.onDataChg",[this.m_nMatchID]),this.ChkFNGSignUp(),!0}},{key:"getData",value:function(){return{mid:this.m_nMatchID,ownerid:this.m_OwnerID,mode:this.m_MatchMode,kindid:this.m_pKind.m_nKindID,status:this.m_Status,option:this.m_Option,btime:this.m_BegTime,life:this.m_nLifeTime,etime:this.m_EndTime,inkey:this.m_InKey,signnum:this.m_nSignNum,signup:this.m_bSignUp,gamedata:this.m_szGameData}}},{key:"writeDataCache",value:function(){_matchobjmgr2.default.getInstance().writeMatchObjCache(this),this.m_bDirty=!1}},{key:"setStatusInfo",value:function(v){0==this.m_Status&&v.status,this.m_Status=v.status,this.m_nSignNum=v.signnum,this.m_Status>=_matchdef2.default.MATCH_STATUS.MST_PREPAREROOM&&this.m_CheckInTimer&&(this.killTimer(this.m_CheckInTimer),this.m_CheckInTimer=null),this.m_Status>=_matchdef2.default.MATCH_STATUS.MST_END&&(this.m_sRoomPath=null),this.MarkDirty(),this.dispatchEvent("eve.onDataChg",[this.m_nMatchID])}},{key:"setStatus",value:function(st){this.m_Status!=st&&(this.m_Status=st,st>=_matchdef2.default.MATCH_STATUS.MST_PREPAREROOM&&this.m_CheckInTimer&&(this.killTimer(this.m_CheckInTimer),this.m_CheckInTimer=null),this.MarkDirty(),this.dispatchEvent("eve.onDataChg",[this.m_nMatchID]))}},{key:"OnUserForceOut",value:function(uid){_matchobjmgr2.default.getInstance().m_nUID==uid&&(this.m_bFroceOut=!0),this.m_bSignUp&&(this.m_bSignUp=!1,this.dispatchEvent("eve.onDataChg",[this.m_nMatchID]),this.ChkFNGSignUp())}},{key:"OnGameDataChg",value:function(gamedata){this.m_szGameData=gamedata,this.MarkDirty(),this.dispatchEvent("eve.onDataChg",[this.m_nMatchID])}},{key:"getTicket",value:function(){if(this.m_Option&&this.m_Option.diy){var data=_basematchkind2.default.ParseDiyTicket(this.m_Option.diy),_ticket=data[0],_service=data[1];if(_ticket.length>0||Object.keys(_service).length>0)return this.m_bIsWhiteList&&(_service={}),[_ticket,_service]}var ticket=this.m_pKind.m_szTicket,service=this.m_pKind.m_szTicketService;return this.m_bIsWhiteList&&(service={}),[ticket,service]}},{key:"getTicketEx",value:function(){for(var ticket=this.getTicket()[0],service=this.getTicket()[1],szticket={gems:0,gold:0,vouchers1:0,itemlist:[]},i=0;i<ticket.length;i++){var sub=ticket[i];sub.gems&&(szticket.gems=sub.gems),sub.gold&&(szticket.gold=sub.gold),sub.vouchers1&&(szticket.vouchers1=sub.vouchers1),sub.itemlist&&(szticket.itemlist=sub.itemlist)}return[szticket,service]}},{key:"TicketEmpty",value:function(){var szticket=this.getTicketEx()[0];return!(szticket.gems>0)&&(!(szticket.gold>0)&&(!(szticket.vouchers1>0)&&!(szticket.itemlist.length>0)))}},{key:"getMatchName",value:function(){return this.m_Option.diy&&this.m_Option.diy.name?this.m_Option.diy.name:this.m_pKind.m_sShowName||this.m_pKind.m_sName}},{key:"getReward",value:function(){return this.m_szMatchReward?this.m_szMatchReward:this.m_pKind.m_szReward}},{key:"isDiyMatch",value:function(){return!(!this.m_Option||!this.m_Option.diy)}},{key:"getChatGroup",value:function(){return this.m_Option&&this.m_Option.chatgroup?this.m_Option.chatgroup:null}},{key:"getSourceType",value:function(){if(this.m_Option&&this.m_Option.src)return this.m_Option.src}},{key:"getCreaterNick",value:function(){if(this.m_Option&&this.m_Option.creater)return this.m_Option.creater}},{key:"getOwnerType",value:function(){return this.m_OwnerID.split("/")[0]}},{key:"getOwner",value:function(){var ownerpath=this.m_OwnerID.split("/");return ownerpath.length<2?0:parseInt(ownerpath[1])}},{key:"getAbout",value:function(){return this.m_Option.diy&&this.m_Option.diy.about?this.m_Option.diy.about:null}},{key:"isCancleMatch",value:function(){var siteagv=_playerdata_mgr2.default.getInstance().getMeSiteAgv();return!!(siteagv.shopmember&&siteagv.shopmember>=3)}},{key:"OnSignUpStatusChg",value:function(signup){this.m_bSignUp!=signup&&(this.m_bSignUp=signup,this.dispatchEvent("eve.onSignUpStatusChg"))}},{key:"signUp",value:function(){if(!this.m_bSignUp){var agv={uid:_playerdata_mgr2.default.getInstance().getMeUID(),mid:this.m_nMatchID,token:_playerdata_mgr2.default.getInstance().getMeToken(),siteagv:_playerdata_mgr2.default.getInstance().getMeSiteAgv()};_gtea2.default.rpc.Call("比赛管理","MTTSignUp",agv,this,function(resp){this.setData(resp),this.dispatchEvent("eve.onSignUpOk",[this.m_nMatchID]),this.ChkFNGSignUp()},function(code,errmsg,opt){this.dispatchEvent("eve.onSignUpErr",[code,errmsg])})}}},{key:"cancelSignUp",value:function(){if(this.m_bSignUp){var agv={uid:_playerdata_mgr2.default.getInstance().getMeUID(),mid:this.m_nMatchID,siteagv:_playerdata_mgr2.default.getInstance().getMeSiteAgv()};_gtea2.default.rpc.Call("比赛管理","UsrCancelSignUp",agv,this,function(resp){this.setData(resp),this.dispatchEvent("eve.onCancelSignUpOk",[this.m_nMatchID]),this.ChkFNGSignUp()},function(code,errmsg,opt){this.dispatchEvent("eve.onCancelSignUpErr",[code,errmsg])})}}},{key:"ChkFNGSignUp",value:function(){if(this.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_FNG){var fng=_matchobjmgr2.default.getInstance().getFNGMatch(this.m_pKind.m_nKindID);fng&&fng.setSignUpStatus(this.m_bSignUp)}}},{key:"getLeftBegTime",value:function(){if(!this.m_nBLTime)return 0;var now=new Date,pass=_comfunc2.default.subAsSec(now,new Date(this.m_RefreshTime)),less=this.m_nBLTime-pass;return less<0&&(less=0),less}},{key:"getLeftLifeTime",value:function(){var bltime=this.m_nBLTime,reftime=this.m_RefreshTime,lifttime=this.m_nLifeTime,now=new Date;return bltime-_comfunc2.default.subAsSec(now,reftime)+60*lifttime}},{key:"OnMatchWillStart",value:function(btime,ltime){this.m_nBLTime=ltime,this.m_RefreshTime=new Date,this.dispatchEvent("eve.onWillStart"),this.m_bWaiting||_BaseObj3.default.EventToRegObj("MainApp","OnMatchWillStart",[this])}},{key:"_loopSendCheckIn",value:function(bagv){var agv={uid:_playerdata_mgr2.default.getInstance().getMeUID(),mid:this.m_nMatchID,token:_playerdata_mgr2.default.getInstance().getMeToken()};_gtea2.default.rpc.Send("比赛管理","CheckIn",agv)}},{key:"InSceneWaitStart",value:function(){this.m_bWaiting=!0,this.CancelCheckInTimer(),this._loopSendCheckIn(),this.m_CheckInTimer=this.loopCall(-1,3e4,this._loopSendCheckIn)}},{key:"CancelCheckInTimer",value:function(){this.m_CheckInTimer&&(this.killTimer(this.m_CheckInTimer),this.m_CheckInTimer=null)}},{key:"OutSceneWaitStart",value:function(){this.CancelCheckInTimer(),this.m_Status>=_matchdef2.default.MATCH_STATUS.MST_ENTRANCE||(this.m_bWaiting=!1)}},{key:"MatchEnd",value:function(status,why){this.setStatus(status),this.OnSignUpStatusChg(!1),status==_matchdef2.default.MATCH_STATUS.MST_END?this.dispatchEvent("eve.onMatchEnd",[why]):status==_matchdef2.default.MATCH_STATUS.MST_CANCEL&&this.dispatchEvent("eve.onMatchCancel",[why])}},{key:"OnDieOut",value:function(){this.ClearRoomPath(),this.OnSignUpStatusChg(!1),this.dispatchEvent("eve.onDieOut")}},{key:"InMatchRoom",value:function(roompath,ltime,status){this.setStatus(status),this.m_nBLTime=ltime,this.m_RefreshTime=new Date,this.m_sRoomPath=roompath,this.m_bInRoom||(this.m_bInRoom=!0,this.OnInMatchRoom())}},{key:"RelinkInMatchRoom",value:function(){this.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_MTT&&this.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_FNG||this.hasRoomPath()&&this.OnInMatchRoom(!0)}},{key:"OnInMatchRoom",value:function(){_UIMgr2.default.getInstance().CloseUI("系统确认"),this.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_FNG?(_gamemodelmgr2.default.getInstance().ExitGameRoom(!1),_UIMgr2.default.getInstance().CloseUI("FNG报名界面"),_UIMgr2.default.getInstance().CloseUI("大师赛报名界面"),_UIMgr2.default.getInstance().CloseUI("比赛结算界面"),_UIMgr2.default.getInstance().UIEvent("大厅界面","InFNGGame",[this])):this.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_MTT&&this.m_bWaiting&&(_gamemodelmgr2.default.getInstance().ExitGameRoom(!1),_UIMgr2.default.getInstance().CloseUI("MTT报名界面"),_UIMgr2.default.getInstance().CloseUI("比赛结算界面"),_UIMgr2.default.getInstance().UIEvent("大厅界面","InMTTGame",[this]))}},{key:"hasRoomPath",value:function(){return this.m_sRoomPath&&this.m_sRoomPath.length>0}},{key:"ClearRoomPath",value:function(){this.m_sRoomPath=null}},{key:"QueData",value:function(cmd){_matchobjmgr2.default.getInstance().QueMatchObj(this.m_nMatchID,function(){cmd&&cmd.doOk(this)},function(code,errmsg){cmd&&cmd.doErr(code,errmsg)})}},{key:"QueMatchRoomPath",value:function(okfun,errfun){this.hasRoomPath()?okfun&&okfun(this):_matchobjmgr2.default.getInstance().QueMatchObj(this.m_nMatchID,function(obj){okfun&&okfun(obj)},function(code,errmsg){errfun&&errfun(code,errmsg)})}},{key:"InDIYMatchRoom",value:function(){this.m_MatchMode,_matchdef2.default.MATCH_MODE.MM_DIY}},{key:"GetSignUpTime",value:function(){if(this.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_MTT)return 0;var signup_time=this.m_Option.signup_time;if(!signup_time)return 0;var nowtime=new Date,signtime=new Date(signup_time),lesstime=_comfunc2.default.subAsSec(signtime,nowtime);return lesstime<0&&(lesstime=0),lesstime}},{key:"SetGameRoomData",value:function(tname,value){if(this.m_szGameData){var data=this.m_szGameData.roomdata;data||(this.m_szGameData.roomdata={},data=this.m_szGameData.roomdata),data[tname]=value}}},{key:"GetGameRoomData",value:function(tname,def){var data=this.m_szGameData.roomdata;if(!data)return def;var value=data[tname];return value||def}},{key:"hasMeGameData",value:function(){return this.hasGameData(_playerdata_mgr2.default.getInstance().getMeUID())}},{key:"hasGameData",value:function(uid){return null!=this.m_szGameData[uid.toString()]}},{key:"getPayMode",value:function(){var roomcfg=this.m_Option.room;return roomcfg?roomcfg.paymode:"owner"}},{key:"IsPayed",value:function(uid){var roomcfg=this.m_Option.room;if(!roomcfg)return!0;if(_matchobjmgr2.default.getInstance().GameIsFree(this.m_Option.match.gtype,_playerdata_mgr2.default.getInstance().getMe().getChannel()))return!0;if("AA"==roomcfg.paymode){var paylist=this.GetGameRoomData("paylist",null);if(paylist){for(var i=0;i<paylist.length;i++){if(paylist[i].uid==uid)return!0}return!1}return!0}return!0}},{key:"ChkMttIn",value:function(){this.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_MTT||this.m_Status>=_matchdef2.default.MATCH_STATUS.MST_MATCH||this.hasRoomPath()||this.m_bSignUp&&this.getLeftBegTime()<=0&&function(){this.hasRoomPath()}.call(this)}},{key:"GetDiyCurrentPlayerNum",value:function(){var totalnum=0;for(var key in this.m_szGameData)this.m_szGameData[key].uid&&(totalnum+=1);return totalnum}}]),MatchObj}();exports.default=MatchObj},{"../data/playerdata_mgr":117,"../gamemodel/gamemodelmgr":123,"../gtea/BaseObj":126,"../gtea/gtea":127,"../ui/UIMgr":142,"../utils/comfunc":144,"./basematchkind":128,"./matchdef":132,"./matchkind":133,"./matchobjmgr":135,"./matchreward":136}],135:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_playerdata_mgr2=_interopRequireDefault(require("../data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../gtea/gtea")),_matchdef2=_interopRequireDefault(require("./matchdef")),_clubsys2=_interopRequireDefault(require("../data/club/clubsys")),_fngmatch2=_interopRequireDefault(require("./fngmatch")),_matchobj2=_interopRequireDefault(require("./matchobj")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_comfunc2=_interopRequireDefault(require("../utils/comfunc")),_pako2=_interopRequireDefault(require("../utils/pako.min"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MatchObjMgr=function(_BaseObj){function MatchObjMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MatchObjMgr);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(MatchObjMgr.__proto__||Object.getPrototypeOf(MatchObjMgr)).call(this));return _this.s_PlayerDataMgr=_playerdata_mgr2.default.getInstance(),_this.m_szMatchObj={},_this.m_szMatchObjHis={},_this.m_szFNG={},_this.m_szDirty=[],_this.m_szMatchNum={utime:new Date,data:{}},_this.m_bLoadOK=!1,_this.m_bAutoAddFavorites=!1,_this.LocalStorage=Laya.LocalStorage,_this.matchObjKey=_this.s_PlayerDataMgr.getMeUID()+"_matchobj",_this.hisMatchObjKey=_this.s_PlayerDataMgr.getMeUID()+"_matchobj_his",_playerdata_mgr2.default.getInstance().RegSvrCallBack("消息广播",_this),_this.loopCall(-1,1e3,_this.WriteDirty),_this.loopCall(-1,15e3,_this.ChkMttIn),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MatchObjMgr,_BaseObj3.default),_createClass(MatchObjMgr,null,[{key:"getInstance",value:function(){return MatchObjMgr.instance||(MatchObjMgr.instance=new MatchObjMgr),MatchObjMgr.instance}}]),_createClass(MatchObjMgr,[{key:"isReady",value:function(){return this.m_bLoadOK}},{key:"MarkDirty",value:function(mobj){this.m_szDirty.push(mobj.m_nMatchID)}},{key:"WriteDirty",value:function(){var dlist=this.m_szDirty,num=dlist.length;if(0!==num){for(var i=0;i<num;i++){var mid=dlist[i],mobj=this.findMatch(mid,!0);mobj&&mobj.writeDataCache()}this.m_szDirty=[]}}},{key:"readMatchObjData",value:function(mid){var data=this.get(mid);return data.length<0?null:"object"==_typeof(data.option)&&Object.keys(data.option).length<=0?null:data}},{key:"readHisMatchObjData",value:function(mid){var data=this.hisGet(mid);return data.length<0?null:"object"==_typeof(data.option)&&Object.keys(data.option).length<=0?null:data}},{key:"rmvMatchObj",value:function(mid){var key=mid.toString();this.m_szMatchObj[key]&&(this.del(mid),delete this.m_szMatchObj[key])}},{key:"rmvMatchObjHis",value:function(mid){var key=mid.toString();this.m_szMatchObjHis[key]&&(this.hisRmv(mid),delete this.m_szMatchObjHis[key])}},{key:"movObj2His",value:function(mobj){this.m_szMatchObjHis[mobj.m_nMatchID.toString()]=mobj,this.hisSet(mobj.m_nMatchID,mobj.getData()),this.rmvMatchObj(mobj.m_nMatchID),this.dispatchEvent("eve.MatchHisListChg")}},{key:"InitLS",value:function(){this.m_LS=!0;var data=this.list();if(data.length>0)for(var i=0;i<data.length;i++){var mid=data[i],mdata=this.readMatchObjData(mid);mdata&&this.setMatchObj(mdata,!0,!0)}if((data=this.hisList()).length>0)for(var _i=0;_i<data.length;_i++){var _mid=data[_i],_mdata=this.readHisMatchObjData(_mid);_mdata&&(_mdata.status>=_matchdef2.default.MATCH_STATUS.MST_END?this.setHisMatchObj(_mdata,!0,!0):this.hisRmv(_mid))}this.GCMatchObj()}},{key:"set",value:function(mid,data){this.setLocalMatchObj(mid,data)}},{key:"get",value:function(mid){var data=this.getLocalMatchObj();return data[mid]?data[mid]:{}}},{key:"list",value:function(){var data=this.getLocalMatchObj();return Object.keys(data)}},{key:"readCache",value:function(key){var data_str=this.LocalStorage.getItem(key);if(null==data_str||0==data_str.length)return null;var bytes=_gtea2.default.bincoder.base64.decode(data_str);bytes.position=0;try{var unzippedData=_pako2.default.inflate(bytes.getBuffer());(bytes=new _gtea2.default.CByteArray).writeArrayBuffer(unzippedData.buffer),bytes.position=0}catch(e){return null}return bytes.readValue()}},{key:"writeCache",value:function(key,data){var bytes=new _gtea2.default.CByteArray;bytes.writeValue(data),bytes.position=0;var zippedData=_pako2.default.deflate(bytes.getBuffer());(bytes=new _gtea2.default.CByteArray).writeArrayBuffer(zippedData.buffer),bytes.position=0,this.LocalStorage.setItem(key,_gtea2.default.bincoder.base64.encode(bytes))}},{key:"del",value:function(mid){var data=this.getLocalMatchObj();data[mid]&&(delete data[mid],this.writeCache(this.matchObjKey,data))}},{key:"getLocalMatchObj",value:function(){var data=this.readCache(this.matchObjKey);return data||(this.writeCache(this.matchObjKey,{}),data={}),data}},{key:"setLocalMatchObj",value:function(mid,modata){var data=this.getLocalMatchObj();data[mid]=modata,this.writeCache(this.matchObjKey,data)}},{key:"hisList",value:function(){var data=this.getLocalMatchObjHis();return Object.keys(data)}},{key:"hisGet",value:function(mid){var data=this.getLocalMatchObjHis();return data[mid]?data[mid]:{}}},{key:"hisSet",value:function(mid,data){this.setLocalMatchObjHis(mid,data)}},{key:"hisRmv",value:function(mid){var data=this.getLocalMatchObjHis();data[mid]&&(delete data[mid],this.writeCache(this.hisMatchObjKey,data))}},{key:"getLocalMatchObjHis",value:function(){var data=this.readCache(this.hisMatchObjKey);return data||(this.writeCache(this.hisMatchObjKey,{}),data={}),data}},{key:"setLocalMatchObjHis",value:function(mid,mohdata){var data=this.getLocalMatchObjHis();data[mid]=mohdata,this.writeCache(this.hisMatchObjKey,data)}},{key:"ChkMttIn",value:function(){for(var mid in this.m_szMatchObj)this.m_szMatchObj[mid].ChkMttIn()}},{key:"GCMatchObj",value:function(){var mlist=[],now=new Date;for(var mid in this.m_szMatchObj){var mobj=this.m_szMatchObj[mid];mobj.m_Status>=_matchdef2.default.MATCH_STATUS.MST_END?mlist.push(mobj.m_nMatchID):mobj.m_EndTime<now&&mlist.push(mobj.m_nMatchID)}for(var i=0;i<mlist.length;i++){var _mid2=mlist[i],_mobj=this.findMatch(_mid2,!0);_mobj&&this.movObj2His(_mobj)}}},{key:"onAllReady",value:function(qlist,chkact){for(var i=0;i<qlist.length;i++){if(qlist[i].m_bWaitQueing)return}this.m_bLoadOK=!0,this.dispatchEvent("eve.MatchListChg");for(var can_reset=!0,_i2=0;_i2<qlist.length;_i2++){var _mobj2=qlist[_i2];_mobj2.m_Status>=_matchdef2.default.MATCH_STATUS.MST_END&&this.readHisMatchObjData(_mobj2.m_nMatchID)&&(can_reset=!1)}can_reset&&this.ResetSvrHis(),chkact&&this.ChkMatchObjAct()}},{key:"Load",value:function(uid,chkact){this.m_LS||this.InitLS(),this.m_nUID&&this.m_nUID==uid||(this.m_nUID=uid),chkact||(chkact=!0);var clubsys=_clubsys2.default.getInstance(),agv={uid:this.m_nUID,clubids:clubsys.getMeClub(),siteagv:this.s_PlayerDataMgr.getMeSiteAgv()};_gtea2.default.rpc.Call("比赛管理","List",agv,this,function(resp){var matchlist=[],fnglist=[];this.m_szMatchNum=resp.matchnum,this.m_Forbid=resp.forbid,resp.matchlist?(matchlist=resp.matchlist,fnglist=resp.fnglist,this.m_szFreeTime=resp.freetime,this.m_szOpenTime=resp.opentime):matchlist=resp;for(var i=0;i<matchlist.length;i++){var mobj=this.setMatchObj(matchlist[i],!0);mobj&&mobj.m_Status>=_matchdef2.default.MATCH_STATUS.MST_END&&this.movObj2His(mobj)}for(var _i3=0;_i3<fnglist.length;_i3++){var data=fnglist[_i3];this.getFNGMatch(data.kindid).setData(data)}var qlist=[];function startQueMatchObj(mobj,qlist,chkact){_gtea2.default.rpc.Call("比赛管理","QueMatchObj",[mobj.m_nMatchID,this.m_nUID],this,function(resp){(mobj=this.setMatchObj(resp,!0)).m_bWaitQueing=!1,this.onAllReady.call(this,qlist,chkact)},function(code,msg,opts){mobj.m_bWaitQueing=!1,this.onAllReady.call(this,qlist,chkact)})}if(0==qlist.length)this.onAllReady.call(this,qlist,chkact);else for(var _i4=0;_i4<qlist.length;_i4++){var _mobj3=qlist[_i4];startQueMatchObj.call(this,_mobj3,qlist,chkact)}},function(code,msg,opts){this.m_bLoadOK=!0})}},{key:"LoadClubMatch",value:function(clubid){_gtea2.default.rpc.Call("比赛管理","LoadClubMatch",{clubid:clubid},this,function(agv){for(var i=0;i<agv.length;i++)this.setMatchObj(agv[i],!0);this.dispatchEvent("eve.MatchListChg")},function(code,agv,opts){})}},{key:"ResetSvrHis",value:function(){var agv={uid:this.m_nUID,favorite:this.m_bAutoAddFavorites};_gtea2.default.rpc.Call("比赛管理","ResetOwnerHis",agv,this,function(resp){for(var quelist=[],i=0;i<resp.length;i++){var mid=resp[i],mobj=this.findMatch(mid);(!mobj||mobj.m_Status<_matchdef2.default.MATCH_STATUS.MST_END)&&quelist.push(mid)}quelist.length>0&&function(){_gtea2.default.rpc.Call("比赛管理","QueMatchObjBatch",{uid:this.s_PlayerDataMgr.getMeUID(),mlist:quelist},this,function(respo){for(var olist=respo[0],_i5=0;_i5<olist.length;_i5++){var mdata=olist[_i5],_mobj4=this.findMatch(mdata.mid,!0);_mobj4?(_mobj4.setData(mdata,!0),this.movObj2His(_mobj4)):this.setHisMatchObj(mdata,!0)}this.dispatchEvent("eve.MatchHisListChg")},function(code,msg,opts){})}.call(this)},function(code,msg,opts){})}},{key:"getFNGMatch",value:function(kindid){var kstr=kindid.toString(),obj=this.m_szFNG[kstr];return obj||(obj=new _fngmatch2.default(kindid,this),this.m_szFNG[kstr]=obj,obj)}},{key:"LoadFNG",value:function(){_gtea2.default.rpc.Call("比赛管理","ListFNG",{uid:this.s_PlayerDataMgr.getMeUID()},this,function(agv){var list=agv.list;this.m_szFreeTime=agv.freetime,this.m_szOpenTime=agv.opentime;for(var i=0;i<list.length;i++){var data=list[i];this.getFNGMatch(data.kindid).setData(data)}this.dispatchEvent("eve.MatchListChg")},function(code,msg,opts){})}},{key:"ChkMatchObjAct",value:function(){var mlist=[];for(var mid in this.m_szMatchObj){var mobj=this.m_szMatchObj[mid];mobj.m_Status<_matchdef2.default.MATCH_STATUS.MST_END&&mlist.push(mobj.m_nMatchID)}mlist.length>0&&_gtea2.default.rpc.Call("比赛管理","QueMatchObjBatch",{uid:this.s_PlayerDataMgr.getMeUID(),mlist:mlist},this,function(agv){for(var olist=agv[0]||[],flist=agv[1]||[],chg=!1,i=0;i<flist.length;i++){var _mid3=flist[i],_mobj5=this.findMatch(_mid3,!0);_mobj5&&(_mobj5.m_Status=_matchdef2.default.MATCH_STATUS.MST_CANCEL,this.movObj2His(_mobj5),chg=!0)}for(var _i6=0;_i6<olist.length;_i6++)this.setMatchObj(olist[_i6]);this.GCMatchObj(),chg&&this.dispatchEvent("eve.MatchListChg",{})},function(code,msg,opts){})}},{key:"findInMatchObj",value:function(){for(var mid in this.m_szMatchObj){var mobj=this.m_szMatchObj[mid];if(mobj.m_MatchMode!=_matchdef2.default.MATCH_MODE.MM_DIY&&mobj.hasRoomPath())return mobj}return null}},{key:"setMatchObj",value:function(value,no_br,no_db){var mid=value.mid,key=mid.toString(),add=!1,mobj=this.m_szMatchObj[key];return mobj||(mobj=new _matchobj2.default(mid),this.m_szMatchObj[key]=mobj,add=!0),mobj.setData(value,!0)?(add?(no_db||this.set(mobj.m_nMatchID,mobj.getData()),no_br||this.dispatchEvent("eve.MatchListChg")):no_db||mobj.MarkDirty(),mobj):(delete this.m_szMatchObj[key],mobj.DelThis(),this.del(mid),null)}},{key:"setHisMatchObj",value:function(value,no_br,no_db){var mid=value.mid,key=mid.toString(),add=!1,mobj=this.m_szMatchObjHis[key];return mobj||(mobj=new _matchobj2.default(mid),this.m_szMatchObjHis[key]=mobj,add=!0),mobj.setData(value,!0)?(add?(no_db||this.hisSet(mobj.m_nMatchID,mobj.getData()),no_br||this.dispatchEvent("eve.MatchHisListChg")):no_db||this.hisSet(mobj.m_nMatchID,mobj.getData()),mobj):(delete this.m_szMatchObjHis[key],mobj.DelThis(),this.hisRmv(mid),null)}},{key:"findMatch",value:function(mid,no_his){if(mid<=0)return null;var key=mid.toString(),mobj=this.m_szMatchObj[key];return mobj||no_his||(mobj=this.m_szMatchObjHis[key]),mobj}},{key:"findMatchObjByChatID",value:function(chatid){if(!chatid)return null;for(var key in this.m_szMatchObj){var match=this.m_szMatchObj[key];if(match.getChatGroup()==chatid)return match}return null}},{key:"QueMatchObj",value:function(mid,okfunc,errfunc){mid?_gtea2.default.rpc.Call("比赛管理","QueMatchObj",[mid],this,function(agv){var mobj=this.findMatch(mid,!0);mobj&&(mobj=this.setMatchObj(agv)),mobj=agv.status>=_matchdef2.default.MATCH_STATUS.MST_END?this.setHisMatchObj(agv):this.setMatchObj(agv),okfunc&&okfunc(mobj)},function(code,msg,opts){errfunc&&errfunc(mid)}):errfunc&&errfunc(mid)}},{key:"writeMatchObjCache",value:function(mobj){this.set(mobj.m_nMatchID,mobj.getData())}},{key:"netOnSignUpStateChg",value:function(agv){var mid=agv.mid,signup=agv.signup,mobj=this.findMatch(mid);mobj&&(mobj.OnSignUpStatusChg(signup),mobj.MarkDirty(),mobj.dispatchEvent("eve.onDataChg",[]))}},{key:"netOnFNGMatchSignUpNumChg",value:function(agv){this.getFNGMatch(agv.kindid).setSignUserNum(agv)}},{key:"netOnMTTMatchChg",value:function(agv){for(var i=0;i<agv.length;i++){var mdata=agv[i],mobj=this.setMatchObj(mdata,!0);mobj.m_Status>=_matchdef2.default.MATCH_STATUS.MST_END&&this.setHisMatchObj(mobj.getData())}this.dispatchEvent("eve.MatchListChg")}},{key:"netOnMTTMatchStatusChg",value:function(agv){for(var i=0;i<agv.length;i++){var mdata=agv[i],mobj=this.findMatch(mdata.mid);mobj&&mobj.setStatusInfo(mdata)}}},{key:"netOnMatchWillStart",value:function(agv){var mid=agv.mid,btime=agv.btime,ltime=agv.ltime,mobj=this.findMatch(mid);mobj&&mobj.OnMatchWillStart(btime,ltime)}},{key:"netInMatchRoom",value:function(agv){var mid=agv.mid,roompath=agv.roompath,ltime=agv.ltime,status=agv.status,mobj=this.findMatch(mid);if(mobj&&(mobj.InMatchRoom(roompath,ltime,status),mobj.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_FNG)){var fng=this.getFNGMatch(mobj.m_pKind.m_nKindID);fng&&(fng.m_bPreSigning=!1,fng.m_bSignUped=!1)}this.dispatchEvent("eve.OnMatchStart",agv)}},{key:"netOnMatchStart",value:function(agv){var mid=agv.mid,status=agv.status,mobj=this.findMatch(mid);mobj&&(mobj.setStatus(status),this.dispatchEvent("eve.MatchListChg"))}},{key:"netOnMatchEnd",value:function(agv){var mid=agv.mid,status=agv.status,why=agv.why,mobj=this.findMatch(mid);mobj&&(mobj.MatchEnd(status,why),this.movObj2His(mobj),this.dispatchEvent("eve.MatchListChg"))}},{key:"netOnMatchObjDataChg",value:function(agv){this.setMatchObj(agv)}},{key:"netUserForceOut",value:function(agv){var mid=agv[0],uid=agv[1],mobj=this.findInMatchObj(mid);mobj&&mobj.OnUserForceOut(uid)}},{key:"netOnMatchDieOut",value:function(agv){var mid=agv[0],mobj=this.findInMatchObj(mid);mobj&&mobj.OnDieOut()}},{key:"netOnExitPrivateRoom",value:function(agv){var mid=agv.mid,mobj=this.findMatch(mid);mobj&&"club"!=mobj.getOwnerType()&&(this.rmvMatchObj(mid),this.rmvMatchObjHis(mid),mobj.DelThis()),this.dispatchEvent("eve.MatchListChg")}},{key:"netOnGameDataChg",value:function(agv){var mid=agv.mid,gamedata=agv.gamedata,mobj=this.findMatch(mid);mobj&&mobj.OnGameDataChg(gamedata)}},{key:"netOnForbidMatch",value:function(agv){this.m_Forbid=agv}},{key:"netOnUnForbidMatch",value:function(agv){this.m_Forbid=void 0}},{key:"ListAll",value:function(){var mlist=[];for(var mid in this.m_szMatchObj){var mobj=this.m_szMatchObj[mid];mlist.push(mobj)}return mlist}},{key:"ListMatch",value:function(filter){var mlist=[],type_filter=void 0,status_filter=void 0,mobj_filter=void 0;for(var mid in filter&&(type_filter=filter.mtype,status_filter=filter.status,mobj_filter=filter.mobj),this.m_szMatchObj){var mobj=this.m_szMatchObj[mid],is_ignore=!1;type_filter&&type_filter(mobj.m_MatchMode)&&(is_ignore=!0),!is_ignore&&status_filter&&status_filter(mobj.m_Status)&&(is_ignore=!0),!is_ignore&&mobj_filter&&mobj_filter(mobj)&&(is_ignore=!0),is_ignore||mlist.push(mobj)}return mlist}},{key:"ListMTTMatch",value:function(filter){return filter||(filter={}),filter.mtype=function(mt){return mt!=_matchdef2.default.MATCH_MODE.MM_MTT},this.ListMatch(filter)}},{key:"ListDiyMatch",value:function(){var filter={mtype:function(mt){return mt!=_matchdef2.default.MATCH_MODE.MM_DIY},status:function(st){return st>=_matchdef2.default.MATCH_STATUS.MST_END},mobj:function(_mobj6){return"usr"!=_mobj6.getOwnerType()}};return this.ListMatch(filter)}},{key:"ListClubMatch",value:function(clubid){var meclub=_clubsys2.default.getInstance().getMeClub();if(0==meclub.length)return[];for(var filter={mtype:function(mt){return mt!=_matchdef2.default.MATCH_MODE.MM_DIY},status:function(st){return st>=_matchdef2.default.MATCH_STATUS.MST_END},mobj:function(_mobj7){return"club"!=_mobj7.getOwnerType()}},mlist=this.ListMatch(filter),retagv=[],i=0;i<mlist.length;i++){var mobj=mlist[i],owner=mobj.getOwner();clubid?clubid==owner&&retagv.push(mobj):meclub.indexOf(owner)>-1&&retagv.push(mobj)}return retagv}},{key:"ListActClubMatch",value:function(clubid){var meclub=_clubsys2.default.getInstance().getMeClub();if(0==meclub.length)return[];for(var filter={mtype:function(mt){return mt!=_matchdef2.default.MATCH_MODE.MM_DIY},status:function(st){return st>=_matchdef2.default.MATCH_STATUS.MST_END},mobj:function(_mobj8){return"club"!=_mobj8.getOwnerType()||!_mobj8.hasMeGameData()}},mlist=this.ListMatch(filter),retagv=[],i=0;i<mlist.length;i++){var mobj=mlist[i],owner=mobj.getOwner();clubid?clubid==owner&&retagv.push(mobj):meclub.indexOf(owner)>-1&&retagv.push(mobj)}return retagv}},{key:"ListAllActMyDiyMatch",value:function(){var uid=this.s_PlayerDataMgr.getMeUID(),filter={mtype:function(mt){return mt!=_matchdef2.default.MATCH_MODE.MM_DIY},status:function(st){return st>=_matchdef2.default.MATCH_STATUS.MST_END},mobj:function(_mobj9){return!(_mobj9.getOwner()==uid&&_mobj9.getLeftLifeTime()>0)}};return this.ListMatch(filter)}},{key:"ListAllDiyMatch",value:function(){this.s_PlayerDataMgr.getMeUID();var filter={mtype:function(mt){return mt!=_matchdef2.default.MATCH_MODE.MM_DIY}};return this.ListMatch(filter)}},{key:"ListAllDiyHisMatch",value:function(){var mlist=[];for(var mid in this.m_szMatchObjHis){var mobj=this.m_szMatchObjHis[mid];mobj.m_MatchMode==_matchdef2.default.MATCH_MODE.MM_DIY&&mlist.push(mobj)}return mlist}},{key:"ListFNGMatch",value:function(){var filter={mtype:function(mt){return mt!=_matchdef2.default.MATCH_MODE.MM_FNG}};return this.ListMatch(filter)}},{key:"GetCurrentMatch",value:function(){for(var nowtime=new Date,agv=this.ListMTTMatch(),matchobj=void 0,i=0;i<agv.length;i++)if(matchobj=agv[i],_comfunc2.default.arrayContain(_gameconst2.default.EXITKINDID,matchobj.m_pKind.m_nKindID)&&matchobj.ClearRoomPath(),(matchobj.m_Status==_matchdef2.default.MATCH_STATUS.MST_ENTRANCE||matchobj.m_Status==_matchdef2.default.MATCH_STATUS.MST_MATCH)&&matchobj.hasRoomPath()&&matchobj.m_EndTime>nowtime)return{mode:4,mobj:matchobj};agv=this.ListFNGMatch();for(var _i7=0;_i7<agv.length;_i7++)if(matchobj=agv[_i7],_comfunc2.default.arrayContain(_gameconst2.default.EXITKINDID,matchobj.m_pKind.m_nKindID)&&matchobj.ClearRoomPath(),matchobj.m_Status==_matchdef2.default.MATCH_STATUS.MST_MATCH&&matchobj.hasRoomPath()&&matchobj.m_EndTime>nowtime)return{mode:2,mobj:matchobj};agv=this.s_PlayerDataMgr.getMe().m_szGameRoom;for(var _i8=0;_i8<agv.length;_i8++){var data=agv[_i8];return"sng"==data.gametype.split("/")[0]?{mode:3,mobj:data}:{mode:5,mobj:data}}agv=this.ListDiyMatch();for(var _i9=0;_i9<agv.length;_i9++)if((matchobj=agv[_i9]).m_Status==_matchdef2.default.MATCH_STATUS.MST_MATCH)return{mode:1,mobj:matchobj};agv=this.ListActClubMatch();for(var _i10=0;_i10<agv.length;_i10++)if((matchobj=agv[_i10]).m_Status==_matchdef2.default.MATCH_STATUS.MST_MATCH)return{mode:1,mobj:matchobj};return{mode:0,mobj:null}}},{key:"netOnMatchRoomSvrBreak",value:function(agv){for(var mid in this.m_szMatchObj){var mobj=this.m_szMatchObj[mid];if(mid==agv.mid){mobj.m_sRoomPath=null;break}}}},{key:"GameIsFree",value:function(gtype,channel){if(!this.m_szFreeTime)return!1;for(var nowtime=new Date,i=0;i<this.m_szFreeTime.length;i++){var data=this.m_szFreeTime[i];if(nowtime>=new Date(data.stime)&&nowtime<=new Date(data.etime)&&!("all"!=data.gtype&&data.gtype!=gtype||"all"!=data.channel&&data.channel!=channel))return!0}return!1}},{key:"GameIsOpen",value:function(gtype,channel){if(!this.m_szOpenTime)return!1;for(var nowtime=new Date,i=0;i<this.m_szOpenTime.length;i++){var data=this.m_szOpenTime[i];if(nowtime>=new Date(data.stime)&&nowtime<=new Date(data.etime)&&!("all"!=data.gtype&&data.gtype!=gtype||"all"!=data.channel&&data.channel!=channel))return!0}return!1}},{key:"GetGameOpenTimeStr",value:function(gtype,channel){if(!this.m_szOpenTime)return"暂未开放";for(var nowtime=new Date,i=0;i<this.m_szOpenTime.length;i++){var data=this.m_szOpenTime[i],stime=new Date(data.stime),etime=new Date(data.etime);if(nowtime>=stime&&nowtime<=etime&&!("all"!=data.gtype&&data.gtype!=gtype||"all"!=data.channel&&data.channel!=channel))return _comfunc2.default.stringformat("%02d:%02d-%02d:%02d",stime.getHours(),stime.getMinutes(),etime.getHours(),etime.getMinutes())}return"暂未开放"}},{key:"GetGameOpenTime",value:function(gtype,channel,nochk){if(!this.m_szOpenTime)return null;for(var nowtime=new Date,i=0;i<this.m_szOpenTime.length;i++){var data=this.m_szOpenTime[i];if(!("all"!=data.gtype&&data.gtype!=gtype||"all"!=data.channel&&data.channel!=channel)){if(nochk)return{stime:data.stime,etime:data.etime};if(_comfunc2.default.isSameDay(nowtime,new Date(data.stime))&&nowtime<=new Date(data.etime))return{stime:data.stime,etime:data.etime}}}return null}},{key:"GetNextOpenTime",value:function(gtype,channel){if(!this.m_szOpenTime)return null;for(var agv=[],nowtime=new Date,i=0;i<this.m_szOpenTime.length;i++){var data=this.m_szOpenTime[i];data.gtype.split("/")[1]==gtype&&new Date(data.stime)>nowtime&&("all"!=data.channel&&data.channel!=channel||agv.push(data))}return agv.sort(function(data1,data2){return data2.stime-data1.stime}),agv[0]}},{key:"ListMatchOpenTime",value:function(channel,hour){hour||(hour=24);var szTimeNow={},szTimeFuture={},szTimePass={},nowtime=new Date,nexttime=_comfunc2.default.addHour(nowtime,hour);function TodayHave(gtype,idx){for(var i=0;i<this.m_szOpenTime.length;i++)if(i!=idx){var data=this.m_szOpenTime[i];if(("all"==data.channel||data.channel==channel)&&data.gtype==gtype&&_comfunc2.default.isSameDay(nowtime,new Date(data.stime))&&nowtime<=new Date(data.etime))return!0}return!1}for(var i=0;i<this.m_szOpenTime.length;i++){var data=this.m_szOpenTime[i];"all"!=data.channel&&data.channel!=channel||(_comfunc2.default.isSameDay(nowtime,new Date(data.stime))?nowtime<=new Date(data.etime)?szTimeNow[data.gtype]=data:szTimePass[data.gtype]=data:nowtime>=new Date(data.stime)&&nowtime<=new Date(data.etime)?szTimeNow[data.gtype]=data:!TodayHave.bind(this)(data.gtype,i)&&nexttime>=new Date(data.stime)&&nowtime<new Date(data.etime)&&(szTimeFuture[data.gtype]=data))}return[szTimeNow,szTimeFuture,szTimePass]}},{key:"GetLessMatchFreeNum",value:function(mobj){var lessnum=(mobj.m_pKind.m_nFreeNum||0)-(this.m_szMatchNum.data[String(mobj.m_pKind.m_nKindID)]||0);return lessnum=Math.max(lessnum,0)}},{key:"HaveNearMTT",value:function(mobj,time){for(var mttlist=this.ListMTTMatch(),i=0;i<mttlist.length;i++){var chkobj=mttlist[i];if(chkobj.m_nMatchID!=mobj.m_nMatchID)if(chkobj.m_bSignUp)if(Math.abs(_comfunc2.default.subAsSec(mobj.m_BegTime,chkobj.m_BegTime)/60)<=time)return!0}return!1}},{key:"isForbid",value:function(){if(this.m_Forbid)return 1==this.m_Forbid.status}}]),MatchObjMgr}();exports.default=MatchObjMgr},{"../../app/gameconst":5,"../data/club/clubsys":105,"../data/playerdata_mgr":117,"../gtea/BaseObj":126,"../gtea/gtea":127,"../utils/comfunc":144,"../utils/pako.min":146,"./fngmatch":129,"./matchdef":132,"./matchobj":134}],136:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_tdf2=_interopRequireDefault(require("../utils/tdf")),_itemkindmgr2=_interopRequireDefault(require("../data/item/itemkindmgr")),_playerdata_mgr2=_interopRequireDefault(require("../data/playerdata_mgr")),_masterscoremgr2=_interopRequireDefault(require("../match/masterscoremgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MatchReward=function(){function MatchReward(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MatchReward)}return _createClass(MatchReward,null,[{key:"Find",value:function(fpath){var kindtdf=_tdf2.default.LoadTDF(fpath)||Laya.loader.getRes(fpath);if(!kindtdf)return null;var data=[];for(var lv in kindtdf)data[data.length]={gold:kindtdf[lv]["金币"],gems:kindtdf[lv]["钻石"],vouchers1:kindtdf[lv]["奖券"],vouchers2:kindtdf[lv]["红包碎片"],itemlist:kindtdf[lv]["道具"],master_score:kindtdf[lv]["大师分"],club_score:kindtdf[lv]["俱乐部积分"],real_item:kindtdf[lv]["实物奖励"]};return data}},{key:"GetRealItem",value:function(real_item){return _itemkindmgr2.default.GetRealItemStr(real_item)}},{key:"GetRewardStr",value:function(reward){if(!reward)return null;var reward_str=_itemkindmgr2.default.GetAddBagInfo(reward),info=[];if(reward.master_score&&0!=reward.master_score&&reward.master_score<0){var matchscore=_playerdata_mgr2.default.getInstance().getMe().m_MatchScore;if(matchscore){var rankdata=_masterscoremgr2.default.getInstance().GetDataByScore(matchscore.m_nScore);rankdata&&rankdata.rank>1&&(info[info.length]=reward.master_score+"大师分")}else info[info.length]=reward.master_score+"大师分"}return reward.club_score&&reward.club_score>0&&(info[info.length]=reward.club_score+"俱乐部积分"),"string"==typeof reward.other&&reward.other.length>0&&(info[info.length]=reward.other),info.length>0&&(reward_str.length>0&&(reward_str+="，"),reward_str+=info.join("，")),reward_str}}]),MatchReward}();exports.default=MatchReward},{"../data/item/itemkindmgr":113,"../data/playerdata_mgr":117,"../match/masterscoremgr":131,"../utils/tdf":148}],137:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_gtea2=_interopRequireDefault(require("../gtea/gtea")),_comfunc2=_interopRequireDefault(require("../utils/comfunc")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_UIMgr2=_interopRequireDefault(require("../ui/UIMgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MainLink=function(_gtea$CGLink){function MainLink(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MainLink);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(MainLink.__proto__||Object.getPrototypeOf(MainLink)).call(this));return _gtea2.default.trace.setDebugMode(_gameconst2.default.DEBUG),_gtea2.default.utils.Init(!0),_this.m_Status=MainLink.STATUS_IDLE,_this.m_bFirstInited=!0,_this.m_bInGame=!1,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(MainLink,_gtea2.default.CGLink),_createClass(MainLink,null,[{key:"getInstance",value:function(){return MainLink.instance||(MainLink.instance=new MainLink),MainLink.instance}}]),_createClass(MainLink,[{key:"ForceNoConnect",value:function(){this.m_Status=MainLink.STATUS_DEL}},{key:"Start",value:function(){this.m_Status!=MainLink.STATUS_CONNECTING&&this.m_Status!=MainLink.STATUS_CONNECTED&&(this.m_Status=MainLink.STATUS_CONNECTING,this.canRelink=!1,this.m_ConnectOTime=this.timerCall(1e4,this.OnConnectOutTime,[]),this._Start())}},{key:"_Start",value:function(){var https=!1;_comfunc2.default.isNil(_gameconst2.default.CONFIG.https)?document.location.protocol&&(https="https"==document.location.protocol):https=_gameconst2.default.CONFIG.https;var addport=!0;_comfunc2.default.isNil(_gameconst2.default.CONFIG.addport)||(addport=_gameconst2.default.CONFIG.addport),this.SetAddr(_gameconst2.default.LINKADDR,https,addport),_gtea2.default.rpc.SetNameSpace(_gameconst2.default.NAMESPACE),_gtea2.default.rpc.SetDomain(_gameconst2.default.DOMAIN),this.Connect()}},{key:"relink",value:function(){this.m_Status==MainLink.STATUS_IDLE&&this.canRelink&&this.Start()}},{key:"OnConnectOutTime",value:function(){this.ForceDisConnect()}},{key:"OnLinkReady",value:function(){_comfunc2.default.isNil(this.m_ConnectOTime)||(this.killTimer(this.m_ConnectOTime),this.m_ConnectOTime=null),this.m_Status=MainLink.STATUS_CONNECTED,this.m_bFirstInited&&(this.m_bFirstInited=!1,this.loopCall(3e3,3e3,this.ChkConnect,[])),this.m_bInGame?this.ChkSvrOK():(this.m_Status=MainLink.STATUS_ACT,this.dispatchEvent("eve.OnConnectOk",[]))}},{key:"ChkSvrOK",value:function(){this.m_NextChkSvrTimer&&(this.killTimer(this.m_NextChkSvrTimer),this.m_NextChkSvrTimer=null),_gtea2.default.rpc.Call("在线管理","Echo",[],this,function(agv){this.m_NextChkSvrTimer&&(this.killTimer(this.m_NextChkSvrTimer),this.m_NextChkSvrTimer=null),this.m_Status=MainLink.STATUS_ACT,this.dispatchEvent("eve.OnConnectOk",[])},function(errflag,errmsg,opt){errflag>=0||(this.m_NextChkSvrTimer=this.timerCall(3e3,this.ChkSvrOK,[]))})}},{key:"OnConnectFailed",value:function(){_comfunc2.default.isNil(this.m_ConnectOTime)||(this.killTimer(this.m_ConnectOTime),this.m_ConnectOTime=null),this.m_Status=MainLink.STATUS_IDLE,this.canRelink=!0,this.dispatchEvent("eve.OnConnectFailed",[]),this.showMsg("网络连接失败，稍后重试...")}},{key:"OnConnectBreak",value:function(){_comfunc2.default.isNil(this.m_ConnectOTime)||(this.killTimer(this.m_ConnectOTime),this.m_ConnectOTime=null),this.m_Status=MainLink.STATUS_IDLE,this.canRelink=!0,this.dispatchEvent("eve.OnConnectBreak",[])}},{key:"isConnected",value:function(){return this.m_Status==MainLink.STATUS_ACT}},{key:"ForceDisConnect",value:function(){_comfunc2.default.isNil(this.m_ConnectOTim)||(this.killTimer(this.m_ConnectOTime),this.m_ConnectOTime=null),this.showMsg("网络连接失败，稍后重试..."),this.DisConnect(),this.m_Status=MainLink.STATUS_IDLE,this.canRelink=!0,this.dispatchEvent("eve.OnConnectFailed",[])}},{key:"ChkConnect",value:function(){this.m_Status==MainLink.STATUS_IDLE&&(this.showMsg("正在搜索可用网络..."),this.CheckCankRelink())}},{key:"CheckCankRelink",value:function(){this.showMsg("正在重新连接网络..."),this.relink()}},{key:"showMsg",value:function(msg){_UIMgr2.default.getInstance().UIEvent("等待界面","OnSetWaitText",[msg,36e5],!0,!0)}}]),MainLink}();exports.default=MainLink,MainLink.STATUS_IDLE=0,MainLink.STATUS_FIND=1,MainLink.STATUS_CONNECTING=2,MainLink.STATUS_CONNECTED=3,MainLink.STATUS_ACT=4,MainLink.STATUS_DEL=5},{"../../app/gameconst":5,"../gtea/gtea":127,"../ui/UIMgr":142,"../utils/comfunc":144}],138:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_matchdef2=_interopRequireDefault(require("../match/matchdef"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameRoom=function(_BaseObj){function GameRoom(type){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameRoom);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameRoom.__proto__||Object.getPrototypeOf(GameRoom)).call(this));return _this.m_sGameType=type,_this.m_MatchMode=_matchdef2.default.MATCH_MODE.MM_UNKNOWN,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameRoom,_BaseObj3.default),_createClass(GameRoom,[{key:"setData",value:function(value){this.m_sRoomName=value.roomname,this.m_sShowName=this.m_sRoomName.split("/")[0],this.m_sFullPath=value.fullpath,this.m_MatchMode=value.matchmode,this.setPlayerNum(value.playernum),this.m_nHumanNum=value.humannum,this.m_RoomCfg=value.roomcfg}},{key:"setPlayerNum",value:function(num){this.m_nPlayerNum=num,this.dispatchEvent("eve.PlayerNumChg")}},{key:"getPlayerNum",value:function(){return this.m_nPlayerNum}},{key:"getShowName",value:function(){return this.m_RoomCfg&&this.m_RoomCfg.showname?this.m_RoomCfg.showname:this.m_sShowName}},{key:"getMatchKind",value:function(){return this.m_RoomCfg?this.m_RoomCfg.kindid:0}},{key:"isFull",value:function(){return this.m_nPlayerNum>=1e3}},{key:"freeSpace",value:function(){return 1e3-this.m_nHumanNum}}]),GameRoom}();exports.default=GameRoom},{"../gtea/BaseObj":126,"../match/matchdef":132}],139:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_gtea2=_interopRequireDefault(require("../gtea/gtea")),_gametype2=_interopRequireDefault(require("./gametype"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameRoomMgr=function(_BaseObj){function GameRoomMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameRoomMgr);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameRoomMgr.__proto__||Object.getPrototypeOf(GameRoomMgr)).call(this));return _this.m_szGame=[],_this.m_bLoadOK=!1,_this.loopCall(-1,18e4,_this.Load),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameRoomMgr,_BaseObj3.default),_createClass(GameRoomMgr,null,[{key:"getInstance",value:function(){return GameRoomMgr.instance||(GameRoomMgr.instance=new GameRoomMgr),GameRoomMgr.instance}}]),_createClass(GameRoomMgr,[{key:"isReady",value:function(){return this.m_bLoadOK}},{key:"Load",value:function(){_gtea2.default.rpc.Call("房间列表","GetRoomList",{},this,function(value){for(var gname in value)this.getGame(gname).setData(value[gname]);this.m_bLoadOK=!0,this.dispatchEvent("eve.DataChg")},function(code,msg,opts){this.m_bLoadOK=!0})}},{key:"findGame",value:function(tname){for(var len=this.m_szGame.length,i=0;i<len;i++){var gametype=this.m_szGame[i];if(gametype.m_sGameType==tname)return gametype}return null}},{key:"getGame",value:function(tname){var gametype=this.findGame(tname);return gametype||(gametype=new _gametype2.default(tname),this.m_szGame[this.m_szGame.length]=gametype,gametype)}},{key:"findRoom",value:function(fullpath){var paths=fullpath.split("/");if(2==paths.length){var gtype=this.findGame(paths[0]);if(gtype)return gtype.findRoom(paths[1])}return null}},{key:"findRoomByFullPath",value:function(fullpath){for(var glist=this.m_szGame,len=glist.length,i=0;i<len;i++){var room=glist[i].findRoomByFullPath(fullpath);if(room)return room}return null}}]),GameRoomMgr}();exports.default=GameRoomMgr},{"../gtea/BaseObj":126,"../gtea/gtea":127,"./gametype":140}],140:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_gameroom2=_interopRequireDefault(require("./gameroom"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameType=function(_BaseObj){function GameType(tname){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameType);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameType.__proto__||Object.getPrototypeOf(GameType)).call(this));return _this.m_sGameType=tname,_this.m_szRoom=[],_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameType,_BaseObj3.default),_createClass(GameType,[{key:"findRoom",value:function(roomname){for(var len=this.m_szRoom.length,idx=0;idx<len;idx++){var room=this.m_szRoom[idx];if(room.m_sRoomName==roomname)return room}return null}},{key:"listRoom",value:function(){return this.m_szRoom}},{key:"listMatchModeRoom",value:function(mode){for(var rlist=[],len=this.m_szRoom.length,idx=0;idx<len;idx++){var room=this.m_szRoom[idx];room.m_MatchMode==mode&&(rlist[rlist.length]=room)}return rlist}},{key:"findRoomByFullPath",value:function(fullpath){for(var len=this.m_szRoom.length,idx=0;idx<len;idx++){var room=this.m_szRoom[idx];if(room.m_sFullPath==fullpath)return room}return null}},{key:"setData",value:function(roomlistdata){for(var len=roomlistdata.length,roomlist=[],idx=0;idx<len;idx++){var roomdata=roomlistdata[idx],room=this.findRoom(roomdata.fullpath);room||(room=new _gameroom2.default(this.m_sGameType)),room.setData(roomdata),roomlist[roomlist.length]=room}this.m_szRoom=roomlist}},{key:"getPlayerNum",value:function(){for(var len=this.m_szRoom.length,num=0,i=0;i<len;i++){num+=this.m_szRoom[i].getPlayerNum()}return num}},{key:"getMatchKindPlayerNum",value:function(matchkindid){for(var rlist=this.m_szRoom,num=0,i=0;i<rlist.length;i++){var room=rlist[i];room.getMatchKind()==matchkindid&&(num+=room.getPlayerNum())}return num}},{key:"randRoom",value:function(matchkindid){var rlist=this.m_szRoom,ulist=[];if(matchkindid)for(var i=0;i<rlist.length;i++){var room=rlist[i];room.getMatchKind()==matchkindid&&(ulist[ulist.length]=room)}else ulist=rlist;var rnum=ulist.length;if(0==rnum)return null;if(rnum>1){ulist.sort(function(a,b){return a.isFull()||b.isFull()?a.isFull()?1:0:a.freeSpace()>b.freeSpace()?-1:a.freeSpace()<b.freeSpace()?1:0})}return ulist[0]}}]),GameType}();exports.default=GameType},{"../gtea/BaseObj":126,"./gameroom":138}],141:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../gtea/BaseObj")),_UIMgr2=_interopRequireDefault(require("./UIMgr")),_config2=_interopRequireDefault(require("../utils/config"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BaseUI=function(_BaseObj){function BaseUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BaseUI.__proto__||Object.getPrototypeOf(BaseUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BaseUI,_BaseObj3.default),_createClass(BaseUI,[{key:"Create",value:function(data){var pageclass=Laya.ClassUtils.getClass(data.page);pageclass&&(this.uidata=data,this.uicon=new Laya.Sprite,this.uicon.width=_config2.default.viewSize.width,this.uicon.height=_config2.default.viewSize.height,_UIMgr2.default.getInstance().GetLayer(data.layer).addChild(this.uicon),this.uiobj=new pageclass,this.uiobj.width=_config2.default.width,this.uiobj.height=_config2.default.height,this.uiobj.anchorX=this.uiobj.anchorY=.5,this.uiobj.x=this.uicon.width/2,this.uiobj.y=this.uicon.height/2,this.uicon.visible=!1,this.m_UI=this.uiobj,data.mask&&(this.mask=new Laya.Sprite,this.uicon.addChild(this.mask),this.mask.alpha=.7,this.mask.graphics.drawRect(0,0,_config2.default.viewSize.width,_config2.default.viewSize.height,"#000000")),this.uicon.addChild(this.uiobj),this.OnCreate())}},{key:"OnDelThis",value:function(){this.uiobj.destroy(),this.uicon.destroy(),this.m_UI=null,this.uiobj=null,this.uicon=null,this.mask=null}},{key:"OnCreate",value:function(){}},{key:"Open",value:function(args){var layer=_UIMgr2.default.getInstance().GetLayer(this.uidata.layer);this.m_bIsOpen?this.uicon.zOrder=layer.curzOrder++:(this.uicon.zOrder=layer.curzOrder++,this.uicon.visible=!0,this.m_bIsOpen=!0,this.OnResize(),_BaseObj3.default.FindRegObj("MainApp").addEventListener("stagesizechg",this,this.OnResize),this.OnOpen(args))}},{key:"OnOpen",value:function(args){}},{key:"Close",value:function(args){this.uicon.visible=!1,this.m_bIsOpen=!1,_BaseObj3.default.FindRegObj("MainApp").removeEventListener("stagesizechg",this,this.OnResize),this.OnClose(args)}},{key:"OnClose",value:function(args){}},{key:"OnResize",value:function(){this.uicon.width=_config2.default.viewSize.width,this.uicon.height=_config2.default.viewSize.height,this.uiobj.x=this.uicon.width/2,this.uiobj.y=this.uicon.height/2,this.mask&&(this.mask.graphics.clear(),this.mask.graphics.drawRect(0,0,this.uicon.width,this.uicon.height,"#000000"))}},{key:"IsOpen",value:function(){return this.uicon.visible}}]),BaseUI}();exports.default=BaseUI},{"../gtea/BaseObj":126,"../utils/config":145,"./UIMgr":142}],142:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj2=require("../gtea/BaseObj"),_BaseObj3=(obj=_BaseObj2)&&obj.__esModule?obj:{default:obj};var UIMgr=function(_BaseObj){function UIMgr(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UIMgr);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(UIMgr.__proto__||Object.getPrototypeOf(UIMgr)).call(this));return _this.szUICon=[],_this.szUIList={},_this.tdf={},_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(UIMgr,_BaseObj3.default),_createClass(UIMgr,null,[{key:"getInstance",value:function(){return UIMgr.instance||(UIMgr.instance=new UIMgr),UIMgr.instance}}]),_createClass(UIMgr,[{key:"Init",value:function(layernum,uicon,tlist){null==uicon&&(uicon=Laya.stage),null==tlist&&(tlist="data/uilist.json"),this.tdf=Laya.loader.getRes(tlist);for(var i=0;i<layernum;i++){var sprite=new Laya.Sprite;sprite.curzOrder=1,this.szUICon[i]=sprite,uicon.addChild(sprite)}}},{key:"GetLayer",value:function(idx){return idx<1||idx>this.szUICon.length?null:this.szUICon[idx-1]}},{key:"GetTopLayer",value:function(){return this.szUICon[this.szUICon.length-1]}},{key:"CreateUI",value:function(name){var data=this.tdf[name];if(data){var uiclass=Laya.ClassUtils.getClass(data.class);if(uiclass){var ui=new uiclass(data);return ui.Create(data),this.szUIList[data.name]=ui,ui}console.log(name+"绑定类不存在")}else console.log(name+"不存在")}},{key:"GetUI",value:function(name,create){var ui=this.szUIList[name];return!ui&&create&&(ui=this.CreateUI(name)),ui}},{key:"OpenUI",value:function(name,args){var ui=this.GetUI(name);(ui||(ui=this.CreateUI(name)))&&ui.Open(args)}},{key:"CloseUI",value:function(name,args){var ui=this.GetUI(name);ui&&ui.Close(args)}},{key:"CloseAllUI",value:function(){for(var key in this.szUIList){var ui=this.szUIList[key];1==ui.uidata.autoclose&&ui.Close()}}},{key:"UIEvent",value:function(name,evename,agv,create,open){var ui=this.GetUI(name,create);ui&&(open&&ui.Open(),ui.hasOwnProperty(evename)&&ui[evename](agv))}}]),UIMgr}();exports.default=UIMgr},{"../gtea/BaseObj":126}],143:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_comfunc=require("../utils/comfunc"),_comfunc2=(obj=_comfunc)&&obj.__esModule?obj:{default:obj};var UNameChk=function(){function UNameChk(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UNameChk)}return _createClass(UNameChk,null,[{key:"isChinaPhone",value:function(numstr){numstr.substr(0,3);return!0}},{key:"isMobilePhoneNum",value:function(num){var numstr=num.toString();if(isNaN(parseInt(numstr)))return null;var numlen=numstr.length;if(11==numlen&&UNameChk.isChinaPhone(numstr))return numstr;if(13==numlen&&("86"==numstr.substr(0,2)&&(numstr=numstr.substr(2),UNameChk.isChinaPhone(numstr))))return numstr;if(14==numlen&&("086"==numstr.substr(0,3)&&(numstr=numstr.substr(3),UNameChk.isChinaPhone(numstr))))return numstr;return null}},{key:"isAuthen",value:function(idcard){var str,pos,wi=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],vi=["1","0","X","9","8","7","6","5","4","3","2"];if(_comfunc2.default.isNil(idcard)||18!=idcard.length)return!1;if((-1==(pos=(str=idcard).indexOf("X"))?str:str.substr(0,pos+1))!=str)return!1;var nProvince=parseInt(idcard.substr(0,2));return!(isNaN(nProvince)||nProvince<11||nProvince>65)&&(!!function(date){var year=parseInt(date.substr(0,4)),month=parseInt(date.substr(4,2)),day=parseInt(date.substr(6,2));if(year<1900||year>9999||month>12||month<1)return!1;var month_days=[31,28,31,30,31,30,31,31,30,31,30,31];return(year%4==0&&year%100!=0||year%400==0)&&(month_days[1]=29),!(day>month_days[month-1]||day<1)}(idcard.substr(6,8))&&!!function(idcard){for(var nums=[],_idcard=idcard.substr(0,17),i=0;i<_idcard.length;i++){var ch=_idcard[i];nums.push(parseInt(ch))}for(var sum=0,_i=0;_i<nums.length;_i++)sum+=nums[_i]*wi[_i];return vi[sum%11]==idcard.substr(17)}(idcard))}}]),UNameChk}();exports.default=UNameChk,UNameChk.PHONE_HEAD=["134","135","136","137","138","139","150","151","152","157","158","159","182","183","184","187","188","178","147","130","131","132","155","156","185","186","176","145","166","133","153","180","181","189","177","173","199","198","170","171","172","174","175","179","191","192","193","194","195","196","197"]},{"../utils/comfunc":144}],144:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_gameconst=require("../../app/gameconst"),_gameconst2=(obj=_gameconst)&&obj.__esModule?obj:{default:obj};var comfunc=function(){function comfunc(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,comfunc)}return _createClass(comfunc,null,[{key:"conversionchannel",value:function(channel){return channel&&0!==channel.length&&"unknown"!=channel||(channel=_gameconst2.default.CHANNEL),channel}},{key:"stringformat",value:function(str){var args=Array.prototype.slice.call(arguments,1);function MakePos(chkstr,key,agv){for(var retagv=agv;;){var idx=chkstr.indexOf(key);if(-1==idx)break;key.length;for(var repstr="",i=0;i<key.length;i++)repstr+="x";chkstr=chkstr.replace(key,repstr),retagv.push({pos:idx,type:key})}return retagv}for(var szKey=["%d","%02d","%s","%.2f"],szPos=[],i=0;i<szKey.length;i++)szPos=MakePos(str,szKey[i],szPos);szPos.sort(function(obj1,obj2){return obj1.pos>obj2.pos?1:-1});for(var retstr=str,_i=0;_i<szPos.length;_i++){var obj=szPos[_i],value=args[_i];"%02d"==obj.type?value=value>=10?value:"0"+value:"%.2f"==obj.type&&(value=value.toFixed(2)),retstr=retstr.replace(obj.type,value)}return retstr}},{key:"ObjIsValid",value:function(obj){return!(!obj||obj.bDel)}},{key:"formatDateTime",value:function(date,format){comfunc.isNil(format)&&(format="yyyy-MM-dd hh:mm:ss"),date instanceof Date||(date=new Date(date));var year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate(),hour=date.getHours(),min=date.getMinutes(),sec=date.getSeconds();return format.replace("yyyy",year.toString()).replace("MM",comfunc.stringformat("%02d",[month])).replace("dd",comfunc.stringformat("%02d",[day])).replace("hh",comfunc.stringformat("%02d",[hour])).replace("mm",comfunc.stringformat("%02d",[min])).replace("ss",comfunc.stringformat("%02d",[sec])).replace("M",month.toString()).replace("d",day.toString()).replace("h",hour.toString()).replace("m",min.toString()).replace("s",sec.toString())}},{key:"isSameDay",value:function(date1,date2){return date1 instanceof Date&&date2 instanceof Date&&(date1.getYear()==date2.getYear()&&date1.getMonth()==date2.getMonth()&&date1.getDate()==date2.getDate())}},{key:"subAsSec",value:function(date1,date2){return date1 instanceof Date&&date2 instanceof Date?parseInt(date1.getTime()/1e3-date2.getTime()/1e3):0}},{key:"subAsDay",value:function(date1,date2){return Math.floor(comfunc.subAsSec(date1,date2)/86400)}},{key:"addDay",value:function(date,day){var _date=new Date(date);return _date.setDate(_date.getDate()+day),_date}},{key:"addHour",value:function(date,hour){var _date=new Date(date);return _date.setHours(_date.getHours()+hour),_date}},{key:"addMin",value:function(date,min){var _date=new Date(date);return _date.setMinutes(_date.getMinutes()+min),_date}},{key:"weekOfDay",value:function(date){var week=(date?!date instanceof Date?new Date(date):date:new Date).getDay();return 0==week&&(week=7),week}},{key:"clone",value:function(source){var sourceCopy=source instanceof Array?[]:{};for(var item in source)sourceCopy[item]="object"===_typeof(source[item])?comfunc.clone(source[item]):source[item];return sourceCopy}},{key:"compare1",value:function(x,y){return x<y?-1:x>y?1:0}},{key:"compare2",value:function(x,y){return x<y?1:x>y?-1:0}},{key:"rectContainsPoint",value:function(rect,point){return point.x>=rect.x&&point.x<=rect.x+rect.width&&point.y>=rect.y&&point.y<=rect.y+rect.height}},{key:"maketimestr",value:function(time){var min=parseInt(time/60),sec=time%60,hour=parseInt(min/60);return min%=60,(hour>=10?hour.toString():"0"+hour)+":"+(min>=10?min.toString():"0"+min)+":"+(sec>=10?sec.toString():"0"+sec)}},{key:"makenumberstr",value:function(value){for(var svalue=value.toString(),retstr="",idx=0,i=svalue.length-1;i>=0;i--){3!=idx&&6!=idx&&9!=idx||(retstr=","+retstr),retstr=svalue[i]+retstr,idx+=1}return retstr}},{key:"hash",value:function(text){for(var hash=5381,index=text.length;index;)hash=33*hash^text.charCodeAt(--index);return hash>>>0}},{key:"arrayContain",value:function(array,value){for(var i=0;i<array.length;i++)if(array[i]==value)return!0;return!1}},{key:"arrayRemove",value:function(array,value){for(var i=0;i<array.length;i++)if(array[i]==value)return array.splice(i,1),!0;return!1}},{key:"arrayRemoveByValue",value:function(array,value){var idx=array.indexOf(value);array.splice(idx,1)}},{key:"isNil",value:function(value){return null==value||null==value}},{key:"GetDateStr",value:function(date){var chktime=new Date;return comfunc.isSameDay(date,chktime)?"今天":(chktime=comfunc.addDay(chktime,1),comfunc.isSameDay(date,chktime)?"明天":(chktime=comfunc.addDay(chktime,1),comfunc.isSameDay(date,chktime)?"后天":comfunc.stringformat("%02d-%02d",date.getMonth()+1,date.getDate())))}},{key:"isJsonString",value:function(str){try{if("object"==_typeof(JSON.parse(str)))return!0}catch(e){}return!1}},{key:"isEmptyObject",value:function(object){return object instanceof Array?object.length<=0:0!==object&&!object}},{key:"isTable",value:function(obj){return!comfunc.isNil(obj)&&(!(obj instanceof Array)&&Object.keys(obj).length>0)}},{key:"getGoldRatio",value:function(value){return 1e4==_gameconst2.default.GOLDRATIO?value=Math.floor(value/100)/100:value/_gameconst2.default.GOLDRATIO}},{key:"getVouchers2Ratio",value:function(value){return value/_gameconst2.default.VOUCHERS2RATIO}},{key:"replaceGoldInStr",value:function(str,str1,str2){var reg=new RegExp(str1+"\\d{1,20}"+str2,"g"),arr=str.match(reg);if(!arr)return str;for(var regNum=/\d{1,20}/,i=0;i<arr.length;i++){var num=arr[i].match(regNum)[0],reNum=comfunc.getGoldRatio(Number(num));reg=new RegExp(num,"g"),str=str.replace(reg,reNum)}return str}},{key:"date2String",value:function(agv){for(var key in agv){var data=agv[key];data instanceof Date&&(agv[key]=comfunc.formatDateTime(data))}return agv}},{key:"splitcolorString",value:function(context){for(var retagv=[],str=context;;){var pos=str.indexOf("<color=");if(!(pos>=0)){retagv.push({text:str});break}var substr=str.substring(0,pos);if(str=str.substring(pos),retagv.push({text:substr}),(pos=str.indexOf("</color>"))>=0){var agv=(substr=str.substring(0,pos)).split(">");retagv.push({text:agv[1],color:agv[0].split("=")[1]}),str=str.substring(pos+8)}}return retagv}}]),comfunc}();exports.default=comfunc,Laya.Button.prototype.onMouse=function(e){if(e&&(!1!==this.toggle||!this._selected)){if(e.type===Laya.Event.MOUSE_DOWN&&1==this.stateNum&&(this.scaleX=1.1*this.scaleX,this.scaleY=1.1*this.scaleY,this._bMouseDown=!0),e.type!==Laya.Event.MOUSE_UP&&e.type!=Laya.Event.MOUSE_OUT||1==this.stateNum&&this._bMouseDown&&(this.scaleX=this.scaleX/1.1,this.scaleY=this.scaleY/1.1,this._bMouseDown=!1),e.type===Laya.Event.CLICK)return this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run());!this._selected&&(this.state=Laya.Button.stateMap[e.type])}},Laya.Sprite.prototype.setColorFilter=function(red,green,blue,alpha){if(1===arguments.length){var hex=r.replace("#","");red=parseInt(hex.slice(0,2),16),green=parseInt(hex.slice(2,4),16),blue=parseInt(hex.slice(4,6),16),8===hex.length&&(alpha=parseInt(hex.slice(6,8),16)/255)}comfunc.isNil(red)&&(red=255),comfunc.isNil(green)&&(green=255),comfunc.isNil(blue)&&(blud=255),comfunc.isNil(alpha)&&(alpha=1),this.__filterColor||(this.__filterColor=new Laya.ColorFilter,this.filters?this.filters.push(this.__filterColor):this.filters=[this.__filterColor]),this.__filterColor._mat=Float32Array.from([red/255,0,0,0,0,green/255,0,0,0,0,blue/255,0,0,0,0,alpha])},Laya.Texture.createFromURL=function(url,sx,sy,sw,sh){var tex=Laya.loader.getRes(url);return 1===arguments.length?tex:Laya.Texture.createFromTexture(tex,sx,sy,sw,sh)},Laya.AnimationBase.prototype.getFrameByLabel=function(label){return this._getFrameByLabel(label)};var fontClipValueProperty=Object.getOwnPropertyDescriptor(Laya.FontClip.prototype,"value");Object.defineProperties(Laya.FontClip.prototype,{charMapping:{get:function(){return this.__charMapping},set:function(v){this.__charMapping=v}},fixDigit:{get:function(){return this.__fixDigit||0},set:function(v){this.__fixDigit=v}},forceDigit:{get:function(){return this.__forceDigit||!1},set:function(v){this.__forceDigit=v}},numberVal:{get:function(){return this.__numberVal||0},set:function(v){this.__numberVal=v;var val=v+"";if(void 0!==this.__fixDigit){var pos=val.indexOf("."),dec=-1===pos?0:val.length-pos-1;dec>this.fixDigit?val=val.slice(0,this.fixDigit-dec):this.forceDigit&&dec!==this.fixDigit&&(0===dec&&(val+="."),val+="0".repeat(this.fixDigit-dec)),/\.$/.test(val)&&(val=val.slice(0,-1))}this.labelFormater&&(val=this.labelFormater.replace("${numberVal}",val)),this.value=val}},value:{get:function(){var v=fontClipValueProperty.get.call(this);if(this.charMapping){for(var s="";v.length;){var f=!1;for(var c in this.charMapping)if(0===v.indexOf(this.charMapping[c])){s+=c,v=v.slice(this.charMapping[c].length),f=!0;break}f||(s+=v[0],v=v.slice(1))}v=s}return v},set:function(v){var _this=this;this.charMapping&&(v=(""+v).split("").map(function(c){return _this.charMapping[c]?_this.charMapping[c]:c}).join("")),fontClipValueProperty.set.call(this,v)}}}),Object.defineProperties(Laya.Sprite.prototype,{position:{get:function(){return{x:this.x,y:this.y}},set:function(position){this.x=position.x,this.y=position.y}},scaleXY:{get:function(){return this.scaleX},set:function(value){this.scaleX=value,this.scaleY=value}}});var textValueProperty=Object.getOwnPropertyDescriptor(Laya.Text.prototype,"text");Object.defineProperties(Laya.Text.prototype,{text:{get:function(){return textValueProperty.get.call(this)},set:function(v){textValueProperty.set.call(this,v),v&&0===this.textWidth&&textValueProperty.set.call(this,"????")}}}),Laya.Sprite.prototype.posBySelf=function(sp){var selfPos=this.localToGlobal(new Laya.Point(this.pivotX,this.pivotY)),spPos=sp.localToGlobal(new Laya.Point(sp.pivotX,sp.pivotY)),disPos_x=spPos.x-selfPos.x,disPos_y=spPos.y-selfPos.y;return{x:this.x+disPos_x,y:this.y+disPos_y}},Laya.Sprite.prototype._setPivotX=function(value){var style=this.getStyle();style&&(style.pivotX=value)},Laya.Sprite.prototype._setPivotY=function(value){var style=this.getStyle();style&&(style.pivotY=value)},Laya.Node.prototype.setTimeout=function(delay,callback){for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)args[_key-2]=arguments[_key];Laya.timer.once(delay,this,callback,args,!1)},Laya.Node.prototype.setInterval=function(delay,callback){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)args[_key2-2]=arguments[_key2];Laya.timer.loop(delay,this,callback,args,!1)},Laya.Node.prototype.clearTimeout=Laya.Node.prototype.clearInterval=function(){Laya.timer.clearAll(this)},String.prototype.gblen=function(){for(var len=0,i=0;i<this.length;i++)this.charCodeAt(i)>127||94==this.charCodeAt(i)?len+=2:len++;return len},Laya.Loader.prototype.endLoad=function(content){content&&(this._data=content),this._cache?Laya.Loader.cacheRes(this._url,this._data):-1!==["ls","lh"].indexOf(Laya.Utils.getFileExtension(this._url))&&Laya.Loader.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},"undefined"!=typeof Laya3D&&(Laya.Animator.prototype.getPlayStateByName=function(name){return this.getControllerLayer()._statesMap[name]});var __browserInit=Laya.Browser.__init__;Laya.Browser.__init__=function(){var ret=__browserInit.call(Laya.Browser);return document&&document.head&&(document.head.querySelector('meta[name="viewport"]').content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"),ret}},{"../../app/gameconst":5}],145:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var CC_DESIGN_RESOLUTION=function(){function CC_DESIGN_RESOLUTION(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CC_DESIGN_RESOLUTION)}return _createClass(CC_DESIGN_RESOLUTION,null,[{key:"ChkDesignResolution",value:function(){var framesize_width=Laya.stage?Laya.stage.width:CC_DESIGN_RESOLUTION.width,framesize_height=Laya.stage?Laya.stage.height:CC_DESIGN_RESOLUTION.height;framesize_width/framesize_height<=1.34&&(CC_DESIGN_RESOLUTION.autoscale=Laya.Stage.SCALE_FIXED_WIDTH);var viewSize={},scale=1,border={l:0,r:0};if(CC_DESIGN_RESOLUTION.autoscale==Laya.Stage.SCALE_FIXED_HEIGHT?(scale=(viewSize={width:CC_DESIGN_RESOLUTION.height/framesize_height*framesize_width,height:CC_DESIGN_RESOLUTION.height}).width/CC_DESIGN_RESOLUTION.width,2436==framesize_width&&(border={l:50,r:20})):CC_DESIGN_RESOLUTION.autoscale==Laya.Stage.SCALE_FIXED_WIDTH?scale=(viewSize={width:CC_DESIGN_RESOLUTION.width,height:CC_DESIGN_RESOLUTION.width/framesize_width*framesize_height}).height/CC_DESIGN_RESOLUTION.height:CC_DESIGN_RESOLUTION.autoscale==Laya.Stage.SCALE_SHOWALL&&(scale=(viewSize={width:CC_DESIGN_RESOLUTION.width,height:CC_DESIGN_RESOLUTION.height}).width/CC_DESIGN_RESOLUTION.width),CC_DESIGN_RESOLUTION.autoscale==Laya.Stage.SCALE_FIXED_HEIGHT){if(CC_DESIGN_RESOLUTION.width>viewSize.width)return CC_DESIGN_RESOLUTION.autoscale=Laya.Stage.SCALE_FIXED_WIDTH,void CC_DESIGN_RESOLUTION.ChkDesignResolution()}else if(CC_DESIGN_RESOLUTION.autoscale==Laya.Stage.SCALE_FIXED_WIDTH&&CC_DESIGN_RESOLUTION.height>viewSize.height)return CC_DESIGN_RESOLUTION.autoscale=Laya.Stage.SCALE_FIXED_HEIGHT,void CC_DESIGN_RESOLUTION.ChkDesignResolution();CC_DESIGN_RESOLUTION.viewSize=viewSize,CC_DESIGN_RESOLUTION.scale=scale,CC_DESIGN_RESOLUTION.border=border,CC_DESIGN_RESOLUTION.offset=new Laya.Point((viewSize.width-CC_DESIGN_RESOLUTION.width)/2,(viewSize.height-CC_DESIGN_RESOLUTION.height)/2),CC_DESIGN_RESOLUTION.center=new Laya.Point(viewSize.width/2,viewSize.height/2)}}]),CC_DESIGN_RESOLUTION}();exports.default=CC_DESIGN_RESOLUTION,CC_DESIGN_RESOLUTION.width=1280,CC_DESIGN_RESOLUTION.height=720,CC_DESIGN_RESOLUTION.autoscale=Laya.Stage.SCALE_FIXED_HEIGHT},{}],146:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.default=function r(s,o,l){function h(e,t){if(!o[e]){if(!s[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(d)return d(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var n=o[e]={exports:{}};s[e][0].call(n.exports,function(t){return h(s[e][1][t]||t)},n,n.exports,r,s,o,l)}return o[e].exports}for(var d="function"==typeof require&&require,t=0;t<l.length;t++)h(l[t]);return h}({1:[function(t,e,a){var s=t("./zlib/deflate"),o=t("./utils/common"),l=t("./utils/strings"),n=t("./zlib/messages"),r=t("./zlib/zstream"),h=Object.prototype.toString,d=0,f=-1,_=0,u=8;function c(t){if(!(this instanceof c))return new c(t);this.options=o.assign({level:f,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==d)throw new Error(n[a]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(a=s.deflateSetDictionary(this.strm,i))!==d)throw new Error(n[a]);this._dict_set=!0}}function i(t,e){var a=new c(e);if(a.push(t,!0),a.err)throw a.msg||n[a.err];return a.result}c.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?n.input=l.string2buf(t):"[object ArrayBuffer]"===h.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(r),n.next_out=0,n.avail_out=r),1!==(a=s.deflate(n,i))&&a!==d)return this.onEnd(a),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(l.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==a);return 4===i?(a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===d):2!==i||(this.onEnd(d),!(n.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=c,a.deflate=i,a.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},a.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,a){var f=t("./zlib/inflate"),_=t("./utils/common"),u=t("./utils/strings"),c=t("./zlib/constants"),i=t("./zlib/messages"),n=t("./zlib/zstream"),r=t("./zlib/gzheader"),b=Object.prototype.toString;function s(t){if(!(this instanceof s))return new s(t);this.options=_.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var a=f.inflateInit2(this.strm,e.windowBits);if(a!==c.Z_OK)throw new Error(i[a]);if(this.header=new r,f.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=u.string2buf(e.dictionary):"[object ArrayBuffer]"===b.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=f.inflateSetDictionary(this.strm,e.dictionary))!==c.Z_OK))throw new Error(i[a])}function o(t,e){var a=new s(e);if(a.push(t,!0),a.err)throw a.msg||i[a.err];return a.result}s.prototype.push=function(t,e){var a,i,n,r,s,o=this.strm,l=this.options.chunkSize,h=this.options.dictionary,d=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?o.input=u.binstring2buf(t):"[object ArrayBuffer]"===b.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new _.Buf8(l),o.next_out=0,o.avail_out=l),(a=f.inflate(o,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&h&&(a=f.inflateSetDictionary(this.strm,h)),a===c.Z_BUF_ERROR&&!0===d&&(a=c.Z_OK,d=!1),a!==c.Z_STREAM_END&&a!==c.Z_OK)return this.onEnd(a),!(this.ended=!0);o.next_out&&(0!==o.avail_out&&a!==c.Z_STREAM_END&&(0!==o.avail_in||i!==c.Z_FINISH&&i!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(n=u.utf8border(o.output,o.next_out),r=o.next_out-n,s=u.buf2string(o.output,n),o.next_out=r,o.avail_out=l-r,r&&_.arraySet(o.output,o.output,n,r,0),this.onData(s)):this.onData(_.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(d=!0)}while((0<o.avail_in||0===o.avail_out)&&a!==c.Z_STREAM_END);return a===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(a=f.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===c.Z_OK):i!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(o.avail_out=0))},s.prototype.onData=function(t){this.chunks.push(t)},s.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=s,a.inflate=o,a.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},a.ungzip=o},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,a){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(t){for(var e,a,i=Array.prototype.slice.call(arguments,1);i.length;){var n=i.shift();if(n){if("object"!=(void 0===n?"undefined":_typeof(n)))throw new TypeError(n+"must be non-object");for(var r in n)e=n,a=r,Object.prototype.hasOwnProperty.call(e,a)&&(t[r]=n[r])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+i),n);else for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(e=i=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),e=n=0,a=t.length;e<a;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],4:[function(t,e,a){var l=t("./common"),n=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var h=new l.Buf8(256),i=0;i<256;i++)h[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function d(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&n))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var a="",i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a}h[254]=h[254]=1,a.string2buf=function(t){var e,a,i,n,r,s=t.length,o=0;for(n=0;n<s;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new l.Buf8(o),n=r=0;r<o;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),a<128?e[r++]=a:(a<2048?e[r++]=192|a>>>6:(a<65536?e[r++]=224|a>>>12:(e[r++]=240|a>>>18,e[r++]=128|a>>>12&63),e[r++]=128|a>>>6&63),e[r++]=128|63&a);return e},a.buf2binstring=function(t){return d(t,t.length)},a.binstring2buf=function(t){for(var e=new l.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,i,n,r,s=e||t.length,o=new Array(2*s);for(a=i=0;a<s;)if((n=t[a++])<128)o[i++]=n;else if(4<(r=h[n]))o[i++]=65533,a+=r-1;else{for(n&=2===r?31:3===r?15:7;1<r&&a<s;)n=n<<6|63&t[a++],r--;1<r?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return d(o,i)},a.utf8border=function(t,e){var a;for((e=e||t.length)>t.length&&(e=t.length),a=e-1;0<=a&&128==(192&t[a]);)a--;return a<0?e:0===a?e:a+h[t[a]]>e?a:e}},{"./common":3}],5:[function(t,e,a){e.exports=function(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){for(a-=s=2e3<a?2e3:a;r=r+(n=n+e[i++]|0)|0,--s;);n%=65521,r%=65521}return n|r<<16|0}},{}],6:[function(t,e,a){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,a){var o=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();e.exports=function(t,e,a,i){var n=o,r=i+a;t^=-1;for(var s=i;s<r;s++)t=t>>>8^n[255&(t^e[s])];return-1^t}},{}],8:[function(t,e,a){var l,_=t("../utils/common"),h=t("./trees"),u=t("./adler32"),c=t("./crc32"),i=t("./messages"),d=0,f=4,b=0,g=-2,m=-1,w=4,n=2,p=8,v=9,r=286,s=30,o=19,k=2*r+1,y=15,x=3,z=258,B=z+x+1,S=42,E=113,A=1,Z=2,R=3,C=4;function N(t,e){return t.msg=i[e],e}function O(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function I(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(_.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function U(t,e){h._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,I(t.strm)}function T(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-B?t.strstart-(t.w_size-B):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+z,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(a=e)+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(i=z-(_-r),r=_-z,s<i){if(t.match_start=e,o<=(s=i))break;u=h[r+s-1],c=h[r+s]}}}while((e=f[e&d])>l&&0!=--n);return s<=t.lookahead?s:t.lookahead}function H(t){var e,a,i,n,r,s,o,l,h,d,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-B)){for(_.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=a=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--a;);for(e=a=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--a;);n+=f}if(0===t.strm.avail_in)break;if(s=t.strm,o=t.window,l=t.strstart+t.lookahead,h=n,d=void 0,d=s.avail_in,h<d&&(d=h),a=0===d?0:(s.avail_in-=d,_.arraySet(o,s.input,s.next_in,d,l),1===s.state.wrap?s.adler=u(s.adler,o,d,l):2===s.state.wrap&&(s.adler=c(s.adler,o,d,l)),s.next_in+=d,s.total_in+=d,d),t.lookahead+=a,t.lookahead+t.insert>=x)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+x-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<B&&0!==t.strm.avail_in)}function j(t,e){for(var a,i;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a)),t.match_length>=x)if(i=h._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function K(t,e){for(var a,i,n;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=h._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(U(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=h._tr_tally(t,0,t.window[t.strstart-1]))&&U(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=h._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function M(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(2*k),this.dyn_dtree=new _.Buf16(2*(2*s+1)),this.bl_tree=new _.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(y+1),this.heap=new _.Buf16(2*r+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(2*r+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?S:E,t.adler=2===e.wrap?0:1,e.last_flush=d,h._tr_init(e),b):N(t,g)}function q(t){var e,a=Y(t);return a===b&&((e=t.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0),a}function G(t,e,a,i,n,r){if(!t)return g;var s=1;if(e===m&&(e=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),n<1||v<n||a!==p||i<8||15<i||e<0||9<e||r<0||w<r)return N(t,g);8===i&&(i=9);var o=new P;return(t.state=o).strm=t,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new _.Buf8(2*o.w_size),o.head=new _.Buf16(o.hash_size),o.prev=new _.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new _.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=a,q(t)}l=[new M(0,0,0,0,function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(H(t),0===t.lookahead&&e===d)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,U(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-B&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):(t.strstart>t.block_start&&(U(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,j),new M(4,5,16,8,j),new M(4,6,32,32,j),new M(4,4,16,16,K),new M(8,16,32,32,K),new M(8,16,128,128,K),new M(8,32,128,256,K),new M(32,128,258,1024,K),new M(32,258,258,4096,K)],a.deflateInit=function(t,e){return G(t,e,p,15,8,0)},a.deflateInit2=G,a.deflateReset=q,a.deflateResetKeep=Y,a.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,b):g},a.deflate=function(t,e){var a,i,n,r;if(!t||!t.state||5<e||e<0)return t?N(t,g):g;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return N(t,0===t.avail_out?-5:g);if(i.strm=t,a=i.last_flush,i.last_flush=e,i.status===S)if(2===i.wrap)t.adler=0,T(i,31),T(i,139),T(i,8),i.gzhead?(T(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),T(i,255&i.gzhead.time),T(i,i.gzhead.time>>8&255),T(i,i.gzhead.time>>16&255),T(i,i.gzhead.time>>24&255),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(T(i,255&i.gzhead.extra.length),T(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=c(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(T(i,0),T(i,0),T(i,0),T(i,0),T(i,0),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,3),i.status=E);else{var s=p+(i.w_bits-8<<4)<<8;s|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=E,F(i,s),0!==i.strstart&&(F(i,t.adler>>>16),F(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending!==i.pending_buf_size));)T(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&I(t),i.pending+2<=i.pending_buf_size&&(T(i,255&t.adler),T(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(I(t),0===t.avail_out)return i.last_flush=-1,b}else if(0===t.avail_in&&O(e)<=O(a)&&e!==f)return N(t,-5);if(666===i.status&&0!==t.avail_in)return N(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==d&&666!==i.status){var o=2===i.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(e===d)return A;break}if(t.match_length=0,a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):3===i.strategy?function(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=z){if(H(t),t.lookahead<=z&&e===d)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=s[n=t.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){r=t.strstart+z;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<r);t.match_length=z-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(a=h._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):l[i.level].func(i,e);if(o!==R&&o!==C||(i.status=666),o===A||o===R)return 0===t.avail_out&&(i.last_flush=-1),b;if(o===Z&&(1===e?h._tr_align(i):5!==e&&(h._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),I(t),0===t.avail_out))return i.last_flush=-1,b}return e!==f?b:i.wrap<=0?1:(2===i.wrap?(T(i,255&t.adler),T(i,t.adler>>8&255),T(i,t.adler>>16&255),T(i,t.adler>>24&255),T(i,255&t.total_in),T(i,t.total_in>>8&255),T(i,t.total_in>>16&255),T(i,t.total_in>>24&255)):(F(i,t.adler>>>16),F(i,65535&t.adler)),I(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?b:1)},a.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==S&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?N(t,g):(t.state=null,e===E?N(t,-3):b):g},a.deflateSetDictionary=function(t,e){var a,i,n,r,s,o,l,h,d=e.length;if(!t||!t.state)return g;if(2===(r=(a=t.state).wrap)||1===r&&a.status!==S||a.lookahead)return g;for(1===r&&(t.adler=u(t.adler,e,d,0)),a.wrap=0,d>=a.w_size&&(0===r&&(D(a.head),a.strstart=0,a.block_start=0,a.insert=0),h=new _.Buf8(a.w_size),_.arraySet(h,e,d-a.w_size,a.w_size,0),e=h,d=a.w_size),s=t.avail_in,o=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,H(a);a.lookahead>=x;){for(i=a.strstart,n=a.lookahead-(x-1);a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+x-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++,--n;);a.strstart=i,a.lookahead=x-1,H(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=x-1,a.match_available=0,t.next_in=o,t.input=l,t.avail_in=s,a.wrap=r,b},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,a){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,a){e.exports=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S;a=t.state,i=t.next_in,B=t.input,n=i+(t.avail_in-5),r=t.next_out,S=t.output,s=r-(e-t.avail_out),o=r+(t.avail_out-257),l=a.dmax,h=a.wsize,d=a.whave,f=a.wnext,_=a.window,u=a.hold,c=a.bits,b=a.lencode,g=a.distcode,m=(1<<a.lenbits)-1,w=(1<<a.distbits)-1;t:do{c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=b[u&m];e:for(;;){if(u>>>=v=p>>>24,c-=v,0==(v=p>>>16&255))S[r++]=65535&p;else{if(!(16&v)){if(0==(64&v)){p=b[(65535&p)+(u&(1<<v)-1)];continue e}if(32&v){a.mode=12;break t}t.msg="invalid literal/length code",a.mode=30;break t}k=65535&p,(v&=15)&&(c<v&&(u+=B[i++]<<c,c+=8),k+=u&(1<<v)-1,u>>>=v,c-=v),c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=g[u&w];a:for(;;){if(u>>>=v=p>>>24,c-=v,!(16&(v=p>>>16&255))){if(0==(64&v)){p=g[(65535&p)+(u&(1<<v)-1)];continue a}t.msg="invalid distance code",a.mode=30;break t}if(y=65535&p,c<(v&=15)&&(u+=B[i++]<<c,(c+=8)<v&&(u+=B[i++]<<c,c+=8)),l<(y+=u&(1<<v)-1)){t.msg="invalid distance too far back",a.mode=30;break t}if(u>>>=v,c-=v,(v=r-s)<y){if(d<(v=y-v)&&a.sane){t.msg="invalid distance too far back",a.mode=30;break t}if(z=_,(x=0)===f){if(x+=h-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}}else if(f<v){if(x+=h+f-v,(v-=f)<k){for(k-=v;S[r++]=_[x++],--v;);if(x=0,f<k){for(k-=v=f;S[r++]=_[x++],--v;);x=r-y,z=S}}}else if(x+=f-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}for(;2<k;)S[r++]=z[x++],S[r++]=z[x++],S[r++]=z[x++],k-=3;k&&(S[r++]=z[x++],1<k&&(S[r++]=z[x++]))}else{for(x=r-y;S[r++]=S[x++],S[r++]=S[x++],S[r++]=S[x++],2<(k-=3););k&&(S[r++]=S[x++],1<k&&(S[r++]=S[x++]))}break}}break}}while(i<n&&r<o);i-=k=c>>3,u&=(1<<(c-=k<<3))-1,t.next_in=i,t.next_out=r,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=r<o?o-r+257:257-(r-o),a.hold=u,a.bits=c}},{}],11:[function(t,e,a){var Z=t("../utils/common"),R=t("./adler32"),C=t("./crc32"),N=t("./inffast"),O=t("./inftrees"),D=1,I=2,U=0,T=-2,F=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Z.Buf16(320),this.work=new Z.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=F,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Z.Buf32(i),e.distcode=e.distdyn=new Z.Buf32(n),e.sane=1,e.back=-1,U):T}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):T}function l(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?T:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,o(t))):T}function h(t,e){var a,i;return t?(i=new r,(t.state=i).window=null,(a=l(t,e))!==U&&(t.state=null),a):T}var d,f,_=!0;function H(t){if(_){var e;for(d=new Z.Buf32(512),f=new Z.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(O(D,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;O(I,t.lens,0,32,f,0,t.work,{bits:5}),_=!1}t.lencode=d,t.lenbits=9,t.distcode=f,t.distbits=5}function j(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Z.Buf8(r.wsize)),i>=r.wsize?(Z.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(i<(n=r.wsize-r.wnext)&&(n=i),Z.arraySet(r.window,e,a-i,n,r.wnext),(i-=n)?(Z.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}a.inflateReset=o,a.inflateReset2=l,a.inflateResetKeep=s,a.inflateInit=function(t){return h(t,15)},a.inflateInit2=h,a.inflate=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S=0,E=new Z.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;12===(a=t.state).mode&&(a.mode=13),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,f=o,_=l,x=U;t:for(;;)switch(a.mode){case F:if(0===a.wrap){a.mode=13;break}for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(2&a.wrap&&35615===h){E[a.check=0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0),d=h=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=30;break}if(8!=(15&h)){t.msg="unknown compression method",a.mode=30;break}if(d-=4,y=8+(15&(h>>>=4)),0===a.wbits)a.wbits=y;else if(y>a.wbits){t.msg="invalid window size",a.mode=30;break}a.dmax=1<<y,t.adler=a.check=1,a.mode=512&h?10:12,d=h=0;break;case 2:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.flags=h,8!=(255&a.flags)){t.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=3;case 3:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,E[2]=h>>>16&255,E[3]=h>>>24&255,a.check=C(a.check,E,4,0)),d=h=0,a.mode=4;case 4:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=5;case 5:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(o<(u=a.length)&&(u=o),u&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),Z.arraySet(a.head.extra,i,r,u,y)),512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,a.length-=u),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=30;break}d=h=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=12;break;case 10:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}t.adler=a.check=L(h),d=h=0,a.mode=11;case 11:if(0===a.havedict)return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,2;t.adler=a.check=1,a.mode=12;case 12:if(5===e||6===e)break t;case 13:if(a.last){h>>>=7&d,d-=7&d,a.mode=27;break}for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}switch(a.last=1&h,d-=1,3&(h>>>=1)){case 0:a.mode=14;break;case 1:if(H(a),a.mode=20,6!==e)break;h>>>=2,d-=2;break t;case 2:a.mode=17;break;case 3:t.msg="invalid block type",a.mode=30}h>>>=2,d-=2;break;case 14:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&h,d=h=0,a.mode=15,6===e)break t;case 15:a.mode=16;case 16:if(u=a.length){if(o<u&&(u=o),l<u&&(u=l),0===u)break t;Z.arraySet(n,i,r,u,s),o-=u,r+=u,l-=u,s+=u,a.length-=u;break}a.mode=12;break;case 17:for(;d<14;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,286<a.nlen||30<a.ndist){t.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.lens[A[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[A[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,z={bits:a.lenbits},x=O(0,a.lens,0,19,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(w<16)h>>>=g,d-=g,a.lens[a.have++]=w;else{if(16===w){for(B=g+2;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h>>>=g,d-=g,0===a.have){t.msg="invalid bit length repeat",a.mode=30;break}y=a.lens[a.have-1],u=3+(3&h),h>>>=2,d-=2}else if(17===w){for(B=g+3;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=3+(7&(h>>>=g)),h>>>=3,d-=3}else{for(B=g+7;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=11+(127&(h>>>=g)),h>>>=7,d-=7}if(a.have+u>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=30;break}for(;u--;)a.lens[a.have++]=y}}if(30===a.mode)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,z={bits:a.lenbits},x=O(D,a.lens,0,a.nlen,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,z={bits:a.distbits},x=O(I,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,z),a.distbits=z.bits,x){t.msg="invalid distances set",a.mode=30;break}if(a.mode=20,6===e)break t;case 20:a.mode=21;case 21:if(6<=o&&258<=l){t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,N(t,_),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(m&&0==(240&m)){for(p=g,v=m,k=w;m=(S=a.lencode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,a.length=w,0===m){a.mode=26;break}if(32&m){a.back=-1,a.mode=12;break}if(64&m){t.msg="invalid literal/length code",a.mode=30;break}a.extra=15&m,a.mode=22;case 22:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;m=(S=a.distcode[h&(1<<a.distbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(0==(240&m)){for(p=g,v=m,k=w;m=(S=a.distcode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,64&m){t.msg="invalid distance code",a.mode=30;break}a.offset=w,a.extra=15&m,a.mode=24;case 24:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(0===l)break t;if(u=_-l,a.offset>u){if((u=a.offset-u)>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=30;break}u>a.wnext?(u-=a.wnext,c=a.wsize-u):c=a.wnext-u,u>a.length&&(u=a.length),b=a.window}else b=n,c=s-a.offset,u=a.length;for(l<u&&(u=l),l-=u,a.length-=u;n[s++]=b[c++],--u;);0===a.length&&(a.mode=21);break;case 26:if(0===l)break t;n[s++]=a.length,l--,a.mode=21;break;case 27:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[r++]<<d,d+=8}if(_-=l,t.total_out+=_,a.total+=_,_&&(t.adler=a.check=a.flags?C(a.check,n,_,s-_):R(a.check,n,_,s-_)),_=l,(a.flags?h:L(h))!==a.check){t.msg="incorrect data check",a.mode=30;break}d=h=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=30;break}d=h=0}a.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return T}return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||_!==t.avail_out&&a.mode<30&&(a.mode<27||4!==e))&&j(t,t.output,t.next_out,_-t.avail_out)?(a.mode=31,-4):(f-=t.avail_in,_-=t.avail_out,t.total_in+=f,t.total_out+=_,a.total+=_,a.wrap&&_&&(t.adler=a.check=a.flags?C(a.check,n,_,t.next_out-_):R(a.check,n,_,t.next_out-_)),t.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===f&&0===_||4===e)&&x===U&&(x=-5),x)},a.inflateEnd=function(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,U},a.inflateGetHeader=function(t,e){var a;return t&&t.state?0==(2&(a=t.state).wrap)?T:((a.head=e).done=!1,U):T},a.inflateSetDictionary=function(t,e){var a,i=e.length;return t&&t.state?0!==(a=t.state).wrap&&11!==a.mode?T:11===a.mode&&R(1,e,i,0)!==a.check?-3:j(t,e,i,i)?(a.mode=31,-4):(a.havedict=1,U):T},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,a){var D=t("../utils/common"),I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],F=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,a,i,n,r,s,o){var l,h,d,f,_,u,c,b,g,m=o.bits,w=0,p=0,v=0,k=0,y=0,x=0,z=0,B=0,S=0,E=0,A=null,Z=0,R=new D.Buf16(16),C=new D.Buf16(16),N=null,O=0;for(w=0;w<=15;w++)R[w]=0;for(p=0;p<i;p++)R[e[a+p]]++;for(y=m,k=15;1<=k&&0===R[k];k--);if(k<y&&(y=k),0===k)return n[r++]=20971520,n[r++]=20971520,o.bits=1,0;for(v=1;v<k&&0===R[v];v++);for(y<v&&(y=v),w=B=1;w<=15;w++)if(B<<=1,(B-=R[w])<0)return-1;if(0<B&&(0===t||1!==k))return-1;for(C[1]=0,w=1;w<15;w++)C[w+1]=C[w]+R[w];for(p=0;p<i;p++)0!==e[a+p]&&(s[C[e[a+p]]++]=p);if(0===t?(A=N=s,u=19):1===t?(A=I,Z-=257,N=U,O-=257,u=256):(A=T,N=F,u=-1),w=v,_=r,z=p=E=0,d=-1,f=(S=1<<(x=y))-1,1===t&&852<S||2===t&&592<S)return 1;for(;;){for(c=w-z,s[p]<u?(b=0,g=s[p]):s[p]>u?(b=N[O+s[p]],g=A[Z+s[p]]):(b=96,g=0),l=1<<w-z,v=h=1<<x;n[_+(E>>z)+(h-=l)]=c<<24|b<<16|g|0,0!==h;);for(l=1<<w-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,p++,0==--R[w]){if(w===k)break;w=e[a+s[p]]}if(y<w&&(E&f)!==d){for(0===z&&(z=y),_+=v,B=1<<(x=w-z);x+z<k&&!((B-=R[x+z])<=0);)x++,B<<=1;if(S+=1<<x,1===t&&852<S||2===t&&592<S)return 1;n[d=E&f]=y<<24|x<<16|_-r|0}}return 0!==E&&(n[_+E]=w-z<<24|64<<16|0),o.bits=y,0}},{"../utils/common":3}],13:[function(t,e,a){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,a){var l=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var d=0,f=256,_=f+1+29,u=30,c=19,g=2*_+1,m=15,n=16,w=256,p=16,v=17,k=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(_+2));i(S);var E=new Array(2*u);i(E);var A=new Array(512);i(A);var Z=new Array(256);i(Z);var R=new Array(29);i(R);var C,N,O,D=new Array(u);function I(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function U(t){return t<256?A[t]:A[256+(t>>>7)]}function T(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,a){t.bi_valid>n-a?(t.bi_buf|=e<<t.bi_valid&65535,T(t,t.bi_buf),t.bi_buf=e>>n-t.bi_valid,t.bi_valid+=a-n):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function L(t,e,a){F(t,a[2*e],a[2*e+1])}function H(t,e){for(var a=0;a|=1&t,t>>>=1,a<<=1,0<--e;);return a>>>1}function j(t,e,a){var i,n,r=new Array(m+1),s=0;for(i=1;i<=m;i++)r[i]=s=s+a[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=H(r[o]++,o))}}function K(t){var e;for(e=0;e<_;e++)t.dyn_ltree[2*e]=0;for(e=0;e<u;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?T(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function Y(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&P(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!P(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function q(t,e,a){var i,n,r,s,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(r=Z[n])+f+1,e),0!==(s=y[r])&&F(t,n-=R[r],s),L(t,r=U(--i),a),0!==(s=x[r])&&F(t,i-=D[r],s)),o<t.last_lit;);L(t,w,e)}function G(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=g,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)r[2*(n=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;1<=a;a--)Y(t,r,a);for(n=l;a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Y(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,Y(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;r<=m;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<g;a++)c<(r=l[2*l[2*(i=t.heap[a])+1]+1]+1)&&(r=c,b++),l[2*i+1]=r,h<i||(t.bl_count[r]++,s=0,u<=i&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(0<b);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)h<(n=t.heap[--a])||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}(t,e),j(r,h,t.bl_count)}function X(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*p]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*k]++,r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function W(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),i=0;i<=a;i++)if(n=s,s=e[2*(i+1)+1],!(++o<l&&n===s)){if(o<h)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==r&&(L(t,n,t.bl_tree),o--),L(t,p,t.bl_tree),F(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),F(t,o-3,3)):(L(t,k,t.bl_tree),F(t,o-11,7));r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4)}}i(D);var J=!1;function Q(t,e,a,i){var n,r,s;F(t,(d<<1)+(i?1:0),3),r=e,s=a,M(n=t),T(n,s),T(n,~s),l.arraySet(n.pending_buf,n.window,r,s,n.pending),n.pending+=s}a._tr_init=function(t){J||(function(){var t,e,a,i,n,r=new Array(m+1);for(i=a=0;i<28;i++)for(R[i]=a,t=0;t<1<<y[i];t++)Z[a++]=i;for(Z[a-1]=i,i=n=0;i<16;i++)for(D[i]=n,t=0;t<1<<x[i];t++)A[n++]=i;for(n>>=7;i<u;i++)for(D[i]=n<<7,t=0;t<1<<x[i]-7;t++)A[256+n++]=i;for(e=0;e<=m;e++)r[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,r[8]++;for(;t<=255;)S[2*t+1]=9,t++,r[9]++;for(;t<=279;)S[2*t+1]=7,t++,r[7]++;for(;t<=287;)S[2*t+1]=8,t++,r[8]++;for(j(S,_+1,r),t=0;t<u;t++)E[2*t+1]=5,E[2*t]=H(t,5);C=new I(S,y,f+1,_,m),N=new I(E,x,0,u,m),O=new I(new Array(0),z,0,c,7)}(),J=!0),t.l_desc=new r(t.dyn_ltree,C),t.d_desc=new r(t.dyn_dtree,N),t.bl_desc=new r(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,K(t)},a._tr_stored_block=Q,a._tr_flush_block=function(t,e,a,i){var n,r,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<f;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),G(t,t.l_desc),G(t,t.d_desc),s=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=c-1;3<=e&&0===t.bl_tree[2*B[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=n&&(n=r)):n=r=a+5,a+4<=n&&-1!==e?Q(t,e,a,i):4===t.strategy||r===n?(F(t,2+(i?1:0),3),q(t,S,E)):(F(t,4+(i?1:0),3),function(t,e,a,i){var n;for(F(t,e-257,5),F(t,a-1,5),F(t,i-4,4),n=0;n<i;n++)F(t,t.bl_tree[2*B[n]+1],3);W(t,t.dyn_ltree,e-1),W(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),q(t,t.dyn_ltree,t.dyn_dtree)),K(t),i&&M(t)},a._tr_tally=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(Z[a]+f+1)]++,t.dyn_dtree[2*U(e)]++),t.last_lit===t.lit_bufsize-1},a._tr_align=function(t){var e;F(t,2,3),L(t,w,S),16===(e=t).bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":3}],15:[function(t,e,a){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(t,e,a){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")},{}],147:[function(require,module,exports){(function(global){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){(function(global){if(_dereq_(327),_dereq_(328),_dereq_(2),global._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");global._babelPolyfill=!0;var DEFINE_PROPERTY="defineProperty";function define(O,key,value){O[key]||Object[DEFINE_PROPERTY](O,key,{writable:!0,configurable:!0,value:value})}define(String.prototype,"padLeft","".padStart),define(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(key){[][key]&&define(Array,key,Function.call.bind([][key]))})}).call(this,void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2,327:327,328:328}],2:[function(_dereq_,module,exports){_dereq_(130),module.exports=_dereq_(23).RegExp.escape},{130:130,23:23}],3:[function(_dereq_,module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},{}],4:[function(_dereq_,module,exports){var cof=_dereq_(18);module.exports=function(it,msg){if("number"!=typeof it&&"Number"!=cof(it))throw TypeError(msg);return+it}},{18:18}],5:[function(_dereq_,module,exports){var UNSCOPABLES=_dereq_(128)("unscopables"),ArrayProto=Array.prototype;null==ArrayProto[UNSCOPABLES]&&_dereq_(42)(ArrayProto,UNSCOPABLES,{}),module.exports=function(key){ArrayProto[UNSCOPABLES][key]=!0}},{128:128,42:42}],6:[function(_dereq_,module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||void 0!==forbiddenField&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},{}],7:[function(_dereq_,module,exports){var isObject=_dereq_(51);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{51:51}],8:[function(_dereq_,module,exports){var toObject=_dereq_(119),toAbsoluteIndex=_dereq_(114),toLength=_dereq_(118);module.exports=[].copyWithin||function(target,start){var O=toObject(this),len=toLength(O.length),to=toAbsoluteIndex(target,len),from=toAbsoluteIndex(start,len),end=arguments.length>2?arguments[2]:void 0,count=Math.min((void 0===end?len:toAbsoluteIndex(end,len))-from,len-to),inc=1;for(from<to&&to<from+count&&(inc=-1,from+=count-1,to+=count-1);count-- >0;)from in O?O[to]=O[from]:delete O[to],to+=inc,from+=inc;return O}},{114:114,118:118,119:119}],9:[function(_dereq_,module,exports){var toObject=_dereq_(119),toAbsoluteIndex=_dereq_(114),toLength=_dereq_(118);module.exports=function(value){for(var O=toObject(this),length=toLength(O.length),aLen=arguments.length,index=toAbsoluteIndex(aLen>1?arguments[1]:void 0,length),end=aLen>2?arguments[2]:void 0,endPos=void 0===end?length:toAbsoluteIndex(end,length);endPos>index;)O[index++]=value;return O}},{114:114,118:118,119:119}],10:[function(_dereq_,module,exports){var forOf=_dereq_(39);module.exports=function(iter,ITERATOR){var result=[];return forOf(iter,!1,result.push,result,ITERATOR),result}},{39:39}],11:[function(_dereq_,module,exports){var toIObject=_dereq_(117),toLength=_dereq_(118),toAbsoluteIndex=_dereq_(114);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},{114:114,117:117,118:118}],12:[function(_dereq_,module,exports){var ctx=_dereq_(25),IObject=_dereq_(47),toObject=_dereq_(119),toLength=_dereq_(118),asc=_dereq_(15);module.exports=function(TYPE,$create){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX,create=$create||asc;return function($this,callbackfn,that){for(var val,res,O=toObject($this),self=IObject(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=IS_MAP?create($this,length):IS_FILTER?create($this,0):void 0;length>index;index++)if((NO_HOLES||index in self)&&(res=f(val=self[index],index,O),TYPE))if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return!0;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return!1;return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},{118:118,119:119,15:15,25:25,47:47}],13:[function(_dereq_,module,exports){var aFunction=_dereq_(3),toObject=_dereq_(119),IObject=_dereq_(47),toLength=_dereq_(118);module.exports=function(that,callbackfn,aLen,memo,isRight){aFunction(callbackfn);var O=toObject(that),self=IObject(O),length=toLength(O.length),index=isRight?length-1:0,i=isRight?-1:1;if(aLen<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,isRight?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;isRight?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}},{118:118,119:119,3:3,47:47}],14:[function(_dereq_,module,exports){var isObject=_dereq_(51),isArray=_dereq_(49),SPECIES=_dereq_(128)("species");module.exports=function(original){var C;return isArray(original)&&("function"!=typeof(C=original.constructor)||C!==Array&&!isArray(C.prototype)||(C=void 0),isObject(C)&&null===(C=C[SPECIES])&&(C=void 0)),void 0===C?Array:C}},{128:128,49:49,51:51}],15:[function(_dereq_,module,exports){var speciesConstructor=_dereq_(14);module.exports=function(original,length){return new(speciesConstructor(original))(length)}},{14:14}],16:[function(_dereq_,module,exports){var aFunction=_dereq_(3),isObject=_dereq_(51),invoke=_dereq_(46),arraySlice=[].slice,factories={};module.exports=Function.bind||function(that){var fn=aFunction(this),partArgs=arraySlice.call(arguments,1),bound=function bound(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?function(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++)n[i]="a["+i+"]";factories[len]=Function("F,a","return new F("+n.join(",")+")")}return factories[len](F,args)}(fn,args.length,args):invoke(fn,args,that)};return isObject(fn.prototype)&&(bound.prototype=fn.prototype),bound}},{3:3,46:46,51:51}],17:[function(_dereq_,module,exports){var cof=_dereq_(18),TAG=_dereq_(128)("toStringTag"),ARG="Arguments"==cof(function(){return arguments}());module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=function(it,key){try{return it[key]}catch(e){}}(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},{128:128,18:18}],18:[function(_dereq_,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],19:[function(_dereq_,module,exports){var dP=_dereq_(72).f,create=_dereq_(71),redefineAll=_dereq_(93),ctx=_dereq_(25),anInstance=_dereq_(6),forOf=_dereq_(39),$iterDefine=_dereq_(55),step=_dereq_(57),setSpecies=_dereq_(100),DESCRIPTORS=_dereq_(29),fastKey=_dereq_(66).fastKey,validate=_dereq_(125),SIZE=DESCRIPTORS?"_s":"size",getEntry=function(that,key){var entry,index=fastKey(key);if("F"!==index)return that._i[index];for(entry=that._f;entry;entry=entry.n)if(entry.k==key)return entry};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i"),that._t=NAME,that._i=create(null),that._f=void 0,that._l=void 0,that[SIZE]=0,null!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that)});return redefineAll(C.prototype,{clear:function(){for(var that=validate(this,NAME),data=that._i,entry=that._f;entry;entry=entry.n)entry.r=!0,entry.p&&(entry.p=entry.p.n=void 0),delete data[entry.i];that._f=that._l=void 0,that[SIZE]=0},delete:function(key){var that=validate(this,NAME),entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that._i[entry.i],entry.r=!0,prev&&(prev.n=next),next&&(next.p=prev),that._f==entry&&(that._f=next),that._l==entry&&(that._l=prev),that[SIZE]--}return!!entry},forEach:function(callbackfn){validate(this,NAME);for(var entry,f=ctx(callbackfn,arguments.length>1?arguments[1]:void 0,3);entry=entry?entry.n:this._f;)for(f(entry.v,entry.k,this);entry&&entry.r;)entry=entry.p},has:function(key){return!!getEntry(validate(this,NAME),key)}}),DESCRIPTORS&&dP(C.prototype,"size",{get:function(){return validate(this,NAME)[SIZE]}}),C},def:function(that,key,value){var prev,index,entry=getEntry(that,key);return entry?entry.v=value:(that._l=entry={i:index=fastKey(key,!0),k:key,v:value,p:prev=that._l,n:void 0,r:!1},that._f||(that._f=entry),prev&&(prev.n=entry),that[SIZE]++,"F"!==index&&(that._i[index]=entry)),that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=validate(iterated,NAME),this._k=kind,this._l=void 0},function(){for(var kind=this._k,entry=this._l;entry&&entry.r;)entry=entry.p;return this._t&&(this._l=entry=entry?entry.n:this._t._f)?step(0,"keys"==kind?entry.k:"values"==kind?entry.v:[entry.k,entry.v]):(this._t=void 0,step(1))},IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(NAME)}}},{100:100,125:125,25:25,29:29,39:39,55:55,57:57,6:6,66:66,71:71,72:72,93:93}],20:[function(_dereq_,module,exports){var classof=_dereq_(17),from=_dereq_(10);module.exports=function(NAME){return function(){if(classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");return from(this)}}},{10:10,17:17}],21:[function(_dereq_,module,exports){var redefineAll=_dereq_(93),getWeak=_dereq_(66).getWeak,anObject=_dereq_(7),isObject=_dereq_(51),anInstance=_dereq_(6),forOf=_dereq_(39),createArrayMethod=_dereq_(12),$has=_dereq_(41),validate=_dereq_(125),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),id=0,uncaughtFrozenStore=function(that){return that._l||(that._l=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.a=[]},findUncaughtFrozen=function(store,key){return arrayFind(store.a,function(it){return it[0]===key})};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);entry?entry[1]=value:this.a.push([key,value])},delete:function(key){var index=arrayFindIndex(this.a,function(it){return it[0]===key});return~index&&this.a.splice(index,1),!!~index}},module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i"),that._t=NAME,that._i=id++,that._l=void 0,null!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that)});return redefineAll(C.prototype,{delete:function(key){if(!isObject(key))return!1;var data=getWeak(key);return!0===data?uncaughtFrozenStore(validate(this,NAME)).delete(key):data&&$has(data,this._i)&&delete data[this._i]},has:function(key){if(!isObject(key))return!1;var data=getWeak(key);return!0===data?uncaughtFrozenStore(validate(this,NAME)).has(key):data&&$has(data,this._i)}}),C},def:function(that,key,value){var data=getWeak(anObject(key),!0);return!0===data?uncaughtFrozenStore(that).set(key,value):data[that._i]=value,that},ufstore:uncaughtFrozenStore}},{12:12,125:125,39:39,41:41,51:51,6:6,66:66,7:7,93:93}],22:[function(_dereq_,module,exports){var global=_dereq_(40),$export=_dereq_(33),redefine=_dereq_(94),redefineAll=_dereq_(93),meta=_dereq_(66),forOf=_dereq_(39),anInstance=_dereq_(6),isObject=_dereq_(51),fails=_dereq_(35),$iterDetect=_dereq_(56),setToStringTag=_dereq_(101),inheritIfRequired=_dereq_(45);module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={},fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,"delete"==KEY?function(a){return!(IS_WEAK&&!isObject(a))&&fn.call(this,0===a?0:a)}:"has"==KEY?function(a){return!(IS_WEAK&&!isObject(a))&&fn.call(this,0===a?0:a)}:"get"==KEY?function(a){return IS_WEAK&&!isObject(a)?void 0:fn.call(this,0===a?0:a)}:"add"==KEY?function(a){return fn.call(this,0===a?0:a),this}:function(a,b){return fn.call(this,0===a?0:a,b),this})};if("function"==typeof C&&(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){var instance=new C,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter)}),BUGGY_ZERO=!IS_WEAK&&fails(function(){for(var $instance=new C,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)});ACCEPT_ITERABLES||((C=wrapper(function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base,target,C);return null!=iterable&&forOf(iterable,IS_MAP,that[ADDER],that),that})).prototype=proto,proto.constructor=C),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&proto.clear&&delete proto.clear}else C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER),redefineAll(C.prototype,methods),meta.NEED=!0;return setToStringTag(C,NAME),O[NAME]=C,$export($export.G+$export.W+$export.F*(C!=Base),O),IS_WEAK||common.setStrong(C,NAME,IS_MAP),C}},{101:101,33:33,35:35,39:39,40:40,45:45,51:51,56:56,6:6,66:66,93:93,94:94}],23:[function(_dereq_,module,exports){var core=module.exports={version:"2.5.0"};"number"==typeof __e&&(__e=core)},{}],24:[function(_dereq_,module,exports){var $defineProperty=_dereq_(72),createDesc=_dereq_(92);module.exports=function(object,index,value){index in object?$defineProperty.f(object,index,createDesc(0,value)):object[index]=value}},{72:72,92:92}],25:[function(_dereq_,module,exports){var aFunction=_dereq_(3);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{3:3}],26:[function(_dereq_,module,exports){var fails=_dereq_(35),getTime=Date.prototype.getTime,$toISOString=Date.prototype.toISOString,lz=function(num){return num>9?num:"0"+num};module.exports=fails(function(){return"0385-07-25T07:06:39.999Z"!=$toISOString.call(new Date(-5e13-1))})||!fails(function(){$toISOString.call(new Date(NaN))})?function(){if(!isFinite(getTime.call(this)))throw RangeError("Invalid time value");var d=this,y=d.getUTCFullYear(),m=d.getUTCMilliseconds(),s=y<0?"-":y>9999?"+":"";return s+("00000"+Math.abs(y)).slice(s?-6:-4)+"-"+lz(d.getUTCMonth()+1)+"-"+lz(d.getUTCDate())+"T"+lz(d.getUTCHours())+":"+lz(d.getUTCMinutes())+":"+lz(d.getUTCSeconds())+"."+(m>99?m:"0"+lz(m))+"Z"}:$toISOString},{35:35}],27:[function(_dereq_,module,exports){var anObject=_dereq_(7),toPrimitive=_dereq_(120);module.exports=function(hint){if("string"!==hint&&"number"!==hint&&"default"!==hint)throw TypeError("Incorrect hint");return toPrimitive(anObject(this),"number"!=hint)}},{120:120,7:7}],28:[function(_dereq_,module,exports){module.exports=function(it){if(null==it)throw TypeError("Can't call method on  "+it);return it}},{}],29:[function(_dereq_,module,exports){module.exports=!_dereq_(35)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{35:35}],30:[function(_dereq_,module,exports){var isObject=_dereq_(51),document=_dereq_(40).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{40:40,51:51}],31:[function(_dereq_,module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],32:[function(_dereq_,module,exports){var getKeys=_dereq_(81),gOPS=_dereq_(78),pIE=_dereq_(82);module.exports=function(it){var result=getKeys(it),getSymbols=gOPS.f;if(getSymbols)for(var key,symbols=getSymbols(it),isEnum=pIE.f,i=0;symbols.length>i;)isEnum.call(it,key=symbols[i++])&&result.push(key);return result}},{78:78,81:81,82:82}],33:[function(_dereq_,module,exports){var global=_dereq_(40),core=_dereq_(23),hide=_dereq_(42),redefine=_dereq_(94),ctx=_dereq_(25),$export=function $export(type,name,source){var key,own,out,exp,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global:type&$export.S?global[name]||(global[name]={}):(global[name]||{}).prototype,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports.prototype||(exports.prototype={});for(key in IS_GLOBAL&&(source=name),source)out=((own=!IS_FORCED&&target&&void 0!==target[key])?target:source)[key],exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,target&&redefine(target,key,out,type&$export.U),exports[key]!=out&&hide(exports,key,exp),IS_PROTO&&expProto[key]!=out&&(expProto[key]=out)};global.core=core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},{23:23,25:25,40:40,42:42,94:94}],34:[function(_dereq_,module,exports){var MATCH=_dereq_(128)("match");module.exports=function(KEY){var re=/./;try{"/./"[KEY](re)}catch(e){try{return re[MATCH]=!1,!"/./"[KEY](re)}catch(f){}}return!0}},{128:128}],35:[function(_dereq_,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},{}],36:[function(_dereq_,module,exports){var hide=_dereq_(42),redefine=_dereq_(94),fails=_dereq_(35),defined=_dereq_(28),wks=_dereq_(128);module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY),fns=exec(defined,SYMBOL,""[KEY]),strfn=fns[0],rxfn=fns[1];fails(function(){var O={};return O[SYMBOL]=function(){return 7},7!=""[KEY](O)})&&(redefine(String.prototype,KEY,strfn),hide(RegExp.prototype,SYMBOL,2==length?function(string,arg){return rxfn.call(string,this,arg)}:function(string){return rxfn.call(string,this)}))}},{128:128,28:28,35:35,42:42,94:94}],37:[function(_dereq_,module,exports){var anObject=_dereq_(7);module.exports=function(){var that=anObject(this),result="";return that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.unicode&&(result+="u"),that.sticky&&(result+="y"),result}},{7:7}],38:[function(_dereq_,module,exports){var isArray=_dereq_(49),isObject=_dereq_(51),toLength=_dereq_(118),ctx=_dereq_(25),IS_CONCAT_SPREADABLE=_dereq_(128)("isConcatSpreadable");module.exports=function flattenIntoArray(target,original,source,sourceLen,start,depth,mapper,thisArg){for(var element,spreadable,targetIndex=start,sourceIndex=0,mapFn=!!mapper&&ctx(mapper,thisArg,3);sourceIndex<sourceLen;){if(sourceIndex in source){if(element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex],spreadable=!1,isObject(element)&&(spreadable=void 0!==(spreadable=element[IS_CONCAT_SPREADABLE])?!!spreadable:isArray(element)),spreadable&&depth>0)targetIndex=flattenIntoArray(target,original,element,toLength(element.length),targetIndex,depth-1)-1;else{if(targetIndex>=9007199254740991)throw TypeError();target[targetIndex]=element}targetIndex++}sourceIndex++}return targetIndex}},{118:118,128:128,25:25,49:49,51:51}],39:[function(_dereq_,module,exports){var ctx=_dereq_(25),call=_dereq_(53),isArrayIter=_dereq_(48),anObject=_dereq_(7),toLength=_dereq_(118),getIterFn=_dereq_(129),BREAK={},RETURN={};(exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,result,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn)){for(length=toLength(iterable.length);length>index;index++)if((result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]))===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)if((result=call(iterator,f,step.value,entries))===BREAK||result===RETURN)return result}).BREAK=BREAK,exports.RETURN=RETURN},{118:118,129:129,25:25,48:48,53:53,7:7}],40:[function(_dereq_,module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},{}],41:[function(_dereq_,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],42:[function(_dereq_,module,exports){var dP=_dereq_(72),createDesc=_dereq_(92);module.exports=_dereq_(29)?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},{29:29,72:72,92:92}],43:[function(_dereq_,module,exports){var document=_dereq_(40).document;module.exports=document&&document.documentElement},{40:40}],44:[function(_dereq_,module,exports){module.exports=!_dereq_(29)&&!_dereq_(35)(function(){return 7!=Object.defineProperty(_dereq_(30)("div"),"a",{get:function(){return 7}}).a})},{29:29,30:30,35:35}],45:[function(_dereq_,module,exports){var isObject=_dereq_(51),setPrototypeOf=_dereq_(99).set;module.exports=function(that,target,C){var P,S=target.constructor;return S!==C&&"function"==typeof S&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf&&setPrototypeOf(that,P),that}},{51:51,99:99}],46:[function(_dereq_,module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],47:[function(_dereq_,module,exports){var cof=_dereq_(18);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},{18:18}],48:[function(_dereq_,module,exports){var Iterators=_dereq_(58),ITERATOR=_dereq_(128)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{128:128,58:58}],49:[function(_dereq_,module,exports){var cof=_dereq_(18);module.exports=Array.isArray||function(arg){return"Array"==cof(arg)}},{18:18}],50:[function(_dereq_,module,exports){var isObject=_dereq_(51),floor=Math.floor;module.exports=function(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},{51:51}],51:[function(_dereq_,module,exports){module.exports=function(it){return"object"===(void 0===it?"undefined":_typeof(it))?null!==it:"function"==typeof it}},{}],52:[function(_dereq_,module,exports){var isObject=_dereq_(51),cof=_dereq_(18),MATCH=_dereq_(128)("match");module.exports=function(it){var isRegExp;return isObject(it)&&(void 0!==(isRegExp=it[MATCH])?!!isRegExp:"RegExp"==cof(it))}},{128:128,18:18,51:51}],53:[function(_dereq_,module,exports){var anObject=_dereq_(7);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator.return;throw void 0!==ret&&anObject(ret.call(iterator)),e}}},{7:7}],54:[function(_dereq_,module,exports){var create=_dereq_(71),descriptor=_dereq_(92),setToStringTag=_dereq_(101),IteratorPrototype={};_dereq_(42)(IteratorPrototype,_dereq_(128)("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},{101:101,128:128,42:42,71:71,92:92}],55:[function(_dereq_,module,exports){var LIBRARY=_dereq_(60),$export=_dereq_(33),redefine=_dereq_(94),hide=_dereq_(42),has=_dereq_(41),Iterators=_dereq_(58),$iterCreate=_dereq_(54),setToStringTag=_dereq_(101),getPrototypeOf=_dereq_(79),ITERATOR=_dereq_(128)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case"keys":case"values":return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES="values"==DEFAULT,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto["@@iterator"]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME&&proto.entries||$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)))!==Object.prototype&&IteratorPrototype.next&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis)),DEF_VALUES&&$native&&"values"!==$native.name&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod("values"),keys:IS_SET?$default:getMethod("keys"),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},{101:101,128:128,33:33,41:41,42:42,54:54,58:58,60:60,79:79,94:94}],56:[function(_dereq_,module,exports){var ITERATOR=_dereq_(128)("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=!0}},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},{128:128}],57:[function(_dereq_,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],58:[function(_dereq_,module,exports){module.exports={}},{}],59:[function(_dereq_,module,exports){var getKeys=_dereq_(81),toIObject=_dereq_(117);module.exports=function(object,el){for(var key,O=toIObject(object),keys=getKeys(O),length=keys.length,index=0;length>index;)if(O[key=keys[index++]]===el)return key}},{117:117,81:81}],60:[function(_dereq_,module,exports){module.exports=!1},{}],61:[function(_dereq_,module,exports){var $expm1=Math.expm1;module.exports=!$expm1||$expm1(10)>22025.465794806718||$expm1(10)<22025.465794806718||-2e-17!=$expm1(-2e-17)?function(x){return 0==(x=+x)?x:x>-1e-6&&x<1e-6?x+x*x/2:Math.exp(x)-1}:$expm1},{}],62:[function(_dereq_,module,exports){var sign=_dereq_(65),pow=Math.pow,EPSILON=pow(2,-52),EPSILON32=pow(2,-23),MAX32=pow(2,127)*(2-EPSILON32),MIN32=pow(2,-126);module.exports=Math.fround||function(x){var a,result,$abs=Math.abs(x),$sign=sign(x);return $abs<MIN32?$sign*($abs/MIN32/EPSILON32+1/EPSILON-1/EPSILON)*MIN32*EPSILON32:(result=(a=(1+EPSILON32/EPSILON)*$abs)-(a-$abs))>MAX32||result!=result?$sign*(1/0):$sign*result}},{65:65}],63:[function(_dereq_,module,exports){module.exports=Math.log1p||function(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:Math.log(1+x)}},{}],64:[function(_dereq_,module,exports){module.exports=Math.scale||function(x,inLow,inHigh,outLow,outHigh){return 0===arguments.length||x!=x||inLow!=inLow||inHigh!=inHigh||outLow!=outLow||outHigh!=outHigh?NaN:x===1/0||x===-1/0?x:(x-inLow)*(outHigh-outLow)/(inHigh-inLow)+outLow}},{}],65:[function(_dereq_,module,exports){module.exports=Math.sign||function(x){return 0==(x=+x)||x!=x?x:x<0?-1:1}},{}],66:[function(_dereq_,module,exports){var META=_dereq_(124)("meta"),isObject=_dereq_(51),has=_dereq_(41),setDesc=_dereq_(72).f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!_dereq_(35)(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})},meta=module.exports={KEY:META,NEED:!1,fastKey:function(it,create){if(!isObject(it))return"symbol"==(void 0===it?"undefined":_typeof(it))?it:("string"==typeof it?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i},getWeak:function(it,create){if(!has(it,META)){if(!isExtensible(it))return!0;if(!create)return!1;setMeta(it)}return it[META].w},onFreeze:function(it){return FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META)&&setMeta(it),it}}},{124:124,35:35,41:41,51:51,72:72}],67:[function(_dereq_,module,exports){var Map=_dereq_(160),$export=_dereq_(33),shared=_dereq_(103)("metadata"),store=shared.store||(shared.store=new(_dereq_(266))),getOrCreateMetadataMap=function(target,targetKey,create){var targetMetadata=store.get(target);if(!targetMetadata){if(!create)return;store.set(target,targetMetadata=new Map)}var keyMetadata=targetMetadata.get(targetKey);if(!keyMetadata){if(!create)return;targetMetadata.set(targetKey,keyMetadata=new Map)}return keyMetadata};module.exports={store:store,map:getOrCreateMetadataMap,has:function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,!1);return void 0!==metadataMap&&metadataMap.has(MetadataKey)},get:function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,!1);return void 0===metadataMap?void 0:metadataMap.get(MetadataKey)},set:function(MetadataKey,MetadataValue,O,P){getOrCreateMetadataMap(O,P,!0).set(MetadataKey,MetadataValue)},keys:function(target,targetKey){var metadataMap=getOrCreateMetadataMap(target,targetKey,!1),keys=[];return metadataMap&&metadataMap.forEach(function(_,key){keys.push(key)}),keys},key:function(it){return void 0===it||"symbol"==(void 0===it?"undefined":_typeof(it))?it:String(it)},exp:function(O){$export($export.S,"Reflect",O)}}},{103:103,160:160,266:266,33:33}],68:[function(_dereq_,module,exports){var global=_dereq_(40),macrotask=_dereq_(113).set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==_dereq_(18)(process);module.exports=function(){var head,last,notify,flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(e){throw head?notify():last=void 0,e}}last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(Observer){var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function(){promise.then(flush)}}else notify=function(){macrotask.call(global,flush)};return function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}}},{113:113,18:18,40:40}],69:[function(_dereq_,module,exports){var aFunction=_dereq_(3);function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)}module.exports.f=function(C){return new PromiseCapability(C)}},{3:3}],70:[function(_dereq_,module,exports){var getKeys=_dereq_(81),gOPS=_dereq_(78),pIE=_dereq_(82),toObject=_dereq_(119),IObject=_dereq_(47),$assign=Object.assign;module.exports=!$assign||_dereq_(35)(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";return A[S]=7,K.split("").forEach(function(k){B[k]=k}),7!=$assign({},A)[S]||Object.keys($assign({},B)).join("")!=K})?function(target,source){for(var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;aLen>index;)for(var key,S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0;length>j;)isEnum.call(S,key=keys[j++])&&(T[key]=S[key]);return T}:$assign},{119:119,35:35,47:47,78:78,81:81,82:82}],71:[function(_dereq_,module,exports){var anObject=_dereq_(7),dPs=_dereq_(73),enumBugKeys=_dereq_(31),IE_PROTO=_dereq_(102)("IE_PROTO"),Empty=function(){},_createDict=function(){var iframeDocument,iframe=_dereq_(30)("iframe"),i=enumBugKeys.length;for(iframe.style.display="none",_dereq_(43).appendChild(iframe),iframe.src="javascript:",(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write("<script>document.F=Object<\/script>"),iframeDocument.close(),_createDict=iframeDocument.F;i--;)delete _createDict.prototype[enumBugKeys[i]];return _createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty.prototype=anObject(O),result=new Empty,Empty.prototype=null,result[IE_PROTO]=O):result=_createDict(),void 0===Properties?result:dPs(result,Properties)}},{102:102,30:30,31:31,43:43,7:7,73:73}],72:[function(_dereq_,module,exports){var anObject=_dereq_(7),IE8_DOM_DEFINE=_dereq_(44),toPrimitive=_dereq_(120),dP=Object.defineProperty;exports.f=_dereq_(29)?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},{120:120,29:29,44:44,7:7}],73:[function(_dereq_,module,exports){var dP=_dereq_(72),anObject=_dereq_(7),getKeys=_dereq_(81);module.exports=_dereq_(29)?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},{29:29,7:7,72:72,81:81}],74:[function(_dereq_,module,exports){module.exports=_dereq_(60)||!_dereq_(35)(function(){var K=Math.random();__defineSetter__.call(null,K,function(){}),delete _dereq_(40)[K]})},{35:35,40:40,60:60}],75:[function(_dereq_,module,exports){var pIE=_dereq_(82),createDesc=_dereq_(92),toIObject=_dereq_(117),toPrimitive=_dereq_(120),has=_dereq_(41),IE8_DOM_DEFINE=_dereq_(44),gOPD=Object.getOwnPropertyDescriptor;exports.f=_dereq_(29)?gOPD:function(O,P){if(O=toIObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},{117:117,120:120,29:29,41:41,44:44,82:82,92:92}],76:[function(_dereq_,module,exports){var toIObject=_dereq_(117),gOPN=_dereq_(77).f,toString={}.toString,windowNames="object"==("undefined"==typeof window?"undefined":_typeof(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function(it){return windowNames&&"[object Window]"==toString.call(it)?function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}}(it):gOPN(toIObject(it))}},{117:117,77:77}],77:[function(_dereq_,module,exports){var $keys=_dereq_(80),hiddenKeys=_dereq_(31).concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(O){return $keys(O,hiddenKeys)}},{31:31,80:80}],78:[function(_dereq_,module,exports){exports.f=Object.getOwnPropertySymbols},{}],79:[function(_dereq_,module,exports){var has=_dereq_(41),toObject=_dereq_(119),IE_PROTO=_dereq_(102)("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},{102:102,119:119,41:41}],80:[function(_dereq_,module,exports){var has=_dereq_(41),toIObject=_dereq_(117),arrayIndexOf=_dereq_(11)(!1),IE_PROTO=_dereq_(102)("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},{102:102,11:11,117:117,41:41}],81:[function(_dereq_,module,exports){var $keys=_dereq_(80),enumBugKeys=_dereq_(31);module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},{31:31,80:80}],82:[function(_dereq_,module,exports){exports.f={}.propertyIsEnumerable},{}],83:[function(_dereq_,module,exports){var $export=_dereq_(33),core=_dereq_(23),fails=_dereq_(35);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},{23:23,33:33,35:35}],84:[function(_dereq_,module,exports){var getKeys=_dereq_(81),toIObject=_dereq_(117),isEnum=_dereq_(82).f;module.exports=function(isEntries){return function(it){for(var key,O=toIObject(it),keys=getKeys(O),length=keys.length,i=0,result=[];length>i;)isEnum.call(O,key=keys[i++])&&result.push(isEntries?[key,O[key]]:O[key]);return result}}},{117:117,81:81,82:82}],85:[function(_dereq_,module,exports){var gOPN=_dereq_(77),gOPS=_dereq_(78),anObject=_dereq_(7),Reflect=_dereq_(40).Reflect;module.exports=Reflect&&Reflect.ownKeys||function(it){var keys=gOPN.f(anObject(it)),getSymbols=gOPS.f;return getSymbols?keys.concat(getSymbols(it)):keys}},{40:40,7:7,77:77,78:78}],86:[function(_dereq_,module,exports){var $parseFloat=_dereq_(40).parseFloat,$trim=_dereq_(111).trim;module.exports=1/$parseFloat(_dereq_(112)+"-0")!=-1/0?function(str){var string=$trim(String(str),3),result=$parseFloat(string);return 0===result&&"-"==string.charAt(0)?-0:result}:$parseFloat},{111:111,112:112,40:40}],87:[function(_dereq_,module,exports){var $parseInt=_dereq_(40).parseInt,$trim=_dereq_(111).trim,ws=_dereq_(112),hex=/^[-+]?0[xX]/;module.exports=8!==$parseInt(ws+"08")||22!==$parseInt(ws+"0x16")?function(str,radix){var string=$trim(String(str),3);return $parseInt(string,radix>>>0||(hex.test(string)?16:10))}:$parseInt},{111:111,112:112,40:40}],88:[function(_dereq_,module,exports){var path=_dereq_(89),invoke=_dereq_(46),aFunction=_dereq_(3);module.exports=function(){for(var fn=aFunction(this),length=arguments.length,pargs=Array(length),i=0,_=path._,holder=!1;length>i;)(pargs[i]=arguments[i++])===_&&(holder=!0);return function(){var args,aLen=arguments.length,j=0,k=0;if(!holder&&!aLen)return invoke(fn,pargs,this);if(args=pargs.slice(),holder)for(;length>j;j++)args[j]===_&&(args[j]=arguments[k++]);for(;aLen>k;)args.push(arguments[k++]);return invoke(fn,args,this)}}},{3:3,46:46,89:89}],89:[function(_dereq_,module,exports){module.exports=_dereq_(40)},{40:40}],90:[function(_dereq_,module,exports){module.exports=function(exec){try{return{e:!1,v:exec()}}catch(e){return{e:!0,v:e}}}},{}],91:[function(_dereq_,module,exports){var newPromiseCapability=_dereq_(69);module.exports=function(C,x){var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},{69:69}],92:[function(_dereq_,module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},{}],93:[function(_dereq_,module,exports){var redefine=_dereq_(94);module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target}},{94:94}],94:[function(_dereq_,module,exports){var global=_dereq_(40),hide=_dereq_(42),has=_dereq_(41),SRC=_dereq_(124)("src"),$toString=Function.toString,TPL=(""+$toString).split("toString");_dereq_(23).inspectSource=function(it){return $toString.call(it)},(module.exports=function(O,key,val,safe){var isFunction="function"==typeof val;isFunction&&(has(val,"name")||hide(val,"name",key)),O[key]!==val&&(isFunction&&(has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)))),O===global?O[key]=val:safe?O[key]?O[key]=val:hide(O,key,val):(delete O[key],hide(O,key,val)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[SRC]||$toString.call(this)})},{124:124,23:23,40:40,41:41,42:42}],95:[function(_dereq_,module,exports){module.exports=function(regExp,replace){var replacer=replace===Object(replace)?function(part){return replace[part]}:replace;return function(it){return String(it).replace(regExp,replacer)}}},{}],96:[function(_dereq_,module,exports){module.exports=Object.is||function(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}},{}],97:[function(_dereq_,module,exports){var $export=_dereq_(33),aFunction=_dereq_(3),ctx=_dereq_(25),forOf=_dereq_(39);module.exports=function(COLLECTION){$export($export.S,COLLECTION,{from:function(source){var mapping,A,n,cb,mapFn=arguments[1];return aFunction(this),(mapping=void 0!==mapFn)&&aFunction(mapFn),null==source?new this:(A=[],mapping?(n=0,cb=ctx(mapFn,arguments[2],2),forOf(source,!1,function(nextItem){A.push(cb(nextItem,n++))})):forOf(source,!1,A.push,A),new this(A))}})}},{25:25,3:3,33:33,39:39}],98:[function(_dereq_,module,exports){var $export=_dereq_(33);module.exports=function(COLLECTION){$export($export.S,COLLECTION,{of:function(){for(var length=arguments.length,A=Array(length);length--;)A[length]=arguments[length];return new this(A)}})}},{33:33}],99:[function(_dereq_,module,exports){var isObject=_dereq_(51),anObject=_dereq_(7),check=function(O,proto){if(anObject(O),!isObject(proto)&&null!==proto)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{(set=_dereq_(25)(Function.call,_dereq_(75).f(Object.prototype,"__proto__").set,2))(test,[]),buggy=!(test instanceof Array)}catch(e){buggy=!0}return function(O,proto){return check(O,proto),buggy?O.__proto__=proto:set(O,proto),O}}({},!1):void 0),check:check}},{25:25,51:51,7:7,75:75}],100:[function(_dereq_,module,exports){var global=_dereq_(40),dP=_dereq_(72),DESCRIPTORS=_dereq_(29),SPECIES=_dereq_(128)("species");module.exports=function(KEY){var C=global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},{128:128,29:29,40:40,72:72}],101:[function(_dereq_,module,exports){var def=_dereq_(72).f,has=_dereq_(41),TAG=_dereq_(128)("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},{128:128,41:41,72:72}],102:[function(_dereq_,module,exports){var shared=_dereq_(103)("keys"),uid=_dereq_(124);module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},{103:103,124:124}],103:[function(_dereq_,module,exports){var global=_dereq_(40),store=global["__core-js_shared__"]||(global["__core-js_shared__"]={});module.exports=function(key){return store[key]||(store[key]={})}},{40:40}],104:[function(_dereq_,module,exports){var anObject=_dereq_(7),aFunction=_dereq_(3),SPECIES=_dereq_(128)("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return void 0===C||null==(S=anObject(C)[SPECIES])?D:aFunction(S)}},{128:128,3:3,7:7}],105:[function(_dereq_,module,exports){var fails=_dereq_(35);module.exports=function(method,arg){return!!method&&fails(function(){arg?method.call(null,function(){},1):method.call(null)})}},{35:35}],106:[function(_dereq_,module,exports){var toInteger=_dereq_(116),defined=_dereq_(28);module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i))<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):b-56320+(a-55296<<10)+65536}}},{116:116,28:28}],107:[function(_dereq_,module,exports){var isRegExp=_dereq_(52),defined=_dereq_(28);module.exports=function(that,searchString,NAME){if(isRegExp(searchString))throw TypeError("String#"+NAME+" doesn't accept regex!");return String(defined(that))}},{28:28,52:52}],108:[function(_dereq_,module,exports){var $export=_dereq_(33),fails=_dereq_(35),defined=_dereq_(28),quot=/"/g,createHTML=function(string,tag,attribute,value){var S=String(defined(string)),p1="<"+tag;return""!==attribute&&(p1+=" "+attribute+'="'+String(value).replace(quot,"&quot;")+'"'),p1+">"+S+"</"+tag+">"};module.exports=function(NAME,exec){var O={};O[NAME]=exec(createHTML),$export($export.P+$export.F*fails(function(){var test=""[NAME]('"');return test!==test.toLowerCase()||test.split('"').length>3}),"String",O)}},{28:28,33:33,35:35}],109:[function(_dereq_,module,exports){var toLength=_dereq_(118),repeat=_dereq_(110),defined=_dereq_(28);module.exports=function(that,maxLength,fillString,left){var S=String(defined(that)),stringLength=S.length,fillStr=void 0===fillString?" ":String(fillString),intMaxLength=toLength(maxLength);if(intMaxLength<=stringLength||""==fillStr)return S;var fillLen=intMaxLength-stringLength,stringFiller=repeat.call(fillStr,Math.ceil(fillLen/fillStr.length));return stringFiller.length>fillLen&&(stringFiller=stringFiller.slice(0,fillLen)),left?stringFiller+S:S+stringFiller}},{110:110,118:118,28:28}],110:[function(_dereq_,module,exports){var toInteger=_dereq_(116),defined=_dereq_(28);module.exports=function(count){var str=String(defined(this)),res="",n=toInteger(count);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))1&n&&(res+=str);return res}},{116:116,28:28}],111:[function(_dereq_,module,exports){var $export=_dereq_(33),defined=_dereq_(28),fails=_dereq_(35),spaces=_dereq_(112),space="["+spaces+"]",ltrim=RegExp("^"+space+space+"*"),rtrim=RegExp(space+space+"*$"),exporter=function(KEY,exec,ALIAS){var exp={},FORCE=fails(function(){return!!spaces[KEY]()||"​"!="​"[KEY]()}),fn=exp[KEY]=FORCE?exec(trim):spaces[KEY];ALIAS&&(exp[ALIAS]=fn),$export($export.P+$export.F*FORCE,"String",exp)},trim=exporter.trim=function(string,TYPE){return string=String(defined(string)),1&TYPE&&(string=string.replace(ltrim,"")),2&TYPE&&(string=string.replace(rtrim,"")),string};module.exports=exporter},{112:112,28:28,33:33,35:35}],112:[function(_dereq_,module,exports){module.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],113:[function(_dereq_,module,exports){var defer,channel,port,ctx=_dereq_(25),invoke=_dereq_(46),html=_dereq_(43),cel=_dereq_(30),global=_dereq_(40),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==_dereq_(18)(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(ctx(run,id,1))}:MessageChannel?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer="onreadystatechange"in cel("script")?function(id){html.appendChild(cel("script")).onreadystatechange=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},{18:18,25:25,30:30,40:40,43:43,46:46}],114:[function(_dereq_,module,exports){var toInteger=_dereq_(116),max=Math.max,min=Math.min;module.exports=function(index,length){return(index=toInteger(index))<0?max(index+length,0):min(index,length)}},{116:116}],115:[function(_dereq_,module,exports){var toInteger=_dereq_(116),toLength=_dereq_(118);module.exports=function(it){if(void 0===it)return 0;var number=toInteger(it),length=toLength(number);if(number!==length)throw RangeError("Wrong length!");return length}},{116:116,118:118}],116:[function(_dereq_,module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],117:[function(_dereq_,module,exports){var IObject=_dereq_(47),defined=_dereq_(28);module.exports=function(it){return IObject(defined(it))}},{28:28,47:47}],118:[function(_dereq_,module,exports){var toInteger=_dereq_(116),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{116:116}],119:[function(_dereq_,module,exports){var defined=_dereq_(28);module.exports=function(it){return Object(defined(it))}},{28:28}],120:[function(_dereq_,module,exports){var isObject=_dereq_(51);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{51:51}],121:[function(_dereq_,module,exports){if(_dereq_(29)){var LIBRARY=_dereq_(60),global=_dereq_(40),fails=_dereq_(35),$export=_dereq_(33),$typed=_dereq_(123),$buffer=_dereq_(122),ctx=_dereq_(25),anInstance=_dereq_(6),propertyDesc=_dereq_(92),hide=_dereq_(42),redefineAll=_dereq_(93),toInteger=_dereq_(116),toLength=_dereq_(118),toIndex=_dereq_(115),toAbsoluteIndex=_dereq_(114),toPrimitive=_dereq_(120),has=_dereq_(41),classof=_dereq_(17),isObject=_dereq_(51),toObject=_dereq_(119),isArrayIter=_dereq_(48),create=_dereq_(71),getPrototypeOf=_dereq_(79),gOPN=_dereq_(77).f,getIterFn=_dereq_(129),uid=_dereq_(124),wks=_dereq_(128),createArrayMethod=_dereq_(12),createArrayIncludes=_dereq_(11),speciesConstructor=_dereq_(104),ArrayIterators=_dereq_(141),Iterators=_dereq_(58),$iterDetect=_dereq_(56),setSpecies=_dereq_(100),arrayFill=_dereq_(9),arrayCopyWithin=_dereq_(8),$DP=_dereq_(72),$GOPD=_dereq_(75),dP=$DP.f,gOPD=$GOPD.f,RangeError=global.RangeError,TypeError=global.TypeError,Uint8Array=global.Uint8Array,ArrayProto=Array.prototype,$ArrayBuffer=$buffer.ArrayBuffer,$DataView=$buffer.DataView,arrayForEach=createArrayMethod(0),arrayFilter=createArrayMethod(2),arraySome=createArrayMethod(3),arrayEvery=createArrayMethod(4),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),arrayIncludes=createArrayIncludes(!0),arrayIndexOf=createArrayIncludes(!1),arrayValues=ArrayIterators.values,arrayKeys=ArrayIterators.keys,arrayEntries=ArrayIterators.entries,arrayLastIndexOf=ArrayProto.lastIndexOf,arrayReduce=ArrayProto.reduce,arrayReduceRight=ArrayProto.reduceRight,arrayJoin=ArrayProto.join,arraySort=ArrayProto.sort,arraySlice=ArrayProto.slice,arrayToString=ArrayProto.toString,arrayToLocaleString=ArrayProto.toLocaleString,ITERATOR=wks("iterator"),TAG=wks("toStringTag"),TYPED_CONSTRUCTOR=uid("typed_constructor"),DEF_CONSTRUCTOR=uid("def_constructor"),ALL_CONSTRUCTORS=$typed.CONSTR,TYPED_ARRAY=$typed.TYPED,VIEW=$typed.VIEW,$map=createArrayMethod(1,function(O,length){return allocate(speciesConstructor(O,O[DEF_CONSTRUCTOR]),length)}),LITTLE_ENDIAN=fails(function(){return 1===new Uint8Array(new Uint16Array([1]).buffer)[0]}),FORCED_SET=!!Uint8Array&&!!Uint8Array.prototype.set&&fails(function(){new Uint8Array(1).set({})}),toOffset=function(it,BYTES){var offset=toInteger(it);if(offset<0||offset%BYTES)throw RangeError("Wrong offset!");return offset},validate=function(it){if(isObject(it)&&TYPED_ARRAY in it)return it;throw TypeError(it+" is not a typed array!")},allocate=function(C,length){if(!(isObject(C)&&TYPED_CONSTRUCTOR in C))throw TypeError("It is not a typed array constructor!");return new C(length)},speciesFromList=function(O,list){return fromList(speciesConstructor(O,O[DEF_CONSTRUCTOR]),list)},fromList=function(C,list){for(var index=0,length=list.length,result=allocate(C,length);length>index;)result[index]=list[index++];return result},addGetter=function(it,key,internal){dP(it,key,{get:function(){return this._d[internal]}})},$from=function(source){var i,length,values,result,step,iterator,O=toObject(source),aLen=arguments.length,mapfn=aLen>1?arguments[1]:void 0,mapping=void 0!==mapfn,iterFn=getIterFn(O);if(null!=iterFn&&!isArrayIter(iterFn)){for(iterator=iterFn.call(O),values=[],i=0;!(step=iterator.next()).done;i++)values.push(step.value);O=values}for(mapping&&aLen>2&&(mapfn=ctx(mapfn,arguments[2],2)),i=0,length=toLength(O.length),result=allocate(this,length);length>i;i++)result[i]=mapping?mapfn(O[i],i):O[i];return result},$of=function(){for(var index=0,length=arguments.length,result=allocate(this,length);length>index;)result[index]=arguments[index++];return result},TO_LOCALE_BUG=!!Uint8Array&&fails(function(){arrayToLocaleString.call(new Uint8Array(1))}),$toLocaleString=function(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice.call(validate(this)):validate(this),arguments)},proto={copyWithin:function(target,start){return arrayCopyWithin.call(validate(this),target,start,arguments.length>2?arguments[2]:void 0)},every:function(callbackfn){return arrayEvery(validate(this),callbackfn,arguments.length>1?arguments[1]:void 0)},fill:function(value){return arrayFill.apply(validate(this),arguments)},filter:function(callbackfn){return speciesFromList(this,arrayFilter(validate(this),callbackfn,arguments.length>1?arguments[1]:void 0))},find:function(predicate){return arrayFind(validate(this),predicate,arguments.length>1?arguments[1]:void 0)},findIndex:function(predicate){return arrayFindIndex(validate(this),predicate,arguments.length>1?arguments[1]:void 0)},forEach:function(callbackfn){arrayForEach(validate(this),callbackfn,arguments.length>1?arguments[1]:void 0)},indexOf:function(searchElement){return arrayIndexOf(validate(this),searchElement,arguments.length>1?arguments[1]:void 0)},includes:function(searchElement){return arrayIncludes(validate(this),searchElement,arguments.length>1?arguments[1]:void 0)},join:function(separator){return arrayJoin.apply(validate(this),arguments)},lastIndexOf:function(searchElement){return arrayLastIndexOf.apply(validate(this),arguments)},map:function(mapfn){return $map(validate(this),mapfn,arguments.length>1?arguments[1]:void 0)},reduce:function(callbackfn){return arrayReduce.apply(validate(this),arguments)},reduceRight:function(callbackfn){return arrayReduceRight.apply(validate(this),arguments)},reverse:function(){for(var value,length=validate(this).length,middle=Math.floor(length/2),index=0;index<middle;)value=this[index],this[index++]=this[--length],this[length]=value;return this},some:function(callbackfn){return arraySome(validate(this),callbackfn,arguments.length>1?arguments[1]:void 0)},sort:function(comparefn){return arraySort.call(validate(this),comparefn)},subarray:function(begin,end){var O=validate(this),length=O.length,$begin=toAbsoluteIndex(begin,length);return new(speciesConstructor(O,O[DEF_CONSTRUCTOR]))(O.buffer,O.byteOffset+$begin*O.BYTES_PER_ELEMENT,toLength((void 0===end?length:toAbsoluteIndex(end,length))-$begin))}},$slice=function(start,end){return speciesFromList(this,arraySlice.call(validate(this),start,end))},$set=function(arrayLike){validate(this);var offset=toOffset(arguments[1],1),length=this.length,src=toObject(arrayLike),len=toLength(src.length),index=0;if(len+offset>length)throw RangeError("Wrong length!");for(;index<len;)this[offset+index]=src[index++]},$iterators={entries:function(){return arrayEntries.call(validate(this))},keys:function(){return arrayKeys.call(validate(this))},values:function(){return arrayValues.call(validate(this))}},isTAIndex=function(target,key){return isObject(target)&&target[TYPED_ARRAY]&&"symbol"!=(void 0===key?"undefined":_typeof(key))&&key in target&&String(+key)==String(key)},$getDesc=function(target,key){return isTAIndex(target,key=toPrimitive(key,!0))?propertyDesc(2,target[key]):gOPD(target,key)},$setDesc=function(target,key,desc){return!(isTAIndex(target,key=toPrimitive(key,!0))&&isObject(desc)&&has(desc,"value"))||has(desc,"get")||has(desc,"set")||desc.configurable||has(desc,"writable")&&!desc.writable||has(desc,"enumerable")&&!desc.enumerable?dP(target,key,desc):(target[key]=desc.value,target)};ALL_CONSTRUCTORS||($GOPD.f=$getDesc,$DP.f=$setDesc),$export($export.S+$export.F*!ALL_CONSTRUCTORS,"Object",{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc}),fails(function(){arrayToString.call({})})&&(arrayToString=arrayToLocaleString=function(){return arrayJoin.call(this)});var $TypedArrayPrototype$=redefineAll({},proto);redefineAll($TypedArrayPrototype$,$iterators),hide($TypedArrayPrototype$,ITERATOR,$iterators.values),redefineAll($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function(){},toString:arrayToString,toLocaleString:$toLocaleString}),addGetter($TypedArrayPrototype$,"buffer","b"),addGetter($TypedArrayPrototype$,"byteOffset","o"),addGetter($TypedArrayPrototype$,"byteLength","l"),addGetter($TypedArrayPrototype$,"length","e"),dP($TypedArrayPrototype$,TAG,{get:function(){return this[TYPED_ARRAY]}}),module.exports=function(KEY,BYTES,wrapper,CLAMPED){var NAME=KEY+((CLAMPED=!!CLAMPED)?"Clamped":"")+"Array",GETTER="get"+KEY,SETTER="set"+KEY,TypedArray=global[NAME],Base=TypedArray||{},TAC=TypedArray&&getPrototypeOf(TypedArray),FORCED=!TypedArray||!$typed.ABV,O={},TypedArrayPrototype=TypedArray&&TypedArray.prototype,addElement=function(that,index){dP(that,index,{get:function(){return function(that,index){var data=that._d;return data.v[GETTER](index*BYTES+data.o,LITTLE_ENDIAN)}(this,index)},set:function(value){return function(that,index,value){var data=that._d;CLAMPED&&(value=(value=Math.round(value))<0?0:value>255?255:255&value),data.v[SETTER](index*BYTES+data.o,value,LITTLE_ENDIAN)}(this,index,value)},enumerable:!0})};FORCED?(TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME,"_d");var buffer,byteLength,length,klass,index=0,offset=0;if(isObject(data)){if(!(data instanceof $ArrayBuffer||"ArrayBuffer"==(klass=classof(data))||"SharedArrayBuffer"==klass))return TYPED_ARRAY in data?fromList(TypedArray,data):$from.call(TypedArray,data);buffer=data,offset=toOffset($offset,BYTES);var $len=data.byteLength;if(void 0===$length){if($len%BYTES)throw RangeError("Wrong length!");if((byteLength=$len-offset)<0)throw RangeError("Wrong length!")}else if((byteLength=toLength($length)*BYTES)+offset>$len)throw RangeError("Wrong length!");length=byteLength/BYTES}else length=toIndex(data),buffer=new $ArrayBuffer(byteLength=length*BYTES);for(hide(that,"_d",{b:buffer,o:offset,l:byteLength,e:length,v:new $DataView(buffer)});index<length;)addElement(that,index++)}),TypedArrayPrototype=TypedArray.prototype=create($TypedArrayPrototype$),hide(TypedArrayPrototype,"constructor",TypedArray)):fails(function(){TypedArray(1)})&&fails(function(){new TypedArray(-1)})&&$iterDetect(function(iter){new TypedArray,new TypedArray(null),new TypedArray(1.5),new TypedArray(iter)},!0)||(TypedArray=wrapper(function(that,data,$offset,$length){var klass;return anInstance(that,TypedArray,NAME),isObject(data)?data instanceof $ArrayBuffer||"ArrayBuffer"==(klass=classof(data))||"SharedArrayBuffer"==klass?void 0!==$length?new Base(data,toOffset($offset,BYTES),$length):void 0!==$offset?new Base(data,toOffset($offset,BYTES)):new Base(data):TYPED_ARRAY in data?fromList(TypedArray,data):$from.call(TypedArray,data):new Base(toIndex(data))}),arrayForEach(TAC!==Function.prototype?gOPN(Base).concat(gOPN(TAC)):gOPN(Base),function(key){key in TypedArray||hide(TypedArray,key,Base[key])}),TypedArray.prototype=TypedArrayPrototype,LIBRARY||(TypedArrayPrototype.constructor=TypedArray));var $nativeIterator=TypedArrayPrototype[ITERATOR],CORRECT_ITER_NAME=!!$nativeIterator&&("values"==$nativeIterator.name||null==$nativeIterator.name),$iterator=$iterators.values;hide(TypedArray,TYPED_CONSTRUCTOR,!0),hide(TypedArrayPrototype,TYPED_ARRAY,NAME),hide(TypedArrayPrototype,VIEW,!0),hide(TypedArrayPrototype,DEF_CONSTRUCTOR,TypedArray),(CLAMPED?new TypedArray(1)[TAG]==NAME:TAG in TypedArrayPrototype)||dP(TypedArrayPrototype,TAG,{get:function(){return NAME}}),O[NAME]=TypedArray,$export($export.G+$export.W+$export.F*(TypedArray!=Base),O),$export($export.S,NAME,{BYTES_PER_ELEMENT:BYTES}),$export($export.S+$export.F*fails(function(){Base.of.call(TypedArray,1)}),NAME,{from:$from,of:$of}),"BYTES_PER_ELEMENT"in TypedArrayPrototype||hide(TypedArrayPrototype,"BYTES_PER_ELEMENT",BYTES),$export($export.P,NAME,proto),setSpecies(NAME),$export($export.P+$export.F*FORCED_SET,NAME,{set:$set}),$export($export.P+$export.F*!CORRECT_ITER_NAME,NAME,$iterators),LIBRARY||TypedArrayPrototype.toString==arrayToString||(TypedArrayPrototype.toString=arrayToString),$export($export.P+$export.F*fails(function(){new TypedArray(1).slice()}),NAME,{slice:$slice}),$export($export.P+$export.F*(fails(function(){return[1,2].toLocaleString()!=new TypedArray([1,2]).toLocaleString()})||!fails(function(){TypedArrayPrototype.toLocaleString.call([1,2])})),NAME,{toLocaleString:$toLocaleString}),Iterators[NAME]=CORRECT_ITER_NAME?$nativeIterator:$iterator,LIBRARY||CORRECT_ITER_NAME||hide(TypedArrayPrototype,ITERATOR,$iterator)}}else module.exports=function(){}},{100:100,104:104,11:11,114:114,115:115,116:116,118:118,119:119,12:12,120:120,122:122,123:123,124:124,128:128,129:129,141:141,17:17,25:25,29:29,33:33,35:35,40:40,41:41,42:42,48:48,51:51,56:56,58:58,6:6,60:60,71:71,72:72,75:75,77:77,79:79,8:8,9:9,92:92,93:93}],122:[function(_dereq_,module,exports){var global=_dereq_(40),DESCRIPTORS=_dereq_(29),LIBRARY=_dereq_(60),$typed=_dereq_(123),hide=_dereq_(42),redefineAll=_dereq_(93),fails=_dereq_(35),anInstance=_dereq_(6),toInteger=_dereq_(116),toLength=_dereq_(118),toIndex=_dereq_(115),gOPN=_dereq_(77).f,dP=_dereq_(72).f,arrayFill=_dereq_(9),setToStringTag=_dereq_(101),PROTOTYPE="prototype",WRONG_INDEX="Wrong index!",$ArrayBuffer=global.ArrayBuffer,$DataView=global.DataView,Math=global.Math,RangeError=global.RangeError,Infinity=global.Infinity,BaseBuffer=$ArrayBuffer,abs=Math.abs,pow=Math.pow,floor=Math.floor,log=Math.log,LN2=Math.LN2,$BUFFER=DESCRIPTORS?"_b":"buffer",$LENGTH=DESCRIPTORS?"_l":"byteLength",$OFFSET=DESCRIPTORS?"_o":"byteOffset";function packIEEE754(value,mLen,nBytes){var e,m,c,buffer=Array(nBytes),eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?pow(2,-24)-pow(2,-77):0,i=0,s=value<0||0===value&&1/value<0?1:0;for((value=abs(value))!=value||value===Infinity?(m=value!=value?1:0,e=eMax):(e=floor(log(value)/LN2),value*(c=pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*pow(2,mLen),e+=eBias):(m=value*pow(2,eBias-1)*pow(2,mLen),e=0));mLen>=8;buffer[i++]=255&m,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[i++]=255&e,e/=256,eLen-=8);return buffer[--i]|=128*s,buffer}function unpackIEEE754(buffer,mLen,nBytes){var m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=eLen-7,i=nBytes-1,s=buffer[i--],e=127&s;for(s>>=7;nBits>0;e=256*e+buffer[i],i--,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[i],i--,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:s?-Infinity:Infinity;m+=pow(2,mLen),e-=eBias}return(s?-1:1)*m*pow(2,e-mLen)}function unpackI32(bytes){return bytes[3]<<24|bytes[2]<<16|bytes[1]<<8|bytes[0]}function packI8(it){return[255&it]}function packI16(it){return[255&it,it>>8&255]}function packI32(it){return[255&it,it>>8&255,it>>16&255,it>>24&255]}function packF64(it){return packIEEE754(it,52,8)}function packF32(it){return packIEEE754(it,23,4)}function addGetter(C,key,internal){dP(C[PROTOTYPE],key,{get:function(){return this[internal]}})}function get(view,bytes,index,isLittleEndian){var intIndex=toIndex(+index);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=store.slice(start,start+bytes);return isLittleEndian?pack:pack.reverse()}function set(view,bytes,index,conversion,value,isLittleEndian){var intIndex=toIndex(+index);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);for(var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=conversion(+value),i=0;i<bytes;i++)store[start+i]=pack[isLittleEndian?i:bytes-i-1]}if($typed.ABV){if(!fails(function(){$ArrayBuffer(1)})||!fails(function(){new $ArrayBuffer(-1)})||fails(function(){return new $ArrayBuffer,new $ArrayBuffer(1.5),new $ArrayBuffer(NaN),"ArrayBuffer"!=$ArrayBuffer.name})){for(var key,ArrayBufferProto=($ArrayBuffer=function(length){return anInstance(this,$ArrayBuffer),new BaseBuffer(toIndex(length))})[PROTOTYPE]=BaseBuffer[PROTOTYPE],keys=gOPN(BaseBuffer),j=0;keys.length>j;)(key=keys[j++])in $ArrayBuffer||hide($ArrayBuffer,key,BaseBuffer[key]);LIBRARY||(ArrayBufferProto.constructor=$ArrayBuffer)}var view=new $DataView(new $ArrayBuffer(2)),$setInt8=$DataView[PROTOTYPE].setInt8;view.setInt8(0,2147483648),view.setInt8(1,2147483649),!view.getInt8(0)&&view.getInt8(1)||redefineAll($DataView[PROTOTYPE],{setInt8:function(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)},setUint8:function(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)}},!0)}else $ArrayBuffer=function(length){anInstance(this,$ArrayBuffer,"ArrayBuffer");var byteLength=toIndex(length);this._b=arrayFill.call(Array(byteLength),0),this[$LENGTH]=byteLength},$DataView=function(buffer,byteOffset,byteLength){anInstance(this,$DataView,"DataView"),anInstance(buffer,$ArrayBuffer,"DataView");var bufferLength=buffer[$LENGTH],offset=toInteger(byteOffset);if(offset<0||offset>bufferLength)throw RangeError("Wrong offset!");if(offset+(byteLength=void 0===byteLength?bufferLength-offset:toLength(byteLength))>bufferLength)throw RangeError("Wrong length!");this[$BUFFER]=buffer,this[$OFFSET]=offset,this[$LENGTH]=byteLength},DESCRIPTORS&&(addGetter($ArrayBuffer,"byteLength","_l"),addGetter($DataView,"buffer","_b"),addGetter($DataView,"byteLength","_l"),addGetter($DataView,"byteOffset","_o")),redefineAll($DataView[PROTOTYPE],{getInt8:function(byteOffset){return get(this,1,byteOffset)[0]<<24>>24},getUint8:function(byteOffset){return get(this,1,byteOffset)[0]},getInt16:function(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return(bytes[1]<<8|bytes[0])<<16>>16},getUint16:function(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return bytes[1]<<8|bytes[0]},getInt32:function(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))},getUint32:function(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))>>>0},getFloat32:function(byteOffset){return unpackIEEE754(get(this,4,byteOffset,arguments[1]),23,4)},getFloat64:function(byteOffset){return unpackIEEE754(get(this,8,byteOffset,arguments[1]),52,8)},setInt8:function(byteOffset,value){set(this,1,byteOffset,packI8,value)},setUint8:function(byteOffset,value){set(this,1,byteOffset,packI8,value)},setInt16:function(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setUint16:function(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setInt32:function(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setUint32:function(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setFloat32:function(byteOffset,value){set(this,4,byteOffset,packF32,value,arguments[2])},setFloat64:function(byteOffset,value){set(this,8,byteOffset,packF64,value,arguments[2])}});setToStringTag($ArrayBuffer,"ArrayBuffer"),setToStringTag($DataView,"DataView"),hide($DataView[PROTOTYPE],$typed.VIEW,!0),exports.ArrayBuffer=$ArrayBuffer,exports.DataView=$DataView},{101:101,115:115,116:116,118:118,123:123,29:29,35:35,40:40,42:42,6:6,60:60,72:72,77:77,9:9,93:93}],123:[function(_dereq_,module,exports){for(var Typed,global=_dereq_(40),hide=_dereq_(42),uid=_dereq_(124),TYPED=uid("typed_array"),VIEW=uid("view"),ABV=!(!global.ArrayBuffer||!global.DataView),CONSTR=ABV,i=0,TypedArrayConstructors="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");i<9;)(Typed=global[TypedArrayConstructors[i++]])?(hide(Typed.prototype,TYPED,!0),hide(Typed.prototype,VIEW,!0)):CONSTR=!1;module.exports={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW}},{124:124,40:40,42:42}],124:[function(_dereq_,module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},{}],125:[function(_dereq_,module,exports){var isObject=_dereq_(51);module.exports=function(it,TYPE){if(!isObject(it)||it._t!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required!");return it}},{51:51}],126:[function(_dereq_,module,exports){var global=_dereq_(40),core=_dereq_(23),LIBRARY=_dereq_(60),wksExt=_dereq_(127),defineProperty=_dereq_(72).f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});"_"==name.charAt(0)||name in $Symbol||defineProperty($Symbol,name,{value:wksExt.f(name)})}},{127:127,23:23,40:40,60:60,72:72}],127:[function(_dereq_,module,exports){exports.f=_dereq_(128)},{128:128}],128:[function(_dereq_,module,exports){var store=_dereq_(103)("wks"),uid=_dereq_(124),_Symbol=_dereq_(40).Symbol,USE_SYMBOL="function"==typeof _Symbol;(module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&_Symbol[name]||(USE_SYMBOL?_Symbol:uid)("Symbol."+name))}).store=store},{103:103,124:124,40:40}],129:[function(_dereq_,module,exports){var classof=_dereq_(17),ITERATOR=_dereq_(128)("iterator"),Iterators=_dereq_(58);module.exports=_dereq_(23).getIteratorMethod=function(it){if(null!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},{128:128,17:17,23:23,58:58}],130:[function(_dereq_,module,exports){var $export=_dereq_(33),$re=_dereq_(95)(/[\\^$*+?.()|[\]{}]/g,"\\$&");$export($export.S,"RegExp",{escape:function(it){return $re(it)}})},{33:33,95:95}],131:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.P,"Array",{copyWithin:_dereq_(8)}),_dereq_(5)("copyWithin")},{33:33,5:5,8:8}],132:[function(_dereq_,module,exports){var $export=_dereq_(33),$every=_dereq_(12)(4);$export($export.P+$export.F*!_dereq_(105)([].every,!0),"Array",{every:function(callbackfn){return $every(this,callbackfn,arguments[1])}})},{105:105,12:12,33:33}],133:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.P,"Array",{fill:_dereq_(9)}),_dereq_(5)("fill")},{33:33,5:5,9:9}],134:[function(_dereq_,module,exports){var $export=_dereq_(33),$filter=_dereq_(12)(2);$export($export.P+$export.F*!_dereq_(105)([].filter,!0),"Array",{filter:function(callbackfn){return $filter(this,callbackfn,arguments[1])}})},{105:105,12:12,33:33}],135:[function(_dereq_,module,exports){var $export=_dereq_(33),$find=_dereq_(12)(6),KEY="findIndex",forced=!0;KEY in[]&&Array(1)[KEY](function(){forced=!1}),$export($export.P+$export.F*forced,"Array",{findIndex:function(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),_dereq_(5)(KEY)},{12:12,33:33,5:5}],136:[function(_dereq_,module,exports){var $export=_dereq_(33),$find=_dereq_(12)(5),forced=!0;"find"in[]&&Array(1).find(function(){forced=!1}),$export($export.P+$export.F*forced,"Array",{find:function(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:void 0)}}),_dereq_(5)("find")},{12:12,33:33,5:5}],137:[function(_dereq_,module,exports){var $export=_dereq_(33),$forEach=_dereq_(12)(0),STRICT=_dereq_(105)([].forEach,!0);$export($export.P+$export.F*!STRICT,"Array",{forEach:function(callbackfn){return $forEach(this,callbackfn,arguments[1])}})},{105:105,12:12,33:33}],138:[function(_dereq_,module,exports){var ctx=_dereq_(25),$export=_dereq_(33),toObject=_dereq_(119),call=_dereq_(53),isArrayIter=_dereq_(48),toLength=_dereq_(118),createProperty=_dereq_(24),getIterFn=_dereq_(129);$export($export.S+$export.F*!_dereq_(56)(function(iter){Array.from(iter)}),"Array",{from:function(arrayLike){var length,result,step,iterator,O=toObject(arrayLike),C="function"==typeof this?this:Array,aLen=arguments.length,mapfn=aLen>1?arguments[1]:void 0,mapping=void 0!==mapfn,index=0,iterFn=getIterFn(O);if(mapping&&(mapfn=ctx(mapfn,aLen>2?arguments[2]:void 0,2)),null==iterFn||C==Array&&isArrayIter(iterFn))for(result=new C(length=toLength(O.length));length>index;index++)createProperty(result,index,mapping?mapfn(O[index],index):O[index]);else for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++)createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],!0):step.value);return result.length=index,result}})},{118:118,119:119,129:129,24:24,25:25,33:33,48:48,53:53,56:56}],139:[function(_dereq_,module,exports){var $export=_dereq_(33),$indexOf=_dereq_(11)(!1),$native=[].indexOf,NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!_dereq_(105)($native)),"Array",{indexOf:function(searchElement){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,searchElement,arguments[1])}})},{105:105,11:11,33:33}],140:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Array",{isArray:_dereq_(49)})},{33:33,49:49}],141:[function(_dereq_,module,exports){var addToUnscopables=_dereq_(5),step=_dereq_(57),Iterators=_dereq_(58),toIObject=_dereq_(117);module.exports=_dereq_(55)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):step(0,"keys"==kind?index:"values"==kind?O[index]:[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},{117:117,5:5,55:55,57:57,58:58}],142:[function(_dereq_,module,exports){var $export=_dereq_(33),toIObject=_dereq_(117),arrayJoin=[].join;$export($export.P+$export.F*(_dereq_(47)!=Object||!_dereq_(105)(arrayJoin)),"Array",{join:function(separator){return arrayJoin.call(toIObject(this),void 0===separator?",":separator)}})},{105:105,117:117,33:33,47:47}],143:[function(_dereq_,module,exports){var $export=_dereq_(33),toIObject=_dereq_(117),toInteger=_dereq_(116),toLength=_dereq_(118),$native=[].lastIndexOf,NEGATIVE_ZERO=!!$native&&1/[1].lastIndexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!_dereq_(105)($native)),"Array",{lastIndexOf:function(searchElement){if(NEGATIVE_ZERO)return $native.apply(this,arguments)||0;var O=toIObject(this),length=toLength(O.length),index=length-1;for(arguments.length>1&&(index=Math.min(index,toInteger(arguments[1]))),index<0&&(index=length+index);index>=0;index--)if(index in O&&O[index]===searchElement)return index||0;return-1}})},{105:105,116:116,117:117,118:118,33:33}],144:[function(_dereq_,module,exports){var $export=_dereq_(33),$map=_dereq_(12)(1);$export($export.P+$export.F*!_dereq_(105)([].map,!0),"Array",{map:function(callbackfn){return $map(this,callbackfn,arguments[1])}})},{105:105,12:12,33:33}],145:[function(_dereq_,module,exports){var $export=_dereq_(33),createProperty=_dereq_(24);$export($export.S+$export.F*_dereq_(35)(function(){function F(){}return!(Array.of.call(F)instanceof F)}),"Array",{of:function(){for(var index=0,aLen=arguments.length,result=new("function"==typeof this?this:Array)(aLen);aLen>index;)createProperty(result,index,arguments[index++]);return result.length=aLen,result}})},{24:24,33:33,35:35}],146:[function(_dereq_,module,exports){var $export=_dereq_(33),$reduce=_dereq_(13);$export($export.P+$export.F*!_dereq_(105)([].reduceRight,!0),"Array",{reduceRight:function(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],!0)}})},{105:105,13:13,33:33}],147:[function(_dereq_,module,exports){var $export=_dereq_(33),$reduce=_dereq_(13);$export($export.P+$export.F*!_dereq_(105)([].reduce,!0),"Array",{reduce:function(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],!1)}})},{105:105,13:13,33:33}],148:[function(_dereq_,module,exports){var $export=_dereq_(33),html=_dereq_(43),cof=_dereq_(18),toAbsoluteIndex=_dereq_(114),toLength=_dereq_(118),arraySlice=[].slice;$export($export.P+$export.F*_dereq_(35)(function(){html&&arraySlice.call(html)}),"Array",{slice:function(begin,end){var len=toLength(this.length),klass=cof(this);if(end=void 0===end?len:end,"Array"==klass)return arraySlice.call(this,begin,end);for(var start=toAbsoluteIndex(begin,len),upTo=toAbsoluteIndex(end,len),size=toLength(upTo-start),cloned=Array(size),i=0;i<size;i++)cloned[i]="String"==klass?this.charAt(start+i):this[start+i];return cloned}})},{114:114,118:118,18:18,33:33,35:35,43:43}],149:[function(_dereq_,module,exports){var $export=_dereq_(33),$some=_dereq_(12)(3);$export($export.P+$export.F*!_dereq_(105)([].some,!0),"Array",{some:function(callbackfn){return $some(this,callbackfn,arguments[1])}})},{105:105,12:12,33:33}],150:[function(_dereq_,module,exports){var $export=_dereq_(33),aFunction=_dereq_(3),toObject=_dereq_(119),fails=_dereq_(35),$sort=[].sort,test=[1,2,3];$export($export.P+$export.F*(fails(function(){test.sort(void 0)})||!fails(function(){test.sort(null)})||!_dereq_(105)($sort)),"Array",{sort:function(comparefn){return void 0===comparefn?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn))}})},{105:105,119:119,3:3,33:33,35:35}],151:[function(_dereq_,module,exports){_dereq_(100)("Array")},{100:100}],152:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Date",{now:function(){return(new Date).getTime()}})},{33:33}],153:[function(_dereq_,module,exports){var $export=_dereq_(33),toISOString=_dereq_(26);$export($export.P+$export.F*(Date.prototype.toISOString!==toISOString),"Date",{toISOString:toISOString})},{26:26,33:33}],154:[function(_dereq_,module,exports){var $export=_dereq_(33),toObject=_dereq_(119),toPrimitive=_dereq_(120);$export($export.P+$export.F*_dereq_(35)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(key){var O=toObject(this),pv=toPrimitive(O);return"number"!=typeof pv||isFinite(pv)?O.toISOString():null}})},{119:119,120:120,33:33,35:35}],155:[function(_dereq_,module,exports){var TO_PRIMITIVE=_dereq_(128)("toPrimitive"),proto=Date.prototype;TO_PRIMITIVE in proto||_dereq_(42)(proto,TO_PRIMITIVE,_dereq_(27))},{128:128,27:27,42:42}],156:[function(_dereq_,module,exports){var DateProto=Date.prototype,$toString=DateProto.toString,getTime=DateProto.getTime;new Date(NaN)+""!="Invalid Date"&&_dereq_(94)(DateProto,"toString",function(){var value=getTime.call(this);return value==value?$toString.call(this):"Invalid Date"})},{94:94}],157:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.P,"Function",{bind:_dereq_(16)})},{16:16,33:33}],158:[function(_dereq_,module,exports){var isObject=_dereq_(51),getPrototypeOf=_dereq_(79),HAS_INSTANCE=_dereq_(128)("hasInstance"),FunctionProto=Function.prototype;HAS_INSTANCE in FunctionProto||_dereq_(72).f(FunctionProto,HAS_INSTANCE,{value:function(O){if("function"!=typeof this||!isObject(O))return!1;if(!isObject(this.prototype))return O instanceof this;for(;O=getPrototypeOf(O);)if(this.prototype===O)return!0;return!1}})},{128:128,51:51,72:72,79:79}],159:[function(_dereq_,module,exports){var dP=_dereq_(72).f,FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/;"name"in FProto||_dereq_(29)&&dP(FProto,"name",{configurable:!0,get:function(){try{return(""+this).match(nameRE)[1]}catch(e){return""}}})},{29:29,72:72}],160:[function(_dereq_,module,exports){var strong=_dereq_(19),validate=_dereq_(125);module.exports=_dereq_(22)("Map",function(get){return function(){return get(this,arguments.length>0?arguments[0]:void 0)}},{get:function(key){var entry=strong.getEntry(validate(this,"Map"),key);return entry&&entry.v},set:function(key,value){return strong.def(validate(this,"Map"),0===key?0:key,value)}},strong,!0)},{125:125,19:19,22:22}],161:[function(_dereq_,module,exports){var $export=_dereq_(33),log1p=_dereq_(63),sqrt=Math.sqrt,$acosh=Math.acosh;$export($export.S+$export.F*!($acosh&&710==Math.floor($acosh(Number.MAX_VALUE))&&$acosh(1/0)==1/0),"Math",{acosh:function(x){return(x=+x)<1?NaN:x>94906265.62425156?Math.log(x)+Math.LN2:log1p(x-1+sqrt(x-1)*sqrt(x+1))}})},{33:33,63:63}],162:[function(_dereq_,module,exports){var $export=_dereq_(33),$asinh=Math.asinh;$export($export.S+$export.F*!($asinh&&1/$asinh(0)>0),"Math",{asinh:function asinh(x){return isFinite(x=+x)&&0!=x?x<0?-asinh(-x):Math.log(x+Math.sqrt(x*x+1)):x}})},{33:33}],163:[function(_dereq_,module,exports){var $export=_dereq_(33),$atanh=Math.atanh;$export($export.S+$export.F*!($atanh&&1/$atanh(-0)<0),"Math",{atanh:function(x){return 0==(x=+x)?x:Math.log((1+x)/(1-x))/2}})},{33:33}],164:[function(_dereq_,module,exports){var $export=_dereq_(33),sign=_dereq_(65);$export($export.S,"Math",{cbrt:function(x){return sign(x=+x)*Math.pow(Math.abs(x),1/3)}})},{33:33,65:65}],165:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{clz32:function(x){return(x>>>=0)?31-Math.floor(Math.log(x+.5)*Math.LOG2E):32}})},{33:33}],166:[function(_dereq_,module,exports){var $export=_dereq_(33),exp=Math.exp;$export($export.S,"Math",{cosh:function(x){return(exp(x=+x)+exp(-x))/2}})},{33:33}],167:[function(_dereq_,module,exports){var $export=_dereq_(33),$expm1=_dereq_(61);$export($export.S+$export.F*($expm1!=Math.expm1),"Math",{expm1:$expm1})},{33:33,61:61}],168:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{fround:_dereq_(62)})},{33:33,62:62}],169:[function(_dereq_,module,exports){var $export=_dereq_(33),abs=Math.abs;$export($export.S,"Math",{hypot:function(value1,value2){for(var arg,div,sum=0,i=0,aLen=arguments.length,larg=0;i<aLen;)larg<(arg=abs(arguments[i++]))?(sum=sum*(div=larg/arg)*div+1,larg=arg):sum+=arg>0?(div=arg/larg)*div:arg;return larg===1/0?1/0:larg*Math.sqrt(sum)}})},{33:33}],170:[function(_dereq_,module,exports){var $export=_dereq_(33),$imul=Math.imul;$export($export.S+$export.F*_dereq_(35)(function(){return-5!=$imul(4294967295,5)||2!=$imul.length}),"Math",{imul:function(x,y){var xn=+x,yn=+y,xl=65535&xn,yl=65535&yn;return 0|xl*yl+((65535&xn>>>16)*yl+xl*(65535&yn>>>16)<<16>>>0)}})},{33:33,35:35}],171:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{log10:function(x){return Math.log(x)*Math.LOG10E}})},{33:33}],172:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{log1p:_dereq_(63)})},{33:33,63:63}],173:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{log2:function(x){return Math.log(x)/Math.LN2}})},{33:33}],174:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{sign:_dereq_(65)})},{33:33,65:65}],175:[function(_dereq_,module,exports){var $export=_dereq_(33),expm1=_dereq_(61),exp=Math.exp;$export($export.S+$export.F*_dereq_(35)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(x){return Math.abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(Math.E/2)}})},{33:33,35:35,61:61}],176:[function(_dereq_,module,exports){var $export=_dereq_(33),expm1=_dereq_(61),exp=Math.exp;$export($export.S,"Math",{tanh:function(x){var a=expm1(x=+x),b=expm1(-x);return a==1/0?1:b==1/0?-1:(a-b)/(exp(x)+exp(-x))}})},{33:33,61:61}],177:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{trunc:function(it){return(it>0?Math.floor:Math.ceil)(it)}})},{33:33}],178:[function(_dereq_,module,exports){var global=_dereq_(40),has=_dereq_(41),cof=_dereq_(18),inheritIfRequired=_dereq_(45),toPrimitive=_dereq_(120),fails=_dereq_(35),gOPN=_dereq_(77).f,gOPD=_dereq_(75).f,dP=_dereq_(72).f,$trim=_dereq_(111).trim,$Number=global.Number,Base=$Number,proto=$Number.prototype,BROKEN_COF="Number"==cof(_dereq_(71)(proto)),TRIM="trim"in String.prototype,toNumber=function(argument){var it=toPrimitive(argument,!1);if("string"==typeof it&&it.length>2){var third,radix,maxCode,first=(it=TRIM?it.trim():$trim(it,3)).charCodeAt(0);if(43===first||45===first){if(88===(third=it.charCodeAt(2))||120===third)return NaN}else if(48===first){switch(it.charCodeAt(1)){case 66:case 98:radix=2,maxCode=49;break;case 79:case 111:radix=8,maxCode=55;break;default:return+it}for(var code,digits=it.slice(2),i=0,l=digits.length;i<l;i++)if((code=digits.charCodeAt(i))<48||code>maxCode)return NaN;return parseInt(digits,radix)}}return+it};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function(value){var it=arguments.length<1?0:value,that=this;return that instanceof $Number&&(BROKEN_COF?fails(function(){proto.valueOf.call(that)}):"Number"!=cof(that))?inheritIfRequired(new Base(toNumber(it)),that,$Number):toNumber(it)};for(var key,keys=_dereq_(29)?gOPN(Base):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;keys.length>j;j++)has(Base,key=keys[j])&&!has($Number,key)&&dP($Number,key,gOPD(Base,key));$Number.prototype=proto,proto.constructor=$Number,_dereq_(94)(global,"Number",$Number)}},{111:111,120:120,18:18,29:29,35:35,40:40,41:41,45:45,71:71,72:72,75:75,77:77,94:94}],179:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Number",{EPSILON:Math.pow(2,-52)})},{33:33}],180:[function(_dereq_,module,exports){var $export=_dereq_(33),_isFinite=_dereq_(40).isFinite;$export($export.S,"Number",{isFinite:function(it){return"number"==typeof it&&_isFinite(it)}})},{33:33,40:40}],181:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Number",{isInteger:_dereq_(50)})},{33:33,50:50}],182:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Number",{isNaN:function(number){return number!=number}})},{33:33}],183:[function(_dereq_,module,exports){var $export=_dereq_(33),isInteger=_dereq_(50),abs=Math.abs;$export($export.S,"Number",{isSafeInteger:function(number){return isInteger(number)&&abs(number)<=9007199254740991}})},{33:33,50:50}],184:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{33:33}],185:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{33:33}],186:[function(_dereq_,module,exports){var $export=_dereq_(33),$parseFloat=_dereq_(86);$export($export.S+$export.F*(Number.parseFloat!=$parseFloat),"Number",{parseFloat:$parseFloat})},{33:33,86:86}],187:[function(_dereq_,module,exports){var $export=_dereq_(33),$parseInt=_dereq_(87);$export($export.S+$export.F*(Number.parseInt!=$parseInt),"Number",{parseInt:$parseInt})},{33:33,87:87}],188:[function(_dereq_,module,exports){var $export=_dereq_(33),toInteger=_dereq_(116),aNumberValue=_dereq_(4),repeat=_dereq_(110),$toFixed=1..toFixed,floor=Math.floor,data=[0,0,0,0,0,0],ERROR="Number.toFixed: incorrect invocation!",multiply=function(n,c){for(var i=-1,c2=c;++i<6;)c2+=n*data[i],data[i]=c2%1e7,c2=floor(c2/1e7)},divide=function(n){for(var i=6,c=0;--i>=0;)c+=data[i],data[i]=floor(c/n),c=c%n*1e7},numToString=function(){for(var i=6,s="";--i>=0;)if(""!==s||0===i||0!==data[i]){var t=String(data[i]);s=""===s?t:s+repeat.call("0",7-t.length)+t}return s},pow=function pow(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)};$export($export.P+$export.F*(!!$toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!_dereq_(35)(function(){$toFixed.call({})})),"Number",{toFixed:function(fractionDigits){var e,z,j,k,x=aNumberValue(this,ERROR),f=toInteger(fractionDigits),s="",m="0";if(f<0||f>20)throw RangeError(ERROR);if(x!=x)return"NaN";if(x<=-1e21||x>=1e21)return String(x);if(x<0&&(s="-",x=-x),x>1e-21)if(z=(e=function(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}(x*pow(2,69,1))-69)<0?x*pow(2,-e,1):x/pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(multiply(0,z),j=f;j>=7;)multiply(1e7,0),j-=7;for(multiply(pow(10,j,1),0),j=e-1;j>=23;)divide(1<<23),j-=23;divide(1<<j),multiply(1,1),divide(2),m=numToString()}else multiply(0,z),multiply(1<<-e,0),m=numToString()+repeat.call("0",f);return m=f>0?s+((k=m.length)<=f?"0."+repeat.call("0",f-k)+m:m.slice(0,k-f)+"."+m.slice(k-f)):s+m}})},{110:110,116:116,33:33,35:35,4:4}],189:[function(_dereq_,module,exports){var $export=_dereq_(33),$fails=_dereq_(35),aNumberValue=_dereq_(4),$toPrecision=1..toPrecision;$export($export.P+$export.F*($fails(function(){return"1"!==$toPrecision.call(1,void 0)})||!$fails(function(){$toPrecision.call({})})),"Number",{toPrecision:function(precision){var that=aNumberValue(this,"Number#toPrecision: incorrect invocation!");return void 0===precision?$toPrecision.call(that):$toPrecision.call(that,precision)}})},{33:33,35:35,4:4}],190:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S+$export.F,"Object",{assign:_dereq_(70)})},{33:33,70:70}],191:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Object",{create:_dereq_(71)})},{33:33,71:71}],192:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S+$export.F*!_dereq_(29),"Object",{defineProperties:_dereq_(73)})},{29:29,33:33,73:73}],193:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S+$export.F*!_dereq_(29),"Object",{defineProperty:_dereq_(72).f})},{29:29,33:33,72:72}],194:[function(_dereq_,module,exports){var isObject=_dereq_(51),meta=_dereq_(66).onFreeze;_dereq_(83)("freeze",function($freeze){return function(it){return $freeze&&isObject(it)?$freeze(meta(it)):it}})},{51:51,66:66,83:83}],195:[function(_dereq_,module,exports){var toIObject=_dereq_(117),$getOwnPropertyDescriptor=_dereq_(75).f;_dereq_(83)("getOwnPropertyDescriptor",function(){return function(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},{117:117,75:75,83:83}],196:[function(_dereq_,module,exports){_dereq_(83)("getOwnPropertyNames",function(){return _dereq_(76).f})},{76:76,83:83}],197:[function(_dereq_,module,exports){var toObject=_dereq_(119),$getPrototypeOf=_dereq_(79);_dereq_(83)("getPrototypeOf",function(){return function(it){return $getPrototypeOf(toObject(it))}})},{119:119,79:79,83:83}],198:[function(_dereq_,module,exports){var isObject=_dereq_(51);_dereq_(83)("isExtensible",function($isExtensible){return function(it){return!!isObject(it)&&(!$isExtensible||$isExtensible(it))}})},{51:51,83:83}],199:[function(_dereq_,module,exports){var isObject=_dereq_(51);_dereq_(83)("isFrozen",function($isFrozen){return function(it){return!isObject(it)||!!$isFrozen&&$isFrozen(it)}})},{51:51,83:83}],200:[function(_dereq_,module,exports){var isObject=_dereq_(51);_dereq_(83)("isSealed",function($isSealed){return function(it){return!isObject(it)||!!$isSealed&&$isSealed(it)}})},{51:51,83:83}],201:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Object",{is:_dereq_(96)})},{33:33,96:96}],202:[function(_dereq_,module,exports){var toObject=_dereq_(119),$keys=_dereq_(81);_dereq_(83)("keys",function(){return function(it){return $keys(toObject(it))}})},{119:119,81:81,83:83}],203:[function(_dereq_,module,exports){var isObject=_dereq_(51),meta=_dereq_(66).onFreeze;_dereq_(83)("preventExtensions",function($preventExtensions){return function(it){return $preventExtensions&&isObject(it)?$preventExtensions(meta(it)):it}})},{51:51,66:66,83:83}],204:[function(_dereq_,module,exports){var isObject=_dereq_(51),meta=_dereq_(66).onFreeze;_dereq_(83)("seal",function($seal){return function(it){return $seal&&isObject(it)?$seal(meta(it)):it}})},{51:51,66:66,83:83}],205:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Object",{setPrototypeOf:_dereq_(99).set})},{33:33,99:99}],206:[function(_dereq_,module,exports){var classof=_dereq_(17),test={};test[_dereq_(128)("toStringTag")]="z",test+""!="[object z]"&&_dereq_(94)(Object.prototype,"toString",function(){return"[object "+classof(this)+"]"},!0)},{128:128,17:17,94:94}],207:[function(_dereq_,module,exports){var $export=_dereq_(33),$parseFloat=_dereq_(86);$export($export.G+$export.F*(parseFloat!=$parseFloat),{parseFloat:$parseFloat})},{33:33,86:86}],208:[function(_dereq_,module,exports){var $export=_dereq_(33),$parseInt=_dereq_(87);$export($export.G+$export.F*(parseInt!=$parseInt),{parseInt:$parseInt})},{33:33,87:87}],209:[function(_dereq_,module,exports){var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,LIBRARY=_dereq_(60),global=_dereq_(40),ctx=_dereq_(25),classof=_dereq_(17),$export=_dereq_(33),isObject=_dereq_(51),aFunction=_dereq_(3),anInstance=_dereq_(6),forOf=_dereq_(39),speciesConstructor=_dereq_(104),task=_dereq_(113).set,microtask=_dereq_(68)(),newPromiseCapabilityModule=_dereq_(69),perform=_dereq_(90),promiseResolve=_dereq_(91),TypeError=global.TypeError,process=global.process,$Promise=global.Promise,isNode="process"==classof(process),empty=function(){},newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f,USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[_dereq_(128)("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise}catch(e){}}(),sameConstructor=LIBRARY?function(a,b){return a===b||a===$Promise&&b===Wrapper}:function(a,b){return a===b},isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0,run=function(reaction){var result,then,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&domain.exit()),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){reject(e)}};chain.length>i;)run(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var result,handler,console,value=promise._v,unhandled=isUnhandled(promise);if(unhandled&&(result=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=void 0,unhandled&&result.e)throw result.v})},isUnhandled=function isUnhandled(promise){if(1==promise._h)return!1;for(var reaction,chain=promise._a||promise._c,i=0;chain.length>i;)if((reaction=chain[i++]).fail||!isUnhandled(reaction.promise))return!1;return!0},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,(promise=promise._w||promise)._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function $resolve(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function(executor){anInstance(this,$Promise,"Promise","_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},(Internal=function(executor){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=_dereq_(93)($Promise.prototype,{then:function(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:void 0,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return sameConstructor($Promise,C)?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),_dereq_(101)($Promise,"Promise"),_dereq_(100)("Promise"),Wrapper=_dereq_(23).Promise,$export($export.S+$export.F*!USE_NATIVE,"Promise",{reject:function(r){var capability=newPromiseCapability(this);return(0,capability.reject)(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),"Promise",{resolve:function(x){return x instanceof $Promise&&sameConstructor(x.constructor,this)?x:promiseResolve(this,x)}}),$export($export.S+$export.F*!(USE_NATIVE&&_dereq_(56)(function(iter){$Promise.all(iter).catch(empty)})),"Promise",{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(void 0),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return result.e&&reject(result.v),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return result.e&&reject(result.v),capability.promise}})},{100:100,101:101,104:104,113:113,128:128,17:17,23:23,25:25,3:3,33:33,39:39,40:40,51:51,56:56,6:6,60:60,68:68,69:69,90:90,91:91,93:93}],210:[function(_dereq_,module,exports){var $export=_dereq_(33),aFunction=_dereq_(3),anObject=_dereq_(7),rApply=(_dereq_(40).Reflect||{}).apply,fApply=Function.apply;$export($export.S+$export.F*!_dereq_(35)(function(){rApply(function(){})}),"Reflect",{apply:function(target,thisArgument,argumentsList){var T=aFunction(target),L=anObject(argumentsList);return rApply?rApply(T,thisArgument,L):fApply.call(T,thisArgument,L)}})},{3:3,33:33,35:35,40:40,7:7}],211:[function(_dereq_,module,exports){var $export=_dereq_(33),create=_dereq_(71),aFunction=_dereq_(3),anObject=_dereq_(7),isObject=_dereq_(51),fails=_dereq_(35),bind=_dereq_(16),rConstruct=(_dereq_(40).Reflect||{}).construct,NEW_TARGET_BUG=fails(function(){function F(){}return!(rConstruct(function(){},[],F)instanceof F)}),ARGS_BUG=!fails(function(){rConstruct(function(){})});$export($export.S+$export.F*(NEW_TARGET_BUG||ARGS_BUG),"Reflect",{construct:function(Target,args){aFunction(Target),anObject(args);var newTarget=arguments.length<3?Target:aFunction(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return rConstruct(Target,args,newTarget);if(Target==newTarget){switch(args.length){case 0:return new Target;case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];return $args.push.apply($args,args),new(bind.apply(Target,$args))}var proto=newTarget.prototype,instance=create(isObject(proto)?proto:Object.prototype),result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance}})},{16:16,3:3,33:33,35:35,40:40,51:51,7:7,71:71}],212:[function(_dereq_,module,exports){var dP=_dereq_(72),$export=_dereq_(33),anObject=_dereq_(7),toPrimitive=_dereq_(120);$export($export.S+$export.F*_dereq_(35)(function(){Reflect.defineProperty(dP.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(target,propertyKey,attributes){anObject(target),propertyKey=toPrimitive(propertyKey,!0),anObject(attributes);try{return dP.f(target,propertyKey,attributes),!0}catch(e){return!1}}})},{120:120,33:33,35:35,7:7,72:72}],213:[function(_dereq_,module,exports){var $export=_dereq_(33),gOPD=_dereq_(75).f,anObject=_dereq_(7);$export($export.S,"Reflect",{deleteProperty:function(target,propertyKey){var desc=gOPD(anObject(target),propertyKey);return!(desc&&!desc.configurable)&&delete target[propertyKey]}})},{33:33,7:7,75:75}],214:[function(_dereq_,module,exports){var $export=_dereq_(33),anObject=_dereq_(7),Enumerate=function(iterated){this._t=anObject(iterated),this._i=0;var key,keys=this._k=[];for(key in iterated)keys.push(key)};_dereq_(54)(Enumerate,"Object",function(){var key,keys=this._k;do{if(this._i>=keys.length)return{value:void 0,done:!0}}while(!((key=keys[this._i++])in this._t));return{value:key,done:!1}}),$export($export.S,"Reflect",{enumerate:function(target){return new Enumerate(target)}})},{33:33,54:54,7:7}],215:[function(_dereq_,module,exports){var gOPD=_dereq_(75),$export=_dereq_(33),anObject=_dereq_(7);$export($export.S,"Reflect",{getOwnPropertyDescriptor:function(target,propertyKey){return gOPD.f(anObject(target),propertyKey)}})},{33:33,7:7,75:75}],216:[function(_dereq_,module,exports){var $export=_dereq_(33),getProto=_dereq_(79),anObject=_dereq_(7);$export($export.S,"Reflect",{getPrototypeOf:function(target){return getProto(anObject(target))}})},{33:33,7:7,79:79}],217:[function(_dereq_,module,exports){var gOPD=_dereq_(75),getPrototypeOf=_dereq_(79),has=_dereq_(41),$export=_dereq_(33),isObject=_dereq_(51),anObject=_dereq_(7);$export($export.S,"Reflect",{get:function get(target,propertyKey){var desc,proto,receiver=arguments.length<3?target:arguments[2];return anObject(target)===receiver?target[propertyKey]:(desc=gOPD.f(target,propertyKey))?has(desc,"value")?desc.value:void 0!==desc.get?desc.get.call(receiver):void 0:isObject(proto=getPrototypeOf(target))?get(proto,propertyKey,receiver):void 0}})},{33:33,41:41,51:51,7:7,75:75,79:79}],218:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Reflect",{has:function(target,propertyKey){return propertyKey in target}})},{33:33}],219:[function(_dereq_,module,exports){var $export=_dereq_(33),anObject=_dereq_(7),$isExtensible=Object.isExtensible;$export($export.S,"Reflect",{isExtensible:function(target){return anObject(target),!$isExtensible||$isExtensible(target)}})},{33:33,7:7}],220:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Reflect",{ownKeys:_dereq_(85)})},{33:33,85:85}],221:[function(_dereq_,module,exports){var $export=_dereq_(33),anObject=_dereq_(7),$preventExtensions=Object.preventExtensions;$export($export.S,"Reflect",{preventExtensions:function(target){anObject(target);try{return $preventExtensions&&$preventExtensions(target),!0}catch(e){return!1}}})},{33:33,7:7}],222:[function(_dereq_,module,exports){var $export=_dereq_(33),setProto=_dereq_(99);setProto&&$export($export.S,"Reflect",{setPrototypeOf:function(target,proto){setProto.check(target,proto);try{return setProto.set(target,proto),!0}catch(e){return!1}}})},{33:33,99:99}],223:[function(_dereq_,module,exports){var dP=_dereq_(72),gOPD=_dereq_(75),getPrototypeOf=_dereq_(79),has=_dereq_(41),$export=_dereq_(33),createDesc=_dereq_(92),anObject=_dereq_(7),isObject=_dereq_(51);$export($export.S,"Reflect",{set:function set(target,propertyKey,V){var existingDescriptor,proto,receiver=arguments.length<4?target:arguments[3],ownDesc=gOPD.f(anObject(target),propertyKey);if(!ownDesc){if(isObject(proto=getPrototypeOf(target)))return set(proto,propertyKey,V,receiver);ownDesc=createDesc(0)}return has(ownDesc,"value")?!(!1===ownDesc.writable||!isObject(receiver)||((existingDescriptor=gOPD.f(receiver,propertyKey)||createDesc(0)).value=V,dP.f(receiver,propertyKey,existingDescriptor),0)):void 0!==ownDesc.set&&(ownDesc.set.call(receiver,V),!0)}})},{33:33,41:41,51:51,7:7,72:72,75:75,79:79,92:92}],224:[function(_dereq_,module,exports){var global=_dereq_(40),inheritIfRequired=_dereq_(45),dP=_dereq_(72).f,gOPN=_dereq_(77).f,isRegExp=_dereq_(52),$flags=_dereq_(37),$RegExp=global.RegExp,Base=$RegExp,proto=$RegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new $RegExp(re1)!==re1;if(_dereq_(29)&&(!CORRECT_NEW||_dereq_(35)(function(){return re2[_dereq_(128)("match")]=!1,$RegExp(re1)!=re1||$RegExp(re2)==re2||"/a/i"!=$RegExp(re1,"i")}))){$RegExp=function(p,f){var tiRE=this instanceof $RegExp,piRE=isRegExp(p),fiU=void 0===f;return!tiRE&&piRE&&p.constructor===$RegExp&&fiU?p:inheritIfRequired(CORRECT_NEW?new Base(piRE&&!fiU?p.source:p,f):Base((piRE=p instanceof $RegExp)?p.source:p,piRE&&fiU?$flags.call(p):f),tiRE?this:proto,$RegExp)};for(var proxy=function(key){key in $RegExp||dP($RegExp,key,{configurable:!0,get:function(){return Base[key]},set:function(it){Base[key]=it}})},keys=gOPN(Base),i=0;keys.length>i;)proxy(keys[i++]);proto.constructor=$RegExp,$RegExp.prototype=proto,_dereq_(94)(global,"RegExp",$RegExp)}_dereq_(100)("RegExp")},{100:100,128:128,29:29,35:35,37:37,40:40,45:45,52:52,72:72,77:77,94:94}],225:[function(_dereq_,module,exports){_dereq_(29)&&"g"!=/./g.flags&&_dereq_(72).f(RegExp.prototype,"flags",{configurable:!0,get:_dereq_(37)})},{29:29,37:37,72:72}],226:[function(_dereq_,module,exports){_dereq_(36)("match",1,function(defined,MATCH,$match){return[function(regexp){var O=defined(this),fn=null==regexp?void 0:regexp[MATCH];return void 0!==fn?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},$match]})},{36:36}],227:[function(_dereq_,module,exports){_dereq_(36)("replace",2,function(defined,REPLACE,$replace){return[function(searchValue,replaceValue){var O=defined(this),fn=null==searchValue?void 0:searchValue[REPLACE];return void 0!==fn?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue)},$replace]})},{36:36}],228:[function(_dereq_,module,exports){_dereq_(36)("search",1,function(defined,SEARCH,$search){return[function(regexp){var O=defined(this),fn=null==regexp?void 0:regexp[SEARCH];return void 0!==fn?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},$search]})},{36:36}],229:[function(_dereq_,module,exports){_dereq_(36)("split",2,function(defined,SPLIT,$split){var isRegExp=_dereq_(52),_split=$split,$push=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var NPCG=void 0===/()??/.exec("")[1];$split=function(separator,limit){var string=String(this);if(void 0===separator&&0===limit)return[];if(!isRegExp(separator))return _split.call(string,separator,limit);var separator2,match,lastIndex,lastLength,i,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,splitLimit=void 0===limit?4294967295:limit>>>0,separatorCopy=new RegExp(separator.source,flags+"g");for(NPCG||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));(match=separatorCopy.exec(string))&&!((lastIndex=match.index+match[0].length)>lastLastIndex&&(output.push(string.slice(lastLastIndex,match.index)),!NPCG&&match.length>1&&match[0].replace(separator2,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)}),match.length>1&&match.index<string.length&&$push.apply(output,match.slice(1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++;return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||output.push(""):output.push(string.slice(lastLastIndex)),output.length>splitLimit?output.slice(0,splitLimit):output}}else"0".split(void 0,0).length&&($split=function(separator,limit){return void 0===separator&&0===limit?[]:_split.call(this,separator,limit)});return[function(separator,limit){var O=defined(this),fn=null==separator?void 0:separator[SPLIT];return void 0!==fn?fn.call(separator,O,limit):$split.call(String(O),separator,limit)},$split]})},{36:36,52:52}],230:[function(_dereq_,module,exports){_dereq_(225);var anObject=_dereq_(7),$flags=_dereq_(37),DESCRIPTORS=_dereq_(29),$toString=/./.toString,define=function(fn){_dereq_(94)(RegExp.prototype,"toString",fn,!0)};_dereq_(35)(function(){return"/a/b"!=$toString.call({source:"a",flags:"b"})})?define(function(){var R=anObject(this);return"/".concat(R.source,"/","flags"in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):void 0)}):"toString"!=$toString.name&&define(function(){return $toString.call(this)})},{225:225,29:29,35:35,37:37,7:7,94:94}],231:[function(_dereq_,module,exports){var strong=_dereq_(19),validate=_dereq_(125);module.exports=_dereq_(22)("Set",function(get){return function(){return get(this,arguments.length>0?arguments[0]:void 0)}},{add:function(value){return strong.def(validate(this,"Set"),value=0===value?0:value,value)}},strong)},{125:125,19:19,22:22}],232:[function(_dereq_,module,exports){_dereq_(108)("anchor",function(createHTML){return function(name){return createHTML(this,"a","name",name)}})},{108:108}],233:[function(_dereq_,module,exports){_dereq_(108)("big",function(createHTML){return function(){return createHTML(this,"big","","")}})},{108:108}],234:[function(_dereq_,module,exports){_dereq_(108)("blink",function(createHTML){return function(){return createHTML(this,"blink","","")}})},{108:108}],235:[function(_dereq_,module,exports){_dereq_(108)("bold",function(createHTML){return function(){return createHTML(this,"b","","")}})},{108:108}],236:[function(_dereq_,module,exports){var $export=_dereq_(33),$at=_dereq_(106)(!1);$export($export.P,"String",{codePointAt:function(pos){return $at(this,pos)}})},{106:106,33:33}],237:[function(_dereq_,module,exports){var $export=_dereq_(33),toLength=_dereq_(118),context=_dereq_(107),$endsWith="".endsWith;$export($export.P+$export.F*_dereq_(34)("endsWith"),"String",{endsWith:function(searchString){var that=context(this,searchString,"endsWith"),endPosition=arguments.length>1?arguments[1]:void 0,len=toLength(that.length),end=void 0===endPosition?len:Math.min(toLength(endPosition),len),search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search}})},{107:107,118:118,33:33,34:34}],238:[function(_dereq_,module,exports){_dereq_(108)("fixed",function(createHTML){return function(){return createHTML(this,"tt","","")}})},{108:108}],239:[function(_dereq_,module,exports){_dereq_(108)("fontcolor",function(createHTML){return function(color){return createHTML(this,"font","color",color)}})},{108:108}],240:[function(_dereq_,module,exports){_dereq_(108)("fontsize",function(createHTML){return function(size){return createHTML(this,"font","size",size)}})},{108:108}],241:[function(_dereq_,module,exports){var $export=_dereq_(33),toAbsoluteIndex=_dereq_(114),fromCharCode=String.fromCharCode,$fromCodePoint=String.fromCodePoint;$export($export.S+$export.F*(!!$fromCodePoint&&1!=$fromCodePoint.length),"String",{fromCodePoint:function(x){for(var code,res=[],aLen=arguments.length,i=0;aLen>i;){if(code=+arguments[i++],toAbsoluteIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(55296+((code-=65536)>>10),code%1024+56320))}return res.join("")}})},{114:114,33:33}],242:[function(_dereq_,module,exports){var $export=_dereq_(33),context=_dereq_(107);$export($export.P+$export.F*_dereq_(34)("includes"),"String",{includes:function(searchString){return!!~context(this,searchString,"includes").indexOf(searchString,arguments.length>1?arguments[1]:void 0)}})},{107:107,33:33,34:34}],243:[function(_dereq_,module,exports){_dereq_(108)("italics",function(createHTML){return function(){return createHTML(this,"i","","")}})},{108:108}],244:[function(_dereq_,module,exports){var $at=_dereq_(106)(!0);_dereq_(55)(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},{106:106,55:55}],245:[function(_dereq_,module,exports){_dereq_(108)("link",function(createHTML){return function(url){return createHTML(this,"a","href",url)}})},{108:108}],246:[function(_dereq_,module,exports){var $export=_dereq_(33),toIObject=_dereq_(117),toLength=_dereq_(118);$export($export.S,"String",{raw:function(callSite){for(var tpl=toIObject(callSite.raw),len=toLength(tpl.length),aLen=arguments.length,res=[],i=0;len>i;)res.push(String(tpl[i++])),i<aLen&&res.push(String(arguments[i]));return res.join("")}})},{117:117,118:118,33:33}],247:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.P,"String",{repeat:_dereq_(110)})},{110:110,33:33}],248:[function(_dereq_,module,exports){_dereq_(108)("small",function(createHTML){return function(){return createHTML(this,"small","","")}})},{108:108}],249:[function(_dereq_,module,exports){var $export=_dereq_(33),toLength=_dereq_(118),context=_dereq_(107),$startsWith="".startsWith;$export($export.P+$export.F*_dereq_(34)("startsWith"),"String",{startsWith:function(searchString){var that=context(this,searchString,"startsWith"),index=toLength(Math.min(arguments.length>1?arguments[1]:void 0,that.length)),search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},{107:107,118:118,33:33,34:34}],250:[function(_dereq_,module,exports){_dereq_(108)("strike",function(createHTML){return function(){return createHTML(this,"strike","","")}})},{108:108}],251:[function(_dereq_,module,exports){_dereq_(108)("sub",function(createHTML){return function(){return createHTML(this,"sub","","")}})},{108:108}],252:[function(_dereq_,module,exports){_dereq_(108)("sup",function(createHTML){return function(){return createHTML(this,"sup","","")}})},{108:108}],253:[function(_dereq_,module,exports){_dereq_(111)("trim",function($trim){return function(){return $trim(this,3)}})},{111:111}],254:[function(_dereq_,module,exports){var global=_dereq_(40),has=_dereq_(41),DESCRIPTORS=_dereq_(29),$export=_dereq_(33),redefine=_dereq_(94),META=_dereq_(66).KEY,$fails=_dereq_(35),shared=_dereq_(103),setToStringTag=_dereq_(101),uid=_dereq_(124),wks=_dereq_(128),wksExt=_dereq_(127),wksDefine=_dereq_(126),keyOf=_dereq_(59),enumKeys=_dereq_(32),isArray=_dereq_(49),anObject=_dereq_(7),toIObject=_dereq_(117),toPrimitive=_dereq_(120),createDesc=_dereq_(92),_create=_dereq_(71),gOPNExt=_dereq_(76),$GOPD=_dereq_(75),$DP=_dereq_(72),$keys=_dereq_(81),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object.prototype,USE_NATIVE="function"==typeof $Symbol,QObject=global.QObject,setter=!QObject||!QObject.prototype||!QObject.prototype.findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return 7!=_create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);protoDesc&&delete ObjectProto[key],dP(it,key,D),protoDesc&&it!==ObjectProto&&dP(ObjectProto,key,protoDesc)}:dP,wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol.prototype);return sym._k=tag,sym},isSymbol=USE_NATIVE&&"symbol"==_typeof($Symbol.iterator)?function(it){return"symbol"==(void 0===it?"undefined":_typeof(it))}:function(it){return it instanceof $Symbol},$defineProperty=function(it,key,D){return it===ObjectProto&&$defineProperty(OPSymbols,key,D),anObject(it),key=toPrimitive(key,!0),anObject(D),has(AllSymbols,key)?(D.enumerable?(has(it,HIDDEN)&&it[HIDDEN][key]&&(it[HIDDEN][key]=!1),D=_create(D,{enumerable:createDesc(0,!1)})):(has(it,HIDDEN)||dP(it,HIDDEN,createDesc(1,{})),it[HIDDEN][key]=!0),setSymbolDesc(it,key,D)):dP(it,key,D)},$defineProperties=function(it,P){anObject(it);for(var key,keys=enumKeys(P=toIObject(P)),i=0,l=keys.length;l>i;)$defineProperty(it,key=keys[i++],P[key]);return it},$propertyIsEnumerable=function(key){var E=isEnum.call(this,key=toPrimitive(key,!0));return!(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))&&(!(E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key])||E)},$getOwnPropertyDescriptor=function(it,key){if(it=toIObject(it),key=toPrimitive(key,!0),it!==ObjectProto||!has(AllSymbols,key)||has(OPSymbols,key)){var D=gOPD(it,key);return!D||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(D.enumerable=!0),D}},$getOwnPropertyNames=function(it){for(var key,names=gOPN(toIObject(it)),result=[],i=0;names.length>i;)has(AllSymbols,key=names[i++])||key==HIDDEN||key==META||result.push(key);return result},$getOwnPropertySymbols=function(it){for(var key,IS_OP=it===ObjectProto,names=gOPN(IS_OP?OPSymbols:toIObject(it)),result=[],i=0;names.length>i;)!has(AllSymbols,key=names[i++])||IS_OP&&!has(ObjectProto,key)||result.push(AllSymbols[key]);return result};USE_NATIVE||(redefine(($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:void 0);return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:!0,set:function $set(value){this===ObjectProto&&$set.call(OPSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDesc(this,tag,createDesc(1,value))}}),wrap(tag)}).prototype,"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,_dereq_(77).f=gOPNExt.f=$getOwnPropertyNames,_dereq_(82).f=$propertyIsEnumerable,_dereq_(78).f=$getOwnPropertySymbols,DESCRIPTORS&&!_dereq_(60)&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,!0),wksExt.f=function(name){return wrap(wks(name))}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function(key){if(isSymbol(key))return keyOf(SymbolRegistry,key);throw TypeError(key+" is not a symbol!")},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export($export.S+$export.F*!USE_NATIVE,"Object",{create:function(it,P){return void 0===P?_create(it):$defineProperties(_create(it),P)},defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return"[null]"!=_stringify([S])||"{}"!=_stringify({a:S})||"{}"!=_stringify(Object(S))})),"JSON",{stringify:function(it){if(void 0!==it&&!isSymbol(it)){for(var replacer,$replacer,args=[it],i=1;arguments.length>i;)args.push(arguments[i++]);return"function"==typeof(replacer=args[1])&&($replacer=replacer),!$replacer&&isArray(replacer)||(replacer=function(key,value){if($replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,_stringify.apply($JSON,args)}}}),$Symbol.prototype[TO_PRIMITIVE]||_dereq_(42)($Symbol.prototype,TO_PRIMITIVE,$Symbol.prototype.valueOf),setToStringTag($Symbol,"Symbol"),setToStringTag(Math,"Math",!0),setToStringTag(global.JSON,"JSON",!0)},{101:101,103:103,117:117,120:120,124:124,126:126,127:127,128:128,29:29,32:32,33:33,35:35,40:40,41:41,42:42,49:49,59:59,60:60,66:66,7:7,71:71,72:72,75:75,76:76,77:77,78:78,81:81,82:82,92:92,94:94}],255:[function(_dereq_,module,exports){var $export=_dereq_(33),$typed=_dereq_(123),buffer=_dereq_(122),anObject=_dereq_(7),toAbsoluteIndex=_dereq_(114),toLength=_dereq_(118),isObject=_dereq_(51),ArrayBuffer=_dereq_(40).ArrayBuffer,speciesConstructor=_dereq_(104),$ArrayBuffer=buffer.ArrayBuffer,$DataView=buffer.DataView,$isView=$typed.ABV&&ArrayBuffer.isView,$slice=$ArrayBuffer.prototype.slice,VIEW=$typed.VIEW;$export($export.G+$export.W+$export.F*(ArrayBuffer!==$ArrayBuffer),{ArrayBuffer:$ArrayBuffer}),$export($export.S+$export.F*!$typed.CONSTR,"ArrayBuffer",{isView:function(it){return $isView&&$isView(it)||isObject(it)&&VIEW in it}}),$export($export.P+$export.U+$export.F*_dereq_(35)(function(){return!new $ArrayBuffer(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(start,end){if(void 0!==$slice&&void 0===end)return $slice.call(anObject(this),start);for(var len=anObject(this).byteLength,first=toAbsoluteIndex(start,len),final=toAbsoluteIndex(void 0===end?len:end,len),result=new(speciesConstructor(this,$ArrayBuffer))(toLength(final-first)),viewS=new $DataView(this),viewT=new $DataView(result),index=0;first<final;)viewT.setUint8(index++,viewS.getUint8(first++));return result}}),_dereq_(100)("ArrayBuffer")},{100:100,104:104,114:114,118:118,122:122,123:123,33:33,35:35,40:40,51:51,7:7}],256:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.G+$export.W+$export.F*!_dereq_(123).ABV,{DataView:_dereq_(122).DataView})},{122:122,123:123,33:33}],257:[function(_dereq_,module,exports){_dereq_(121)("Float32",4,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{121:121}],258:[function(_dereq_,module,exports){_dereq_(121)("Float64",8,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{121:121}],259:[function(_dereq_,module,exports){_dereq_(121)("Int16",2,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{121:121}],260:[function(_dereq_,module,exports){_dereq_(121)("Int32",4,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{121:121}],261:[function(_dereq_,module,exports){_dereq_(121)("Int8",1,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{121:121}],262:[function(_dereq_,module,exports){_dereq_(121)("Uint16",2,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{121:121}],263:[function(_dereq_,module,exports){_dereq_(121)("Uint32",4,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{121:121}],264:[function(_dereq_,module,exports){_dereq_(121)("Uint8",1,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{121:121}],265:[function(_dereq_,module,exports){_dereq_(121)("Uint8",1,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}},!0)},{121:121}],266:[function(_dereq_,module,exports){var InternalMap,each=_dereq_(12)(0),redefine=_dereq_(94),meta=_dereq_(66),assign=_dereq_(70),weak=_dereq_(21),isObject=_dereq_(51),fails=_dereq_(35),validate=_dereq_(125),getWeak=meta.getWeak,isExtensible=Object.isExtensible,uncaughtFrozenStore=weak.ufstore,tmp={},wrapper=function(get){return function(){return get(this,arguments.length>0?arguments[0]:void 0)}},methods={get:function(key){if(isObject(key)){var data=getWeak(key);return!0===data?uncaughtFrozenStore(validate(this,"WeakMap")).get(key):data?data[this._i]:void 0}},set:function(key,value){return weak.def(validate(this,"WeakMap"),key,value)}},$WeakMap=module.exports=_dereq_(22)("WeakMap",wrapper,methods,weak,!0,!0);fails(function(){return 7!=(new $WeakMap).set((Object.freeze||Object)(tmp),7).get(tmp)})&&(assign((InternalMap=weak.getConstructor(wrapper,"WeakMap")).prototype,methods),meta.NEED=!0,each(["delete","has","get","set"],function(key){var proto=$WeakMap.prototype,method=proto[key];redefine(proto,key,function(a,b){if(isObject(a)&&!isExtensible(a)){this._f||(this._f=new InternalMap);var result=this._f[key](a,b);return"set"==key?this:result}return method.call(this,a,b)})}))},{12:12,125:125,21:21,22:22,35:35,51:51,66:66,70:70,94:94}],267:[function(_dereq_,module,exports){var weak=_dereq_(21),validate=_dereq_(125);_dereq_(22)("WeakSet",function(get){return function(){return get(this,arguments.length>0?arguments[0]:void 0)}},{add:function(value){return weak.def(validate(this,"WeakSet"),value,!0)}},weak,!1,!0)},{125:125,21:21,22:22}],268:[function(_dereq_,module,exports){var $export=_dereq_(33),flattenIntoArray=_dereq_(38),toObject=_dereq_(119),toLength=_dereq_(118),aFunction=_dereq_(3),arraySpeciesCreate=_dereq_(15);$export($export.P,"Array",{flatMap:function(callbackfn){var sourceLen,A,O=toObject(this);return aFunction(callbackfn),sourceLen=toLength(O.length),A=arraySpeciesCreate(O,0),flattenIntoArray(A,O,O,sourceLen,0,1,callbackfn,arguments[1]),A}}),_dereq_(5)("flatMap")},{118:118,119:119,15:15,3:3,33:33,38:38,5:5}],269:[function(_dereq_,module,exports){var $export=_dereq_(33),flattenIntoArray=_dereq_(38),toObject=_dereq_(119),toLength=_dereq_(118),toInteger=_dereq_(116),arraySpeciesCreate=_dereq_(15);$export($export.P,"Array",{flatten:function(){var depthArg=arguments[0],O=toObject(this),sourceLen=toLength(O.length),A=arraySpeciesCreate(O,0);return flattenIntoArray(A,O,O,sourceLen,0,void 0===depthArg?1:toInteger(depthArg)),A}}),_dereq_(5)("flatten")},{116:116,118:118,119:119,15:15,33:33,38:38,5:5}],270:[function(_dereq_,module,exports){var $export=_dereq_(33),$includes=_dereq_(11)(!0);$export($export.P,"Array",{includes:function(el){return $includes(this,el,arguments.length>1?arguments[1]:void 0)}}),_dereq_(5)("includes")},{11:11,33:33,5:5}],271:[function(_dereq_,module,exports){var $export=_dereq_(33),microtask=_dereq_(68)(),process=_dereq_(40).process,isNode="process"==_dereq_(18)(process);$export($export.G,{asap:function(fn){var domain=isNode&&process.domain;microtask(domain?domain.bind(fn):fn)}})},{18:18,33:33,40:40,68:68}],272:[function(_dereq_,module,exports){var $export=_dereq_(33),cof=_dereq_(18);$export($export.S,"Error",{isError:function(it){return"Error"===cof(it)}})},{18:18,33:33}],273:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.G,{global:_dereq_(40)})},{33:33,40:40}],274:[function(_dereq_,module,exports){_dereq_(97)("Map")},{97:97}],275:[function(_dereq_,module,exports){_dereq_(98)("Map")},{98:98}],276:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.P+$export.R,"Map",{toJSON:_dereq_(20)("Map")})},{20:20,33:33}],277:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{clamp:function(x,lower,upper){return Math.min(upper,Math.max(lower,x))}})},{33:33}],278:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{DEG_PER_RAD:Math.PI/180})},{33:33}],279:[function(_dereq_,module,exports){var $export=_dereq_(33),RAD_PER_DEG=180/Math.PI;$export($export.S,"Math",{degrees:function(radians){return radians*RAD_PER_DEG}})},{33:33}],280:[function(_dereq_,module,exports){var $export=_dereq_(33),scale=_dereq_(64),fround=_dereq_(62);$export($export.S,"Math",{fscale:function(x,inLow,inHigh,outLow,outHigh){return fround(scale(x,inLow,inHigh,outLow,outHigh))}})},{33:33,62:62,64:64}],281:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{iaddh:function(x0,x1,y0,y1){var $x0=x0>>>0,$y0=y0>>>0;return(x1>>>0)+(y1>>>0)+(($x0&$y0|($x0|$y0)&~($x0+$y0>>>0))>>>31)|0}})},{33:33}],282:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{imulh:function(u,v){var $u=+u,$v=+v,u0=65535&$u,v0=65535&$v,u1=$u>>16,v1=$v>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>16)+((u0*v1>>>0)+(65535&t)>>16)}})},{33:33}],283:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{isubh:function(x0,x1,y0,y1){var $x0=x0>>>0,$y0=y0>>>0;return(x1>>>0)-(y1>>>0)-((~$x0&$y0|~($x0^$y0)&$x0-$y0>>>0)>>>31)|0}})},{33:33}],284:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{RAD_PER_DEG:180/Math.PI})},{33:33}],285:[function(_dereq_,module,exports){var $export=_dereq_(33),DEG_PER_RAD=Math.PI/180;$export($export.S,"Math",{radians:function(degrees){return degrees*DEG_PER_RAD}})},{33:33}],286:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{scale:_dereq_(64)})},{33:33,64:64}],287:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{signbit:function(x){return(x=+x)!=x?x:0==x?1/x==1/0:x>0}})},{33:33}],288:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"Math",{umulh:function(u,v){var $u=+u,$v=+v,u0=65535&$u,v0=65535&$v,u1=$u>>>16,v1=$v>>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>>16)+((u0*v1>>>0)+(65535&t)>>>16)}})},{33:33}],289:[function(_dereq_,module,exports){var $export=_dereq_(33),toObject=_dereq_(119),aFunction=_dereq_(3),$defineProperty=_dereq_(72);_dereq_(29)&&$export($export.P+_dereq_(74),"Object",{__defineGetter__:function(P,getter){$defineProperty.f(toObject(this),P,{get:aFunction(getter),enumerable:!0,configurable:!0})}})},{119:119,29:29,3:3,33:33,72:72,74:74}],290:[function(_dereq_,module,exports){var $export=_dereq_(33),toObject=_dereq_(119),aFunction=_dereq_(3),$defineProperty=_dereq_(72);_dereq_(29)&&$export($export.P+_dereq_(74),"Object",{__defineSetter__:function(P,setter){$defineProperty.f(toObject(this),P,{set:aFunction(setter),enumerable:!0,configurable:!0})}})},{119:119,29:29,3:3,33:33,72:72,74:74}],291:[function(_dereq_,module,exports){var $export=_dereq_(33),$entries=_dereq_(84)(!0);$export($export.S,"Object",{entries:function(it){return $entries(it)}})},{33:33,84:84}],292:[function(_dereq_,module,exports){var $export=_dereq_(33),ownKeys=_dereq_(85),toIObject=_dereq_(117),gOPD=_dereq_(75),createProperty=_dereq_(24);$export($export.S,"Object",{getOwnPropertyDescriptors:function(object){for(var key,desc,O=toIObject(object),getDesc=gOPD.f,keys=ownKeys(O),result={},i=0;keys.length>i;)void 0!==(desc=getDesc(O,key=keys[i++]))&&createProperty(result,key,desc);return result}})},{117:117,24:24,33:33,75:75,85:85}],293:[function(_dereq_,module,exports){var $export=_dereq_(33),toObject=_dereq_(119),toPrimitive=_dereq_(120),getPrototypeOf=_dereq_(79),getOwnPropertyDescriptor=_dereq_(75).f;_dereq_(29)&&$export($export.P+_dereq_(74),"Object",{__lookupGetter__:function(P){var D,O=toObject(this),K=toPrimitive(P,!0);do{if(D=getOwnPropertyDescriptor(O,K))return D.get}while(O=getPrototypeOf(O))}})},{119:119,120:120,29:29,33:33,74:74,75:75,79:79}],294:[function(_dereq_,module,exports){var $export=_dereq_(33),toObject=_dereq_(119),toPrimitive=_dereq_(120),getPrototypeOf=_dereq_(79),getOwnPropertyDescriptor=_dereq_(75).f;_dereq_(29)&&$export($export.P+_dereq_(74),"Object",{__lookupSetter__:function(P){var D,O=toObject(this),K=toPrimitive(P,!0);do{if(D=getOwnPropertyDescriptor(O,K))return D.set}while(O=getPrototypeOf(O))}})},{119:119,120:120,29:29,33:33,74:74,75:75,79:79}],295:[function(_dereq_,module,exports){var $export=_dereq_(33),$values=_dereq_(84)(!1);$export($export.S,"Object",{values:function(it){return $values(it)}})},{33:33,84:84}],296:[function(_dereq_,module,exports){var $export=_dereq_(33),global=_dereq_(40),core=_dereq_(23),microtask=_dereq_(68)(),OBSERVABLE=_dereq_(128)("observable"),aFunction=_dereq_(3),anObject=_dereq_(7),anInstance=_dereq_(6),redefineAll=_dereq_(93),hide=_dereq_(42),forOf=_dereq_(39),RETURN=forOf.RETURN,getMethod=function(fn){return null==fn?void 0:aFunction(fn)},cleanupSubscription=function(subscription){var cleanup=subscription._c;cleanup&&(subscription._c=void 0,cleanup())},subscriptionClosed=function(subscription){return void 0===subscription._o},closeSubscription=function(subscription){subscriptionClosed(subscription)||(subscription._o=void 0,cleanupSubscription(subscription))},Subscription=function(observer,subscriber){anObject(observer),this._c=void 0,this._o=observer,observer=new SubscriptionObserver(this);try{var cleanup=subscriber(observer),subscription=cleanup;null!=cleanup&&("function"==typeof cleanup.unsubscribe?cleanup=function(){subscription.unsubscribe()}:aFunction(cleanup),this._c=cleanup)}catch(e){return void observer.error(e)}subscriptionClosed(this)&&cleanupSubscription(this)};Subscription.prototype=redefineAll({},{unsubscribe:function(){closeSubscription(this)}});var SubscriptionObserver=function(subscription){this._s=subscription};SubscriptionObserver.prototype=redefineAll({},{next:function(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;try{var m=getMethod(observer.next);if(m)return m.call(observer,value)}catch(e){try{closeSubscription(subscription)}finally{throw e}}}},error:function(value){var subscription=this._s;if(subscriptionClosed(subscription))throw value;var observer=subscription._o;subscription._o=void 0;try{var m=getMethod(observer.error);if(!m)throw value;value=m.call(observer,value)}catch(e){try{cleanupSubscription(subscription)}finally{throw e}}return cleanupSubscription(subscription),value},complete:function(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;subscription._o=void 0;try{var m=getMethod(observer.complete);value=m?m.call(observer,value):void 0}catch(e){try{cleanupSubscription(subscription)}finally{throw e}}return cleanupSubscription(subscription),value}}});var $Observable=function(subscriber){anInstance(this,$Observable,"Observable","_f")._f=aFunction(subscriber)};redefineAll($Observable.prototype,{subscribe:function(observer){return new Subscription(observer,this._f)},forEach:function(fn){var that=this;return new(core.Promise||global.Promise)(function(resolve,reject){aFunction(fn);var subscription=that.subscribe({next:function(value){try{return fn(value)}catch(e){reject(e),subscription.unsubscribe()}},error:reject,complete:resolve})})}}),redefineAll($Observable,{from:function(x){var C="function"==typeof this?this:$Observable,method=getMethod(anObject(x)[OBSERVABLE]);if(method){var observable=anObject(method.call(x));return observable.constructor===C?observable:new C(function(observer){return observable.subscribe(observer)})}return new C(function(observer){var done=!1;return microtask(function(){if(!done){try{if(forOf(x,!1,function(it){if(observer.next(it),done)return RETURN})===RETURN)return}catch(e){if(done)throw e;return void observer.error(e)}observer.complete()}}),function(){done=!0}})},of:function(){for(var i=0,l=arguments.length,items=Array(l);i<l;)items[i]=arguments[i++];return new("function"==typeof this?this:$Observable)(function(observer){var done=!1;return microtask(function(){if(!done){for(var j=0;j<items.length;++j)if(observer.next(items[j]),done)return;observer.complete()}}),function(){done=!0}})}}),hide($Observable.prototype,OBSERVABLE,function(){return this}),$export($export.G,{Observable:$Observable}),_dereq_(100)("Observable")},{100:100,128:128,23:23,3:3,33:33,39:39,40:40,42:42,6:6,68:68,7:7,93:93}],297:[function(_dereq_,module,exports){var $export=_dereq_(33),core=_dereq_(23),global=_dereq_(40),speciesConstructor=_dereq_(104),promiseResolve=_dereq_(91);$export($export.P+$export.R,"Promise",{finally:function(onFinally){var C=speciesConstructor(this,core.Promise||global.Promise),isFunction="function"==typeof onFinally;return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x})}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e})}:onFinally)}})},{104:104,23:23,33:33,40:40,91:91}],298:[function(_dereq_,module,exports){var $export=_dereq_(33),newPromiseCapability=_dereq_(69),perform=_dereq_(90);$export($export.S,"Promise",{try:function(callbackfn){var promiseCapability=newPromiseCapability.f(this),result=perform(callbackfn);return(result.e?promiseCapability.reject:promiseCapability.resolve)(result.v),promiseCapability.promise}})},{33:33,69:69,90:90}],299:[function(_dereq_,module,exports){var metadata=_dereq_(67),anObject=_dereq_(7),toMetaKey=metadata.key,ordinaryDefineOwnMetadata=metadata.set;metadata.exp({defineMetadata:function(metadataKey,metadataValue,target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,anObject(target),toMetaKey(targetKey))}})},{67:67,7:7}],300:[function(_dereq_,module,exports){var metadata=_dereq_(67),anObject=_dereq_(7),toMetaKey=metadata.key,getOrCreateMetadataMap=metadata.map,store=metadata.store;metadata.exp({deleteMetadata:function(metadataKey,target){var targetKey=arguments.length<3?void 0:toMetaKey(arguments[2]),metadataMap=getOrCreateMetadataMap(anObject(target),targetKey,!1);if(void 0===metadataMap||!metadataMap.delete(metadataKey))return!1;if(metadataMap.size)return!0;var targetMetadata=store.get(target);return targetMetadata.delete(targetKey),!!targetMetadata.size||store.delete(target)}})},{67:67,7:7}],301:[function(_dereq_,module,exports){var Set=_dereq_(231),from=_dereq_(10),metadata=_dereq_(67),anObject=_dereq_(7),getPrototypeOf=_dereq_(79),ordinaryOwnMetadataKeys=metadata.keys,toMetaKey=metadata.key;metadata.exp({getMetadataKeys:function(target){return function ordinaryMetadataKeys(O,P){var oKeys=ordinaryOwnMetadataKeys(O,P),parent=getPrototypeOf(O);if(null===parent)return oKeys;var pKeys=ordinaryMetadataKeys(parent,P);return pKeys.length?oKeys.length?from(new Set(oKeys.concat(pKeys))):pKeys:oKeys}(anObject(target),arguments.length<2?void 0:toMetaKey(arguments[1]))}})},{10:10,231:231,67:67,7:7,79:79}],302:[function(_dereq_,module,exports){var metadata=_dereq_(67),anObject=_dereq_(7),getPrototypeOf=_dereq_(79),ordinaryHasOwnMetadata=metadata.has,ordinaryGetOwnMetadata=metadata.get,toMetaKey=metadata.key;metadata.exp({getMetadata:function(metadataKey,target){return function ordinaryGetMetadata(MetadataKey,O,P){if(ordinaryHasOwnMetadata(MetadataKey,O,P))return ordinaryGetOwnMetadata(MetadataKey,O,P);var parent=getPrototypeOf(O);return null!==parent?ordinaryGetMetadata(MetadataKey,parent,P):void 0}(metadataKey,anObject(target),arguments.length<3?void 0:toMetaKey(arguments[2]))}})},{67:67,7:7,79:79}],303:[function(_dereq_,module,exports){var metadata=_dereq_(67),anObject=_dereq_(7),ordinaryOwnMetadataKeys=metadata.keys,toMetaKey=metadata.key;metadata.exp({getOwnMetadataKeys:function(target){return ordinaryOwnMetadataKeys(anObject(target),arguments.length<2?void 0:toMetaKey(arguments[1]))}})},{67:67,7:7}],304:[function(_dereq_,module,exports){var metadata=_dereq_(67),anObject=_dereq_(7),ordinaryGetOwnMetadata=metadata.get,toMetaKey=metadata.key;metadata.exp({getOwnMetadata:function(metadataKey,target){return ordinaryGetOwnMetadata(metadataKey,anObject(target),arguments.length<3?void 0:toMetaKey(arguments[2]))}})},{67:67,7:7}],305:[function(_dereq_,module,exports){var metadata=_dereq_(67),anObject=_dereq_(7),getPrototypeOf=_dereq_(79),ordinaryHasOwnMetadata=metadata.has,toMetaKey=metadata.key;metadata.exp({hasMetadata:function(metadataKey,target){return function ordinaryHasMetadata(MetadataKey,O,P){if(ordinaryHasOwnMetadata(MetadataKey,O,P))return!0;var parent=getPrototypeOf(O);return null!==parent&&ordinaryHasMetadata(MetadataKey,parent,P)}(metadataKey,anObject(target),arguments.length<3?void 0:toMetaKey(arguments[2]))}})},{67:67,7:7,79:79}],306:[function(_dereq_,module,exports){var metadata=_dereq_(67),anObject=_dereq_(7),ordinaryHasOwnMetadata=metadata.has,toMetaKey=metadata.key;metadata.exp({hasOwnMetadata:function(metadataKey,target){return ordinaryHasOwnMetadata(metadataKey,anObject(target),arguments.length<3?void 0:toMetaKey(arguments[2]))}})},{67:67,7:7}],307:[function(_dereq_,module,exports){var $metadata=_dereq_(67),anObject=_dereq_(7),aFunction=_dereq_(3),toMetaKey=$metadata.key,ordinaryDefineOwnMetadata=$metadata.set;$metadata.exp({metadata:function(metadataKey,metadataValue){return function(target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,(void 0!==targetKey?anObject:aFunction)(target),toMetaKey(targetKey))}}})},{3:3,67:67,7:7}],308:[function(_dereq_,module,exports){_dereq_(97)("Set")},{97:97}],309:[function(_dereq_,module,exports){_dereq_(98)("Set")},{98:98}],310:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.P+$export.R,"Set",{toJSON:_dereq_(20)("Set")})},{20:20,33:33}],311:[function(_dereq_,module,exports){var $export=_dereq_(33),$at=_dereq_(106)(!0);$export($export.P,"String",{at:function(pos){return $at(this,pos)}})},{106:106,33:33}],312:[function(_dereq_,module,exports){var $export=_dereq_(33),defined=_dereq_(28),toLength=_dereq_(118),isRegExp=_dereq_(52),getFlags=_dereq_(37),RegExpProto=RegExp.prototype,$RegExpStringIterator=function(regexp,string){this._r=regexp,this._s=string};_dereq_(54)($RegExpStringIterator,"RegExp String",function(){var match=this._r.exec(this._s);return{value:match,done:null===match}}),$export($export.P,"String",{matchAll:function(regexp){if(defined(this),!isRegExp(regexp))throw TypeError(regexp+" is not a regexp!");var S=String(this),flags="flags"in RegExpProto?String(regexp.flags):getFlags.call(regexp),rx=new RegExp(regexp.source,~flags.indexOf("g")?flags:"g"+flags);return rx.lastIndex=toLength(regexp.lastIndex),new $RegExpStringIterator(rx,S)}})},{118:118,28:28,33:33,37:37,52:52,54:54}],313:[function(_dereq_,module,exports){var $export=_dereq_(33),$pad=_dereq_(109);$export($export.P,"String",{padEnd:function(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:void 0,!1)}})},{109:109,33:33}],314:[function(_dereq_,module,exports){var $export=_dereq_(33),$pad=_dereq_(109);$export($export.P,"String",{padStart:function(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:void 0,!0)}})},{109:109,33:33}],315:[function(_dereq_,module,exports){_dereq_(111)("trimLeft",function($trim){return function(){return $trim(this,1)}},"trimStart")},{111:111}],316:[function(_dereq_,module,exports){_dereq_(111)("trimRight",function($trim){return function(){return $trim(this,2)}},"trimEnd")},{111:111}],317:[function(_dereq_,module,exports){_dereq_(126)("asyncIterator")},{126:126}],318:[function(_dereq_,module,exports){_dereq_(126)("observable")},{126:126}],319:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.S,"System",{global:_dereq_(40)})},{33:33,40:40}],320:[function(_dereq_,module,exports){_dereq_(97)("WeakMap")},{97:97}],321:[function(_dereq_,module,exports){_dereq_(98)("WeakMap")},{98:98}],322:[function(_dereq_,module,exports){_dereq_(97)("WeakSet")},{97:97}],323:[function(_dereq_,module,exports){_dereq_(98)("WeakSet")},{98:98}],324:[function(_dereq_,module,exports){for(var $iterators=_dereq_(141),getKeys=_dereq_(81),redefine=_dereq_(94),global=_dereq_(40),hide=_dereq_(42),Iterators=_dereq_(58),wks=_dereq_(128),ITERATOR=wks("iterator"),TO_STRING_TAG=wks("toStringTag"),ArrayValues=Iterators.Array,DOMIterables={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},collections=getKeys(DOMIterables),i=0;i<collections.length;i++){var key,NAME=collections[i],explicit=DOMIterables[NAME],Collection=global[NAME],proto=Collection&&Collection.prototype;if(proto&&(proto[ITERATOR]||hide(proto,ITERATOR,ArrayValues),proto[TO_STRING_TAG]||hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=ArrayValues,explicit))for(key in $iterators)proto[key]||redefine(proto,key,$iterators[key],!0)}},{128:128,141:141,40:40,42:42,58:58,81:81,94:94}],325:[function(_dereq_,module,exports){var $export=_dereq_(33),$task=_dereq_(113);$export($export.G+$export.B,{setImmediate:$task.set,clearImmediate:$task.clear})},{113:113,33:33}],326:[function(_dereq_,module,exports){var global=_dereq_(40),$export=_dereq_(33),invoke=_dereq_(46),partial=_dereq_(88),navigator=global.navigator,MSIE=!!navigator&&/MSIE .\./.test(navigator.userAgent),wrap=function(set){return MSIE?function(fn,time){return set(invoke(partial,[].slice.call(arguments,2),"function"==typeof fn?fn:Function(fn)),time)}:set};$export($export.G+$export.B+$export.F*MSIE,{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)})},{33:33,40:40,46:46,88:88}],327:[function(_dereq_,module,exports){_dereq_(254),_dereq_(191),_dereq_(193),_dereq_(192),_dereq_(195),_dereq_(197),_dereq_(202),_dereq_(196),_dereq_(194),_dereq_(204),_dereq_(203),_dereq_(199),_dereq_(200),_dereq_(198),_dereq_(190),_dereq_(201),_dereq_(205),_dereq_(206),_dereq_(157),_dereq_(159),_dereq_(158),_dereq_(208),_dereq_(207),_dereq_(178),_dereq_(188),_dereq_(189),_dereq_(179),_dereq_(180),_dereq_(181),_dereq_(182),_dereq_(183),_dereq_(184),_dereq_(185),_dereq_(186),_dereq_(187),_dereq_(161),_dereq_(162),_dereq_(163),_dereq_(164),_dereq_(165),_dereq_(166),_dereq_(167),_dereq_(168),_dereq_(169),_dereq_(170),_dereq_(171),_dereq_(172),_dereq_(173),_dereq_(174),_dereq_(175),_dereq_(176),_dereq_(177),_dereq_(241),_dereq_(246),_dereq_(253),_dereq_(244),_dereq_(236),_dereq_(237),_dereq_(242),_dereq_(247),_dereq_(249),_dereq_(232),_dereq_(233),_dereq_(234),_dereq_(235),_dereq_(238),_dereq_(239),_dereq_(240),_dereq_(243),_dereq_(245),_dereq_(248),_dereq_(250),_dereq_(251),_dereq_(252),_dereq_(152),_dereq_(154),_dereq_(153),_dereq_(156),_dereq_(155),_dereq_(140),_dereq_(138),_dereq_(145),_dereq_(142),_dereq_(148),_dereq_(150),_dereq_(137),_dereq_(144),_dereq_(134),_dereq_(149),_dereq_(132),_dereq_(147),_dereq_(146),_dereq_(139),_dereq_(143),_dereq_(131),_dereq_(133),_dereq_(136),_dereq_(135),_dereq_(151),_dereq_(141),_dereq_(224),_dereq_(230),_dereq_(225),_dereq_(226),_dereq_(227),_dereq_(228),_dereq_(229),_dereq_(209),_dereq_(160),_dereq_(231),_dereq_(266),_dereq_(267),_dereq_(255),_dereq_(256),_dereq_(261),_dereq_(264),_dereq_(265),_dereq_(259),_dereq_(262),_dereq_(260),_dereq_(263),_dereq_(257),_dereq_(258),_dereq_(210),_dereq_(211),_dereq_(212),_dereq_(213),_dereq_(214),_dereq_(217),_dereq_(215),_dereq_(216),_dereq_(218),_dereq_(219),_dereq_(220),_dereq_(221),_dereq_(223),_dereq_(222),_dereq_(270),_dereq_(268),_dereq_(269),_dereq_(311),_dereq_(314),_dereq_(313),_dereq_(315),_dereq_(316),_dereq_(312),_dereq_(317),_dereq_(318),_dereq_(292),_dereq_(295),_dereq_(291),_dereq_(289),_dereq_(290),_dereq_(293),_dereq_(294),_dereq_(276),_dereq_(310),_dereq_(275),_dereq_(309),_dereq_(321),_dereq_(323),_dereq_(274),_dereq_(308),_dereq_(320),_dereq_(322),_dereq_(273),_dereq_(319),_dereq_(272),_dereq_(277),_dereq_(278),_dereq_(279),_dereq_(280),_dereq_(281),_dereq_(283),_dereq_(282),_dereq_(284),_dereq_(285),_dereq_(286),_dereq_(288),_dereq_(287),_dereq_(297),_dereq_(298),_dereq_(299),_dereq_(300),_dereq_(302),_dereq_(301),_dereq_(304),_dereq_(303),_dereq_(305),_dereq_(306),_dereq_(307),_dereq_(271),_dereq_(296),_dereq_(326),_dereq_(325),_dereq_(324),module.exports=_dereq_(23)},{131:131,132:132,133:133,134:134,135:135,136:136,137:137,138:138,139:139,140:140,141:141,142:142,143:143,144:144,145:145,146:146,147:147,148:148,149:149,150:150,151:151,152:152,153:153,154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,23:23,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,290:290,291:291,292:292,293:293,294:294,295:295,296:296,297:297,298:298,299:299,300:300,301:301,302:302,303:303,304:304,305:305,306:306,307:307,308:308,309:309,310:310,311:311,312:312,313:313,314:314,315:315,316:316,317:317,318:318,319:319,320:320,321:321,322:322,323:323,324:324,325:325,326:326}],328:[function(_dereq_,module,exports){(function(global){!function(global){var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag",inModule="object"===(void 0===module?"undefined":_typeof(module)),runtime=global.regeneratorRuntime;if(runtime)inModule&&(module.exports=runtime);else{(runtime=global.regeneratorRuntime=inModule?module.exports:{}).wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={},IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},runtime.AsyncIterator=AsyncIterator,runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state=GenStateSuspendedStart;return function(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"===(void 0===value?"undefined":_typeof(value))&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):Promise.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result)},reject)}reject(record.arg)}var previousPromise;"object"===_typeof(global.process)&&global.process.domain&&(invoke=global.process.domain.bind(invoke)),this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}}("object"===(void 0===global?"undefined":_typeof(global))?global:"object"===("undefined"==typeof window?"undefined":_typeof(window))?window:"object"===("undefined"==typeof self?"undefined":_typeof(self))?self:this)}).call(this,void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],148:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var TDF=function(){function TDF(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TDF)}return _createClass(TDF,null,[{key:"LoadTDF",value:function(path){var tdf=TDF.szTDFList[path];if(tdf)return tdf;var str=Laya.loader.getRes(path);if(!str)return null;if("object"==(void 0===str?"undefined":_typeof(str)))tdf=str;else{var agv=path.split("/"),tdfname=agv[agv.length-1];tdf=TDF.Parsing(tdfname,str)}return TDF.szTDFList[path]=tdf,tdf}},{key:"Parsing",value:function(tdfname,str){for(var tdf={},rawagv=(str=(str=str.replace(/\t/g,"")).replace(/\r/g,"")).split("\n"),agv=[],substr=void 0,i=0;i<rawagv.length;i++)(substr=rawagv[i]).length>0&&agv.push(substr);if(!(substr=agv[0])||"TDF1.0"!=substr)return console.log(tdfname+"错误!"),tdf;if(!(substr=agv[1]))return console.log(tdfname+"数据标识错误!"),tdf;var szTitle=substr.split(",");if(!(substr=agv[2]))return console.log(tdfname+"数据键错误!"),tdf;var szKey=substr.split(",");if(szTitle.length!=szKey.length)return console.log(tdfname+"数据列不匹配!"),tdf;if(agv[3])for(var maxnum=agv.length,_i=3;_i<maxnum;_i++){substr=agv[_i];var szValue=_i<3?substr.split(","):JSON.parse("["+substr+"]");if(szValue.length!=szKey.length)console.log(tdfname+"第"+(_i+1)+"行解析错误!");else{for(var valuekey=void 0,data={},j=0;j<szValue.length;j++){var key=szKey[j],value=szValue[j];0==j&&(valuekey=value.toString()),data[key]=value}tdf[valuekey]=data}}return tdf}}]),TDF}();exports.default=TDF,TDF.szTDFList={}},{}],149:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_gamedesk2=_interopRequireDefault(require("../../framework/gamemodel/room/desk/gamedesk")),_aqua2=_interopRequireDefault(require("../jcby/ui/aqua")),_jcby_ctrl2=_interopRequireDefault(require("../jcby/jcby_ctrl"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameDesk_Jcby=function(_BaseGameDesk){function GameDesk_Jcby(gametype,con,gameroom){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameDesk_Jcby),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameDesk_Jcby.__proto__||Object.getPrototypeOf(GameDesk_Jcby)).call(this,gametype,con,gameroom))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameDesk_Jcby,_gamedesk2.default),_createClass(GameDesk_Jcby,[{key:"SetDeskTop",value:function(){this.m_DeskTop||(this.m_DeskTop=new _aqua2.default(this.m_Con,this.m_GameRoom.m_MatchKind))}},{key:"SetCtrl",value:function(){switch(this.m_GameRoom.m_sGameName){case"金蟾捕鱼":this.m_CtrlClass=_jcby_ctrl2.default}}},{key:"InitCtrl",value:function(){this.ClearCtrl(),this.m_CtrlClass&&(this.m_GameCtrl=new this.m_CtrlClass(this.m_DeskTop),this.m_GameCtrl.OnCreate(this))}}]),GameDesk_Jcby}();exports.default=GameDesk_Jcby},{"../../framework/gamemodel/room/desk/gamedesk":124,"../jcby/jcby_ctrl":153,"../jcby/ui/aqua":159}],150:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_gamemodel2=_interopRequireDefault(require("../../framework/gamemodel/gamemodel")),_gameroom2=_interopRequireDefault(require("./gameroom"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameModel_Jcby=function(_GameModel){function GameModel_Jcby(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameModel_Jcby),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameModel_Jcby.__proto__||Object.getPrototypeOf(GameModel_Jcby)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameModel_Jcby,_gamemodel2.default),_createClass(GameModel_Jcby,[{key:"InGame",value:function(modeldata){this.m_GameRoomClass=_gameroom2.default,function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0}(GameModel_Jcby.prototype.__proto__||Object.getPrototypeOf(GameModel_Jcby.prototype),"InGame",this).call(this,modeldata)}}]),GameModel_Jcby}();exports.default=GameModel_Jcby},{"../../framework/gamemodel/gamemodel":122,"./gameroom":151}],151:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_gameroom2=_interopRequireDefault(require("../../framework/gamemodel/room/gameroom")),_gamedesk2=_interopRequireDefault(require("./gamedesk"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameRoom_Jcby=function(_BaseGameRoom){function GameRoom_Jcby(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameRoom_Jcby),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameRoom_Jcby.__proto__||Object.getPrototypeOf(GameRoom_Jcby)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameRoom_Jcby,_gameroom2.default),_createClass(GameRoom_Jcby,[{key:"SetDesk",value:function(gametype,gamename){this.m_DeskClass=_gamedesk2.default,function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0}(GameRoom_Jcby.prototype.__proto__||Object.getPrototypeOf(GameRoom_Jcby.prototype),"SetDesk",this).call(this,gametype,gamename)}}]),GameRoom_Jcby}();exports.default=GameRoom_Jcby},{"../../framework/gamemodel/room/gameroom":125,"./gamedesk":149}],152:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_gamechair=require("../../appbase/gamebase/gamechair"),_gamechair2=(obj=_gamechair)&&obj.__esModule?obj:{default:obj};var JcbyChair=function(_GameChair){function JcbyChair(ctrl,idx){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,JcbyChair),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(JcbyChair.__proto__||Object.getPrototypeOf(JcbyChair)).call(this,ctrl,idx))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(JcbyChair,_gamechair2.default),_createClass(JcbyChair,[{key:"setData",value:function(args){_get(JcbyChair.prototype.__proto__||Object.getPrototypeOf(JcbyChair.prototype),"setData",this).call(this,args),this.m_GameCtrl.__seatUpdate(this.m_nChairNo)}},{key:"setUData",value:function(args){_get(JcbyChair.prototype.__proto__||Object.getPrototypeOf(JcbyChair.prototype),"setUData",this).call(this,args),this.m_GameCtrl.__seatUpdate(this.m_nChairNo)}},{key:"setGameData",value:function(data){this.gamingData=data}}]),JcbyChair}();exports.default=JcbyChair},{"../../appbase/gamebase/gamechair":66}],153:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_gamectrl2=_interopRequireDefault(require("../../appbase/gamebase/gamectrl")),_jcby_user2=_interopRequireDefault(require("./jcby_user")),_jcby_chair2=_interopRequireDefault(require("./jcby_chair")),_BaseObj2=(_interopRequireDefault(require("../../framework/utils/config")),_interopRequireDefault(require("../../framework/gtea/BaseObj"))),_cannon_calc=require("./util/cannon_calc"),_comfunc2=_interopRequireDefault(require("../../framework/utils/comfunc")),_bullet2=_interopRequireDefault(require("./model/bullet")),_fish2=(_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_interopRequireDefault(require("./model/fish"))),_settings2=_interopRequireDefault(require("./meta/settings")),_gamemodelmgr2=_interopRequireDefault(require("../../framework/gamemodel/gamemodelmgr")),_gameconst2=_interopRequireDefault(require("../../app/gameconst")),_UIMgr2=_interopRequireDefault(require("../../framework/ui/UIMgr")),_fishtype2=_interopRequireDefault(require("./meta/fishtype")),_FlyText2=_interopRequireDefault(require("../../appbase/com/FlyText")),_vipmgr2=_interopRequireDefault(require("../../app/com/vipmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var JcbyCtrl=function(_GameCtrl){function JcbyCtrl(ui){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,JcbyCtrl);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(JcbyCtrl.__proto__||Object.getPrototypeOf(JcbyCtrl)).call(this));_this.m_GameUserClass=_jcby_user2.default,_this.m_GameChairClass=_jcby_chair2.default,_this.lockableEdge={up:0,left:0,down:_settings2.default.aquaSize.height,right:_settings2.default.aquaSize.width},_this.freezeBombID=22,_this.rangeBombId=23,_this.superBombId=24,_this.treasureId=41,_this.blitzBombId=44,_this.jumpBombId=45,_this.dragonId=46,_this.undeadLionId=48;var now=Date.now();return _this.fps="fast",_this.ui=ui,window.getLaserBeam=function(){_this.ui.userGetLaserBeam(1,0,{})},_this.__fishs=new Map,_this.__bullets={1:new Map,2:new Map,3:new Map,4:new Map},_this.__commonFishSpeed=0,_this.__stopFish=!1,_this.__stopFishPassedTime=0,_this.__bloodlust=!1,_this.__tripleshot=!1,_this.__piercebullet=!1,_this.__delayHit=0,_this.__drillHits={},_this.__updateTick=now,_this.__gameConfig={exchange:{},bet:{},fish:{},bullet:{}},_this.__bulletIdGenerator={1:0,2:0,3:0,4:0},_this.__autoLockEnabled={1:0,2:0,3:0,4:0},_this.__lockedFish={1:0,2:0,3:0,4:0},_this.__lastShootTime={1:now,2:now,3:now,4:now},_this.__agenting=!1,_this.__npcs=new Set,_this.__treasureId=0,_this.__exit=!1,_this.lockableEdge.up=_this.ui.getSeatPos(3).y,_this.lockableEdge.down=_this.ui.getSeatPos(1).y,ui.addEventListener("player_send_bullet",_this,_this.sendBullet),ui.addEventListener("player_send_laser",_this,_this.sendLaser),ui.addEventListener("player_end_laser",_this,_this.endLaser),ui.addEventListener("lock_enable",_this,function(args){var enable=args[0];this.__autoLockEnabled[this.mySeatIdx]=enable,this.__setLockFish(this.mySeatIdx,0)}),ui.addEventListener("fever_enable",_this,function(args){var enable=args[0];this.bloodLust(enable)}),ui.addEventListener("pierce_enable",_this,function(args){var enable=args[0];this.pierceBullet(enable)}),ui.addEventListener("triple_enable",_this,function(args){var enable=args[0];this.tripleShot(enable)}),ui.addEventListener("open_treasure",_this,_this.sendOpenTreasure),ui.addEventListener("summon_meteor",_this,_this.sendSummonMeteor),ui.addEventListener("quit_game",_this,_this.beforeExit),ui.addEventListener("settle_end",_this,_this.gameEnd),ui.addEventListener("player_useitem",_this,_this.useItem),ui.addEventListener("player_charge",_this,_this.userCharge),ui.addEventListener("swap_desk",_this,_this.swapDesk),ui.addEventListener("player_selectdice",_this,_this.selectDice),ui.addEventListener("getgoldsubsidies",_this,_this.getgoldsubsidies),ui.addEventListener("player_chgturrentskin",_this,function(args){var skin=args[0];skin<0||skin>_vipmgr2.default.GetVipLv()?_FlyText2.default.AddFlyText("参数错误!"):_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.ToS("ChgTurrentSkin",{skin:skin})}),_BaseObj2.default.getEventObj().addEventListener("jcby.fish.selected",_this,function(args){if(this.__autoLockEnabled[this.mySeatIdx]){var id=args[0];this.__setLockFish(this.mySeatIdx,id)}}),_this.looptimer=_this.loopCall(-1,1e3/30,_this.__loopUpdate),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(JcbyCtrl,_gamectrl2.default),_createClass(JcbyCtrl,[{key:"OnDelThis",value:function(){this.killTimer(this.looptimer),_BaseObj2.default.getEventObj().removeEventListener("jcby.fish.selected",this),this.ui.removeEventListener("player_send_bullet",this),this.ui.removeEventListener("player_send_laser",this),this.ui.removeEventListener("player_end_laser",this),this.ui.removeEventListener("lock_enable",this),this.ui.removeEventListener("open_treasure",this,this.sendOpenTreasure),this.ui.removeEventListener("quit_game",this,this.beforeExit),this.ui.removeEventListener("settle_end",this,this.gameEnd),this.ui.removeEventListener("player_useitem",this,this.useItem),this.ui.removeEventListener("player_charge",this,this.userCharge),this.ui.removeEventListener("swap_desk",this,this.swapDesk),this.ui.removeEventListener("player_selectdice",this,this.selectDice),this.ui.removeEventListener("player_chgturrentskin",this),this.ui=null,_get(JcbyCtrl.prototype.__proto__||Object.getPrototypeOf(JcbyCtrl.prototype),"OnDelThis",this).call(this)}},{key:"__seatUpdate",value:function(seatIdx){var chair=this.getChair(seatIdx);chair&&this.updateSeat(seatIdx,chair)}},{key:"OnSetCfgData",value:function(data){this.setupConfigData(data)}},{key:"OnSetGameData",value:function(data){this.recoveryGameData(data)}},{key:"OnGameStart",value:function(){_get(JcbyCtrl.prototype.__proto__||Object.getPrototypeOf(JcbyCtrl.prototype),"OnGameStart",this).call(this)}},{key:"setupConfigData",value:function(configData){this.__gameConfig.exchange.gold=configData.exchange_ratio_userscore,this.__gameConfig.exchange.coin=configData.exchange_ratio_fishscore,this.__gameConfig.exchange.step=configData.exchange_count,this.__gameConfig.bet.base=configData.min_bullet_multiple,this.__gameConfig.bet.min=1,this.__gameConfig.bet.max=configData.max_bullet_multiple/configData.min_bullet_multiple,this.__gameConfig.fish.rate=configData.fish_multiple,this.__gameConfig.fish.speed=configData.fish_speed,this.__gameConfig.fish.blood=configData.fish_blood||[],this.__gameConfig.bullet.speed=configData.bullet_speed,this.__gameConfig.fish.rate.unshift(0),this.__gameConfig.fish.speed.unshift(0),this.__gameConfig.fish.blood.unshift(0),this.ui.ismatch=configData.ismatch,this.ui.matchmode=configData.matchmode,(0,_cannon_calc.setTurretRate)(this.__gameConfig.bet)}},{key:"recoveryGameData",value:function(gameData){this.ui.setCurrentState(gameData.cur_sence||1,gameData.on_scence);for(var idx=0;idx<gameData.fish_score.length;idx++){var gold=gameData.fish_score[idx];gold&&this.setUserGold(idx+1,gold)}gameData.on_scence&&(this.__commonFishSpeed=gameData.fish_speed),gameData.last_locktime&&gameData.cur_tick-gameData.last_locktime<gameData.locked_time&&(this.__stopFishPassedTime=gameData.cur_tick-gameData.last_locktime,this.freezeStart());for(var i=0;i<this.m_szChairs.length;i++){var chair=this.m_szChairs[i];!chair.empty()&&chair.gamingData&&chair.gamingData.subturrent&&this.ui.setTripleShotState(chair.m_nChairNo,!0),!chair.empty()&&chair.gamingData&&chair.gamingData.fastturrent&&this.ui.setBloodLustState(chair.m_nChairNo,!0)}}},{key:"updateSeat",value:function(seatIdx,chair){this.ui.playerChange(seatIdx,chair),chair.empty()&&(this.__bullets[seatIdx].forEach(function(bullet){bullet.remove()}),this.__bullets[seatIdx].clear()),chair.gamingData&&chair.gamingData.isRobot?(this.__npcs.add(seatIdx),this.__agenting&&this.__agentSeat(seatIdx,!0)):(this.__npcs.delete(seatIdx),this.__agenting&&this.__agentSeat(seatIdx,!1))}},{key:"setUserGold",value:function(seatIdx,gold){this.ui.setPlayerGold(seatIdx,gold)}},{key:"setNpcAgent",value:function(seatIdx){var agenting=seatIdx===this.mySeatIdx;agenting?this.__npcs.forEach(function(npcSeatIdx){this.__agentSeat(npcSeatIdx,!0)}.bind(this)):this.__agenting&&this.__npcs.forEach(function(npcSeatIdx){this.__agentSeat(npcSeatIdx,!1)}.bind(this)),this.__agenting=agenting}},{key:"effectEnd",value:function(seatIdx,type,result){if("bullet_double"===type)this.ui.userDoubleTurretEnd(seatIdx);else if("bullet_free"===type){var totalScore=0;if(!_comfunc2.default.isNil(result))for(var _type in result)totalScore+=result[_type].fish_score;this.ui.userFreeTurretEnd(seatIdx,totalScore)}else if("bullet_laser"===type){var _totalScore=0;if(!_comfunc2.default.isNil(result))for(var _type2 in result)_totalScore+=result[_type2].fish_score;this.ui.userLaserBeamEnd(seatIdx,_totalScore)}}},{key:"drillBombResult",value:function(seatIdx,bulletId,score,g,bulletBet){var scoreBefore=this.__drillHits[bulletId]||0;delete this.__drillHits[bulletId],this.ui.drillBombResult(seatIdx,score,scoreBefore,g,bulletBet)}},{key:"__updateBullet",value:function(seatIdx,ids,level,special,locked,angle){var lockedFish=void 0,shootWaitMS=(special.bloodlust?500:1e3)/_settings2.default.comboShootCount;if(locked&&(lockedFish=this.__fishs.get(locked)),lockedFish){var pos=this.ui.getSeatPos(seatIdx),x=lockedFish.x-pos.x,y=pos.y-lockedFish.y,a=180*Math.atan2(x,y)/Math.PI;pos.invent&&(a=180-a),angle=a}var subProcess=function(){if(ids.length){var id=ids.shift();if(this.__bullets[seatIdx].has(id))this.__bullets[seatIdx].get(id).update({special:special});else{var _pos=this.ui.getSeatPos(seatIdx),bullet=new _bullet2.default(id,seatIdx,_pos,level,special,lockedFish,angle);this.__bullets[seatIdx].set(id,bullet)}this.timerCall(shootWaitMS,subProcess,{})}}.bind(this);subProcess()}},{key:"sendLaser",value:function(args){if(!this.__exit){var seatIdx=args[0],angle=args[1],pos0=this.ui.getSeatPos(seatIdx),pos1={},deg=(180-angle)*Math.PI/180;pos1.x=pos0.x+1613*Math.sin(deg),pos1.y=pos0.y+1613*Math.cos(deg);var hittedFishs=this.getLaserHitFishs(seatIdx,pos0,pos1);_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.laser(seatIdx,angle,hittedFishs)}}},{key:"endLaser",value:function(_ref){var seatIdx=_slicedToArray(_ref,1)[0];_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.laserEndImmediate(seatIdx)}},{key:"sendBullet",value:function(args){if(!this.__exit){var seatIdx=args[0],level=args[1],special=args[2],locked=args[3],angle=args[4],size=args[5];special.pierce||(special.pierce=0);var now=Date.now(),bulletSeedId=this.__bulletIdGenerator[seatIdx]+1,robot=seatIdx!==this.mySeatIdx;if(!(now-this.__lastShootTime[seatIdx]<=0)&&(size&&(this.__lastShootTime[seatIdx]=now+(!robot&&this.__bloodlust?500:1e3)/_settings2.default.comboShootCount*size),size=Math.min(size,_settings2.default.maxBulletCount-this.__bullets[seatIdx].size))){var bet=level*this.__gameConfig.bet.base,id=null;if(robot||(id=1e5*this.mySeatIdx+1e3*seatIdx+bulletSeedId,this.__bloodlust&&(special.bloodlust=!0),this.__piercebullet&&(special.pierce=5)),_comfunc2.default.isNil(this.m_DeskUser)||(this.m_DeskUser.fire(seatIdx,angle,bet,special,id,size,locked),this.__tripleshot&&(this.m_DeskUser.fire(seatIdx,angle+15,bet,special,id+size,size,0),this.m_DeskUser.fire(seatIdx,angle-15,bet,special,id+2*size,size,0))),!robot&&!special.drill){for(var ids=[],prefixId=1e5*this.mySeatIdx+1e3*seatIdx,i=0;i<size;i++)ids.push(prefixId+(i+bulletSeedId)%999);if(this.__updateBullet(seatIdx,ids,level,special,locked,angle),this.__tripleshot){for(var ids2=[],ids3=[],_i=0;_i<size;_i++)ids2.push(prefixId+(_i+bulletSeedId+size)%999),ids3.push(prefixId+(_i+bulletSeedId+2*size)%999);this.__updateBullet(seatIdx,ids2,level,special,0,angle+15),this.__updateBullet(seatIdx,ids3,level,special,0,angle-15)}}var count=size;this.__tripleshot&&(count+=2*size),this.__bulletIdGenerator[seatIdx]=(bulletSeedId-1+count)%999}}}},{key:"tripleShot",value:function(){var enable=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.__tripleshot=enable,_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.tripleShot(enable),this.ui.setTripleShotState(this.mySeatIdx,enable)}},{key:"bloodLust",value:function(){var enable=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.__bloodlust=enable,_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.bloodLust(enable),this.ui.setBloodLustState(this.mySeatIdx,enable)}},{key:"pierceBullet",value:function(){var enable=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.__piercebullet=enable,this.ui.setPierceBullet(enable)}},{key:"sendOpenTreasure",value:function(){_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.openTreasure()}},{key:"sendSummonMeteor",value:function(){_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.SummonMeteor()}},{key:"treasureOpened",value:function(args){args.cid===this.mySeatIdx&&(this.__treasureId=0,this.ui.treasureOpened(args))}},{key:"fishIn",value:function(list){var now=Date.now();list.forEach(function(fishData){if(fishData.type===this.treasureId)return this.__treasureId=fishData.id,void this.ui.showTreasureBox();var fishtypes=_fishtype2.default.szData;if(fishData.type in fishtypes){var speed=this.__commonFishSpeed||this.__gameConfig.fish.speed[fishData.type],passed=fishData.time.current-fishData.time.create-fishData.time.delay-this.__stopFishPassedTime,fish=new _fish2.default(fishData,speed,passed,now);this.__fishs.set(fishData.id,fish)}},this)}},{key:"setFishHp",value:function(fishId,hp){if(fishId===this.__treasureId){var maxHp=this.__gameConfig.fish.blood[this.treasureId];this.ui.updateTreasure(hp,maxHp)}}},{key:"playerFired",value:function(seatIdx,angle,bet,special,ids,locked,cost,gold){this.ui.setPlayerGold(seatIdx,gold);var level=bet/this.__gameConfig.bet.base;seatIdx===this.mySeatIdx||this.__isAgenting(seatIdx)||(this.ui.updateTurret({seatIdx:seatIdx,angle:angle,level:level,special:special}),this.__lockedFish[seatIdx]!==locked&&this.ui.lockFish(seatIdx,locked)),(seatIdx!=this.mySeatIdx||special.drill)&&this.__updateBullet(seatIdx,ids,level,special,locked,angle)}},{key:"playerHitted",value:function(seatIdx,data){if(this.__delayHit)this.timerCall(200,this.playerHitted,[seatIdx,data]);else{var bullet=this.__bullets[seatIdx].get(data.bullet.id);if(bullet&&(bullet.hitted(),!bullet.special.drill&&bullet.pierce<=0&&this.__bullets[seatIdx].delete(data.bullet.id)),data.result.killed){bullet&&bullet.special.drill&&(this.__drillHits[data.bullet.id]||(this.__drillHits[data.bullet.id]=0),this.__drillHits[data.bullet.id]+=data.result.score);var shake=this.__gameConfig.fish.rate[data.fish.type]>=30,getScore=!0,fishDie=!1;if(data.result.deaded){for(var key in this.__lockedFish)data.fish.id===this.__lockedFish[key]&&this.__setLockFish(~~key,0);this.__fishs.delete(data.fish.id),fishDie=!0}else{var fish=this.__fishs.get(data.fish.id);fish&&fish.damage(1e3)}if(data.fish.type===this.freezeBombID)this.freezeStart();else if(data.fish.type===this.rangeBombId)this.ui.rangeBombOccur(data.fish.id),shake=!0;else if(data.fish.type===this.superBombId)this.ui.superBombOccur(data.fish.id),shake=!0;else if(data.fish.type===this.blitzBombId)getScore=!1,fishDie=!1,this.__stopFish=!0,this.__delayHit=!0,data.result.bombed.list.forEach(function(data){this.__fishs.delete(data.id)},this),this.ui.blitzBomb(seatIdx,data.fish.id,data.result.bombed.list,data.bullet.bet),this.timerCall(3e3,function(){this.__stopFish=!1,this.__delayHit=!1,this.ui.blitzBombEnd(seatIdx,data.result.score,data.fish.id,data.bullet.bet,data.result.bombed.list),this.ui.setPlayerGold(seatIdx,data.gold)});else if(data.fish.type===this.jumpBombId)getScore=!1,fishDie=!1,this.__stopFish=!0,this.__delayHit=!0,data.result.bombed.list.forEach(function(data){this.__fishs.delete(data.id)},this),this.ui.jumpBomb(seatIdx,data.fish.id,data.result.bombed.list),this.timerCall(5e3,function(){this.__stopFish=!1,this.__delayHit=!1,this.ui.jumpBombEnd(seatIdx,data.result.score,data.bullet.bet,data.result.bombed.list),this.ui.setPlayerGold(seatIdx,data.gold)});else if(data.fish.type===this.dragonId)getScore=!1,this.ui.dragonKingWakeup(seatIdx,data.result.score,data.fish.id,data.bullet.bet,data.fish.awake.base,data.fish.awake.add,data.gold);else if(data.fish.type===this.undeadLionId)getScore=!1,this.ui.lionKingDropRoulette(seatIdx,data.result.score,data.fish.id,data.bullet.bet,data.fish.awake.base,data.fish.awake.add,data.gold);else if(data.result.bombedFishKing){var list=[];data.result.bombedFishKing.forEach(function(fishId,idx){var fish=this.__fishs.get(fishId);if(fish){this.__fishs.delete(fishId);var score=this.__gameConfig.fish.rate[fish.type]*data.bullet.bet;list.push({id:fishId,score:score})}},this),this.ui.fishKingBombFish(seatIdx,data.fish.id,list,data.bullet.bet)}shake&&this.ui.shakeScreen(),getScore&&(this.ui.setPlayerGold(seatIdx,data.gold),this.ui.userGetScore(seatIdx,data.result.score,data.fish.id,data.fish.type,data.bullet.bet)),data.result.drop.effect&&("bullet_double"==data.result.drop.effect.variable?(this.ui.userGetDoubleTurret(seatIdx,data.fish.id),seatIdx===this.mySeatIdx&&this.clearTBP()):"bullet_free"===data.result.drop.effect.variable?(this.ui.userGetFreeTurret(seatIdx,data.fish.id,data.result.drop.effect),seatIdx===this.mySeatIdx&&this.clearTBP()):"bullet_laser"===data.result.drop.effect.variable?(this.ui.userGetLaserBeam(seatIdx,data.fish.id,data.result.drop.effect),seatIdx===this.mySeatIdx&&this.clearTBP()):"item_bit"===data.result.drop.effect.variable?(this.ui.userGetDrillTurret(seatIdx,data.fish.id,data.result.drop.effect),seatIdx===this.mySeatIdx&&this.clearTBP()):"addcd"===data.result.drop.effect.variable?this.ui.userAddFreeTime(seatIdx,data.fish.id,data.result.drop.effect):"dice"===data.result.drop.effect.variable&&this.ui.userGetDice(seatIdx,data.fish.id,data.result.drop.effect)),data.result.drop.pearl&&this.ui.userGetPearlDrop(seatIdx,data.fish.id),data.result.drop.redpacket&&this.ui.flyRedPacket({seatIdx:seatIdx,fishid:data.fish.id,value:data.result.drop.redpacket}),data.bullet.special.free&&this.ui.addFreeScore(seatIdx,data.result.score),fishDie&&this.ui.fishDie(data.fish.id)}}}},{key:"playerLaserBeam",value:function(seatIdx,angle,score,bulletBet,kills,gold){var _this2=this;this.ui.setPlayerGold(seatIdx,gold),seatIdx===this.mySeatIdx||this.__isAgenting(seatIdx)||(this.ui.updateTurret({seatIdx:seatIdx,angle:angle}),this.ui.activeTurretLaser(seatIdx)),kills.forEach(function(data){_this2.ui.userGetScore(seatIdx,data.score,data.id,data.kind,bulletBet),_this2.__fishs.delete(data.id),_this2.ui.fishDie(data.id)})}},{key:"clearTBP",value:function(){this.tripleShot(!1),this.bloodLust(!1),this.pierceBullet(!1),this.ui.clearTBP()}},{key:"waveStart",value:function(sceneIdx,commonSpeed){for(var key in this.__commonFishSpeed=commonSpeed,this.__fishs.forEach(function(fish){fish.escape()}),this.__fishs.clear(),this.__lockedFish)this.__setLockFish(~~key,0);this.ui.waveStart(sceneIdx)}},{key:"waveEnd",value:function(){this.__commonFishSpeed=0,this.ui.waveEnd()}},{key:"freezeStart",value:function(){this.__stopFish=!0,this.ui.freezeStart()}},{key:"freezeEnd",value:function(){this.__stopFish=!1,this.ui.freezeEnd()}},{key:"__setLockFish",value:function(seatIdx,fishId){(seatIdx===this.mySeatIdx||this.__isAgenting(seatIdx))&&(this.__lockedFish[seatIdx]=fishId,this.ui.lockFish(seatIdx,fishId))}},{key:"__agentSeat",value:function(seatIdx,enable){this.__autoLockEnabled[seatIdx]=enable,this.__setLockFish(seatIdx,0),this.ui.setAgentWork(seatIdx,enable)}},{key:"__isAgenting",value:function(seatIdx){return!(!this.__agenting||!this.__npcs.has(seatIdx))}},{key:"__sendHitFish",value:function(seatIdx,bullet,fish){if(!bullet.special.drill&&bullet.pierce<=0&&this.__bullets[seatIdx].delete(bullet.id),seatIdx===this.mySeatIdx||this.__isAgenting(seatIdx))if(fish||bullet.special.drill)if(seatIdx==this.mySeatIdx&&fish&&fish.beHit(),fish&&fish.oversea)_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.hitted(seatIdx,fish.id,bullet.id,bullet.level*this.__gameConfig.bet.base,[]);else{var fishIds=[];if(fish.type===this.rangeBombId){fish.x,fish.y;this.__fishs.forEach(function(otherFish){fish!==otherFish&&300>=(0,_cannon_calc.getDistance)(otherFish,fish)&&fishIds.push(otherFish.id)})}_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.hitted(seatIdx,fish.id,bullet.id,bullet.level*this.__gameConfig.bet.base,fishIds)}else _comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.hitted(seatIdx,-1,bullet.id,bullet.level*this.__gameConfig.bet.base,[])}},{key:"__bombHitFish",value:function(seatIdx,bullet){_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.drillBomb(seatIdx,bullet.id,[]),this.__bullets[seatIdx].delete(bullet.id)}},{key:"__loopUpdate",value:function(){var _this3=this,now=Date.now(),stop=this.__stopFish,updatedFishId=[],freeBullets=[],lockableFish=[],_loop=function(strSeatIdx){var seatIdx=parseInt(strSeatIdx);_this3.__bullets[seatIdx].forEach(function(bullet){var fish=this.__fishs.get(bullet.locked);if(fish&&-1===updatedFishId.indexOf(fish.id)&&(fish.checkUpdate(now,stop),updatedFishId.push(fish.id)),fish&&fish.oversea)return bullet.hitted(),void this.__sendHitFish(seatIdx,bullet,fish);bullet.checkUpdate(now,fish),fish&&fish.checkHit(bullet)?(bullet.hitted(),this.__sendHitFish(seatIdx,bullet,fish)):bullet.bombed?bullet.special.drill?(seatIdx===this.mySeatIdx||this.__isAgenting(seatIdx))&&this.__bombHitFish(seatIdx,bullet):this.__sendHitFish(seatIdx,bullet):freeBullets.push(bullet)},_this3),_this3.__fishs.has(_this3.__lockedFish[seatIdx])||_this3.__setLockFish(seatIdx,0)};for(var strSeatIdx in this.__bullets)_loop(strSeatIdx);this.__fishs.forEach(function(fish,id){if(-1===updatedFishId.indexOf(id)&&fish.checkUpdate(now,stop),fish.oversea)for(var key in _comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.fishOut(id),this.__fishs.delete(id),this.__lockedFish)this.__lockedFish[key]===id&&this.__setLockFish(~~key,0);else{var lockable=!0;-1===_settings2.default.lockableFishList.indexOf(fish.type)?lockable=!1:fish.checkLock(this.lockableEdge)||(lockable=!1),lockable&&lockableFish.push(id);for(var i=0;i<this.m_szChairs.length;i++){var _seatIdx=i+1;this.__autoLockEnabled[_seatIdx]&&(lockable||this.__lockedFish[_seatIdx]!==id||this.__setLockFish(_seatIdx,0))}freeBullets=freeBullets.filter(function(bullet){return!fish.checkHit(bullet)||(bullet.hitted(),this.__sendHitFish(bullet.seatIdx,bullet,fish),!1)},this)}},this);for(var tempList=lockableFish.filter(function(n){return-1===_settings2.default.robotIgnoreList.indexOf(n)}),i=0;i<this.m_szChairs.length;i++){var _seatIdx2=i+1;if(this.__autoLockEnabled[_seatIdx2]&&0===this.__lockedFish[_seatIdx2]&&lockableFish.length>0){var randomId=lockableFish[Math.floor(Math.random()*lockableFish.length)];if(_seatIdx2==this.mySeatIdx)for(var chkidx=1e3,j=0;j<lockableFish.length;j++){var fishdata=this.__fishs.get(lockableFish[j]),idx=_settings2.default.GetLookFishIdx(fishdata.type);idx<chkidx&&(chkidx=idx,randomId=lockableFish[j])}else randomId=tempList[Math.floor(Math.random()*tempList.length)];this.__setLockFish(_seatIdx2,randomId)}}this.__updateTick=now}},{key:"getLaserHitFishs",value:function(seatIdx,pos0,pos1){var rets=[];return this.__fishs.forEach(function(fish,id){fish.oversea||fish.checkLaserHit(pos0,pos1)&&rets.push(id)}),rets}},{key:"beforeExit",value:function(){this.__exit||(this.__exit=!0,this.ui.stopSendBullet(),this.ui.startSettle(),_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.settle())}},{key:"swapDesk",value:function(){this.__exit||(this.ui.getPlayerGold(this.mySeatIdx)<=0?_FlyText2.default.AddFlyText("金币不足,不能换桌!"):(this.__exit=!0,this.ui.stopSendBullet(),_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,"SwapDesk",[])))}},{key:"gameEnd",value:function(msg){_gamemodelmgr2.default.getInstance().ExitGameRoom(!1),msg&&_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:msg},!0,!0)}},{key:"useItem",value:function(args){_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.useItem(args)}},{key:"itemAddFishScore",value:function(args){this.ui.itemGetScore(args,!0)}},{key:"selectDice",value:function(args){_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.selectDice(args)}},{key:"OnUserDropItem",value:function(args){this.ui.OnUserDropItem(args)}},{key:"OnUserReturnScore",value:function(args){this.ui.setPlayerGold(args.chairid,args.g)}},{key:"userCharge",value:function(agv){_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.userCharge(agv)}},{key:"OnUserCharge",value:function(args){this.ui.itemGetScore(args,!1)}},{key:"OnUserSelectDice",value:function(args){this.ui.OnUserSelectDice(args)}},{key:"UserSelectDiceErr",value:function(args){_FlyText2.default.AddFlyText(args.errmsg),this.ui.currentView.diceLayer.visible=!1}},{key:"OnMeteoritesData",value:function(args){this.showmeteorbutton||(this.ui.showMeteorButton(),this.showmeteorbutton=!0),this.ui.updateMeteorButton(args.v,args.max)}},{key:"OnUserOpenMeteorites",value:function(args){var _this4=this;args.chairno==this.mySeatIdx&&this.ui.updateMeteorButton(0,1),this.__stopFish=!0,this.__delayHit=!0,this.ui.meteorRain(args.chairno,[]),this.timerCall(4e3,function(){_this4.__stopFish=!1,_this4.__delayHit=!1,_this4.ui.meteorRainResult(args.chairno,args.value),_this4.ui.setPlayerGold(args.chairno,args.g)})}},{key:"updateGoldSubsidies",value:function(args){this.ui.updateGoldSubsidies(args)}},{key:"OnUserGoldSubsidies",value:function(args){args.chairno==this.mySeatIdx&&(_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"领取"+args.gold+"金币补助!"},!0,!0),_UIMgr2.default.getInstance().CloseUI("金币补助界面")),this.ui.setPlayerGold(args.chairno,args.g)}},{key:"getgoldsubsidies",value:function(){_comfunc2.default.isNil(this.m_DeskUser)||this.m_DeskUser.getgoldsubsidies()}},{key:"OnUserSubTurrent",value:function(args){var chairno=args.chairno,f=args.f;chairno!==this.mySeatIdx&&this.ui.setTripleShotState(chairno,f)}},{key:"OnUserFastTurrent",value:function(args){var chairno=args.chairno,f=args.f;chairno!==this.mySeatIdx&&this.ui.setBloodLustState(chairno,f)}},{key:"OnExchangeFishScore",value:function(chairno,value){this.setUserGold(chairno,value),this.ui.OnExchangeFishScore(chairno)}},{key:"OnUserChgTurrentSkin",value:function(args){this.ui.OnUserChgTurrentSkin(args)}},{key:"AppPause",value:function(){this.ui.AppPause()}}]),JcbyCtrl}();exports.default=JcbyCtrl},{"../../app/com/vipmgr":4,"../../app/gameconst":5,"../../appbase/com/FlyText":52,"../../appbase/gamebase/gamectrl":67,"../../framework/data/playerdata_mgr":117,"../../framework/gamemodel/gamemodelmgr":123,"../../framework/gtea/BaseObj":126,"../../framework/ui/UIMgr":142,"../../framework/utils/comfunc":144,"../../framework/utils/config":145,"./jcby_chair":152,"./jcby_user":154,"./meta/fishtype":155,"./meta/settings":156,"./model/bullet":157,"./model/fish":158,"./util/cannon_calc":174}],154:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_gamedeskuser2=_interopRequireDefault(require("../../appbase/net/gamedeskuser")),_playerdata_mgr2=_interopRequireDefault(require("../../framework/data/playerdata_mgr")),_gtea2=_interopRequireDefault(require("../../framework/gtea/gtea"));_interopRequireDefault(require("../../appbase/com/FlyText"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var JcbyUser=function(_GameDeskUser){function JcbyUser(ctrl){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,JcbyUser),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(JcbyUser.__proto__||Object.getPrototypeOf(JcbyUser)).call(this,ctrl))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(JcbyUser,_gamedeskuser2.default),_createClass(JcbyUser,[{key:"JoinDesk",value:function(sname,gname,deskNo,chairNo){gname+="/"+deskNo;var fullpath=_gtea2.default.rpc.MakeFullPath(sname,gname);this.m_nAutoJoinChairNo=chairNo,this.m_PlayerData=_playerdata_mgr2.default.getInstance().getMe();this.JoinGroup(fullpath,"CGameDeskUser",[_playerdata_mgr2.default.getInstance().getMeUID(),"unknown",[]])}},{key:"OnRemoteCreate",value:function(agv){this.m_GameCtrl.OnSetDeskInfo(agv),this.OnJoinChair()}},{key:"OnBreakPlayer",value:function(errflag,errmsg,agv){this.m_GameCtrl.gameEnd("您已退出房间:"+errmsg)}},{key:"netOnJoinChairOk",value:function(args){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(JcbyUser.prototype.__proto__||Object.getPrototypeOf(JcbyUser.prototype),"netOnJoinChairOk",this).call(this,args),this.m_GameCtrl.mySeatIdx=this.m_nChairNo,this.m_GameCtrl.ui.setMySeatIdx(this.m_nChairNo),this.m_GameCtrl.ui.OnBagChg()}},{key:"netOnAlarmFish",value:function(args){var text=args.Text,code=args.Code,rate=args.rate;this.m_GameCtrl.ui.showText(text,code,rate)}},{key:"netSendFishData",value:function(array){var list=array.map(function(item){return{id:item.fish_id,type:item.fish_kind,redpacketfish:item.redpacketfish,path:{type:item.path_type,id:item.path_id},offset:{x:item.fpoint&&item.fpoint.x,y:item.fpoint&&item.fpoint.y},speed:{fixedTime:item.fpoint&&item.fpoint.tm},loop:{times:item.fpoint&&item.fpoint.loop,skip:item.fpoint&&item.fpoint.skip},time:{delay:1e3*item.delay,create:item.build_tick||0,current:item.cur_tick||0}}});this.m_GameCtrl.fishIn(list)}},{key:"netOnGetCatchFish",value:function(data){this.m_GameCtrl.ui.showSettleInfo(data)}},{key:"netOnExchangeFishScore",value:function(args){var chair_id=args.chair_id,exchange_fish_score=args.exchange_fish_score;args.swap_fish_score;this.m_GameCtrl.OnExchangeFishScore(chair_id,exchange_fish_score)}},{key:"netonUserFire",value:function(resp){var seatIdx=resp.cid,angle=parseFloat(resp.a),bet=resp.mul,special={double:resp.bk,free:resp.fr,drill:resp.bit,bloodlust:resp.bl,pierce:resp.pi},ids=resp.ids,locked=resp.lf,cost=resp.fs,gold=resp.g;this.m_GameCtrl.playerFired(seatIdx,angle,bet,special,ids,locked,cost,gold)}},{key:"netonUserCatchFish",value:function(resp){var seatIdx=resp.chair_id,data={gold:resp.g,bullet:{id:resp.bullet_id,bet:resp.bullet_mul,special:{double:resp.is_double,free:resp.is_free}},fish:{id:resp.fish_id,type:resp.fish_kind,awake:resp.awake},result:{killed:resp.sess,deaded:resp.is_dead,score:resp.fish_score,drop:{effect:resp.effect,pearl:resp.got_gem,redpacket:resp.redpacket},bombedFishKing:resp.sweep_fishids,bombed:resp.bombfish}};this.m_GameCtrl.playerHitted(seatIdx,data)}},{key:"netOnChangeSence",value:function(args){var cur_sence=args.cur_sence,fish_speed=args.fish_speed;this.m_GameCtrl.waveStart(cur_sence,fish_speed)}},{key:"netOnScenceEnd",value:function(){this.m_GameCtrl.waveEnd()}},{key:"netOnLockScreen",value:function(){this.m_GameCtrl.freezeStart()}},{key:"netOnTimerLockTimeout",value:function(){this.m_GameCtrl.freezeEnd()}},{key:"netOnTimerBulletIonTimeout",value:function(args){var chairid=args.chairid;this.m_GameCtrl.ui.userSpecialTurretEnd(chairid)}},{key:"netOnEndEffect",value:function(args){var chairid=args.chairid,type=args.type,result=args.result;this.m_GameCtrl.effectEnd(chairid,type,result)}},{key:"netonUserBitBombFish",value:function(args){var chairid=args.chairid,score=args.score,g=(args.list,args.g),bullet_mul=args.bullet_mul,bulletID=args.bulletID;this.m_GameCtrl.drillBombResult(chairid,bulletID,score,g,bullet_mul)}},{key:"netOnChgRobotAgent",value:function(args){var android_chairid=args.android_chairid;this.m_GameCtrl.setNpcAgent(android_chairid)}},{key:"netOnFishBlood",value:function(args){var fid=args.fid,v=args.v;this.m_GameCtrl.setFishHp(fid,v)}},{key:"netonUserOpenChest",value:function(args){this.m_GameCtrl.treasureOpened(args)}},{key:"netOnItemAddFishScore",value:function(args){this.m_GameCtrl.itemAddFishScore(args)}},{key:"netOnUserDropItem",value:function(args){this.m_GameCtrl.OnUserDropItem(args)}},{key:"netShowProbability",value:function(args){}},{key:"netonUserReturnScore",value:function(args){this.m_GameCtrl.OnUserReturnScore(args)}},{key:"netOnUserCharge",value:function(args){this.m_GameCtrl.OnUserCharge(args)}},{key:"netOnUserSelectDice",value:function(args){this.m_GameCtrl.OnUserSelectDice(args)}},{key:"netOnMeteoritesData",value:function(args){this.m_GameCtrl.OnMeteoritesData(args)}},{key:"netOnUserOpenMeteorites",value:function(args){this.m_GameCtrl.OnUserOpenMeteorites(args)}},{key:"netUserSelectDiceErr",value:function(args){this.m_GameCtrl.UserSelectDiceErr(args)}},{key:"netupdateGoldSubsidies",value:function(args){this.m_GameCtrl.updateGoldSubsidies(args)}},{key:"netOnUserGoldSubsidies",value:function(args){this.m_GameCtrl.OnUserGoldSubsidies(args)}},{key:"netOnUserSubTurrent",value:function(args){this.m_GameCtrl.OnUserSubTurrent(args)}},{key:"netOnUserFastTurrent",value:function(args){this.m_GameCtrl.OnUserFastTurrent(args)}},{key:"netOnUserChgTurrentSkin",value:function(args){this.m_GameCtrl.OnUserChgTurrentSkin(args)}},{key:"netonUserLaserHitFish",value:function(args){var seatIdx=args.chairid,angle=args.angle,score=args.fish_score,bulletBet=args.bullet_mul,g=args.g,kills=args.getfish;this.m_GameCtrl.playerLaserBeam(seatIdx,angle,score,bulletBet,kills,g)}},{key:"fire",value:function(seatIdx,angle,bet,_ref,ids,size,locked){var double=_ref.double,free=_ref.free,drill=_ref.drill,bloodlust=_ref.bloodlust,pierce=_ref.pierce;this.ToS("UserFire",{cid:seatIdx,bk:double,fr:free,bit:drill,bl:bloodlust,pi:pierce,a:angle+"",mul:bet,lf:locked,n:size,bullet_id:ids})}},{key:"laser",value:function(seatIdx,angle,fishs){this.ToS("LaserHitFish",{chairid:seatIdx,angle:angle,flist:fishs})}},{key:"laserEndImmediate",value:function(seatIdx){this.ToS("EndLaserHitFish",{chairid:seatIdx})}},{key:"hitted",value:function(seatIdx,fishId,bulletId,bulletBet,extraFishIds){this.ToS("UserCatchFish",{chairid:seatIdx,fishID:fishId,bulletID:bulletId,bulletMul:bulletBet,fishids:extraFishIds})}},{key:"drillBomb",value:function(seatIdx,bulletId,extraFishIds){this.ToS("UserBitBombFish",{chairid:seatIdx,bulletID:bulletId,fishids:extraFishIds})}},{key:"lkAttack",value:function(fishId){this.ToS("LKCatchFish",{fid:fishId})}},{key:"fishOut",value:function(id){this.ToS("FishOut",{fishid:id})}},{key:"openTreasure",value:function(){this.ToS("CatchChest")}},{key:"settle",value:function(){this.ToS("GetCatchFish")}},{key:"useItem",value:function(args){this.ToS("UseItem",args)}},{key:"userCharge",value:function(agv){this.ToS("UseChargeItem",agv)}},{key:"selectDice",value:function(args){this.ToS("UserSelectDice",args)}},{key:"SummonMeteor",value:function(){this.ToS("OpenMeteorites")}},{key:"getgoldsubsidies",value:function(){this.ToS("UserGoldSubsidies")}},{key:"tripleShot",value:function(enable){this.ToS("UserSubTurrent",{f:enable})}},{key:"bloodLust",value:function(enable){this.ToS("UserFastTurrent",{f:enable})}}]),JcbyUser}();exports.default=JcbyUser},{"../../appbase/com/FlyText":52,"../../appbase/net/gamedeskuser":101,"../../framework/data/playerdata_mgr":117,"../../framework/gtea/gtea":127}],155:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var fishTypes_Jcby=function(){function fishTypes_Jcby(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,fishTypes_Jcby)}return _createClass(fishTypes_Jcby,null,[{key:"szData",get:function(){return{1:{type:"ani",ani:"y1.ani"},2:{type:"ani",ani:"y2.ani"},3:{type:"ani",ani:"y3.ani"},4:{type:"ani",ani:"y4.ani"},5:{type:"ani",ani:"y5.ani",hitPoint:[{x:0,y:24}]},6:{type:"ani",ani:"y6.ani"},7:{type:"ani",ani:"y7.ani",hitPoint:[{x:0,y:32}]},8:{type:"ani",ani:"y8.ani",hitPoint:[{x:0,y:32}]},9:{type:"ani",ani:"y9.ani"},10:{type:"ani",ani:"y10.ani",hitPoint:[{x:0,y:40}]},11:{type:"ani",ani:"y11.ani",hitPoint:[{x:0,y:40}]},12:{type:"ani",ani:"y12.ani",hitPoint:[{x:0,y:40}]},13:{type:"ani",ani:"y13.ani",hitPoint:[{x:0,y:-40},{x:0,y:32},{x:0,y:64}]},14:{type:"ani",ani:"y14.ani",hitPoint:[{x:0,y:-64},{x:0,y:-32},{x:0,y:32},{x:0,y:64}]},15:{type:"ani",ani:"y15.ani",hitPoint:[{x:0,y:40},{x:24,y:8},{x:-24,y:8}]},16:{type:"ani",ani:"y16.ani",hitPoint:[{x:0,y:-40},{x:0,y:40},{x:0,y:80},{x:0,y:130}]},17:{type:"ani",ani:"y17.ani",hitPoint:[{x:0,y:-40},{x:0,y:40},{x:0,y:80},{x:0,y:130}]},18:{type:"ani",ani:"y18.ani",scale:1.2,hitPoint:[{x:0,y:-40},{x:0,y:40},{x:0,y:80}]},19:{type:"ani",ani:"y19.ani",scale:1.2,hitPoint:[{x:0,y:-40},{x:0,y:40},{x:30,y:0},{x:-30,y:0}]},20:{type:"ani",ani:"y20.ani",scale:1.2,hitPoint:[{x:0,y:-40},{x:0,y:40},{x:40,y:0},{x:-40,y:0}]},21:{type:"ani",ani:"y21.ani",scale:1.2,hitPoint:[{x:0,y:-40},{x:0,y:40},{x:40,y:0},{x:-40,y:0}]},22:{type:"ani",ani:"freeze_bomb.ani",scale:1.2},23:{type:"ani",ani:"range_bomb.ani",scale:1.2},24:{type:"ani",ani:"super_bomb.ani",scale:1.2},25:{type:"ani",ani:"y4.ani",hitPoint:[{x:0,y:64},{x:55.425625842204084,y:-31.99999999999999},{x:-55.425625842204084,y:-31.99999999999999}],halo:2,team:3},26:{type:"ani",ani:"y5.ani",hitPoint:[{x:0,y:64},{x:55.425625842204084,y:-31.99999999999999},{x:-55.425625842204084,y:-31.99999999999999}],halo:2,team:3},27:{type:"ani",ani:"y8.ani",hitPoint:[{x:0,y:64},{x:55.425625842204084,y:-31.99999999999999},{x:-55.425625842204084,y:-31.99999999999999}],halo:2,team:3},28:{type:"ani",ani:"y6.ani",hitPoint:[{x:0,y:64},{x:0,y:-64},{x:64,y:0},{x:-64,y:0}],halo:3,team:4},29:{type:"ani",ani:"y7.ani",hitPoint:[{x:0,y:64},{x:0,y:-64},{x:64,y:0},{x:-64,y:0}],halo:3,team:4},30:{type:"ani",ani:"y10.ani",hitPoint:[{x:0,y:64},{x:0,y:-64},{x:64,y:0},{x:-64,y:0}],halo:3,team:4},31:{type:"ani",ani:"y1.ani",halo:1},32:{type:"ani",ani:"y2.ani",halo:1},33:{type:"ani",ani:"y3.ani",halo:1},34:{type:"ani",ani:"y4.ani",halo:1},35:{type:"ani",ani:"y5.ani",hitPoint:[{x:0,y:24}],halo:1},36:{type:"ani",ani:"y6.ani",halo:1},37:{type:"ani",ani:"y7.ani",hitPoint:[{x:0,y:32}],halo:1},38:{type:"ani",ani:"y8.ani",hitPoint:[{x:0,y:32}],halo:1},39:{type:"ani",ani:"y9.ani",halo:1},40:{type:"ani",ani:"y10.ani",hitPoint:[{x:0,y:40}],halo:1},42:{type:"ani",ani:"y42.ani",hitPoint:[{x:0,y:-50},{x:0,y:50}]},43:{type:"ani",ani:"y43.ani",scale:1.2},44:{type:"ani",ani:"y44.ani",scale:1.5,hitPoint:[{x:0,y:-50},{x:0,y:50}]},45:{type:"ani",ani:"y45.ani",scale:1.5,hitPoint:[{x:-50,y:-50},{x:50,y:50},{x:-25,y:-102},{x:-25,y:80}]},46:{type:"ani",ani:"y46.ani",scale:1.8,hitPoint:[{x:0,y:-40},{x:0,y:-80},{x:0,y:-120},{x:0,y:-160},{x:0,y:-200},{x:0,y:-240},{x:0,y:-280},{x:0,y:-320},{x:0,y:-360},{x:0,y:-400},{x:0,y:-440},{x:0,y:-480},{x:0,y:-520},{x:0,y:-560},{x:0,y:-600},{x:0,y:-640},{x:0,y:40},{x:0,y:80},{x:0,y:120},{x:0,y:160},{x:0,y:200},{x:0,y:240},{x:0,y:280},{x:0,y:320},{x:0,y:360},{x:0,y:400},{x:0,y:440},{x:0,y:280},{x:0,y:520},{x:0,y:560},{x:0,y:600},{x:0,y:640}]},47:{type:"ani",ani:"y47.ani",scale:1.8,hitPoint:[{x:-25,y:-200},{x:-75,y:-80},{x:-25,y:50},{x:-25,y:100},{x:-15,y:250},{x:85,y:-50},{x:-32,y:-142}]},48:{type:"ani",ani:"y48.ani",scale:1.8,hitPoint:[{x:-20,y:-150},{x:140,y:-120},{x:-128,y:-130},{x:-100,y:-20},{x:-25,y:50},{x:-112,y:100},{x:90,y:115}]},49:{type:"sk",scene:"dicefish",hitPoint:[{x:0,y:-100},{x:0,y:100},{x:0,y:150},{x:-30,y:-200},{x:-100,y:0},{x:50,y:-100},{x:-50,y:-100}]},51:{type:"sk",scene:"laserfish"}}}}]),fishTypes_Jcby}();exports.default=fishTypes_Jcby},{}],156:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Setting_Jcby=function(){function Setting_Jcby(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Setting_Jcby)}return _createClass(Setting_Jcby,null,[{key:"GetLookFishIdx",value:function(type){for(var i=0;i<Setting_Jcby.lockableFishList.length;i++)if(Setting_Jcby.lockableFishList[i]==type)return i+1;return 999}}]),Setting_Jcby}();exports.default=Setting_Jcby,Setting_Jcby.aquaSize={width:1280,height:720},Setting_Jcby.maxBulletCount=30,Setting_Jcby.comboShootCount=5,Setting_Jcby.enableUpsideDown=!0,Setting_Jcby.moneyType=2,Setting_Jcby.lockableFishList=[51,48,47,46,49,20,19,21,18,43,44,45,30,17,26,27,16,15,25,14,22,28,29,40,13,39,38,12,37,11,36,10,35,9,8,34,7,6,33,5,4,31,32,3,1,2,23,24,42],Setting_Jcby.robotIgnoreList=[51],Setting_Jcby.cannonSetting={maxCannonLevelMark:6,minCannonLevelMark:0,basePoint:-1,maxRate:-1,minRate:-1}},{}],157:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_settings2=_interopRequireDefault(require("../meta/settings")),_BaseObj2=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_cannon_calc=require("../util/cannon_calc");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BulletModel_Jcby=function(){function BulletModel_Jcby(id,seatIdx,pos,level,special,lockedFish,angle){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BulletModel_Jcby),this.edgeX=_settings2.default.aquaSize.width,this.edgeY=_settings2.default.aquaSize.height,this.__speed=900,this.__id=id,this.__seatIdx=seatIdx,this.__lev=level,this.__double=special.double,this.__free=special.free,this.__drill=!!special.drill,this.__pierce=special.pierce,this.__hittedIds=[],this.__locked=lockedFish&&lockedFish.id||0,this.__pierce&&(this.__locked=0),special.drill&&(this.__drillStartTick=Date.now(),this.__drillFlyingTime=special.drill.duration,this.__drillFinishBomb=!1,this.__drillFinishBombSend=!1,this.__locked=0,this.__speed=2500),special.free&&(this.__speed=1800),this.__drillCountable=!1,this.__bombed=!1,this.__x=pos.x,this.__y=pos.y,this.__a=angle,this.__f=pos.invent,this.__startTick=0,this.__tx=0,this.__ty=0,this.__tt=0,this.__replacePosToCanonEdge(),this.__hx=this.__x,this.__hy=this.__y,this.__locked?(this.__startTick=Date.now(),this.__calcFollow(lockedFish)):this.__calcTarget(),this.__sendUpdate()}return _createClass(BulletModel_Jcby,[{key:"pierceCheck",value:function(fishId){return-1===this.__hittedIds.indexOf(fishId)&&(this.__hittedIds.push(fishId),this.__pierce-=1,!0)}},{key:"hitted",value:function(){this.__pierce<=0&&!this.__drill&&(this.__bombed=!0,this.__sendUpdate())}},{key:"remove",value:function(){this.__bombed=!0,this.__sendUpdate()}},{key:"update",value:function(data){var double=data.double||this.__double,free=data.free||this.__free,drill=data.drill||this.__drill;if(!this.__bombed){var changedData={};double!=this.__double&&(this.__double=double,changedData.double=double),free!=this.__free&&(this.__free=free,changedData.free=free),drill!=this.__drill&&(this.__drill=!!drill,changedData.drill=!!drill),_BaseObj2.default.getEventObj().dispatchEvent("jcby.bullet.update",[this.__id,changedData])}}},{key:"checkUpdate",value:function(now,lockedFish){if(!this.__bombed){var delta=now-this.__startTick;if(lockedFish){var p=delta/this.__tt;this.__startTick=now;var x=(this.__tx-this.__x)*p+this.__x,y=(this.__ty-this.__y)*p+this.__y;this.__x=x,this.__y=y,this.__hx=x,this.__hy=y,this.__calcFollow(lockedFish),this.__sendUpdate()}else if(this.__drillFinishBombSend)delta>=this.__tt&&(this.__bombed=!0,this.__sendUpdate());else if(delta>=this.__tt)this.__reflection(),this.__sendUpdate();else{var _p=delta/this.__tt,_x=(this.__tx-this.__x)*_p+this.__x,_y=(this.__ty-this.__y)*_p+this.__y;this.__hx=_x,this.__hy=_y}}}},{key:"__reflection",value:function(){if(this.__hittedIds.length=0,this.__drill&&1e3*this.__drillFlyingTime+this.__drillStartTick-Date.now()<=2e3){if(this.__drillFinishBomb)return;this.__drillFinishBomb=!0,this.__x=this.__tx,this.__y=this.__ty,this.__tx=Math.round((this.__tx>640?-1:1)*Math.random()*100)+640,this.__ty=Math.round((this.__ty>360?-1:1)*Math.random()*100)+360,this.__hx=this.__tx,this.__hy=this.__ty}else this.__locked?this.__bombed=!0:(this.__a=0===this.__ty||this.__ty===this.edgeY?this.__a:-this.__a,this.__x=this.__tx,this.__y=this.__ty,this.__hx=this.__x,this.__hy=this.__y,this.__f=0===this.__ty||this.__ty===this.edgeY?!this.__f:this.__f,this.__calcTarget())}},{key:"__calcFollow",value:function(data){this.__tx=data.x,this.__ty=data.y;var t=(0,_cannon_calc.getDistance)({x:this.__x,y:this.__y},{x:data.x,y:data.y})/this.__speed*1e3,xl=data.x-this.__hx,yl=this.__hy-data.y,a=180*Math.atan2(xl,yl)/Math.PI;this.__tt=t,this.__f&&(a=180-a),this.__a=a}},{key:"__calcTarget",value:function(){var y=this.__f?this.edgeY-this.__y:this.__y,w=y*Math.tan(this.__a*Math.PI/180),h=y;this.__x+w>this.edgeX?h=(w=this.edgeX-this.__x)/Math.tan(this.__a*Math.PI/180):this.__x+w<0&&(h=(w=-this.__x)/Math.tan(this.__a*Math.PI/180));var t=(0!=w?w/Math.sin(this.__a*Math.PI/180):h)/this.__speed*1e3;this.__tx=this.__x+w,this.__ty=this.__f?this.__y+h:this.__y-h,this.__tt=t,this.__startTick=Date.now()}},{key:"__replacePosToCanonEdge",value:function(){var mx=90*Math.sin(this.__a*Math.PI/180),my=90*Math.cos(this.__a*Math.PI/180);this.__x+=mx,this.__seatIdx>2?this.__y+=my:this.__y-=my}},{key:"__sendUpdate",value:function(){if(this.__drill&&this.__drillFinishBomb){if(this.__drillFinishBombSend)return;this.__drillFinishBombSend=!0,this.__drillCountable=!0,_BaseObj2.default.getEventObj().dispatchEvent("jcby.bullet.drill_bomb",[this.__id,{x:this.__x,y:this.__y,tx:this.__tx,ty:this.__ty}])}else if(this.__bombed)_BaseObj2.default.getEventObj().dispatchEvent("jcby.bullet.bomb",[this.__id]);else{var data={level:this.__lev,special:this.special,seatIdx:this.__seatIdx,x:this.__x,y:this.__y,a:this.__f?180-this.__a:this.__a,tx:this.__tx,ty:this.__ty,duration:this.__tt};_BaseObj2.default.getEventObj().dispatchEvent("jcby.bullet.fly",[this.__id,data])}}},{key:"id",get:function(){return this.__id}},{key:"seatIdx",get:function(){return this.__seatIdx}},{key:"locked",get:function(){return this.__locked}},{key:"special",get:function(){return{double:this.__double,free:this.__free,drill:this.__drill}}},{key:"pierce",get:function(){return this.__pierce}},{key:"drillCountable",get:function(){return this.__drillCountable},set:function(v){this.__drillCountable=v}},{key:"level",get:function(){return this.__lev}},{key:"x",get:function(){return this.__hx}},{key:"y",get:function(){return this.__hy}},{key:"bombed",get:function(){return this.__bombed}}]),BulletModel_Jcby}();exports.default=BulletModel_Jcby},{"../../../framework/gtea/BaseObj":126,"../meta/settings":156,"../util/cannon_calc":174}],158:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_settings2=_interopRequireDefault(require("../meta/settings")),_cannon_calc=(_interopRequireDefault(require("../../../framework/utils/comfunc")),require("../util/cannon_calc")),_fishtype2=_interopRequireDefault(require("../meta/fishtype")),_BaseObj2=_interopRequireDefault(require("../../../framework/gtea/BaseObj"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getReallyPoint(point){return{x:point.x*_settings2.default.aquaSize.width,y:point.y*_settings2.default.aquaSize.height}}var FishModel_Jcby=function(){function FishModel_Jcby(fishData,fishSpeed,timePassed,now){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FishModel_Jcby),this.maxLength=Math.sqrt(Math.pow(_settings2.default.aquaSize.width,2)+Math.pow(_settings2.default.aquaSize.height,2));var fishPaths=(0,_cannon_calc.getFishPathJson)(),typeConfig=_fishtype2.default.szData[fishData.type];fishData.path.id instanceof Array||(fishData.path.id=[fishData.path.id]),this.__id=fishData.id,this.__type=fishData.type,this.__speed=fishSpeed,this.__route=fishData.path.id.map(function(id){return fishPaths[fishData.path.type][id-1].slice(0)}),this.__routeIdxA=0,this.__routeIdxB=0,this.__hitPoints=typeConfig.hitPoint,this.__offsetX=fishData.offset.x||0,this.__offsetY=fishData.offset.y||0,this.__fixedTime=fishData.speed.fixedTime||0,this.__loopRoute=!1,this.__delay=0,this.__pause=!1,this.__startTick=0,this.__stopTick=0,this.__oversea=0,this.__lkAttacked=!1,this.__redpacketfish=fishData.redpacketfish,this.__x=0,this.__y=0,this.__a=0,this.__tx=0,this.__ty=0,this.__ta=0,this.__tt=0,this.__hx=0,this.__hy=0,this.__lockPoint=void 0;for(var ip=0;ip<this.__route.length;ip++){if(fishData.loop.skip){var t=this.__route[ip].splice(0,fishData.loop.skip);this.__route[ip]=this.__route[ip].concat(t)}if(fishData.loop.times){for(var _t=this.__route[ip].slice(0),i=0;i<fishData.loop.times-1;i++)this.__route[ip]=this.__route[ip].concat(_t);this.__loopRoute=!0;var lastPoint=this.__route[ip][this.__route[ip].length-1],startPoint=getReallyPoint(lastPoint),lastDeg=(180-(lastPoint.a+360)%360)*Math.PI/180,endPoint=FishModel_Jcby.getEndPoint(startPoint,lastDeg,this.maxLength),ret=void 0,mx=_settings2.default.aquaSize.width,my=_settings2.default.aquaSize.height;(ret=(0,_cannon_calc.getIntersect)(startPoint,endPoint,{x:0,y:0},{x:mx,y:0}))||(ret=(0,_cannon_calc.getIntersect)(startPoint,endPoint,{x:0,y:0},{x:0,y:my}))||(ret=(0,_cannon_calc.getIntersect)(startPoint,endPoint,{x:mx,y:0},{x:mx,y:my}))||(ret=(0,_cannon_calc.getIntersect)(startPoint,endPoint,{x:0,y:my},{x:mx,y:my})),ret.x=ret.x/mx,ret.y=ret.y/my,ret.a=lastPoint.a,this.__route[ip].push(ret)}}if(timePassed<0)this.__delay=now-timePassed,this.__startTick=this.__delay;else if(timePassed>=0){if(timePassed){for(;timePassed>0;)this.__calcTarget(now),timePassed-=this.__tt;var nt=Math.abs(timePassed),p=1-nt/this.__tt;this.__x=(this.__tx-this.__x)*p+this.__x,this.__y=(this.__ty-this.__y)*p+this.__y,this.__tt=nt}else this.__calcTarget(now);this.__sendUpdate()}}return _createClass(FishModel_Jcby,null,[{key:"getEndPoint",value:function(point,deg,max){return{x:point.x+max*Math.sin(deg),y:point.y+max*Math.cos(deg)}}}]),_createClass(FishModel_Jcby,[{key:"damage",value:function(time){this.__pause=!0,_BaseObj2.default.getEventObj().dispatchEvent("jcby.fish.damage",[this.__id,!0]),setTimeout(function(){this.__pause=!1,_BaseObj2.default.getEventObj().dispatchEvent("jcby.fish.damage",[this.__id,!1])}.bind(this),time)}},{key:"checkLaserHit",value:function(pos0,pos1){var hitRange=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;if((0,_cannon_calc.getPointToLineDistance)(this,pos0,pos1)<=hitRange)return!0;if(this.__hitPoints)for(var deg=(180-this.__a)*Math.PI/180,i=0;i<this.__hitPoints.length;i++){var p=this.__hitPoints[i],rx=this.__hx+p.x*Math.cos(deg)+p.y*Math.sin(deg),ry=this.__hy+p.y*Math.cos(deg)+p.x*Math.sin(deg);if((0,_cannon_calc.getPointToLineDistance)({x:rx,y:ry},pos0,pos1)<=hitRange)return!0}}},{key:"checkHit",value:function(bulletInfo){var hitRange=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(bulletInfo.locked&&bulletInfo.locked!==this.__id)return!1;if(this.__delay)return!1;if((0,_cannon_calc.getDistance)(this,bulletInfo)<=hitRange)return!bulletInfo.pierce||bulletInfo.pierceCheck(this.__id);if(this.__hitPoints)for(var deg=(180-this.__a)*Math.PI/180,i=0;i<this.__hitPoints.length;i++){var p=this.__hitPoints[i],rx=this.__hx+p.x*Math.cos(deg)+p.y*Math.sin(deg),ry=this.__hy+p.y*Math.cos(deg)+p.x*Math.sin(deg);if((0,_cannon_calc.getDistance)({x:rx,y:ry},bulletInfo)<=hitRange)return!bulletInfo.pierce||bulletInfo.pierceCheck(this.__id)}return!1}},{key:"checkLock",value:function(edge){if(this.__delay)return!1;if(this.__hx>=edge.left&&this.__hx<=edge.right&&this.__hy>=edge.up&&this.__hy<=edge.down)return _BaseObj2.default.getEventObj().dispatchEvent("jcby.fish.lockpoint",[this.__id]),this.__lockPoint=void 0,!0;if(this.__hitPoints)for(var deg=-this.__a*Math.PI/180,i=0;i<this.__hitPoints.length;i++){var p=this.__hitPoints[i],q={x:this.__hx+p.x*Math.cos(deg)+p.y*Math.sin(deg),y:this.__hy+p.y*Math.cos(deg)+p.x*Math.sin(deg)};if(q.x>=edge.left&&q.x<=edge.right&&q.y>=edge.up&&q.y<=edge.down)return this.__lockPoint=q,_BaseObj2.default.getEventObj().dispatchEvent("jcby.fish.lockpoint",[this.__id,q]),!0}}},{key:"lkAttack",value:function(fishInfo){if(fishInfo.__lkAttacked)return!1;var ret=fishInfo.checkHit({x:this.x,y:this.y},150);return ret&&(fishInfo.__lkAttacked=!0),ret}},{key:"checkUpdate",value:function(now,stop){var delta=now-this.__startTick,flagUpdate=!1;if(stop){if(!this.__stopTick){this.__stopTick=now;var _p=delta/this.__tt;this.__hx=(this.__tx-this.__x)*_p+this.__x+this.__offsetX,this.__hy=(this.__ty-this.__y)*_p+this.__y+this.__offsetY}return this.__oversea}if(this.__stopTick){var passedTick=this.__stopTick-this.__startTick,_p2=passedTick/this.__tt;this.__x=(this.__tx-this.__x)*_p2+this.__x,this.__y=(this.__ty-this.__y)*_p2+this.__y,this.__tt-=passedTick,this.__startTick=now,delta=0,this.__stopTick=0,flagUpdate=!0}if(this.__delay){if(!(now>this.__delay))return this.__oversea;this.__delay=0}for(;!this.__oversea&&delta>=this.__tt;)delta-=this.__tt,this.__calcTarget(now),flagUpdate=!0;flagUpdate&&this.__sendUpdate();var p=delta/this.__tt;return this.__hx=(this.__tx-this.__x)*p+this.__x+this.__offsetX,this.__hy=(this.__ty-this.__y)*p+this.__y+this.__offsetY,this.__oversea}},{key:"escape",value:function(){var mx=_settings2.default.aquaSize.width+150,my=_settings2.default.aquaSize.height+150,ret=void 0,lastDeg=(180-(this.__a+360)%360)*Math.PI/180,endPoint=FishModel_Jcby.getEndPoint(this,lastDeg,this.maxLength);(ret=(0,_cannon_calc.getIntersect)(this,endPoint,{x:-150,y:-150},{x:mx,y:-150}))?(this.__tx=ret.x,this.__ty=ret.y):(ret=(0,_cannon_calc.getIntersect)(this,endPoint,{x:-150,y:-150},{x:-150,y:my}))?(this.__tx=ret.x,this.__ty=ret.y):(ret=(0,_cannon_calc.getIntersect)(this,endPoint,{x:mx,y:-150},{x:mx,y:my}))?(this.__tx=ret.x,this.__ty=ret.y):(ret=(0,_cannon_calc.getIntersect)(this,endPoint,{x:-150,y:my},{x:mx,y:my}))&&(this.__tx=ret.x,this.__ty=ret.y),this.__x=this.__hx,this.__y=this.__hy,this.__oversea=2,this.__sendUpdate()}},{key:"beHit",value:function(){_BaseObj2.default.getEventObj().dispatchEvent("jcby.fish.behit",[this.__id])}},{key:"__calcTarget",value:function(now){if(this.__route.length>this.__routeIdxA)if(this.__route[this.__routeIdxA].length-this.__routeIdxB>1){this.__loopRoute&&this.__route[this.__routeIdxA].length-this.__routeIdxB==2&&(this.__fixedTime=0);var curr=this.__route[this.__routeIdxA][this.__routeIdxB],next=this.__route[this.__routeIdxA][this.__routeIdxB+1],currPoint=getReallyPoint(curr),nextPoint=getReallyPoint(next),time=this.__fixedTime||(0,_cannon_calc.getDistance)(currPoint,nextPoint)/this.__speed*1e3;this.__x=currPoint.x,this.__y=currPoint.y,this.__a=curr.a,this.__tx=nextPoint.x,this.__ty=nextPoint.y,this.__ta=next.a,this.__tt=time,this.__routeIdxB++}else this.__routeIdxA++,this.__routeIdxB=0,this.__calcTarget(now);else this.__oversea=1;this.__startTick=now}},{key:"__sendUpdate",value:function(){if(1===this.__oversea)_BaseObj2.default.getEventObj().dispatchEvent("jcby.fish.remove",[this.__id]);else if(2===this.__oversea){var data={type:this.__type,x:this.__x+this.__offsetX,y:this.__y+this.__offsetY,tx:this.__tx+this.__offsetX,ty:this.__ty+this.__offsetY};_BaseObj2.default.getEventObj().dispatchEvent("jcby.fish.escape",[this.__id,data])}else if(Laya.stage.renderingEnabled){var _data={type:this.__type,x:this.__x+this.__offsetX,y:this.__y+this.__offsetY,a:this.__a,tx:this.__tx+this.__offsetX,ty:this.__ty+this.__offsetY,ta:this.__ta,duration:this.__tt,redpacketfish:this.__redpacketfish};_BaseObj2.default.getEventObj().dispatchEvent("jcby.fish.swim",[this.__id,_data])}}},{key:"id",get:function(){return this.__id}},{key:"type",get:function(){return this.__type}},{key:"x",get:function(){return this.__hx}},{key:"y",get:function(){return this.__hy}},{key:"oversea",get:function(){return this.__oversea}},{key:"lockPoint",get:function(){return this.__lockPoint?this.__lockPoint:{x:this.__hx,y:this.__hy}}},{key:"ready",get:function(){return 0===this.__delay}}]),FishModel_Jcby}();exports.default=FishModel_Jcby},{"../../../framework/gtea/BaseObj":126,"../../../framework/utils/comfunc":144,"../meta/fishtype":155,"../meta/settings":156,"../util/cannon_calc":174}],159:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseObj3=_interopRequireDefault(require("../../../framework/gtea/BaseObj")),_motion2=_interopRequireDefault(require("../util/motion")),_layaMaxUI=require("../../../ui/layaMaxUI"),_number_clip2=_interopRequireDefault(require("./parts/number_clip")),_coin_clip2=_interopRequireDefault(require("./parts/coin_clip")),_flower_clip2=_interopRequireDefault(require("./parts/flower_clip")),_blitz_clip2=_interopRequireDefault(require("./parts/blitz_clip")),_fish2=_interopRequireDefault(require("./parts/fish")),_fish_shadow2=_interopRequireDefault(require("./parts/fish_shadow")),_bullet2=_interopRequireDefault(require("./parts/bullet")),_turret2=_interopRequireDefault(require("./parts/turret")),_linker2=_interopRequireDefault(require("./parts/linker")),_settings2=_interopRequireDefault(require("../meta/settings")),_handler2=_interopRequireDefault(require("../util/handler")),_LoadingBar2=_interopRequireDefault(require("../../../appbase/com/LoadingBar")),_OnceNoticeUI2=_interopRequireDefault(require("../../../appbase/com/OnceNoticeUI")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_comfunc2=_interopRequireDefault(require("../../../framework/utils/comfunc")),_config2=_interopRequireDefault(require("../../../framework/utils/config")),_cannon_calc=require("../util/cannon_calc"),_playerdata_mgr2=_interopRequireDefault(require("../../../framework/data/playerdata_mgr")),_gamemodelmgr2=_interopRequireDefault(require("../../../framework/gamemodel/gamemodelmgr")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_settle2=_interopRequireDefault(require("./parts/settle")),_pool2=_interopRequireDefault(require("../util/pool")),_tdf2=_interopRequireDefault(require("../../../framework/utils/tdf")),_FlyText2=_interopRequireDefault(require("../../../appbase/com/FlyText")),_vipmgr2=_interopRequireDefault(require("../../../app/com/vipmgr")),_matchdef2=_interopRequireDefault(require("../../../framework/match/matchdef"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var intoBossFishType=[46,47,48],intoMinorFishType=[42,43,44,45,49],rateRotation={135:[0,180],180:[35],210:[70],225:[105],240:[215],280:[250],300:[285],350:[140,325]};function dropStart(layer,pos,base,add){var _bFinishAni=!0;return new Promise(function(resolve){var a,roulette=layer.getChildByName("roulette"),bgRotation=360-(a=rateRotation[base*add])[Math.floor(Math.random()*a.length)]+360,hint=layer.getChildByName("hint"),count=hint.getChildByName("count"),result=function(){layer.off("click"),hint.visible=!1,_bFinishAni&&(_bFinishAni=!1,roulette.aniRolling.stop(),_motion2.default.to(roulette.bg,{rotation:bgRotation},3e3,"sineOut").then(function(){roulette.rate.value="x"+base*add,roulette.aniFinalRate.play(0,!1),roulette.timerOnce(1500,roulette,resolve,[],!1)}))}.bind(this);roulette.rate.alpha=0,roulette.aniRolling.play(0,!0),roulette.aniDrop.play(0,!1),roulette.timerOnce(800,roulette,function(){_motion2.default.to(roulette,pos,500,"sineOut").then(function(){count.numberVal=6,count.fixDigit=0,_motion2.default.to(count,{numberVal:0},6e3).then(result),layer.on("click",layer,result),hint.visible=!0})},[],!1),layer.off("click")})}var AquaUI_Jcby=function(_BaseObj){function AquaUI_Jcby(con,matchkind){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AquaUI_Jcby);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(AquaUI_Jcby.__proto__||Object.getPrototypeOf(AquaUI_Jcby)).call(this));_this.__lastFireSoundTime=0,_this.__fireSoundWaiting=130,_this.__lastBombSoundTime=0,_this.__bombSoundWaiting=100,_this.__lastDeadFishSoundTime=0,_this.__deadFishSoundWaiting=8e3,_this.__matchkind=matchkind;var view=new _layaMaxUI.Aqua_JcbyUI;_this.currentView=view,con.addChild(view),_this.pool("NumberClip",_number_clip2.default),_this.pool("CoinClip",_coin_clip2.default),_this.pool("FlowerClip",_flower_clip2.default),_this.pool("BlitzClip",_blitz_clip2.default),_fish2.default.clear(),_fish_shadow2.default.clear(),_bullet2.default.clear(),_settings2.default.aquaSize.width=_config2.default.viewSize.width,_settings2.default.aquaSize.height=_config2.default.viewSize.height,"undefined"!=typeof gbxBridge&&gbxBridge.deviceType&&"ios"===gbxBridge.deviceType&&1559===_config2.default.viewSize.width&&720===_config2.default.viewSize.height&&(_settings2.default.aquaSize.width=_config2.default.viewSize.width-116,view.menu.getChildByName("open").x=79,view.menu.getChildByName("close").x=79,view.menu.getChildByName("list").x=76,view.btnAuto.right=62,view.btnLock.right=62,view.btnFever.right=62,view.btnSkill.right=62,view.skilllist.right=67,view.btnItem.left=78,view.btnShop.left=78,view.itembox.left=157);var bgScale=Math.max(_settings2.default.aquaSize.width/view.bg.width,_settings2.default.aquaSize.height/view.bg.height);view.bg.scaleX=bgScale,view.bg.scaleY=bgScale,view.waveCover.scaleX=bgScale,view.waveCover.scaleY=bgScale,view.waveCover.mask.width=view.waveCover.width,view.waveCover.mask.height=view.waveCover.height,view.board.width=_settings2.default.aquaSize.width,view.board.height=_settings2.default.aquaSize.height,_this.__maxPlayerNum=4,_this.__mySeatIdx=-1,_this.__autoFire=!1,_this.__tempAutoFire=!1,_this.__lockedFish={1:0,2:0,3:0,4:0},_this.__tempLockFish=!1,_this.__silentWhenWakeup=!1,_this.__tripleShot=!1,_this.__bloodLust=!1,_this.__pierceShot=!1,_this.__upsideDown=!1,_this.__noRefaint=!1,_this.__specialStopFire=!1,_this.__rouletteStopFire={1:0,2:0,3:0,4:0},_this.__seatData=new Map,_this.__agents=new Set,_this.__treasureLevel=-1,_this.__treasureMaxLevel=5,_this.__canSummonMeteor=!1,_this.__freeShooting=!1,_this.__drillShooting=!1,_this.__laserBeam=!1;for(var i=1;i<=4;i++){var turret=new _turret2.default(i,_this.__matchkind),seat=_this.currentView.turrets.getChildByName("seat"+i),pos={x:380,y:28};i<3&&(pos.y=_settings2.default.aquaSize.height-pos.y),i%2==1&&(pos.x=_settings2.default.aquaSize.width-pos.x);var linker=new _linker2.default(pos.x,pos.y);turret.position=pos,turret.name=seat.name,linker.name=seat.name+"_linker",linker.visible=!1,_this.currentView.turrets.replaceChild(turret,seat),_this.currentView.turrets.addChildAt(linker,_this.currentView.turrets.getChildIndex(turret))}"low"==_gameconst2.default.PICTYPE&&(_this.currentView.sunlight.visible=!1),_this.currentView.btnAuto.on("mousedown",_this,_this.stopPropagation),_this.currentView.btnAuto.clickHandler=_handler2.default.create(function(){if(!this.__tempAutoFire){var btn=this.currentView.btnAuto;btn.selected?(btn.getChildByName("ani").visible=!0,this.__autoFire=!0,this.currentView.off("mousedown",this,this.sendBullet),this.currentView.off("mouseup",this,this.stopSendBullet),this.sendBullet()):(btn.getChildByName("ani").visible=!1,this.__autoFire=!1,this.currentView.on("mousedown",this,this.sendBullet),this.currentView.on("mouseup",this,this.stopSendBullet),this.stopSendBullet())}},_this),_this.currentView.btnLock.on("mousedown",_this,_this.stopPropagation),_this.currentView.btnLock.clickHandler=_handler2.default.create(function(){if(!this.__tempLockFish){var btn=this.currentView.btnLock;btn.getChildByName("ani").visible=btn.selected,this.dispatchEvent("lock_enable",[btn.selected])}},_this),_this.currentView.btnFever.on("mousedown",_this,_this.stopPropagation),_this.currentView.btnFever.clickHandler=_handler2.default.create(function(){var btn=this.currentView.btnFever;if(this.__drillShooting||this.__freeShooting||this.__laserBeam)btn.selected=!1;else{if(btn.selected&&_vipmgr2.default.GetVipLv()<4)return _FlyText2.default.AddFlyText("VIP4级解锁此功能!"),void(btn.selected=!1);this.currentView.skill1.selected&&(this.currentView.skill1.selected=!1,this.currentView.skill1.getChildByName("ani").visible=!1,this.dispatchEvent("pierce_enable",[!1])),this.currentView.skill2.selected&&(this.currentView.skill2.selected=!1,this.currentView.skill2.getChildByName("ani").visible=!1,this.dispatchEvent("triple_enable",[!1])),btn.getChildByName("ani").visible=btn.selected,this.dispatchEvent("fever_enable",[btn.selected])}},_this),_this.currentView.btnSkill.on("mousedown",_this,_this.stopPropagation),_this.currentView.btnSkill.clickHandler=_handler2.default.create(function(){this.currentView.skilllist.visible=!this.currentView.skilllist.visible},_this),_this.currentView.skill1.on("mousedown",_this,_this.stopPropagation),_this.currentView.skill1.clickHandler=_handler2.default.create(function(){var btn=this.currentView.skill1;if(this.__drillShooting||this.__freeShooting||this.__laserBeam)btn.selected=!1;else{if(btn.selected&&_vipmgr2.default.GetVipLv()<6)return _FlyText2.default.AddFlyText("VIP6级解锁此功能!"),void(btn.selected=!1);this.currentView.btnFever.selected&&(this.currentView.btnFever.selected=!1,this.currentView.btnFever.getChildByName("ani").visible=!1,this.dispatchEvent("fever_enable",[!1])),this.currentView.skill2.selected&&(this.currentView.skill2.selected=!1,this.currentView.skill2.getChildByName("ani").visible=!1,this.dispatchEvent("triple_enable",[!1])),btn.getChildByName("ani").visible=btn.selected,this.dispatchEvent("pierce_enable",[btn.selected])}},_this),_this.currentView.skill2.on("mousedown",_this,_this.stopPropagation),_this.currentView.skill2.clickHandler=_handler2.default.create(function(){var btn=this.currentView.skill2;if(this.__drillShooting||this.__freeShooting||this.__laserBeam)btn.selected=!1;else{if(btn.selected&&_vipmgr2.default.GetVipLv()<5)return _FlyText2.default.AddFlyText("VIP5级解锁此功能!"),void(btn.selected=!1);this.currentView.btnFever.selected&&(this.currentView.btnFever.selected=!1,this.currentView.btnFever.getChildByName("ani").visible=!1,this.dispatchEvent("fever_enable",[!1])),this.currentView.skill1.selected&&(this.currentView.skill1.selected=!1,this.currentView.skill1.getChildByName("ani").visible=!1,this.dispatchEvent("pierce_enable",[!1])),btn.getChildByName("ani").visible=btn.selected,this.dispatchEvent("triple_enable",[btn.selected])}},_this),_this.currentView.btnItem.on("mousedown",_this,_this.stopPropagation),_this.currentView.btnItem.clickHandler=_handler2.default.create(function(){this.currentView.itembox.visible=!this.currentView.itembox.visible,this.currentView.itembox.visible&&this.RefreshBagItem()},_this),_this.currentView.btnItem.visible=!!_gameconst2.default.CANUSEITEM,_this.currentView.btnShop.on("mousedown",_this,_this.stopPropagation),_this.currentView.btnShop.clickHandler=_handler2.default.create(function(){_UIMgr2.default.getInstance().OpenUI("游戏内充值")},_this),_this.currentView.btnLock.visible=!1,_this.currentView.btnAuto.visible=!1,_this.currentView.btnFever.visible=!1,_this.currentView.btnSkill.visible=!1,_this.currentView.btnItem.visible=!1,_this.currentView.btnShop.visible=!1,_this.currentView.btnOpenTreasure.on("mousedown",_this,_this.stopPropagation),_this.currentView.btnOpenTreasure.clickHandler=_handler2.default.create(_this.__actOpenTreasure,_this),_this.currentView.btnMeteor.on("mousedown",_this,_this.stopPropagation),_this.currentView.btnMeteor.on(Laya.Event.CLICK,_this,_this.__actSummonMeteor),_this.currentView.btnMeteor.visible=!1,_this.currentView.meteorRainLayer.getChildByName("rain")._children.forEach(function(meteor){meteor.aniMeteor.on("complete",function(){console.log("aniMeteor complete"),meteor.visible=!1}),meteor.aniMeteor.on("label",function(label){"bomb"===label&&console.log("aniMeteor bomb")})}),_this.currentView.intoBoss.ani1.on("complete",_this,function(){this.currentView.intoBoss.visible=!1}),_this.currentView.intoTide.ani1.on("complete",_this,function(){this.currentView.intoTide.visible=!1}),_this.szDiceBtn=[];for(var _i=0;_i<3;_i++){var btn=_this.currentView.diceLayer.getChildByName("btn_"+(_i+1));btn.on(Laya.Event.CLICK,_this,_this.SelectDice),_this.szDiceBtn[_i]=btn}if(_this.currentView.menu.on("mousedown",_this,_this.stopPropagation),_this.currentView.menu.getChildByName("close").clickHandler=_handler2.default.create(_this.__actShowMenu,_this),_this.currentView.menu.getChildByName("open").clickHandler=_handler2.default.create(_this.__actHideMenu,_this),_this.currentView.menu.getChildByName("back").on("mousedown",_this,_this.__actHideMenu),_this.currentView.btnQuit.clickHandler=_handler2.default.create(_this.__actQuitGame,_this),_this.currentView.btnSwap.clickHandler=_handler2.default.create(_this.__actSwapDesk,_this),_this.currentView.btnSkin.clickHandler=_handler2.default.create(_this.__chgTurrentSkin,_this),_this.currentView.btnSetting.clickHandler=_handler2.default.create(function(){_UIMgr2.default.getInstance().OpenUI("大厅设置")},_this),_this.currentView.mouseEnabled=!0,_this.currentView.on("mousedown",_this,_this.setMyCannonAngle),_this.currentView.on("mousemove",_this,_this.setMyCannonAngle),_this.currentView.on("mousedown",_this,_this.sendBullet),_this.currentView.on("mouseup",_this,_this.stopSendBullet),_this.currentView.on("mousedown",_this,_this.sendLaser),_this.currentView.on("mouseup",_this,_this.stopSendLaser),_this.currentView.on("keydown",_this,_this.keySupport),_this.currentView.on("keyup",_this,_this.keySupport),_this.currentView.itembox){for(var _i2=1000001;_i2<=1000004;_i2++){var itembtn=_this.currentView.itembox.getChildByName("item_"+_i2);itembtn.itemimg=itembtn.getChildByName("itemimg"),itembtn.lessnum=itembtn.getChildByName("lessnum"),itembtn.on(Laya.Event.MOUSE_DOWN,_this,_this.UseItem)}_this.currentView.itembox.visible=!1}if(_this.timerloop=_this.loopCall(-1,30,_this.__recalcFollowFishAngle),_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.addEventListener("eve.DataChg",_this,_this.OnBagChg),_BaseObj3.default.getEventObj().addEventListener("jcby.fish.swim",_this,_this.fishSwim),_BaseObj3.default.getEventObj().addEventListener("jcby.fish.escape",_this,_this.fishEscape),_BaseObj3.default.getEventObj().addEventListener("jcby.fish.remove",_this,_this.fishRemove),_BaseObj3.default.getEventObj().addEventListener("jcby.fish.damage",_this,_this.fishDamage),_BaseObj3.default.getEventObj().addEventListener("jcby.fish.behit",_this,_this.fishBeHit),_BaseObj3.default.getEventObj().addEventListener("jcby.fish.lockpoint",_this,_this.fishLockPoint),_BaseObj3.default.getEventObj().addEventListener("jcby.bullet.fly",_this,_this.bulletFly),_BaseObj3.default.getEventObj().addEventListener("jcby.bullet.bomb",_this,_this.bulletBomb),_BaseObj3.default.getEventObj().addEventListener("jcby.bullet.drill_bomb",_this,_this.drillBomb),_this.__fillOuterBlank(),_BaseObj3.default.FindRegObj("MainApp").addEventListener("stagesizechg",_this,_this.__fillOuterBlank),_this.__hintbar=new _LoadingBar2.default(_this.currentView.treasure.getChildByName("hintbar")),_this.__message=new _OnceNoticeUI2.default(_this.currentView.message),_gameconst2.default.CONFIG.isreview||_this.__message.OpenListener(),_this.__matchkind.canopenchest&&_this.__matchkind.chestintor&&!_gameconst2.default.CONFIG.isreview&&!_gameconst2.default.CONFIG.appo){var redinfodata=_playerdata_mgr2.default.getInstance().getUserSetDataByKey("roomredinfo");redinfodata&&_comfunc2.default.isSameDay(new Date,new Date(redinfodata.chktime))&&redinfodata.selected||_UIMgr2.default.getInstance().OpenUI("红包提示界面")}return _soundmgr2.default.getInstance().playBGM("snd/jcby/bgm4.mp3"),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AquaUI_Jcby,_BaseObj3.default),_createClass(AquaUI_Jcby,null,[{key:"namedFlowerFishType",get:function(){return[11,12,13,14,15,16,17,18,19,20,21,23,24,42,43,44,45,46,47,48]}}]),_createClass(AquaUI_Jcby,[{key:"OnDelThis",value:function(){_UIMgr2.default.getInstance().CloseUI("红包翻牌界面"),_UIMgr2.default.getInstance().CloseUI("游戏内充值"),_playerdata_mgr2.default.getInstance().getMe().m_ItemBag.removeEventListener("eve.DataChg",this),_BaseObj3.default.getEventObj().removeEventListener("jcby.fish.swim",this),_BaseObj3.default.getEventObj().removeEventListener("jcby.fish.escape",this),_BaseObj3.default.getEventObj().removeEventListener("jcby.fish.remove",this),_BaseObj3.default.getEventObj().removeEventListener("jcby.fish.damage",this),_BaseObj3.default.getEventObj().removeEventListener("jcby.fish.behit",this),_BaseObj3.default.getEventObj().removeEventListener("jcby.fish.lockpoint",this),_BaseObj3.default.getEventObj().removeEventListener("jcby.bullet.fly",this),_BaseObj3.default.getEventObj().removeEventListener("jcby.bullet.bomb",this),_BaseObj3.default.getEventObj().removeEventListener("jcby.bullet.drill_bomb",this),_BaseObj3.default.FindRegObj("MainApp").removeEventListener("stagesizechg",this,this.__fillOuterBlank),_fish2.default.clear(),_fish_shadow2.default.clear(),_bullet2.default.clear(),this.ClearTorpedoAni(),this.__hintbar.DelThis(),this.__hintbar=null,this.__message.DelThis(),this.__message=null,this.__objectPool&&(this.__objectPool.forEach(function(pool){pool.collect()}),this.__objectPool.clear(),this.__objectPool=void 0),this.currentView.destroy(),this.killTimer(this.nLoopTimer),this.killTimer(this.nOnesTimer),function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0}(AquaUI_Jcby.prototype.__proto__||Object.getPrototypeOf(AquaUI_Jcby.prototype),"OnDelThis",this).call(this)}},{key:"ClearTorpedoAni",value:function(id){if(!_comfunc2.default.isNil(this.szTorpedoAni)){if(id){var effect=this.szTorpedoAni[id];return effect&&effect.destroy(),void delete this.szTorpedoAni[id]}for(var key in this.szTorpedoAni){this.szTorpedoAni[key].destroy()}this.szTorpedoAni={}}}},{key:"pool",value:function(key,Class){this.__objectPool||(this.__objectPool=new Map),this.__objectPool.set(key,new _pool2.default(Class))}},{key:"alloc",value:function(key){if(this.__objectPool)return this.__objectPool.get(key).alloc()}},{key:"free",value:function(key,object){this.__objectPool&&this.__objectPool.get(key).free(object)}},{key:"clearTBP",value:function(){this.currentView.btnFever.selected=!1,this.currentView.btnFever.getChildByName("ani").visible=!1,this.currentView.skill1.selected=!1,this.currentView.skill1.getChildByName("ani").visible=!1,this.currentView.skill2.selected=!1,this.currentView.skill2.getChildByName("ani").visible=!1}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"__fillOuterBlank",value:function(){this.currentView.width=_config2.default.viewSize.width,this.currentView.height=_config2.default.viewSize.height;var graphics=this.currentView.outer.graphics,tex=Laya.Texture.createFromURL("res-game/jcby/aqua/egara.png");graphics.clear();var color="#000000";if(_config2.default.viewSize.height>_settings2.default.aquaSize.height){var fillHeight=(_config2.default.viewSize.height-_settings2.default.aquaSize.height)/2+10,fillWidth=_settings2.default.aquaSize.width;graphics.drawRect(0,-fillHeight,fillWidth,fillHeight,color),graphics.drawRect(0,_settings2.default.aquaSize.height,fillWidth,fillHeight,color),graphics.fillTexture(tex,0,-fillHeight,fillWidth,fillHeight),graphics.fillTexture(tex,0,_settings2.default.aquaSize.height,fillWidth,fillHeight),graphics.drawRect(0,0,fillWidth,-4,color),graphics.drawRect(0,_settings2.default.aquaSize.height,fillWidth,4,color)}else if(_config2.default.viewSize.width>_settings2.default.aquaSize.width){var _fillWidth=(_config2.default.viewSize.width-_settings2.default.aquaSize.width)/2+10,_fillHeight=_settings2.default.aquaSize.height;graphics.drawRect(-_fillWidth,0,_fillWidth,_fillHeight,color),graphics.drawRect(_settings2.default.aquaSize.width,0,_fillWidth,_fillHeight,color),graphics.fillTexture(tex,-_fillWidth,0,_fillWidth,_fillHeight),graphics.fillTexture(tex,_settings2.default.aquaSize.width,0,_fillWidth,_fillHeight),graphics.drawRect(-4,0,4,_fillHeight,color),graphics.drawRect(_settings2.default.aquaSize.width,0,4,_fillHeight,color)}}},{key:"setMyCannonAngle",value:function(){-1!==this.__mySeatIdx&&(this.__lockedFish[this.__mySeatIdx]||this.currentView.turrets.getChildByName("seat"+this.alterPos(this.__mySeatIdx)).setCannonAngle(this.currentView.board.mouseX,this.currentView.board.mouseY))}},{key:"setAgentWork",value:function(seatIdx,enable){if(enable){this.__agents.add(seatIdx);var setting={seatIdx:seatIdx,angle:90*Math.random()-45,level:Math.ceil(10*Math.random())};this.updateTurret(setting)}else this.__agents.delete(seatIdx);1===this.__agents.size?this.looptimer=this.loopCall(-1,500,this.__agentNpcSendBullet):0===this.__agents.size&&this.killTimer(this.looptimer)}},{key:"__recalcFollowFishAngle",value:function(){for(var key in this.__lockedFish){var fishId=this.__lockedFish[key],seatIdx=~~key;if(fishId){var fish=this.currentView.fishs.getChildByName(fishId);if(fish){var lockPoint=fish.lockPoint||fish;this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)).setCannonAngle(lockPoint.x,lockPoint.y),seatIdx===this.__mySeatIdx&&this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)+"_linker").linkTo(fishId,lockPoint.x,lockPoint.y);continue}}seatIdx===this.__mySeatIdx&&this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)+"_linker").linkEnd()}}},{key:"sendBullet",value:function(){if(-1!==this.__mySeatIdx){var seat=this.currentView.turrets.getChildByName("seat"+this.alterPos(this.__mySeatIdx)),locked=this.__lockedFish[this.__mySeatIdx],size=1,angle=seat.angle,level=seat.level,special=seat.special;if(this.__upsideDown&&(angle*=-1),this.__specialStopFire||this.__rouletteStopFire[this.__mySeatIdx]||special.laser);else if(seat.paused)special.drill&&!this.__autoFire&&this.dispatchEvent("player_send_bullet",[this.__mySeatIdx,level,special,locked,angle,1]);else{if(this.__autoFire&&(size=_settings2.default.comboShootCount*(this.__bloodLust?2:1)),this.__tripleShot&&(size*=3),this.__pierceShot&&(size*=5),size=(0,_cannon_calc.calcMaxSendBullet)(size,level,this.__seatData.get(this.__mySeatIdx).gold),this.__tripleShot&&(size=Math.floor(size/3)),this.__pierceShot&&(size=Math.floor(size/5)),0==size)return void this.chkNoGoldDlg();this.dispatchEvent("player_send_bullet",[this.__mySeatIdx,level,special,locked,angle,size])}this.sendbullettimer=this.timerCall(1e3/(this.__bloodLust?4:2)/_settings2.default.comboShootCount,this.sendBullet)}}},{key:"sendLaser",value:function(){if(-1!==this.__mySeatIdx){var seat=this.currentView.turrets.getChildByName("seat"+this.alterPos(this.__mySeatIdx));seat.special.laser&&(seat.laserElapse?(this.__sendLaserBeam(this.__mySeatIdx),this.sendlasertimer=this.timerCall(1e3/_settings2.default.comboShootCount,this.sendLaser)):this.dispatchEvent("player_end_laser",[this.__mySeatIdx]))}}},{key:"stopSendLaser",value:function(){this.killTimer(this.sendlasertimer)}},{key:"activeTurretLaser",value:function(seatIdx){this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)).activeLaser()}},{key:"__sendLaserBeam",value:function(seatIdx){var seat=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),angle=seat.angle;seat.special.laser&&(seat.activeLaser(),seat.minusLaserTimes(),this.dispatchEvent("player_send_laser",[seatIdx,angle]))}},{key:"__agentNpcSendBullet",value:function(){this.__agents.forEach(function(seatIdx){if(!this.__rouletteStopFire[seatIdx]){var seat=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),locked=this.__lockedFish[seatIdx],angle=seat.angle,level=seat.level,special=seat.special;this.__upsideDown&&(angle*=-1),this.__specialStopFire||(seat.paused?special.drill&&Math.random()>.8&&(angle=80-160*Math.random(),this.dispatchEvent("player_send_bullet",[seatIdx,level,special,locked,angle,1])):this.dispatchEvent("player_send_bullet",[seatIdx,level,special,locked,angle,4]))}},this)}},{key:"stopSendBullet",value:function(){this.killTimer(this.sendbullettimer)}},{key:"showTreasureBox",value:function(){!_gameconst2.default.CONFIG.isreview&&this.__matchkind.canopenchest&&(this.currentView.treasureUnderWaterLayer.addChild(this.currentView.treasure),this.currentView.treasure.getChildByName("box").play(0,!1,"level0"),this.currentView.treasure.getChildByName("light").alpha=0,this.__hintbar.uiobj.getChildByName("hint").play(0,!0,"wait"),this.currentView.treasure.getChildByName("halo").visible=!1,this.currentView.treasure.getChildByName("tip").visible=!1,this.currentView.treasure.visible=!0)}},{key:"updateTreasure",value:function(hp,maxHp){if(this.currentView.treasure.visible){var percent=Math.min(1,hp/maxHp),level=Math.floor(percent*this.__treasureMaxLevel);if(level!==this.__treasureLevel&&(this.currentView.treasure.getChildByName("box").play(0,!1,"level"+level),this.currentView.treasure.getChildByName("light").alpha=percent,this.__treasureLevel=level,level===this.__treasureMaxLevel)){this.__hintbar.uiobj.getChildByName("hint").play(0,!0,"open");var gamedata=_playerdata_mgr2.default.getInstance().getMe().getGameData("jcby_"+this.__matchkind.m_nKindID);gamedata&&(52001==this.__matchkind.m_nKindID?gamedata.m_Data.score>=3&&gamedata.m_Data.score<=5&&(this.currentView.treasure.getChildByName("tip").visible=!0):gamedata.m_Data.score<=1&&(this.currentView.treasure.getChildByName("tip").visible=!0)),this.currentView.treasure.getChildByName("halo").visible=!0,this.currentView.treasureAboveWaterLayer.addChild(this.currentView.treasure)}this.boxpercent=parseInt(100*percent),this.__hintbar.setPercent(this.boxpercent)}}},{key:"treasureOpened",value:function(args){var data={value:args.award,chestmode:args.chestmode,rewardmode:args.rewardmode,backfun:Laya.Handler.create(this,this.flyRedPacket,[{seatIdx:this.__mySeatIdx>0?this.__mySeatIdx:1,value:args.award,rewardmode:args.rewardmode}])};_UIMgr2.default.getInstance().UIEvent("红包翻牌界面","SetData",data,!0,!0)}},{key:"showMeteorButton",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.__treasureLevel=-1;var meteor=this.currentView.btnMeteor;meteor.playlist={},meteor.visible=!0,meteor.getChildByName("fireballcircle").mask.graphics.clear(),meteor.getChildByName("fireballcircle").mask.graphics.drawPie(64,64,64,-90,-90,"#000000"),meteor.getChildByName("tip").visible=!1,this.__canSummonMeteor=!1}},{key:"updateMeteorButton",value:function(hp,maxHp){if(console.log("updateMeteorButton",hp,maxHp),this.currentView.btnMeteor.visible){var percent=Math.floor(100*Math.min(1,hp/maxHp)),meteor=this.currentView.btnMeteor;this.boxpercent=percent,this.__treasureLevel!==percent&&(this.__treasureLevel=percent,meteor.getChildByName("fireballcircle").mask.graphics.clear(),hp>=maxHp?(meteor.getChildByName("fireballcircle").mask.graphics.drawRect(0,0,128,128,"#000000"),meteor.getChildByName("ani").visible=!0,this.__canSummonMeteor=!0):(meteor.getChildByName("fireballcircle").mask.graphics.drawPie(64,64,64,-90,360*percent/100-90,"#000000"),meteor.getChildByName("ani").visible=!1),meteor.getChildByName("fireballcircle").repaint())}}},{key:"meteorRain",value:function(seatIdx,deadList){var _this2=this,isMe=!1;seatIdx===this.__mySeatIdx&&(isMe=!0),this.__specialStopFire=!0,this.showMeteorButton(),this.currentView.fishs._children.forEach(function(fish){return fish.stopMoving()}),this.currentView.shadows._children.forEach(function(shadow){return shadow.stopMoving()});var list={};deadList.forEach(function(data,idx){list[idx%8]||(list[idx%8]=[]),list[idx%8].push(data)});var red=this.currentView.meteorRainLayer.getChildByName("red");this.currentView.meteorRainLayer.getChildByName("rain")._children.forEach(function(meteor,idx){meteor.pos(700*Math.random()+290,360*Math.random()+200),meteor.alpha=isMe?1:.4;var manygold=new _layaMaxUI.manygoldUI;manygold.pos(1e3*Math.random()+140,700*Math.random()+10),manygold.alpha=isMe?1:.4,manygold.visible=!1,manygold.scaleX=manygold.scaleY=1+Math.random(),manygold.ani1.on("complete",manygold,function(){return manygold.destroy()}),_this2.currentView.coins.addChild(manygold),meteor.timerOnce(400*idx,meteor,function(){meteor.aniMeteor.play(0,!1),meteor.visible=!0},[],!1),manygold.timerOnce(400*idx+400,manygold,function(){_soundmgr2.default.getInstance().playSound("snd/jcby/bomb.mp3"),manygold.ani1.play(0,!1),manygold.visible=!0,red.alpha=.2,_motion2.default.to(red,{alpha:0},400,"sineOut"),_this2.shakeScreen()},[],!1),list[idx]&&list[idx].forEach(function(_ref){var id=_ref.id,score=_ref.score;_this2.fishBombedScore(seatIdx,score,_settings2.default.cannonSetting.basePoint,id,300*idx+400)})})}},{key:"meteorRainResult",value:function(seatIdx,bonus){this.__specialStopFire=!1,this.currentView.meteorRainLayer.getChildByName("red").alpha=0,this.currentView.fishs._children.forEach(function(fish){return fish.startMoving()}),this.currentView.shadows._children.forEach(function(shadow){return shadow.startMoving()}),this.userGetScore(seatIdx,bonus,0,41,_settings2.default.cannonSetting.basePoint)}},{key:"playerChange",value:function(seatIdx,chair){var seat=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),linker=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)+"_linker");chair.empty()?(seat.playerOut(),linker.visible=!1,this.currentView.turrets.getChildByName("lock"+this.alterPos(seatIdx)).visible=!1,this.currentView.turrets.getChildByName("special"+this.alterPos(seatIdx)).visible=!1,this.currentView.turrets.getChildByName("dropitem_"+this.alterPos(seatIdx))&&_motion2.default.clearAll(this.currentView.turrets.getChildByName("dropitem_"+this.alterPos(seatIdx))),this.__seatData.delete(seatIdx)):(this.__seatData.has(seatIdx)||this.__seatData.set(seatIdx,{nick:chair.getNick(),gold:0,gdata:chair.gamingData}),seat.playerIn(chair.getNick(),seatIdx===this.__mySeatIdx,chair.gamingData),linker.visible=!0)}},{key:"setPlayerGold",value:function(seatIdx,gold){this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)).setGold(gold),this.__mySeatIdx==seatIdx&&(this.__isgoldok=!0),this.__seatData.has(seatIdx)&&(this.__seatData.get(seatIdx).gold=gold)}},{key:"getPlayerGold",value:function(seatIdx){return this.__seatData.has(seatIdx)?this.__seatData.get(seatIdx).gold:0}},{key:"setCurrentState",value:function(sceneIdx,isWaving){this.currentView.bg.skin="res-game/jcby/aqua/background_"+sceneIdx+".jpg"}},{key:"lockFish",value:function(seatIdx,fishId){this.__lockedFish[seatIdx]=fishId;var fish=this.currentView.fishs.getChildByName(fishId),locker=this.currentView.turrets.getChildByName("lock"+this.alterPos(seatIdx));locker&&(fish?(locker.skin="res-game/jcby/aqua/lock_"+fish.type+".png",locker.visible=!0):locker.visible=!1)}},{key:"updateTurret",value:function(args){var seatIdx=args.seatIdx,angle=args.angle,level=args.level,seat=(args.special,this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)));this.__upsideDown&&(angle*=-1),seat.setCannonAngle(angle),seat.level=level}},{key:"getSeatPos",value:function(seatIdx){var turret=this.currentView.turrets.getChildByName("seat"+seatIdx),pos=turret.position;return pos.invent=turret.invent,pos}},{key:"shakeScreen",value:function(wave,total){if(wave=wave>=0?wave:8,total=total||wave,wave){var shiftVal=10*(0,_cannon_calc.quoteIn)(wave/total);wave%2==1&&(shiftVal*=-1),this.currentView.pos(Math.random()*shiftVal,shiftVal),this.timerCall(30,this.shakeScreen,[wave-1,total])}else this.currentView.pos(0,0)}},{key:"waveStart",value:function(sceneIdx){var waveCover=this.currentView.waveCover,waveAni=this.currentView.waveAni,waveMask=waveCover.mask,bg=this.currentView.bg;waveMask.scaleX=0,_motion2.default.to(waveMask,{scaleX:1},1500,"",100).then(function(){bg.skin="res-game/jcby/aqua/background_"+sceneIdx+".jpg"}),waveCover.skin="res-game/jcby/aqua/background_"+sceneIdx+".jpg",waveCover.visible=!0,waveCover.frameLoop(10,waveCover,waveCover.repaint),waveAni.x=0,waveAni.visible=!0,_motion2.default.to(waveAni,{x:450+_settings2.default.aquaSize.width},2e3).then(function(){waveCover.clearTimer(waveCover,waveCover.repaint),waveCover.visible=!1,waveAni.visible=!1}),_soundmgr2.default.getInstance().playBGM("snd/jcby/bgm10.mp3"),_soundmgr2.default.getInstance().playSound("snd/jcby/wave.mp3")}},{key:"waveEnd",value:function(){this.__noRefaint=!1,_soundmgr2.default.getInstance().playBGM("snd/jcby/bgm4.mp3")}},{key:"rangeBombOccur",value:function(fishId){_soundmgr2.default.getInstance().playSound("snd/jcby/bomb1.mp3")}},{key:"superBombOccur",value:function(fishId){_soundmgr2.default.getInstance().playSound("snd/jcby/mie.mp3")}},{key:"freezeStart",value:function(){this.currentView.fishs._children.forEach(function(fish){fish.stopMoving()}),this.currentView.shadows._children.forEach(function(shadow){shadow.stopMoving()}),this.currentView.aniFreezeStart.play(0,!1),this.currentView.freeze._children.forEach(function(snow,idx){var ts=Math.random()+1,es=.9*ts;snow.pos(320+Math.random()*_settings2.default.aquaSize.width/2,180+320*Math.random()),snow.scaleX=snow.scaleY=0,snow.alpha=0,_motion2.default.sequenceTo(snow,[[{scaleX:ts,scaleY:ts,alpha:1},400,"sineOut",100*idx+300],[{scaleX:es,scaleY:es,alpha:0},1500,"sineOut"]])})}},{key:"freezeEnd",value:function(){this.currentView.fishs._children.forEach(function(fish){fish.startMoving()}),this.currentView.shadows._children.forEach(function(shadow){shadow.startMoving()}),this.currentView.aniFreezeEnd.play(0,!1)}},{key:"drillBombResult",value:function(seatIdx,score,scoreBefore,g,bulletBet){var totalScore=score+scoreBefore,mine=seatIdx===this.__mySeatIdx,turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),showBomb=function(position){var eff=new _layaMaxUI.effect_goldglow3UI,eff2=new _layaMaxUI.manygoldUI,baku=new Laya.Animation;eff.position=position,eff2.position=position,baku.position=position,eff.alpha=mine?1:.4,eff2.alpha=mine?1:.4,baku.source="jcby/aqua/ani/baku.ani",baku.blendMode="lighter",this.currentView.coins.addChild(eff),this.currentView.coins.addChild(eff2),this.currentView.coins.addChild(baku),eff.ani1.on("complete",eff,eff.destroy),eff.ani1.play(0,!1),eff2.scaleX=eff2.scaleY=2,eff2.ani1.on("complete",eff2,eff2.destroy),eff2.ani1.play(0,!1),baku.on("complete",baku,baku.destroy),baku.play(0,!1),_soundmgr2.default.getInstance().playSound("snd/jcby/bomb.mp3")}.bind(this),settleDrillBomb=function(){this.userGetScore(seatIdx,score,0,42,bulletBet,totalScore),turret.setGold(g),this.__tempAutoFire&&(this.__tempAutoFire=!1,this.__autoFire||this.currentView.btnAuto.event("click",{type:"click"})),this.__tempLockFish&&(this.__tempLockFish=!1,this.currentView.btnLock.selected||this.currentView.btnLock.event("click",{type:"click"})),seatIdx===this.__mySeatIdx&&(this.__drillShooting=!1)}.bind(this);turret.paused?(turret.once("drill_bomb",turret,function(pos){showBomb(pos)}),turret.once("drill_bombed",turret,function(pos){settleDrillBomb(pos)})):settleDrillBomb({x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2})}},{key:"setTripleShotState",value:function(seatIdx,enable){seatIdx===this.__mySeatIdx&&(this.__tripleShot=enable),this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)).triple=enable}},{key:"setBloodLustState",value:function(seatIdx,enable){seatIdx===this.__mySeatIdx&&(this.__bloodLust=enable),this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)).getChildByName("baseglow_rage").visible=enable}},{key:"setPierceBullet",value:function(enable){this.__pierceShot=enable}},{key:"addFreeScore",value:function(seatIdx,score){var turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),typedScore=score;2===_settings2.default.moneyType&&(typedScore=_comfunc2.default.getGoldRatio(score)),turret.special.free&&turret.addFreeScore(typedScore)}},{key:"userGetScore",value:function(seatIdx,score,fishId,fishType,bulletBet,totalScore){if(0!==score){_comfunc2.default.isNil(totalScore)&&(totalScore=score);var fish=this.currentView.fishs.getChildByName(fishId),target=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),golden=seatIdx===this.__mySeatIdx,pos={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2};fish&&(pos.x=fish.x,pos.y=fish.y);var typedScore=score,typedTotalScore=totalScore;2===_settings2.default.moneyType&&(typedScore=_comfunc2.default.getGoldRatio(score),typedTotalScore=_comfunc2.default.getGoldRatio(totalScore));var scoreClip=this.alloc("NumberClip"),scale=Math.min(1.2,Math.max(.5,score/_settings2.default.cannonSetting.basePoint/18));scoreClip.anchorX=.5,scoreClip.anchorY=.5,scoreClip.golden=golden?1:2,scoreClip.value=typedScore,scoreClip.position=pos,scoreClip.alpha=1,scoreClip.scaleX=scoreClip.scaleY=.5,this.currentView.numbers.addChild(scoreClip),_motion2.default.sequenceTo(scoreClip,[[{y:pos.y-100,scaleX:scale,scaleY:scale},300,"sineOut"],[{alpha:0},200,"sineOut",1500]]).then(function(){scoreClip.removeSelf(),this.free("NumberClip",scoreClip)}.bind(this)),AquaUI_Jcby.namedFlowerFishType.indexOf(fishType)>-1?(this.__flowerGenerator(typedTotalScore,fishType,golden,this.alterPos(seatIdx)>2,target),this.__silentWhenWakeup||_soundmgr2.default.getInstance().playSound("snd/jcby/bingo.mp3")):this.__silentWhenWakeup||_soundmgr2.default.getInstance().playSound("snd/jcby/catch.mp3"),this.__coinGenerator(score/bulletBet,pos,target,golden)}}},{key:"itemGetScore",value:function(args,bani){function PlayEnd(args){var seatIdx=args.chairno,score=args.add,golden=seatIdx===this.__mySeatIdx,target=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),pos={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2},scoreClip=this.alloc("NumberClip"),scale=Math.min(1.2,Math.max(.5,score/_settings2.default.cannonSetting.basePoint/18));scoreClip.anchorX=.5,scoreClip.anchorY=.5,scoreClip.golden=golden?1:2,scoreClip.value=score,scoreClip.position=pos,scoreClip.alpha=1,scoreClip.scaleX=scoreClip.scaleY=.5,this.currentView.numbers.addChild(scoreClip),_motion2.default.sequenceTo(scoreClip,[[{y:pos.y-100,scaleX:scale,scaleY:scale},300,"sineOut"],[{alpha:0},200,"sineOut",1500]]).then(function(){scoreClip.removeSelf(),this.free("NumberClip",scoreClip)}.bind(this)),_soundmgr2.default.getInstance().playSound("snd/jcby/catch.mp3"),this.setPlayerGold(seatIdx,args.g),this.__coinGenerator(score,pos,target,golden)}bani?this.PlayTorpedoAni(args.chairno,args.itemid,Laya.Handler.create(this,PlayEnd,[args])):PlayEnd.bind(this)(args)}},{key:"__coinGenerator",value:function(score,pos,target,mine){var size=Math.floor(score),__create=function(x,y,delay,wait,last,circle){_comfunc2.default.isNil(last)&&(last=!1),_comfunc2.default.isNil(circle)&&(circle=!1);var coin=this.alloc("CoinClip");this.currentView.coins.addChild(coin),circle?coin.circleFly(pos.x,pos.y,x,y,target.x,target.y,delay,wait,mine).then(function(){last&&(target.gotGold.ani1.wrapMode=1,target.gotGold.ani1.play(0,!1)),coin.removeSelf(),this.free("CoinClip",coin)}.bind(this)):coin.jumpFly(x,y,target.x,target.y,delay,wait,mine).then(function(){last&&(target.gotGold.ani1.wrapMode=1,target.gotGold.ani1.play(0,!1)),coin.removeSelf(),this.free("CoinClip",coin)}.bind(this))}.bind(this);if(size>=10){size>=40&&(size=60);var level=1,width=Math.ceil(Math.sqrt(size)),duration=30;size>=40?(level=3,duration=20):size>=25&&(level=2);var eff=new(Laya.ClassUtils.getClass("ui.jcby.aqua.ani.effect_goldglow"+level+"UI")),eff2=new _layaMaxUI.manygoldUI;eff.pos(pos.x,pos.y),eff2.pos(pos.x,pos.y),eff.alpha=mine?1:.4,eff2.alpha=mine?1:.4,this.currentView.coins.addChild(eff),this.currentView.coins.addChild(eff2),eff.ani1.on("complete",eff,eff.destroy),eff.ani1.play(0,!1),eff2.scaleX=eff2.scaleY=.5*(level-1)+1,eff2.ani1.on("complete",eff2,eff2.destroy),eff2.ani1.play(0,!1);for(var i=0;i<size;i++){var qx=pos.x,qy=pos.y;__create(qx+=40*(Math.round(Math.random()*width)-width/2),qy+=40*(Math.round(Math.random()*width)-width/2),i*duration,size*duration,i+1===size,!0)}}else if(size<=5)for(var _i3=0;_i3<size;_i3++){var _qx=pos.x;__create(_qx+=40*(_i3-(size-1)/2),pos.y,50*_i3,50*size,_i3+1===size)}else for(var _i4=0;_i4<size;_i4++){var _qx2=pos.x,_qy2=pos.y;size%2==0?(_qx2+=40*(Math.floor(_i4/2)-(size/2-1)/2),_qy2+=40*(_i4%2-.5)):_i4%2==0?(_qx2+=40*(Math.floor(_i4/2)-(size/2-1)/2),_qy2+=-20):(_qx2+=40*(Math.floor(_i4/2)-(size/2-1)/2+.5),_qy2+=20),__create(_qx2,_qy2,50*_i4,50*size,_i4+1===size)}}},{key:"__flowerGenerator",value:function(score,fishType,golden,invent,target){var flower=this.alloc("FlowerClip"),toY=invent?target.y+100:target.y-100;flower.pos(target.x,target.y),flower.golden=golden?1:2,this.currentView.numbers.addChild(flower),_motion2.default.to(flower,{y:toY},400,"sineOut"),flower.swing(fishType,score).then(function(){flower.removeSelf(),this.free("FlowerClip",flower)}.bind(this))}},{key:"blitzBomb",value:function(seatIdx,fishId,deadList,bulletBet){this.__specialStopFire=!0,this.currentView.fishs._children.forEach(function(fish){fish.stopMoving()}),this.currentView.shadows._children.forEach(function(shadow){shadow.stopMoving()});var fish=this.currentView.fishs.getChildByName(fishId),purple=new Laya.Animation,pos={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2};if(fish){pos.x=fish.x,pos.y=fish.y,fish.damage();var shadow=this.currentView.shadows.getChildByName(fishId);shadow&&shadow.damage()}purple.source="jcby/aqua/ani/purple.ani",purple.pos(pos.x,pos.y),purple.name="purple_"+fishId,this.currentView.coins.addChild(purple),purple.play(0,!1);var counter=0;deadList.forEach(function(data){var score=data.score,id=data.id;this.fishBombedScore(seatIdx,score,bulletBet,id,3e3);var fish=this.currentView.fishs.getChildByName(id);fish&&(this.blitzLink2(pos,fish,300*counter,300*(9-counter)+500),counter<9&&counter++)},this),counter<9&&this.currentView.fishs._children.filter(function(fish){return-1===deadList.indexOf(fish.name)}).filter(function(fish){return fish.name!==fishId}).some(function(fish){if(this.blitzLink2(pos,fish,300*counter,300*(9-counter)+500),++counter>=9)return!0},this)}},{key:"blitzBombEnd",value:function(seatIdx,score,fishId,bulletBet,deadList){var total=score,selfScore=score;deadList.forEach(function(data){selfScore-=data.score}),this.__specialStopFire=!1,this.currentView.coins.getChildByName("purple_"+fishId).destroy(),this.shakeScreen(8),this.userGetScore(seatIdx,selfScore,fishId,44,bulletBet,total),this.fishDie(fishId),this.currentView.fishs._children.forEach(function(fish){fish.startMoving()}),this.currentView.shadows._children.forEach(function(shadow){shadow.startMoving()})}},{key:"jumpBomb",value:function(seatIdx,fishId,deadList,bulletBet){this.__specialStopFire=!0,this.currentView.fishs._children.forEach(function(fish){fish.stopMoving()}),this.currentView.shadows._children.forEach(function(shadow){shadow.stopMoving()});var fish=this.currentView.fishs.getChildByName(fishId),boom=new Laya.Animation,baku=new Laya.Animation,manygold=new _layaMaxUI.manygoldUI,pos={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2},points=[{x:0,y:0,scaleX:3,scaleY:3,alpha:.8},{x:0,y:0,scaleX:3,scaleY:3,alpha:.8},{x:_settings2.default.aquaSize.width/2,y:0,scaleX:3,scaleY:3,alpha:.8}];fish&&(pos.x=fish.x,pos.y=fish.y),pos.x>_settings2.default.aquaSize.width/2?(points[0].x=200,points[1].x=1080):(points[1].x=200,points[0].x=1080),pos.y>_settings2.default.aquaSize.height/2?(points[0].y=160,points[2].y=160,points[1].y=560):(points[0].y=560,points[2].y=560,points[1].y=160),baku.source="jcby/aqua/ani/baku.ani",baku.blendMode="lighter",boom.source="jcby/aqua/ani/boom.ani",this.currentView.coins.addChild(baku),this.currentView.coins.addChild(boom),this.currentView.coins.addChild(manygold),baku.pos(pos.x,pos.y),baku.once("complete",baku,function(){baku.visible=!1}),baku.play(0,!1),manygold.visible=!1,seatIdx!==this.__mySeatIdx&&(manygold.alpha=.4),boom.pos(pos.x,pos.y),boom.play(0,!0),this.fishDie(fishId);var currIdx=0,doAni=function(){_motion2.default.sequenceTo(boom,[[points[currIdx],400,"quadOut",400],[{scaleX:1,scaleY:1,alpha:1},500,"quart"]]).then(function(){this.shakeScreen(10),_soundmgr2.default.getInstance().playSound("snd/jcby/bomb.mp3"),baku.position=points[currIdx],baku.visible=!0,baku.once("complete",baku,function(){currIdx<points.length?baku.visible=!1:baku.destroy()}),baku.play(0,!1),manygold.pos(880*Math.random()+200,400*Math.random()+160),manygold.scaleX=manygold.scaleY=1+.3*currIdx,manygold.visible=!0,manygold.ani1.once("complete",manygold,function(){currIdx<points.length?manygold.visible=!1:manygold.destroy()}),manygold.ani1.play(0,!1),++currIdx<points.length?(baku.scaleX=baku.scaleY=currIdx,doAni()):(boom.destroy(),deadList.forEach(function(data){var score=data.score,id=data.id;score&&this.fishBombedScore(seatIdx,score,bulletBet,id,500)},this))}.bind(this))}.bind(this);doAni()}},{key:"jumpBombEnd",value:function(seatIdx,score,bulletBet,deadList){var total=score,selfScore=score;deadList.forEach(function(data){selfScore-=data.score}),this.__specialStopFire=!1,this.userGetScore(seatIdx,selfScore,0,45,bulletBet,total),this.currentView.fishs._children.forEach(function(fish){fish.startMoving()}),this.currentView.shadows._children.forEach(function(shadow){shadow.startMoving()})}},{key:"fishKingBombFish",value:function(seatIdx,fishId,deadList,bulletBet){var lastFishId=fishId,counter=0;deadList.forEach(function(data){this.fishBombedScore(seatIdx,data.score,bulletBet,data.id,50*counter),lastFishId&&this.blitzLink(lastFishId,data.id,50*counter),lastFishId=data.id,counter++},this)}},{key:"lionKingDropRoulette",value:function(seatIdx,score,fishId,bulletBet,base,add,gold){var fish=this.currentView.fishs.getChildByName(fishId);if(seatIdx===this.__mySeatIdx){var layer=this.currentView.rouletteLayer,pos={x:layer.width/2,y:layer.height/2},goldPos={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2},roulette=layer.getChildByName("roulette");roulette.position=fish?layer.posBySelf(fish):pos,this.__rouletteStopFire[this.__mySeatIdx]=1,layer.visible=!0,dropStart(layer,pos,base,add).then(function(){this.__rouletteStopFire[this.__mySeatIdx]=0,layer.visible=!1,this.setPlayerGold(seatIdx,gold),this.userGetScore(seatIdx,score,goldPos,48,bulletBet)}.bind(this))}else{var _pos={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2};fish&&(_pos=fish.position),this.__rouletteStopFire[seatIdx]=1,this.timerCall(5e3,function(){this.__rouletteStopFire[seatIdx]=0,this.setPlayerGold(seatIdx,gold),this.userGetScore(seatIdx,score,_pos,48,bulletBet)})}}},{key:"dragonKingWakeup",value:function(seatIdx,score,fishId,bulletBet,base,add,gold){var _this3=this;this.killTimer(this.nLoopTimer),this.killTimer(this.nOnesTimer),this.nLoopTimer=this.loopCall(1,100,function(){_this3.dragonKingWakeup1(seatIdx,score,fishId,bulletBet,base,add,gold)}),this.nOnesTimer=this.timerCall(500,function(){_this3.killTimer(_this3.nLoopTimer),_this3.killTimer(_this3.nOnesTimer)})}},{key:"dragonKingWakeup1",value:function(seatIdx,score,fishId,bulletBet,base,add,gold){this.__specialStopFire=!0;var fish=this.currentView.fishs.getChildByName(fishId),pos={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2},array=[3,6];add>6&&array.push(add);var wakeupAnis=[new _layaMaxUI.effect_dragon_wakeupUI],goldglow=new _layaMaxUI.effect_goldglow3UI,bakuAni=new Laya.Animation,board=this.currentView.board;fish&&(pos.x=fish.x,pos.y=fish.y),wakeupAnis[0].position=pos,goldglow.pos(_settings2.default.aquaSize.width/2,_settings2.default.aquaSize.height/2),bakuAni.pos(_settings2.default.aquaSize.width/2,_settings2.default.aquaSize.height/2),board.addChild(bakuAni),board.addChild(goldglow),board.addChild(wakeupAnis[0]);var doAni=function(){wakeupAnis[0].rate.value="x"+array[0],wakeupAnis[0].scaleX=wakeupAnis[0].scaleY=1,board.addChild(wakeupAnis[0]),bakuAni.source="jcby/aqua/ani/baku.ani",bakuAni.blendMode="lighter",bakuAni.scaleX=bakuAni.scaleY=5,bakuAni.on("complete",bakuAni,bakuAni.destroy),bakuAni.play(0,!1),this.shakeScreen(16),this.setPlayerGold(seatIdx,gold),this.userGetScore(seatIdx,score,0,46,bulletBet),_soundmgr2.default.getInstance().playSound("snd/jcby/spbonus.mp3"),_soundmgr2.default.getInstance().playBGM("snd/jcby/bgm4.mp3"),this.__silentWhenWakeup=!1,this.shakeScreen(8),goldglow.ani1.play(0,!1),wakeupAnis[0].aniWakeup.play(0,!1),_soundmgr2.default.getInstance().playSound("snd/jcby/wakeupding.mp3")}.bind(this);_motion2.default.to(wakeupAnis[0],{x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2,rotation:360},600,"linear",400).then(function(){this.__silentWhenWakeup=!0,_soundmgr2.default.getInstance().playBGM("snd/jcby/wakeup.mp3"),doAni()}.bind(this)),wakeupAnis[0].aniWakeup.on("complete",wakeupAnis[0].aniWakeup,function(){this.__specialStopFire=!1,0>=array.length&&(goldglow.destroy(),wakeupAnis[0].destroy(),wakeupAnis.length=0)}.bind(this)),_soundmgr2.default.getInstance().playSound("snd/jcby/dragon.mp3")}},{key:"fishBombedScore",value:function(seatIdx,score,bulletBet,fishId,delay){var fish=this.currentView.fishs.getChildByName(fishId),target=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),golden=seatIdx===this.__mySeatIdx,pos={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2};fish&&(fish.stopMoving(),pos.x=fish.x,pos.y=fish.y);var typedScore=score;2===_settings2.default.moneyType&&(typedScore=_comfunc2.default.getGoldRatio(score));var scoreClip=this.alloc("NumberClip");scoreClip.anchorX=.5,scoreClip.anchorY=.5,scoreClip.golden=golden?1:2,scoreClip.value=typedScore,scoreClip.position=pos,scoreClip.alpha=0,scoreClip.scaleXY=.5,this.currentView.numbers.addChild(scoreClip),_motion2.default.sequenceTo(scoreClip,[[{alpha:1},0,"",delay],[{y:pos.y-100},300,"sineOut"],[{alpha:0},200,"sineOut",500]]).then(function(){scoreClip.removeSelf(),this.free("NumberClip",scoreClip)}.bind(this)),this.timerCall(delay,function(){this.__coinGenerator(score/bulletBet,pos,target,golden),this.fishDie(fishId)})}},{key:"blitzLink",value:function(fromFishId,toFishId,delay,duration){_comfunc2.default.isNil(duration)&&(duration=500);var blitz=this.alloc("BlitzClip"),fromFish=this.currentView.fishs.getChildByName(fromFishId),toFish=this.currentView.fishs.getChildByName(toFishId);fromFish&&toFish?(this.currentView.coins.addChild(blitz),blitz.create(fromFish.x,fromFish.y,toFish.x,toFish.y,delay,duration).then(function(){blitz.removeSelf(),this.free("BlitzClip",blitz)}.bind(this))):this.free("BlitzClip",blitz)}},{key:"blitzLink2",value:function(fromPos,toPos,delay,duration){_comfunc2.default.isNil(duration)&&(duration=2e3);var blitz=this.alloc("BlitzClip");this.currentView.coins.addChild(blitz),blitz.create(fromPos.x,fromPos.y,toPos.x,toPos.y,delay,duration).then(function(){blitz.removeSelf(),this.free("BlitzClip",blitz)}.bind(this))}},{key:"userGetDoubleTurret",value:function(seatIdx,fishId){var fish=this.currentView.fishs.getChildByName(fishId),icon=this.currentView.turrets.getChildByName("special"+this.alterPos(seatIdx)),turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),pos={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2};fish&&(pos.x=fish.x,pos.y=fish.y),_motion2.default.from(icon,pos,400,"sineOut",300),icon.visible=!0,turret.double=!0,this.__silentWhenWakeup||seatIdx!==this.__mySeatIdx||_soundmgr2.default.getInstance().playSound("snd/jcby/itemget.mp3")}},{key:"userDoubleTurretEnd",value:function(seatIdx){var icon=this.currentView.turrets.getChildByName("special"+this.alterPos(seatIdx)),turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx));icon.visible=!1,turret.double=!1}},{key:"userGetLaserBeam",value:function(seatIdx,fishId,laserBeamSetting){var _this4=this,fish=this.currentView.fishs.getChildByName(fishId),icon=new Laya.Image,turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx));fish?(icon.x=fish.x,icon.y=fish.y):(icon.x=_settings2.default.aquaSize.width/2,icon.y=_settings2.default.aquaSize.height/2),icon.skin="res-game/jcby/aqua/canon_free1.png",icon.anchorX=.5,icon.anchorY=.5,icon.rotation=45,icon.name="dropitem_"+this.alterPos(seatIdx),this.currentView.turrets.addChild(icon),seatIdx===this.__mySeatIdx&&(this.__laserBeam=!0,this.__autoFire&&(this.currentView.btnAuto.event("click",{type:"click"}),this.__tempAutoFire=!0),this.currentView.btnLock.selected&&(this.currentView.btnLock.event("click",{type:"click"}),this.__tempLockFish=!0)),_motion2.default.to(icon,turret.position,1e3,"sineOut",500).then(function(){icon.destroy(),turret.laserStart(laserBeamSetting)}),turret.specialPaused(),turret.on("laser_timeout",turret,function(){turret.offAll("laser_timeout"),turret.laserElapse>0&&_this4.sendLaser()}),this.__silentWhenWakeup||seatIdx!==this.__mySeatIdx||_soundmgr2.default.getInstance().playSound("snd/jcby/itemget.mp3")}},{key:"userLaserBeamEnd",value:function(seatIdx,score){var turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx));turret.offAll("laser_timeout"),turret.laserEnd(),seatIdx===this.__mySeatIdx&&(this.__laserBeam=!1,this.__tempAutoFire&&(this.__tempAutoFire=!1,this.__autoFire||this.currentView.btnAuto.event("click",{type:"click"})),this.__tempLockFish&&(this.__tempLockFish=!1,this.currentView.btnLock.selected||this.currentView.btnLock.event("click",{type:"click"})));var typedScore=score;2===_settings2.default.moneyType&&(typedScore=_comfunc2.default.getGoldRatio(score)),this.__flowerGenerator(typedScore,51,seatIdx===this.__mySeatIdx,this.alterPos(seatIdx)>2,turret),_soundmgr2.default.getInstance().playSound("snd/jcby/freebonus.mp3")}},{key:"userGetFreeTurret",value:function(seatIdx,fishId,freeTurretSetting){var fish=this.currentView.fishs.getChildByName(fishId),icon=new Laya.Image,turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx));fish?(icon.x=fish.x,icon.y=fish.y):(icon.x=_settings2.default.aquaSize.width/2,icon.y=_settings2.default.aquaSize.height/2),icon.skin="res-game/jcby/aqua/canon_free1.png",icon.anchorX=.5,icon.anchorY=.5,icon.rotation=45,icon.name="dropitem_"+this.alterPos(seatIdx),this.currentView.turrets.addChild(icon),seatIdx===this.__mySeatIdx&&(this.__freeShooting=!0),_motion2.default.to(icon,turret.position,1e3,"sineOut",500).then(function(){icon.destroy(),turret.freeStart(freeTurretSetting.duration)}),turret.specialPaused(),this.__silentWhenWakeup||seatIdx!==this.__mySeatIdx||_soundmgr2.default.getInstance().playSound("snd/jcby/itemget.mp3")}},{key:"userFreeTurretEnd",value:function(seatIdx,score){var turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx));turret.freeEnd(),seatIdx===this.__mySeatIdx&&(this.__freeShooting=!1);var typedScore=score;2===_settings2.default.moneyType&&(typedScore=_comfunc2.default.getGoldRatio(score)),this.__flowerGenerator(typedScore,43,seatIdx===this.__mySeatIdx,this.alterPos(seatIdx)>2,turret),_soundmgr2.default.getInstance().playSound("snd/jcby/freebonus.mp3")}},{key:"userGetDrillTurret",value:function(seatIdx,fishId,drillTurretSetting){var fish=this.currentView.fishs.getChildByName(fishId),icon=new Laya.Image,turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx));fish?(icon.x=fish.x,icon.y=fish.y):(icon.x=_settings2.default.aquaSize.width/2,icon.y=_settings2.default.aquaSize.height/2),icon.skin="res-game/jcby/aqua/drill1.png",icon.anchorX=.5,icon.anchorY=.5,icon.rotation=45,icon.name="dropitem_"+this.alterPos(seatIdx),this.currentView.turrets.addChild(icon),_motion2.default.to(icon,turret.position,1e3,"sineOut",500).then(function(){icon.destroy(),turret.drillReady()}),seatIdx===this.__mySeatIdx&&(this.__drillShooting=!0),turret.specialPaused(),seatIdx===this.__mySeatIdx&&(this.__autoFire&&(this.currentView.btnAuto.event("click",{type:"click"}),this.__tempAutoFire=!0),this.currentView.btnLock.selected&&(this.currentView.btnLock.event("click",{type:"click"}),this.__tempLockFish=!0),this.__silentWhenWakeup||_soundmgr2.default.getInstance().playSound("snd/jcby/itemget.mp3"))}},{key:"userAddFreeTime",value:function(seatIdx,fishId,addFreeTimeSetting){var fish=this.currentView.fishs.getChildByName(fishId),icon=new Laya.Image,label=new Laya.Label,turret=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx));fish?(icon.x=fish.x,icon.y=fish.y):(icon.x=_settings2.default.aquaSize.width/2,icon.y=_settings2.default.aquaSize.height/2),icon.skin="res-game/jcby/aqua/timeball.png",icon.anchorX=.5,icon.anchorY=.5,label.text="+"+addFreeTimeSetting.duration+"s",label.fontSize=24,label.color="#ffffff",label.centerX=0,label.centerY=0,icon.addChild(label),this.currentView.turrets.addChild(icon);var spos=icon.localToGlobal(new Laya.Point(icon.pivotX,icon.pivotY)),tpos=turret.freeball.localToGlobal(new Laya.Point(turret.freeball.pivotX,turret.freeball.pivotY)),pos={x:icon.x+tpos.x-spos.x,y:icon.y+tpos.y-spos.y};_motion2.default.to(icon,pos,600,"sineOut",400).then(function(){icon.destroy(),turret.addBallTime(addFreeTimeSetting.duration)}),turret.addFreeTime(addFreeTimeSetting.duration)}},{key:"userGetPearlDrop",value:function(seatIdx,fishId){}},{key:"fishSwim",value:function(args){var id=args[0],data=args[1],fish=this.currentView.fishs.getChildByName(id),shadow=this.currentView.shadows.getChildByName(id);if(fish||((fish=_fish2.default.alloc(data.type)).name=id,fish.zOrder=id,fish.redPacket.visible=1==data.redpacketfish,this.currentView.fishs.addChild(fish),fish.show(),"high"==_gameconst2.default.PICTYPE&&((shadow=_fish_shadow2.default.alloc(data.type)).name=id,shadow.zOrder=id,this.currentView.shadows.addChild(shadow),shadow.show())),this.__upsideDown&&(data.x=_settings2.default.aquaSize.width-data.x,data.y=_settings2.default.aquaSize.height-data.y,data.a=(data.a+180)%360,data.tx=_settings2.default.aquaSize.width-data.tx,data.ty=_settings2.default.aquaSize.height-data.ty,data.ta=(data.ta+180)%360),fish.swim(data,this.__noRefaint),shadow){var shadowData=Object.assign({},data,{x:data.x+10,tx:data.tx+10,y:data.y+30,ty:data.ty+30});shadow.swim(shadowData,this.__noRefaint)}}},{key:"fishEscape",value:function(args){var id=args[0],data=args[1],fish=this.currentView.fishs.getChildByName(id),shadow=this.currentView.shadows.getChildByName(id);if(this.__upsideDown&&(data.x=_settings2.default.aquaSize.width-data.x,data.y=_settings2.default.aquaSize.height-data.y,data.tx=_settings2.default.aquaSize.width-data.tx,data.ty=_settings2.default.aquaSize.height-data.ty),fish&&(fish.name=void 0,fish.escape(data)),shadow){shadow.name=void 0;var shadowData=Object.assign({},data,{x:data.x+10,tx:data.tx+10,y:data.y+30,ty:data.ty+30});shadow.escape(shadowData)}}},{key:"fishDie",value:function(id){var fish=this.currentView.fishs.getChildByName(id),shadow=this.currentView.shadows.getChildByName(id),n=Date.now();fish&&(fish.name=void 0,fish.die()),shadow&&(shadow.name=void 0,shadow.die()),n-this.__lastDeadFishSoundTime>=this.__deadFishSoundWaiting&&(_soundmgr2.default.getInstance().playSound("snd/jcby/dead_"+Math.ceil(10*Math.random())+".mp3"),this.__lastDeadFishSoundTime=n)}},{key:"fishRemove",value:function(args){var id=args[0],fish=this.currentView.fishs.getChildByName(id),shadow=this.currentView.shadows.getChildByName(id);fish&&(fish.name=void 0,fish.hide()),shadow&&(shadow.name=void 0,shadow.hide())}},{key:"fishDamage",value:function(args){var id=args[0],damage=args[1],fish=this.currentView.fishs.getChildByName(id),shadow=this.currentView.shadows.getChildByName(id);damage?(fish&&fish.damage(),shadow&&shadow.damage()):(fish&&fish.endDamage(),shadow&&shadow.endDamage())}},{key:"fishLockPoint",value:function(id,point){var fish=this.currentView.fishs.getChildByName(id);fish&&(point?(this.__upsideDown&&(point={x:_settings2.default.aquaSize.width-point.x,y:_settings2.default.aquaSize.height-point.y}),fish.lockPoint=point):fish.lockPoint&&delete fish.lockPoint)}},{key:"fishBeHit",value:function(args){var id=args[0],fish=this.currentView.fishs.getChildByName(id);fish&&fish.red(50)}},{key:"bulletFly",value:function(args){var id=args[0],data=args[1],bullet=this.currentView.bullets.getChildByName(id),n=Date.now();if(bullet)data.special.drill&&_soundmgr2.default.getInstance().playSound("snd/jcby/drillreflect.mp3");else{var seat=this.currentView.turrets.getChildByName("seat"+this.alterPos(data.seatIdx));(bullet=_bullet2.default.alloc()).name=id,this.currentView.bullets.addChild(bullet),bullet.setup(data.level,data.special,data.seatIdx===this.__mySeatIdx,seat.__gdata),data.special.drill?(seat.drillSend(bullet),bullet.printShadow()):seat.fire(),!this.__silentWhenWakeup&&data.seatIdx===this.__mySeatIdx&&n-this.__lastFireSoundTime>=this.__fireSoundWaiting&&(data.special.free?_soundmgr2.default.getInstance().playSound("snd/jcby/beam.mp3"):_soundmgr2.default.getInstance().playSound("snd/jcby/fire.mp3"),this.__lastFireSoundTime=n)}this.__upsideDown&&(data.x=_settings2.default.aquaSize.width-data.x,data.y=_settings2.default.aquaSize.height-data.y,data.a=(data.a+180)%360,data.tx=_settings2.default.aquaSize.width-data.tx,data.ty=_settings2.default.aquaSize.height-data.ty),bullet.fly(data)}},{key:"bulletBomb",value:function(args){var id=args[0],bullet=this.currentView.bullets.getChildByName(id),n=Date.now();bullet&&(bullet.name=void 0,bullet.bomb()),n-this.__lastBombSoundTime>=this.__bombSoundWaiting&&(_soundmgr2.default.getInstance().playSound("snd/jcby/casting.mp3"),this.__lastBombSoundTime=n)}},{key:"drillBomb",value:function(args){var id=args[0],data=args[1],bullet=this.currentView.bullets.getChildByName(id);this.__upsideDown&&(data.x=_settings2.default.aquaSize.width-data.x,data.y=_settings2.default.aquaSize.height-data.y,data.tx=_settings2.default.aquaSize.width-data.tx,data.ty=_settings2.default.aquaSize.height-data.ty),bullet&&bullet.drillBomb(data)}},{key:"showText",value:function(text,code,rate){if(intoMinorFishType.indexOf(code)>-1){var plate=this.currentView.intoMinor;plate.fishicon.skin="res-game/jcby/aqua/f"+code+".png",plate.fishname.skin="res-game/jcby/aqua/fishname"+code+".png",_motion2.default.sequenceTo(plate,[[{right:100},300,"sineOut"],[{right:-350},300,"sineOut",3e3]]),plate.ani1.play(0,!1),_soundmgr2.default.getInstance().playSound("snd/jcby/minorenter.mp3"),_soundmgr2.default.getInstance().playBGM("snd/jcby/bgm4.mp3")}else if(intoBossFishType.indexOf(code)>-1){var _plate=this.currentView.intoBoss;_plate.fishname.skin="res-game/jcby/aqua/text_fish"+code+".png",_plate.fishnameGlow.skin="res-game/jcby/aqua/text_fish"+code+".png",_plate.fish_boss.skin="res-game/jcby/fish/boss_"+code+".png",_plate.rate.value=rate[0]+"-"+rate[1]+"倍",_plate.visible=!0,_plate.ani1.play(0,!1),_soundmgr2.default.getInstance().playBGM("snd/jcby/boss.mp3")}else if(9527==code){var _plate2=this.currentView.intoTide;_plate2.visible=!0,_plate2.ani1.play(0,!1),_soundmgr2.default.getInstance().playSound("snd/jcby/alert.mp3"),_soundmgr2.default.getInstance().playBGM("snd/jcby/bgm4.mp3")}else this.currentView.bossWarningText.text=text,code?(this.currentView.aniWarningBoss.play(0,!1),_soundmgr2.default.getInstance().playSound("snd/jcby/alert.mp3")):this.currentView.aniWarning.play(0,!1),_soundmgr2.default.getInstance().playBGM("snd/jcby/bgm4.mp3")}},{key:"startSettle",value:function(){var settle=new _settle2.default;settle.closeHandler=_handler2.default.create(this.endSettle,this),settle.name="settle",settle.show()}},{key:"endSettle",value:function(){this.dispatchEvent("settle_end")}},{key:"showSettleInfo",value:function(data){Laya.Dialog.manager.getChildByName("settle").showData(this.__matchkind.canopenchest,data)}},{key:"setMySeatIdx",value:function(seatIdx){if(seatIdx!==this.__mySeatIdx){this.__mySeatIdx=seatIdx,_settings2.default.enableUpsideDown&&seatIdx>2&&(this.__upsideDown=!0);for(var i=1;i<=this.__maxPlayerNum;i++){var seat=this.currentView.turrets.getChildByName("seat"+i),linker=this.currentView.turrets.getChildByName("seat"+i+"_linker");seat.visible&&(seat.playerOut(),linker.visible=!1)}this.__seatData.forEach(function(data,idx){var seat=this.currentView.turrets.getChildByName("seat"+this.alterPos(idx)),linker=this.currentView.turrets.getChildByName("seat"+this.alterPos(idx)+"_linker");seat.playerIn(data.nick,idx===this.__mySeatIdx,data.gdata),seat.setGold(data.gold),linker.visible=!0},this),this.__hintMyPosition()}}},{key:"__hintMyPosition",value:function(){var pos=this.currentView.turrets.getChildByName("seat"+this.alterPos(this.__mySeatIdx)),arrow=this.currentView.youArrow,text=this.currentView.youText,y1=void 0,y2=void 0;pos.invent?(arrow.rotation=180,arrow.y=pos.y+120,text.y=arrow.y+50,y2=(y1=arrow.y)+10):(arrow.y=pos.y-120,text.y=arrow.y-50,y2=(y1=arrow.y)-10),arrow.x=pos.x,arrow.visible=!0,_motion2.default.sequenceTo(arrow,[[{y:y2},500,"sineOut"],[{y:y1},500,"sineOut"],[{y:y2},500,"sineOut"],[{y:y1},500,"sineOut"],[{y:y2},500,"sineOut"],[{y:y1},500,"sineOut"],[{y:y2},500,"sineOut"],[{y:y1},500,"sineOut"]]).then(function(){arrow.visible=!1}),text.x=pos.x,text.visible=!0,_motion2.default.sequenceTo(text,[[{scaleXY:1.1},500,"sineOut"],[{scaleXY:1},500,"sineOut"],[{scaleXY:1.1},500,"sineOut"],[{scaleXY:1},500,"sineOut"],[{scaleXY:1.1},500,"sineOut"],[{scaleXY:1},500,"sineOut"],[{scaleXY:1.1},500,"sineOut"],[{scaleXY:1},500,"sineOut"]]).then(function(){text.visible=!1})}},{key:"alterPos",value:function(seatIdx){return-1===this.__mySeatIdx?seatIdx:this.__upsideDown?this.__maxPlayerNum-seatIdx+1:seatIdx}},{key:"keySupport",value:function(ev){"keydown"===ev.type?76===ev.keyCode?this.currentView.btnLock.event("click",{type:"click"}):65===ev.keyCode?this.currentView.btnAuto.event("click",{type:"click"}):37===ev.keyCode||39===ev.keyCode||(32===ev.keyCode?this.__autoFire||this.sendBullet():38===ev.keyCode?-1!==this.__mySeatIdx&&this.currentView.turrets.getChildByName("seat"+this.alterPos(this.__mySeatIdx)).levelUp():40===ev.keyCode&&-1!==this.__mySeatIdx&&this.currentView.turrets.getChildByName("seat"+this.alterPos(this.__mySeatIdx)).levelDown()):"keyup"===ev.type&&32===ev.keyCode&&(this.__autoFire||this.stopSendBullet())}},{key:"__actOpenTreasure",value:function(){this.__treasureLevel===this.__treasureMaxLevel&&this.dispatchEvent("open_treasure")}},{key:"__actSummonMeteor",value:function(){this.__canSummonMeteor?this.dispatchEvent("summon_meteor"):_FlyText2.default.AddFlyText("陨石正在召唤中...")}},{key:"__actShowMenu",value:function(){var _bShow=!this.currentView.menu.getChildByName("list").visible;this.currentView.menu.getChildByName("open").visible=!1,this.currentView.menu.getChildByName("close").selected=_bShow,this.currentView.menu.getChildByName("list").visible=_bShow,this.currentView.menu.getChildByName("back").visible=_bShow}},{key:"__actHideMenu",value:function(){this.currentView.menu.getChildByName("close").visible=!0,this.currentView.menu.getChildByName("open").visible=!1,this.currentView.menu.getChildByName("list").visible=!1,this.currentView.menu.getChildByName("back").visible=!1}},{key:"__actQuitGame",value:function(){function sureQuit(){_UIMgr2.default.getInstance().CloseUI("系统确认"),_UIMgr2.default.getInstance().CloseUI("退出确认界面"),this.dispatchEvent("quit_game")}if(this.matchmode==_matchdef2.default.MATCH_MODE.MM_FREE)if(this.__actHideMenu(),this.ClearDiceTimer(),this.ismatch)_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"您是否确定退出?",obj:this,okfun:sureQuit},!0,!0);else{var mode=0;this.currentView.treasure.visible?mode=1:this.currentView.btnMeteor.visible&&(mode=2),_UIMgr2.default.getInstance().OpenUI("退出确认界面",{mode:mode,percent:this.boxpercent,backfun:Laya.Handler.create(this,sureQuit,null,!0)})}else _FlyText2.default.AddFlyText("比赛房间不允许中途退出！")}},{key:"__actShowHelp",value:function(){this.__actHideMenu(),_UIMgr2.default.getInstance().OpenUI("游戏帮助")}},{key:"__actSwapDesk",value:function(){this.__actHideMenu(),this.ClearDiceTimer(),_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:"您是否确定换桌?",obj:this,okfun:function(){_UIMgr2.default.getInstance().CloseUI("系统确认"),this.dispatchEvent("swap_desk")}},!0,!0)}},{key:"flyRedPacket",value:function(data){var seatIdx=data.seatIdx,xpos=_config2.default.viewSize.width/2,ypos=_config2.default.viewSize.height/2,rewardmode=data.rewardmode,value="gold"==rewardmode?100*data.value:_comfunc2.default.getVouchers2Ratio(data.value);if(data.fishid){var fish=this.currentView.fishs.getChildByName(data.fishid);fish&&(xpos=fish.x,ypos=fish.y)}var target=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),maxnum=10,curnum=0,dis=150;function ClearRedPacket(){if(!_comfunc2.default.isNil(this.szRedPacketAni))for(var i=0;i<this.szRedPacketAni.length;i++)this.szRedPacketAni[i].destroy();this.szRedPacketAni=[]}function PlayEnd(img){this.TweenLite(img,{scaleX:2,scaleY:2},100,Laya.Ease.sineOut)}function FlyEnd(){ClearRedPacket.bind(this)(),seatIdx==this.__mySeatIdx&&this.currentView.turrets.getChildByName("seat"+this.alterPos(this.__mySeatIdx)).refreshRedPacket()}function FlyMove(){for(var i=0;i<this.szRedPacketAni.length;i++){var img=this.szRedPacketAni[i];this.TweenLite(img,{x:target.x,y:target.y,scaleX:1,scaleY:1},300,Laya.Ease.sineOut)}this.timerCall(300,FlyEnd)}var scoreClip=this.alloc("NumberClip"),pos={x:xpos,y:ypos};scoreClip.anchorX=.5,scoreClip.anchorY=.5,scoreClip.golden="gold"==rewardmode?1:3,scoreClip.value=value,scoreClip.position=pos,scoreClip.alpha=1,scoreClip.scaleX=scoreClip.scaleY=.5,this.currentView.numbers.addChild(scoreClip),_motion2.default.sequenceTo(scoreClip,[[{y:pos.y-100,scaleX:1.5,scaleY:1.5},300,"sineOut"],[{alpha:0},200,"sineOut",1200]]).then(function(){scoreClip.removeSelf(),this.free("NumberClip",scoreClip)}.bind(this)),"gold"==rewardmode?(this.setPlayerGold(seatIdx,data.g),this.__coinGenerator(value,pos,target)):(ClearRedPacket.bind(this)(),function CreateAni(){var img=new Laya.Image("lobby/marktop_redpack.png");img.scaleX=.5,img.scaleY=.5,img.anchorX=.5,img.anchorY=.5,img.x=xpos,img.y=ypos,this.currentView.coins.addChild(img);var endx=Math.floor(Math.random()*(xpos+dis-(xpos-dis))+(xpos-dis)),endy=Math.floor(Math.random()*(ypos+dis-(ypos-dis))+(ypos-dis));this.TweenLite(img,{x:endx,y:endy,scaleX:3,scaleY:3},250,Laya.Ease.sineOut,Laya.Handler.create(this,PlayEnd,[img])),this.szRedPacketAni.push(img),(curnum+=1)>=maxnum?this.timerCall(1e3,FlyMove):this.timerCall(30,CreateAni)}.bind(this)())}},{key:"OnBagChg",value:function(){this.currentView.itembox&&this.currentView.itembox.visible&&this.RefreshBagItem();var tdf=_tdf2.default.LoadTDF("data/match/jcby/chargeitem.tdf");if(tdf){var userbag=_playerdata_mgr2.default.getInstance().getMe().m_ItemBag,szItem=[];for(var key in tdf){var itemid=tdf[key]["物品ID"],itemnum=userbag.getItemNum(itemid);itemnum>0&&szItem.push({itemid:itemid,num:itemnum})}szItem.length>0&&this.dispatchEvent("player_charge",szItem)}}},{key:"RefreshBagItem",value:function(){if(this.currentView.itembox)for(var userbag=_playerdata_mgr2.default.getInstance().getMe().m_ItemBag,i=1000001;i<=1000004;i++){var itembtn=this.currentView.itembox.getChildByName("item_"+i),itemnum=userbag.getItemNum(i);itembtn.lessnum.text="×"+itemnum,itembtn.disabled=0==itemnum}}},{key:"PlayTorpedoAni",value:function(seatIdx,itemid,backfun){_comfunc2.default.isNil(this.szTorpedoAni)&&(this.szTorpedoAni={});var target=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx)),pos={x:target.x,y:target.y};var effect=new _layaMaxUI.torpedo_flyUI;_gameconst2.default.SetIconImg(effect.getChildByName("torpedo"),"res-game/jcby/aqua/torpedo_"+itemid+".png"),effect.id=(new Date).getTime().toString(),"seat1"!=target.name&&"seat3"!=target.name||(effect.scaleX=-1),"seat3"!=target.name&&"seat4"!=target.name||(effect.scaleY=-1),effect.position=pos,effect.ani1.on(Laya.Event.COMPLETE,this,function(effectid,backfun){this.ClearTorpedoAni(effectid),backfun.method.apply(backfun.caller,backfun.args);var effect=new _layaMaxUI.torpedo_boomUI;effect.id=(new Date).getTime().toString(),effect.position={x:_settings2.default.aquaSize.width/2,y:_settings2.default.aquaSize.height/2},effect.aniMeteor.on(Laya.Event.COMPLETE,this,this.ClearTorpedoAni,[effect.id]),effect.aniMeteor.play(0,!1),this.szTorpedoAni[effect.id]=effect,this.currentView.turrets.addChild(effect),_soundmgr2.default.getInstance().playSound("snd/jcby/bomb.mp3")},[effect.id,backfun]),effect.ani1.play(0,!1),this.szTorpedoAni[effect.id]=effect,this.currentView.turrets.addChild(effect)}},{key:"UseItem",value:function(event){for(var i=1000001;i<=1000004;i++){var itembtn=this.currentView.itembox.getChildByName("item_"+i);if(event.target===itembtn){this.dispatchEvent("player_useitem",{item:i,num:1});break}}event.stopPropagation(),this.currentView.itembox.visible=!1}},{key:"OnUserDropItem",value:function(args){var seatIdx=args.chairno,itemid=args.itemid,itemkind=(args.num,_itemkindmgr2.default.getInstance().Find(itemid));if(itemkind){var img=new Laya.Image(itemkind.getImgName());img.scaleX=.2,img.scaleY=.2,img.anchorX=.5,img.anchorY=.5,img.x=_config2.default.viewSize.width/2,img.y=_config2.default.viewSize.height/2,this.currentView.coins.addChild(img),this.TweenLite(img,{scaleX:2,scaleY:2},500,Laya.Ease.sineOut,Laya.Handler.create(this,function PlayEnd(type,seatIdx,img){if(1==type)this.TweenLite(img,{},300,null,Laya.Handler.create(this,PlayEnd,[2,seatIdx,img]));else if(2==type){var target=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx));this.TweenLite(img,{x:target.x,y:target.y,scaleX:.2,scaleY:.2},700,Laya.Ease.sineOut,Laya.Handler.create(this,PlayEnd,[3,seatIdx,img]))}else seatIdx==this.__mySeatIdx&&this.currentView.turrets.getChildByName("seat"+this.alterPos(this.__mySeatIdx)).refreshRedPacket(),this.currentView.coins.removeChild(img)},[1,seatIdx,img]))}}},{key:"userGetDice",value:function(seatIdx,fishID,effect){console.log("userGetDice");var fish=this.currentView.fishs.getChildByName(fishID),img=new Laya.Image("res-game/jcby/effects/dice1.png");img.scaleX=.1,img.scaleY=.1,img.anchorX=.5,img.anchorY=.5,img.x=fish?fish.x:_config2.default.viewSize.width/2,img.y=fish?fish.y:_config2.default.viewSize.height/2,this.currentView.coins.addChild(img),seatIdx==this.__mySeatIdx&&(this.__specialStopFire=!0),this.TweenLite(img,{scaleX:3,scaleY:3},500,Laya.Ease.sineOut,Laya.Handler.create(this,function PlayEnd(type,seatIdx,img,gold){if(1==type)this.TweenLite(img,{},200,null,Laya.Handler.create(this,PlayEnd,[2,seatIdx,img,gold]));else if(2==type){var target=this.currentView.turrets.getChildByName("seat"+this.alterPos(seatIdx));this.TweenLite(img,{x:target.x,y:target.y,scaleX:1,scaleY:1},500,Laya.Ease.sineOut,Laya.Handler.create(this,PlayEnd,[3,seatIdx,img,gold]))}else this.ShowDiceLayer(seatIdx,gold),this.currentView.coins.removeChild(img)},[1,seatIdx,img,effect.fish_score]))}},{key:"ClearDiceTimer",value:function(){this.dicetimer&&this.killTimer(this.dicetimer),this.dicetimer=null,this.currentView.diceLayer.getChildByName("lesstime").visible=!1}},{key:"ShowDiceLayer",value:function(seatIdx,gold){if(seatIdx==this.__mySeatIdx){for(var i=0;i<this.szDiceBtn.length;i++){this.szDiceBtn[i].mouseEnabled=!0}this.__specialStopFire=!0,this.szDiceBtn[2].gold.value=gold,this.szDiceBtn[2].normal.play(0,!0),this.currentView.diceLayer.visible=!0,this.ClearDiceTimer(),function DiceClock(time){var lesstime=this.currentView.diceLayer.getChildByName("lesstime");lesstime.value=time,lesstime.visible=!0,0!=time?this.dicetimer=this.timerCall(1e3,DiceClock,[time-1]):this.OnSelectDice(3)}.bind(this)(10)}}},{key:"UnShowDiceLayer",value:function(){this.ClearDiceTimer(),this.szDiceBtn[2].gold.value=0,this.szDiceBtn[2].normal.stop(),this.__specialStopFire=!1,this.currentView.diceLayer.visible=!1}},{key:"SelectDice",value:function(event){if(this.currentView.diceLayer.visible)for(var i=0;i<this.szDiceBtn.length;i++){var btn=this.szDiceBtn[i];if(event.target===btn){this.OnSelectDice(i+1);break}}}},{key:"OnSelectDice",value:function(idx){this.ClearDiceTimer();for(var i=0;i<this.szDiceBtn.length;i++){this.szDiceBtn[i].mouseEnabled=!1}3!=idx&&this.currentView.diceLayer.getChildByName("diceani").shaking.play(0,!0);this.dispatchEvent("player_selectdice",{select:idx})}},{key:"OnUserSelectDice",value:function(args){function PlayEnd(){3!=args.select&&(args.fish_score>0?_FlyText2.default.AddFlyText("恭喜您押中,奖励翻倍!!!"):_FlyText2.default.AddFlyText("很遗憾,您没有押中!!!")),args.isover?(args.fish_score>0&&(this.setPlayerGold(args.chairno,args.g),this.userGetScore(args.chairno,args.fish_score,null,args.fish_kind,args.bullet_mul)),3==args.select?this.UnShowDiceLayer():this.timerCall(1500,this.UnShowDiceLayer)):this.timerCall(1500,this.ShowDiceLayer,[args.chairno,args.fish_score])}args.chairno!=this.__mySeatIdx?args.isover&&args.fish_score>0&&(this.setPlayerGold(args.chairno,args.g),this.userGetScore(args.chairno,args.fish_score,null,args.fish_kind,args.bullet_mul)):function(){if(3!=args.select){var diceani=this.currentView.diceLayer.getChildByName("diceani");_gameconst2.default.SetIconImg(diceani.getChildByName("base").getChildByName("dice"),"res-game/jcby/effects/dice"+args.dice+".png"),diceani.shaking.once("complete",diceani.shaking,PlayEnd.bind(this)),diceani.shaking.play(0,!1)}else PlayEnd.bind(this)()}.bind(this)()}},{key:"updateGoldSubsidies",value:function(args){this.__goldsubsidies=args}},{key:"chkNoGoldDlg",value:function(){this.__isgoldok&&(_vipmgr2.default.GetVipLv()>0?this.__goldsubsidies&&this.__goldsubsidies.num<this.__goldsubsidies.maxnum?onSelect.bind(this)(1):onSelect.bind(this)(2):onSelect.bind(this)(3));function okfunc(type){1==type?this.dispatchEvent("getgoldsubsidies"):2==type&&(_gamemodelmgr2.default.getInstance().ExitGameRoom(!1),_UIMgr2.default.getInstance().UIEvent("大厅界面","InShop",{subpage:"jb"}),_UIMgr2.default.getInstance().CloseUI("首充界面"))}function onSelect(type){1==type?_UIMgr2.default.getInstance().OpenUI("金币补助界面",2):2==type?_UIMgr2.default.getInstance().UIEvent("系统确认","setDlgInfo",{msg:_itemkindmgr2.default.GOLD_NAME+"不足!是否前往商城充值!",obj:this,okfun:okfunc,args:[2]},!0,!0):_UIMgr2.default.getInstance().OpenUI("首充界面")}}},{key:"OnExchangeFishScore",value:function(chairno){this.__mySeatIdx==chairno&&(this.currentView.btnItem.visible=!!_gameconst2.default.CANUSEITEM,this.currentView.btnShop.visible=!!_gameconst2.default.GAMECHARGE,this.currentView.btnLock.visible=!0,this.currentView.btnAuto.visible=!0,this.currentView.btnFever.visible=!0,this.currentView.btnSkill.visible=!0)}},{key:"__chgTurrentSkin",value:function(){if(!(this.__mySeatIdx<=0)){var seat=this.currentView.turrets.getChildByName("seat"+this.alterPos(this.__mySeatIdx));seat.__gdata&&_UIMgr2.default.getInstance().UIEvent("更换炮台界面","SetData",{skin:seat.__gdata.turrentskin},!0,!0)}}},{key:"OnUserChgTurrentSkin",value:function(args){var chairno=args.chairno,skin=args.skin;this.currentView.turrets.getChildByName("seat"+this.alterPos(chairno)).OnChgTurrentSkin(skin)}},{key:"AppPause",value:function(){var btn=this.currentView.btnAuto;btn.selected&&(btn.selected=!1,btn.getChildByName("ani").visible=!1,this.__autoFire=!1,this.currentView.on("mousedown",this,this.sendBullet),this.currentView.on("mouseup",this,this.stopSendBullet),this.stopSendBullet())}}]),AquaUI_Jcby}();exports.default=AquaUI_Jcby},{"../../../app/com/vipmgr":4,"../../../app/gameconst":5,"../../../appbase/com/FlyText":52,"../../../appbase/com/LoadingBar":56,"../../../appbase/com/OnceNoticeUI":58,"../../../appbase/com/soundmgr":65,"../../../framework/data/item/itemkindmgr":113,"../../../framework/data/playerdata_mgr":117,"../../../framework/gamemodel/gamemodelmgr":123,"../../../framework/gtea/BaseObj":126,"../../../framework/match/matchdef":132,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../framework/utils/config":145,"../../../framework/utils/tdf":148,"../../../ui/layaMaxUI":178,"../meta/settings":156,"../util/cannon_calc":174,"../util/handler":175,"../util/motion":176,"../util/pool":177,"./parts/blitz_clip":161,"./parts/bullet":162,"./parts/coin_clip":163,"./parts/fish":164,"./parts/fish_shadow":165,"./parts/flower_clip":166,"./parts/linker":167,"./parts/number_clip":168,"./parts/settle":169,"./parts/turret":170}],160:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_vipmgr2=_interopRequireDefault(require("../../../app/com/vipmgr")),_gamemodelmgr2=_interopRequireDefault(require("../../../framework/gamemodel/gamemodelmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GoldSubsidiesUI=function(_BaseUI){function GoldSubsidiesUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GoldSubsidiesUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GoldSubsidiesUI.__proto__||Object.getPrototypeOf(GoldSubsidiesUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GoldSubsidiesUI,_BaseUI3.default),_createClass(GoldSubsidiesUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(GoldSubsidiesUI.prototype.__proto__||Object.getPrototypeOf(GoldSubsidiesUI.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.getbtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.okbtn.on(Laya.Event.MOUSE_DOWN,this,function(){_UIMgr2.default.getInstance().OpenUI("游戏内充值"),_UIMgr2.default.getInstance().CloseUI("金币补助界面")})}},{key:"OnOpen",value:function(){var vipdata=_vipmgr2.default.GetVipData();if(!vipdata)return this.uiobj.getbtn.disabled=!0,void(this.uiobj.gold.text="0");this.uiobj.getbtn.disabled=!1,this.uiobj.gold.text=vipdata.getgold}},{key:"OnClose",value:function(){}},{key:"OnClick",value:function(event){event.target==this.uiobj.closebtn?_UIMgr2.default.getInstance().CloseUI("金币补助界面"):event.target===this.uiobj.getbtn&&(_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,"CallSvr",{evename:"UserGoldSubsidies",data:{}}),this.uiobj.getbtn.disabled=!0),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),GoldSubsidiesUI}();exports.default=GoldSubsidiesUI},{"../../../app/com/vipmgr":4,"../../../app/gameconst":5,"../../../appbase/com/soundmgr":65,"../../../framework/gamemodel/gamemodelmgr":123,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142}],161:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_cannon_calc=require("../../util/cannon_calc"),_motion=require("../../util/motion"),_motion2=(obj=_motion)&&obj.__esModule?obj:{default:obj};var BlitzClip_Jcby=function(_Laya$Clip){function BlitzClip_Jcby(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BlitzClip_Jcby);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(BlitzClip_Jcby.__proto__||Object.getPrototypeOf(BlitzClip_Jcby)).call(this));return _this.skin="res-game/jcby/aqua/tx_shandian.png",_this.clipX=1,_this.clipY=4,_this.anchorX=.5,_this.anchorY=.5,_this.autoPlay=!0,_this.bomb=new Laya.Animation,_this.bomb.source="jcby/aqua/ani/lightning_bomb.ani",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BlitzClip_Jcby,Laya.Clip),_createClass(BlitzClip_Jcby,[{key:"create",value:function(fromX,fromY,toX,toY,delay,duration){var _this2=this;return this.clipX=5,this.clipY=1,this.height=(0,_cannon_calc.getDistance)({x:fromX,y:fromY},{x:toX,y:toY}),this.pos((toX-fromX)/2+fromX,(toY-fromY)/2+fromY),this.rotation=180*Math.atan2(toY-fromY,toX-fromX)/Math.PI+90,this.alpha=0,new Promise(function(resolve){_motion2.default.sequenceTo(_this2,[[{alpha:1},0,"",delay],[{alpha:0},0,"",duration]]).then(function(){_this2.bomb.parent&&_this2.bomb.removeSelf(),_this2.parent.addChild(_this2.bomb),_this2.bomb.pos(toX,toY),_this2.bomb.play(0,!1),_this2.bomb.on("complete",function(){resolve()})})})}}]),BlitzClip_Jcby}();exports.default=BlitzClip_Jcby},{"../../util/cannon_calc":174,"../../util/motion":176}],162:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_motion2=(require("../../util/cannon_calc"),_interopRequireDefault(require("../../util/motion"))),_vipmgr2=_interopRequireDefault(require("../../../../app/com/vipmgr")),_comfunc2=_interopRequireDefault(require("../../../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Bullet_Jcby=function(_Laya$Sprite){function Bullet_Jcby(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Bullet_Jcby);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Bullet_Jcby.__proto__||Object.getPrototypeOf(Bullet_Jcby)).call(this)),bullet=new Laya.Animation;bullet.source="jcby/aqua/ani/bullet.ani",_this.addChild(bullet),_this.bullet=bullet;var net=new Laya.Animation;net.on("complete",net,function(){this.ripper.visible=!1,"drill"===this.__mark&&this.event("bombed",this.position),this.hide()}.bind(_this)),net.blendMode="lighter",_this.addChild(net),_this.net=net;var ripper=new Laya.Animation;return ripper.source="jcby/aqua/ani/ripper.ani",ripper.visible=!1,_this.addChild(ripper),_this.ripper=ripper,_this.__mark=0,_this.__hue=0,_this.zOrder=2,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Bullet_Jcby,Laya.Sprite),_createClass(Bullet_Jcby,null,[{key:"alloc",value:function(){return Bullet_Jcby.__cachedAnimationPool.length?Bullet_Jcby.__cachedAnimationPool.shift():new Bullet_Jcby}},{key:"free",value:function(bullet){Bullet_Jcby.__cachedAnimationPool.push(bullet)}},{key:"clear",value:function(){for(var i=Bullet_Jcby.__cachedAnimationPool.length-1;i>=0;i--)Bullet_Jcby.__cachedAnimationPool[i].destroy(!0);Bullet_Jcby.__cachedAnimationPool.length=0}}]),_createClass(Bullet_Jcby,[{key:"setup",value:function(level,special,mine,gdata){this.__mark=0,special.double?this.__mark="double":special.free?this.__mark="free":special.drill?this.__mark="drill":gdata&&(_comfunc2.default.isNil(gdata.turrentskin)?gdata.vipdata&&(this.__mark=Math.min(6,_vipmgr2.default.GetVipLv(gdata.vipdata.exp))):this.__mark=Math.min(6,gdata.turrentskin)),this.alpha=mine?1:.3,this.bullet.play(0,!0,"bullet"+this.__mark),this.bullet.visible=!0}},{key:"fly",value:function(data){var x=data.x,y=data.y,a=data.a,tx=data.tx,ty=data.ty,duration=data.duration;this.rotation=a,_motion2.default.clearAll(this),this.pos(x,y),_motion2.default.to(this,{x:tx,y:ty},duration)}},{key:"drillBomb",value:function(data){var x=data.x,y=data.y,tx=data.tx,ty=data.ty;_motion2.default.clearAll(this),this.pos(x,y),_motion2.default.to(this,{x:tx,y:ty,rotation:this.rotation+720},1500,"sineOut").then(function(){this.drillBomb2()}.bind(this))}},{key:"drillBomb2",value:function(){this.clearTimer(this,this.__printShadow),this.bullet.visible=!1,this.net.source="jcby/aqua/ani/baku.ani",this.net.play(0,!1),this.event("bomb",this.position)}},{key:"printShadow",value:function(){this.timerOnce(16,this,this.__printShadow,[],!1)}},{key:"__printShadow",value:function(){if(this.parent){var rgb=function(h,s,l){var fc=[l,l,l];if(s>0){var t1,fh=void 0,t2=void 0;t1=2*l-(t2=l<.5?l*(1+s):l+s-l*s),[((fh=h%360/360)+1/3)%1,fh,(1+fh-1/3)%1].forEach(function(t3,idx){fc[idx]=6*t3<1?t1+6*(t2-t1)*t3:2*t3<1?t2:3*t3<2?t1+(t2-t1)*(2/3-t3)*6:t1})}return{r:Math.round(255*fc[0]),g:Math.round(255*fc[1]),b:Math.round(255*fc[2])}}(this.__hue%360,1,.5);this.__hue+=10;var shadow=new Laya.Image;shadow.skin="res-game/jcby/aqua/drill_tail.png",shadow.anchorX=.5,shadow.anchorY=.5,shadow.pos(this.x,this.y),shadow.rotation=this.rotation,shadow.setColorFilter(rgb.r,rgb.g,rgb.b),shadow.blendMode="lighter",shadow.zOrder=1,this.parent.addChild(shadow),_motion2.default.to(shadow,{alpha:0,scaleX:.5,scaleY:.5},1e3).then(function(){shadow.destroy()}),this.printShadow()}}},{key:"bomb",value:function(){this.clearTimer(this,this.__printShadow),_motion2.default.clearAll(this),this.bullet.visible=!1,this.ripper.x=100-200*Math.random(),this.ripper.y=100-200*Math.random(),this.ripper.alpha=.5*Math.random()+.3,this.ripper.visible=!0,this.ripper.play(0,!1),"double"===this.__mark||"free"==this.__mark?this.net.source="jcby/aqua/ani/netsp.ani":this.net.source="jcby/aqua/ani/net.ani",this.net.play(0,!1,"net"+this.__mark)}},{key:"hide",value:function(){this.name=void 0,this.removeSelf(),this.__free()}},{key:"__free",value:function(){Bullet_Jcby.free(this)}}]),Bullet_Jcby}();exports.default=Bullet_Jcby,Bullet_Jcby.__cachedAnimationPool=[]},{"../../../../app/com/vipmgr":4,"../../../../framework/utils/comfunc":144,"../../util/cannon_calc":174,"../../util/motion":176}],163:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_cannon_calc=require("../../util/cannon_calc"),_motion=require("../../util/motion"),_motion2=(obj=_motion)&&obj.__esModule?obj:{default:obj};var CoinClip_Jcby=function(_Laya$Clip){function CoinClip_Jcby(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CoinClip_Jcby);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(CoinClip_Jcby.__proto__||Object.getPrototypeOf(CoinClip_Jcby)).call(this));return _this.skin="res-game/jcby/aqua/coin.png",_this.clipX=5,_this.clipY=4,_this.anchorX=.5,_this.anchorY=.5,_this.autoPlay=!0,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(CoinClip_Jcby,Laya.Clip),_createClass(CoinClip_Jcby,[{key:"jumpFly",value:function(sx,sy,tx,ty,delay,wait,mine){this.pos(sx,sy),this.alpha=0;var time=(0,_cannon_calc.getDistance)({x:tx,y:ty},{x:sx,y:sy})/1e3;return _motion2.default.sequenceTo(this,[[{alpha:mine?1:.3},0,"",delay],[{y:sy-70},120,"sineOut"],[{y:sy},100,"sineIn"],[{y:sy-50},100,"sineOut"],[{y:sy},100,"sineIn"],[{y:sy-30},100,"sineOut"],[{y:sy},80,"sineIn"],[{x:tx,y:ty},1e3*time,"quadOut",wait-delay]])}},{key:"circleFly",value:function(ox,oy,sx,sy,tx,ty,delay,wait,mine){this.pos(ox,oy),this.alpha=0;var time=(0,_cannon_calc.getDistance)({x:tx,y:ty},{x:sx,y:sy})/1e3;return _motion2.default.sequenceTo(this,[[{alpha:mine?1:.3},0,"",delay],[{x:sx,y:sy},300,"sineOut"],[{x:tx,y:ty},1e3*time,"quadOut",wait-delay]])}}]),CoinClip_Jcby}();exports.default=CoinClip_Jcby},{"../../util/cannon_calc":174,"../../util/motion":176}],164:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_motion2=_interopRequireDefault(require("../../util/motion")),_fishtype2=_interopRequireDefault(require("../../meta/fishtype")),_BaseObj2=_interopRequireDefault(require("../../../../framework/gtea/BaseObj"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Ani_Jcby=function(_Laya$Sprite){function Ani_Jcby(typeConfig){_classCallCheck(this,Ani_Jcby);var _this=_possibleConstructorReturn(this,(Ani_Jcby.__proto__||Object.getPrototypeOf(Ani_Jcby)).call(this));if(_this.__aniType=typeConfig.type,_this.__typeConfig=typeConfig,"ani"===_this.__aniType){var ani=new Laya.Animation;ani.source="jcby/fish/"+typeConfig.ani,ani.on("complete",ani,function(){this.event("complete")}.bind(_this)),_this.addChild(ani),_this.ani=ani}else if("sk"===_this.__aniType){var _ani=new(Laya.ClassUtils.getClass("ui.jcby.fish."+typeConfig.scene+"UI"));_this.addChild(_ani),_this.ani=_ani}var touchplace=new Laya.Sprite;return touchplace.on("mousedown",_this,function(){this.event("select")}),_this.addChild(touchplace),_this.touchplace=touchplace,_this}return _inherits(Ani_Jcby,Laya.Sprite),_createClass(Ani_Jcby,[{key:"swim",value:function(){if("ani"===this.__aniType){this.ani.play(0,!0,"swim");var rect=this.ani.getBounds();"free_fish"!==this.__typeConfig.ani&&"drill_fish"!==this.__typeConfig.ani&&"y20.ani"!==this.__typeConfig.ani||console.log(rect),this.touchplace.size(rect.width,rect.height),this.touchplace.pivot(rect.width/2,rect.height/2)}else if("sk"===this.__aniType){this.ani.alpha=1;try{this.ani.sk.play("newAnimation",!0)}catch(ex){}this.ani.sk.playbackRate(1);var _rect=this.ani.tp;this.touchplace.size(_rect.width,_rect.height),this.touchplace.pivot(_rect.width/2,_rect.height/2)}}},{key:"die",value:function(){"ani"===this.__aniType?this.ani.play(0,!1,"die"):"sk"===this.__aniType&&(this.ani.sk.playbackRate(3),_motion2.default.to(this.ani,{alpha:0},300,"linear",700).then(function(){this.event("complete")}.bind(this))),this.touchplace.size(0,0),this.touchplace.pivot(0,0)}},{key:"damage",value:function(){"sk"===this.__aniType&&(this.ani.sk.play(0,!0),this.ani.sk.playbackRate(5),this.ani.shake.play(0,!0))}},{key:"endDamage",value:function(){"sk"===this.__aniType&&(this.ani.sk.play(0,!0),this.ani.sk.playbackRate(1),this.ani.shake.gotoAndStop(0))}},{key:"pause",value:function(){"ani"===this.__aniType?this.ani.stop():"sk"===this.__aniType&&this.ani.sk.stop()}},{key:"resume",value:function(){"ani"===this.__aniType?this.ani.play(0,!0,"swim"):"sk"===this.__aniType&&this.ani.sk.play(0,!0)}}]),Ani_Jcby}(),Fish_Jcby=function(_Laya$Sprite2){function Fish_Jcby(type){_classCallCheck(this,Fish_Jcby);var _this2=_possibleConstructorReturn(this,(Fish_Jcby.__proto__||Object.getPrototypeOf(Fish_Jcby)).call(this)),typeConfig=_fishtype2.default.szData[type];_this2.__type=type,_this2.__quantity=typeConfig.team||1,_this2.__dead=!1;for(var i=0;i<_this2.__quantity;i++){if(typeConfig.halo){var halo=new Laya.Animation;halo.source="jcby/fish/halo"+typeConfig.halo+".ani",halo.position=Fish_Jcby.teamPos[_this2.__quantity][i],halo.play(0,!0),_this2.addChild(halo)}var ani=new Ani_Jcby(typeConfig);ani.scaleX=ani.scaleY=typeConfig.scale||1,ani.pos(Fish_Jcby.teamPos[_this2.__quantity][i].x,Fish_Jcby.teamPos[_this2.__quantity][i].y),ani.name="ani_"+i,ani.on("select",_this2,_this2.__selected),_this2.addChild(ani)}return _this2.redPacket=new Laya.Image("lobby/icon_redpack.png"),_this2.redPacket.visible=!1,_this2.redPacket.anchorX=.5,_this2.redPacket.anchorY=.5,_this2.addChild(_this2.redPacket),_this2}return _inherits(Fish_Jcby,Laya.Sprite),_createClass(Fish_Jcby,[{key:"__selected",value:function(){this.red(),_BaseObj2.default.getEventObj().dispatchEvent("jcby.fish.selected",[this.name])}},{key:"red",value:function(time){this.__dead||(this.setColorFilter(255,0,0),this.timerOnce(time||200,this,this.setColorFilter,[255,255,255]))}},{key:"show",value:function(){this.__dead=!1;for(var i=0;i<this.__quantity;i++)this.getChildByName("ani_"+i).swim()}},{key:"die",value:function(){this.__dead=!0,_motion2.default.clearAll(this);for(var i=0;i<this.__quantity;i++)this.getChildByName("ani_"+i).die();this.getChildByName("ani_0").once("complete",this,this.hide)}},{key:"damage",value:function(){_motion2.default.clearAll(this);for(var i=0;i<this.__quantity;i++)this.getChildByName("ani_"+i).damage()}},{key:"endDamage",value:function(){for(var i=0;i<this.__quantity;i++)this.getChildByName("ani_"+i).endDamage()}},{key:"hide",value:function(){this.name=void 0,this.getChildByName("ani_0").off("complete",this,this.hide),this.removeSelf(),this.__free()}},{key:"__free",value:function(){this.setColorFilter(255,255,255),Fish_Jcby.free(this)}},{key:"swim",value:function(data,nf){var x=data.x,y=data.y,a=data.a,tx=data.tx,ty=data.ty,ta=data.ta,duration=data.duration,s=1,ts=1;a%=360,ta%=360,nf?Math.abs(ta-a)>180&&(ta>a?a+=360:ta+=360):((a<0||a>180)&&(a-=180,s=-1),(ta<0||ta>180)&&(ta-=180,ts=-1)),this.rotation=a,this.pos(x,y),this.scaleY=s,_motion2.default.to(this,{x:tx,y:ty,rotation:ta,scaleY:ts},duration)}},{key:"escape",value:function(data){var x=data.x,y=data.y,tx=data.tx,ty=data.ty;this.__dead=!0,_motion2.default.clearAll(this),this.pos(x,y),_motion2.default.to(this,{x:tx,y:ty},2e3,"sineOut").then(function(){this.hide()}.bind(this))}},{key:"stopMoving",value:function(){if(!this.__dead){_motion2.default.clearAll(this);for(var i=0;i<this.__quantity;i++)this.getChildByName("ani_"+i).pause()}}},{key:"startMoving",value:function(){if(!this.__dead){_motion2.default.clearAll(this);for(var i=0;i<this.__quantity;i++)this.getChildByName("ani_"+i).resume()}}},{key:"type",get:function(){return this.__type}}],[{key:"alloc",value:function(type){Fish_Jcby.__cachedAnimationPool.has(type)||Fish_Jcby.__cachedAnimationPool.set(type,[]);var pool=Fish_Jcby.__cachedAnimationPool.get(type);return pool.length?pool.shift():new Fish_Jcby(type)}},{key:"free",value:function(fish){var type=fish.type;Fish_Jcby.__cachedAnimationPool.has(type)||Fish_Jcby.__cachedAnimationPool.set(type,[]),Fish_Jcby.__cachedAnimationPool.get(type).push(fish)}},{key:"clear",value:function(){Fish_Jcby.__cachedAnimationPool.forEach(function(list){list.forEach(function(fish){fish.destroy()})}),Fish_Jcby.__cachedAnimationPool.clear()}}]),Fish_Jcby}();exports.default=Fish_Jcby,Fish_Jcby.__cachedAnimationPool=new Map,Fish_Jcby.teamPos={1:[{x:0,y:0}],3:[{x:0,y:70},{x:60.62177826491071,y:-34.999999999999986},{x:-60.62177826491071,y:-34.999999999999986}],4:[{x:0,y:70},{x:70,y:0},{x:0,y:-70},{x:-70,y:0}]}},{"../../../../framework/gtea/BaseObj":126,"../../meta/fishtype":155,"../../util/motion":176}],165:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_fish=require("./fish"),_fish2=(obj=_fish)&&obj.__esModule?obj:{default:obj};var FishShadow_Jcby=function(_Fish_Jcby){function FishShadow_Jcby(type){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FishShadow_Jcby);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FishShadow_Jcby.__proto__||Object.getPrototypeOf(FishShadow_Jcby)).call(this,type));return _this.setColorFilter(0,0,0,.6),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FishShadow_Jcby,_fish2.default),_createClass(FishShadow_Jcby,[{key:"__selected",value:function(){}},{key:"__free",value:function(){FishShadow_Jcby.free(this)}}],[{key:"alloc",value:function(type){FishShadow_Jcby.__cachedAnimationPool.has(type)||FishShadow_Jcby.__cachedAnimationPool.set(type,[]);var pool=FishShadow_Jcby.__cachedAnimationPool.get(type);return pool.length?pool.shift():new FishShadow_Jcby(type)}},{key:"free",value:function(fish){var type=fish.type;FishShadow_Jcby.__cachedAnimationPool.has(type)||FishShadow_Jcby.__cachedAnimationPool.set(type,[]),FishShadow_Jcby.__cachedAnimationPool.get(type).push(fish)}},{key:"clear",value:function(){FishShadow_Jcby.__cachedAnimationPool.forEach(function(list){list.forEach(function(fish){fish.destroy()})}),FishShadow_Jcby.__cachedAnimationPool.clear()}}]),FishShadow_Jcby}();exports.default=FishShadow_Jcby,FishShadow_Jcby.__cachedAnimationPool=new Map},{"./fish":164}],166:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_layaMaxUI=require("../../../../ui/layaMaxUI");var specialType=[42,43,44,45,46],FlowerClip_Jcby=function(_flowerUI){function FlowerClip_Jcby(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FlowerClip_Jcby);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(FlowerClip_Jcby.__proto__||Object.getPrototypeOf(FlowerClip_Jcby)).call(this));return _this._golden=!0,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(FlowerClip_Jcby,_layaMaxUI.flowerUI),_createClass(FlowerClip_Jcby,[{key:"swing",value:function(fishType,score){return new Promise(function(resolve){var aniName="normal";specialType.indexOf(fishType)>-1&&(aniName="special"),this.gold.value=score,this.fishname.skin="res-game/jcby/aqua/fishname"+fishType+".png",this[aniName].on("complete",this,function(){resolve()}),this[aniName].play(0,!1)}.bind(this))}},{key:"golden",get:function(){return this._golden},set:function(v){v!==this._golden&&(this._golden=v,this.gold.skin="res-game/jcby/aqua/scenescorenum"+(v?"":"2")+".png")}}]),FlowerClip_Jcby}();exports.default=FlowerClip_Jcby},{"../../../../ui/layaMaxUI":178}],167:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_cannon_calc=require("../../util/cannon_calc"),_motion=require("../../util/motion"),_motion2=(obj=_motion)&&obj.__esModule?obj:{default:obj};var Linker_Jcby=function(_Laya$Sprite){function Linker_Jcby(baseX,baseY){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Linker_Jcby);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Linker_Jcby.__proto__||Object.getPrototypeOf(Linker_Jcby)).call(this));_this.__linking=!1,_this.__linkingFishId=0,_this.__baseX=baseX,_this.__baseY=baseY,_this.__linkX=baseX,_this.__linkY=baseY;var line=new Laya.Image;line.skin="res-game/jcby/aqua/lightning1_base.png",line.anchorX=.5,line.alpha=.5,line.pos(baseX,baseY),_this.addChild(line),_this.line=line;var wave=new Laya.Sprite,waveTex=Laya.Texture.createFromURL("res-game/jcby/aqua/lightning1_wave.png"),texWidth=waveTex.sourceWidth,texHeight=waveTex.sourceHeight;wave.width=texWidth,wave.pivotX=texWidth/2,wave.pos(baseX,baseY),wave.alpha=1,wave.blendMode="lighter",_this.addChild(wave),_this.wave=wave,_this.waveTex=waveTex,_this.waveStep=0,_this.texWidth=texWidth,_this.texHeight=texHeight;var target=new Laya.Sprite;target.pos(baseX,baseY),_this.addChild(target),_this.target=target;var flag=new Laya.Animation;return flag.source="jcby/aqua/ani/lockon.ani",target.addChild(flag),flag.play(0,!0),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Linker_Jcby,Laya.Sprite),_createClass(Linker_Jcby,[{key:"linkTo",value:function(fishId,x,y){this.__linkX=x,this.__linkY=y,this.__linking&&this.__linkingFishId===fishId||(this.__linking=!0,this.__linkingFishId=fishId,this.__linkStart())}},{key:"linkEnd",value:function(){this.__linkX=this.__baseX,this.__linkY=this.__baseY,this.__linking&&(this.__linking=!1,this.__linkStart())}},{key:"__waveAnimation",value:function(){this.wave.graphics.clear();var texWidth=this.texWidth,texHeight=this.texHeight,waveTex=this.waveTex,waveStep=(this.waveStep+5)%(1*texHeight),waveHeight=this.wave.height;if(this.waveStep=waveStep,waveHeight>0)for(var currStep=waveStep;currStep<waveHeight-texHeight+1;currStep+=1*texHeight)this.wave.graphics.drawTexture(waveTex,0,currStep,texWidth,texHeight)}},{key:"__linkStart",value:function(){var linkPoint={x:this.__linkX,y:this.__linkY},basePoint={x:this.__baseX,y:this.__baseY},distance=(0,_cannon_calc.getDistance)(basePoint,linkPoint)-10,angle=180-180*Math.atan2(basePoint.x-linkPoint.x,basePoint.y-linkPoint.y)/Math.PI,scale=distance/this.line.height;_motion2.default.clearAll(this.target),_motion2.default.to(this.target,linkPoint,300),_motion2.default.clearAll(this.line),_motion2.default.to(this.line,{rotation:angle,scaleY:scale},300),_motion2.default.clearAll(this.wave),_motion2.default.to(this.wave,{rotation:angle,height:distance},300),this.timerOnce(300,this,this.__linkKeep,[],!0),this.timerLoop(30,this,this.__waveAnimation,[],!0)}},{key:"__linkKeep",value:function(){if(this.__linkX!==this.__baseX||this.__linkY!==this.__baseY){var linkPoint={x:this.__linkX,y:this.__linkY},basePoint={x:this.__baseX,y:this.__baseY},distance=(0,_cannon_calc.getDistance)(basePoint,linkPoint)-10,angle=180-180*Math.atan2(basePoint.x-linkPoint.x,basePoint.y-linkPoint.y)/Math.PI,scale=distance/this.line.height;_motion2.default.to(this.target,linkPoint,30),this.timerOnce(30,this,this.__linkKeep,[],!0),this.line.scaleY=scale,this.line.rotation=angle,this.wave.height=distance,this.wave.rotation=angle}}}]),Linker_Jcby}();exports.default=Linker_Jcby},{"../../util/cannon_calc":174,"../../util/motion":176}],168:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var NumberClip_Jcby=function(_Laya$UIComponent){function NumberClip_Jcby(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NumberClip_Jcby);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(NumberClip_Jcby.__proto__||Object.getPrototypeOf(NumberClip_Jcby)).call(this)),num1=new Laya.FontClip,num2=new Laya.FontClip,pt=new Laya.Image;return num1.skin="res-game/jcby/aqua/txt_number.png",num1.sheet="0123456789",num1.pos(0,0),num1.visible=!1,_this.addChild(num1),_this.num1=num1,num2.skin="res-game/jcby/aqua/txt_number.png",num2.sheet="0123456789",num2.y=0,num2.visible=!1,_this.addChild(num2),_this.num2=num2,pt.skin="res-game/jcby/aqua/txt_point.png",pt.y=32,pt.visible=!1,_this.addChild(pt),_this.pt=pt,_this.__golden=1,_this.__value="",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(NumberClip_Jcby,Laya.UIComponent),_createClass(NumberClip_Jcby,[{key:"golden",get:function(){return this.__golden},set:function(v){if(v!==this.__golden){this.__golden=v;var p="";1!=v&&(p=v.toString()),this.num1.skin="res-game/jcby/aqua/txt_number"+p+".png",this.num2.skin="res-game/jcby/aqua/txt_number"+p+".png",this.pt.skin="res-game/jcby/aqua/txt_point"+p+".png"}}},{key:"value",get:function(){return this.__value},set:function(v){if(v!==this.__value){this.__value=v;var t=v.toString().split(".");t.length>1?(this.num1.value=t[0],this.num2.value=t[1],this.num1.visible=!0,this.num2.visible=!0,this.pt.visible=!0,this.callLater(function(){this.pt.x=this.num1.width,this.num2.x=this.pt.x+this.pt.width,this._sizeChanged()})):(this.num1.value=t[0],this.num1.visible=!0,this.num2.visible=!1,this.pt.visible=!1,this.callLater(function(){this._sizeChanged()}))}}}]),NumberClip_Jcby}();exports.default=NumberClip_Jcby},{}],169:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_layaMaxUI=require("../../../../ui/layaMaxUI"),_comfunc2=_interopRequireDefault(require("../../../../framework/utils/comfunc")),_gameconst2=_interopRequireDefault(require("../../../../app/gameconst"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Settle_Jcby=function(_Settle_JcbyUI){function Settle_Jcby(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Settle_Jcby),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Settle_Jcby.__proto__||Object.getPrototypeOf(Settle_Jcby)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Settle_Jcby,_layaMaxUI.Settle_JcbyUI),_createClass(Settle_Jcby,[{key:"showData",value:function(canopenchest,data){this.wait.visible=!1,this.exinfo.visible=!0;var table=new _layaMaxUI.RecordDetailUI;this.tablePlace.addChild(table);var totalreward=data.get_gold+data.get_item_score+data.charge_score+(data.meteorites_score||0);table.cost.text=_comfunc2.default.getGoldRatio(data.bullet_gold).toString(),table.reward.text=_comfunc2.default.getGoldRatio(totalreward).toString(),table.gold.text=_comfunc2.default.getGoldRatio(data.end_gold).toString(),table.redpacket.value=_comfunc2.default.getVouchers2Ratio(data.get_redpacket).toString(),_gameconst2.default.CONFIG.isreview&&(table.redpacketicon.visible=!1,table.redpacket.visible=!1);var sztorpedo=["f1000005","f1000006","f1000007","f1000008"],torpedonum=0;for(var key in data.catch_fish){var value=table.val.getChildByName(key);value&&(value.text="X"+data.catch_fish[key]);for(var i=0;i<sztorpedo.length;i++)if(key==sztorpedo[i]){torpedonum+=data.catch_fish[key];break}}canopenchest?_gameconst2.default.SetIconImg(table.redpacketicon,"lobby/icon_redpack.png"):(table.redpacket.value=torpedonum,_gameconst2.default.SetIconImg(table.redpacketicon,"lobby/yx_torpedo_hei.png"))}}]),Settle_Jcby}();exports.default=Settle_Jcby},{"../../../../app/gameconst":5,"../../../../framework/utils/comfunc":144,"../../../../ui/layaMaxUI":178}],170:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_layaMaxUI=require("../../../../ui/layaMaxUI"),_handler2=_interopRequireDefault(require("../../util/handler")),_settings2=_interopRequireDefault(require("../../meta/settings")),_soundmgr2=_interopRequireDefault(require("../../../../appbase/com/soundmgr")),_motion2=_interopRequireDefault(require("../../util/motion")),_gameconst2=_interopRequireDefault(require("../../../../app/gameconst")),_playerdata_mgr2=_interopRequireDefault(require("../../../../framework/data/playerdata_mgr")),_comfunc2=_interopRequireDefault(require("../../../../framework/utils/comfunc")),_vipmgr2=(require("../../util/cannon_calc"),_interopRequireDefault(require("../../../../appbase/com/FlyText")),_interopRequireDefault(require("../../../../app/com/vipmgr")));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Turret_Jcby=function(_Turret_JcbyUI){function Turret_Jcby(pos,kind){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Turret_Jcby);var _this2=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Turret_Jcby.__proto__||Object.getPrototypeOf(Turret_Jcby)).call(this));return _this2.__pos=pos,_this2.__canopenchest=kind.canopenchest,_this2.__kindID=kind.m_nKindID,_this2.__player="other",_this2.__invent=pos>2,_this2.__firing=!1,_this2.__double=!1,_this2.__free=!1,_this2.__drill=!1,_this2.__laser=!1,_this2.__laserTimes=0,_this2.__lev=0,_this2.__cannonMarkName="0",_this2.__specialPaused=!1,_this2.__invent?(_this2.getChildByName("cover_34").visible=!0,_this2.levelNum=_this2.getChildByName("cover_34").getChildByName("level_num"),_this2.laserPanel=_this2.getChildByName("laser_34")):(_this2.getChildByName("cover_12").visible=!0,_this2.levelNum=_this2.getChildByName("cover_12").getChildByName("level_num"),_this2.laserPanel=_this2.getChildByName("laser_12")),_this2.levelNum.charMapping={0:"0a",1:"1b",2:"2c",3:"3d",4:"4e",5:"5f",6:"6g",7:"7h",8:"8i",9:"9j",S:"Ss"},Object.defineProperty(_this2.laserPanel.getChildByName("elapse"),"numberVal",{get:function(){return this.__value||0},set:function(v){this.__value=v,this.text=_comfunc2.default.stringformat("%02d",[Math.floor(v/60)])+":"+_comfunc2.default.stringformat("%02d",[Math.round(v%60)])}}),_this2.getChildByName("self"+pos).getChildByName("info").getChildByName("btn_down").on("mousedown",_this2,_this2.stopPropagation),_this2.getChildByName("self"+pos).getChildByName("info").getChildByName("btn_down").clickHandler=_handler2.default.create(_this2.levelDown,_this2),_this2.getChildByName("self"+pos).getChildByName("info").getChildByName("btn_up").on("mousedown",_this2,_this2.stopPropagation),_this2.getChildByName("self"+pos).getChildByName("info").getChildByName("btn_up").clickHandler=_handler2.default.create(_this2.levelUp,_this2),_this2.getChildByName("self"+pos).getChildByName("free").getChildByName("elapse").charMapping={0:"0a",1:"1b",2:"2c",3:"3d",4:"4e",5:"5f",6:"6g",7:"7h",8:"8i",9:"9j",S:"Ss"},_this2.getChildByName("self"+pos).getChildByName("free").getChildByName("elapse").labelFormater="${numberVal}S",_this2.getChildByName("self"+pos).getChildByName("free").getChildByName("elapse").fixDigit=2,_this2.getChildByName("self"+pos).getChildByName("free").getChildByName("elapse").forceDigit=!0,_this2.getChildByName("self"+pos).getChildByName("free").getChildByName("win").fixDigit=0,_this2.getChildByName("self"+pos).getChildByName("tip").visible=!1,_this2.getChildByName("other"+pos).getChildByName("free").getChildByName("elapse").charMapping={0:"0a",1:"1b",2:"2c",3:"3d",4:"4e",5:"5f",6:"6g",7:"7h",8:"8i",9:"9j",S:"Ss"},_this2.getChildByName("other"+pos).getChildByName("free").getChildByName("elapse").labelFormater="${numberVal}S",_this2.getChildByName("other"+pos).getChildByName("free").getChildByName("elapse").fixDigit=2,_this2.getChildByName("other"+pos).getChildByName("free").getChildByName("elapse").forceDigit=!0,_this2.getChildByName("other"+pos).getChildByName("free").getChildByName("win").fixDigit=2,_this2.getChildByName("other"+pos).getChildByName("free").getChildByName("win").forceDigit=!0,_this2.__invent&&(_this2.base.rotation=180,_this2.cannon.rotation=180),_this2.cannon.getChildByName("main").on("complete",_this2,function(){this.__firing&&!this.__drill&&this.idle()}),_this2.visible=!1,_this2}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Turret_Jcby,_layaMaxUI.Turret_JcbyUI),_createClass(Turret_Jcby,[{key:"destroy",value:function(){if("self"==this.__player&&_gameconst2.default.LOCKTURRET){var gamedata=_playerdata_mgr2.default.getInstance().getMe().getGameData("jcby_"+this.__kindID);gamedata&&gamedata.removeEventListener("eve.DataChg",this),_playerdata_mgr2.default.getInstance().getMe().removeEventListener("eve.VipExpChg",this),this.ClearTip()}(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(Turret_Jcby.prototype.__proto__||Object.getPrototypeOf(Turret_Jcby.prototype),"destroy",this).call(this)}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"fire",value:function(){this.__firing=!0,this.cannon.getChildByName("main").play(0,!1,"fire"+this.__cannonMarkName),this.cannon.getChildByName("triple_1").play(0,!1,"fire"+this.__cannonMarkName),this.cannon.getChildByName("triple_2").play(0,!1,"fire"+this.__cannonMarkName)}},{key:"idle",value:function(){this.__firing=!1,this.cannon.getChildByName("main").play(0,!0,"idle"+this.__cannonMarkName),this.cannon.getChildByName("triple_1").play(0,!0,"idle"+this.__cannonMarkName),this.cannon.getChildByName("triple_2").play(0,!0,"idle"+this.__cannonMarkName)}},{key:"ready",value:function(){this.cannon.getChildByName("main").play(0,!0,"ready"+this.__cannonMarkName),this.cannon.getChildByName("triple_1").play(0,!0,"ready"+this.__cannonMarkName),this.cannon.getChildByName("triple_2").play(0,!0,"ready"+this.__cannonMarkName)}},{key:"specialPaused",value:function(){this.__specialPaused=!0}},{key:"playerIn",value:function(name,self,gdata){this.__player=self?"self":"other",this.__gdata=gdata,this.getChildByName(this.__player+this.__pos).getChildByName("info").getChildByName("nickname").text=name,this.getChildByName(this.__player+this.__pos).visible=!0,this.level=1,"self"===this.__player&&(this.chkLockTurret(),this.refreshRedPacket(),_playerdata_mgr2.default.getInstance().getMe().addEventListener("eve.VipExpChg",this,this.__recalcLevelMark)),this.__recalcLevelMark(),this.visible=!0}},{key:"playerOut",value:function(){var panel=this.getChildByName(this.__player+this.__pos);if("self"===this.__player&&_gameconst2.default.LOCKTURRET){var gamedata=_playerdata_mgr2.default.getInstance().getMe().getGameData("jcby_"+this.__kindID);gamedata&&gamedata.removeEventListener("eve.DataChg",this),_playerdata_mgr2.default.getInstance().getMe().removeEventListener("eve.VipExpChg",this)}this.__gdata=null,this.__double=!1,this.__free=!1,this.__drill=!1,this.__specialPaused=!1,this.__player="other",this.__cannonMarkName="0",this.triple=!1,_motion2.default.clearAll(this.cannon),this.visible=!1,panel.visible=!1,panel.getChildByName("free").visible=!1,panel.getChildByName("baseglow").visible=!1,this.getChildByName("baseglow_rage").visible=!1}},{key:"refreshRedPacket",value:function(){if("self"===this.__player){var redpacket=this.getChildByName("self"+this.__pos).getChildByName("redpacket");if(_gameconst2.default.CONFIG.isreview)redpacket.visible=!1;else if(this.__canopenchest)_gameconst2.default.SetIconImg(redpacket,"res-game/jcby/aqua/frame_hb.png"),redpacket.getChildByName("num").value=_comfunc2.default.getVouchers2Ratio(_playerdata_mgr2.default.getInstance().getMeVouchers2());else{for(var sztorpedo=[1000005,1000006,1000007,1000008],userbag=_playerdata_mgr2.default.getInstance().getMe().m_ItemBag,totalnum=0,i=0;i<sztorpedo.length;i++)totalnum+=userbag.getItemNum(sztorpedo[i]);_gameconst2.default.SetIconImg(redpacket,"res-game/jcby/aqua/frame_kq.png"),redpacket.getChildByName("num").value=totalnum}}}},{key:"setGold",value:function(gold){var typedGold=gold;2===_settings2.default.moneyType&&(typedGold=_comfunc2.default.getGoldRatio(gold)),1==_gameconst2.default.GOLDRATIO&&gold>1e7&&(typedGold=Math.floor(typedGold/100)/100,typedGold+="万"),this.getChildByName(this.__player+this.__pos).getChildByName("info").getChildByName("gold").value=typedGold}},{key:"laserStart",value:function(){if(!this.__laser){this.__laser=!0,this.__maxLaserTimes=50,this.__laserTimes=this.__maxLaserTimes;var elapse=this.laserPanel.getChildByName("elapse"),progress=this.laserPanel.getChildByName("progress");elapse.numberVal=30,_motion2.default.to(elapse,{scaleX:2,scaleY:2},300,"sineOut").then(function(){var _this3=this;this.getChildByName(this.__player+this.__pos).getChildByName("baseglow").visible=!0,_motion2.default.to(progress,{scaleX:1},200),_motion2.default.to(elapse,{scaleX:1,scaleY:1},300,"sineIn").then(function(){_motion2.default.to(elapse,{numberVal:0},3e4).then(function(){return _this3.laserTimeout()}),_this3.__specialPaused=!1})}.bind(this)),this.laserPanel.visible=!0}}},{key:"freeStart",value:function(time){this.__free||(this.__free=!0,_motion2.default.to(this.cannon,{scaleX:2,scaleY:2},300,"sineOut").then(function(){this.getChildByName(this.__player+this.__pos).getChildByName("baseglow").visible=!0;var free=this.getChildByName(this.__player+this.__pos).getChildByName("free"),freeStart=this.getChildByName("self"+this.__pos).getChildByName("freestart");Date.now();free.getChildByName("elapse").numberVal=time,free.getChildByName("win").numberVal=0,free.getChildByName("ball").getChildByName("plus").text="+0s",free.visible=!0,this.__recalcLevelMark(),freeStart.once("complete",freeStart,function(){_motion2.default.to(free.getChildByName("elapse"),{numberVal:0},1e3*time).then(function(){this.freePause()}.bind(this)),this.__specialPaused=!1}.bind(this)),_motion2.default.to(this.cannon,{scaleX:1,scaleY:1},300,"sineIn").then(function(){freeStart.play(0,!1)}.bind(this))}.bind(this)))}},{key:"addFreeTime",value:function(time){if(this.__free){var freeElapse=this.getChildByName(this.__player+this.__pos).getChildByName("free").getChildByName("elapse");_motion2.default.clearAll(freeElapse),freeElapse.numberVal+=time,_motion2.default.to(freeElapse,{numberVal:0},1e3*freeElapse.numberVal).then(function(){this.freePause()}.bind(this))}}},{key:"addBallTime",value:function(time){if(this.__free){var freePlus=this.getChildByName(this.__player+this.__pos).getChildByName("free").getChildByName("ball").getChildByName("plus");freePlus.text="+"+(parseInt(freePlus.text)+time)+"s"}}},{key:"minusLaserTimes",value:function(){this.__laser&&(this.__laserTimes>0&&this.__laserTimes--,_motion2.default.to(this.laserPanel.getChildByName("progress"),{scaleX:this.__laserTimes/this.__maxLaserTimes},100,"sineIn"))}},{key:"addFreeScore",value:function(score){this.__free&&(this.getChildByName(this.__player+this.__pos).getChildByName("free").getChildByName("win").numberVal+=score)}},{key:"freePause",value:function(){this.__free&&(this.__specialPaused=!0)}},{key:"freeEnd",value:function(){this.__free&&(this.__free=!1,_motion2.default.to(this.cannon,{scaleX:2,scaleY:2},300,"sineOut",400).then(function(){this.getChildByName(this.__player+this.__pos).getChildByName("baseglow").visible=!1,this.getChildByName(this.__player+this.__pos).getChildByName("free").visible=!1,this.__recalcLevelMark(),_motion2.default.to(this.cannon,{scaleX:1,scaleY:1},300,"sineIn").then(function(){this.__specialPaused=!1}.bind(this))}.bind(this)))}},{key:"laserTimeout",value:function(){this.__laser&&(this.event("laser_timeout"),this.__specialPaused=!0)}},{key:"laserEnd",value:function(){this.__laser&&(this.__laser=!1,this.__laserTimes=0,_motion2.default.to(this.laserPanel,{scaleX:3,scaleY:3,alpha:0},300,"sineOut",400).then(function(){this.getChildByName(this.__player+this.__pos).getChildByName("baseglow").visible=!1,this.laserPanel.visible=!1,this.laserPanel.scaleX=1,this.laserPanel.scaleY=1,this.laserPanel.alpha=1,this.__specialPaused=!1}.bind(this)))}},{key:"drillReady",value:function(){this.__drill=!0,this.__resetCannonMark("drill"),this.ready(),this.drillAutoSendCountdown(10),_soundmgr2.default.getInstance().playSound("snd/jcby/drillready.mp3")}},{key:"drillAutoSendCountdown",value:function(n){this.levelNum.value=n,n>0?this.timerOnce(1e3,this,this.drillAutoSendCountdown,[n-1],!1):(this.parent.scene.event("mousedown"),this.parent.scene.event("mouseup"))}},{key:"drillSend",value:function(bullet){this.clearTimer(this,this.drillAutoSendCountdown),this.levelNum.value=" ",this.__drill=!1,this.__resetCannonMark("drill"),this.idle();var _this=this;bullet.once("bomb",bullet,function(pos){_this.event("drill_bomb",pos)}),bullet.once("bombed",bullet,function(pos){_this.__specialPaused=!1,_this.__recalcLevelMark();var lev=_this.__lev;_this.__lev=0,_this.level=lev,_this.event("drill_bombed",pos)})}},{key:"setCannonAngle",value:function(){var args=Array.prototype.slice.call(arguments,0);if(2===args.length){var x=args[0],y=args[1],xl=x-this.x,yl=this.y-y,a=180*Math.atan2(xl,yl)/Math.PI,b=a;if(this.__invent&&((b=180-a)<-180&&(b+=360),b>180&&(b-=360)),b>75||b<-75)return;this.cannon.rotation=a}else{var _a=args[0];if(_a>75||_a<-75)return;this.__invent&&(_a=180-_a),this.cannon.rotation=_a}}},{key:"levelUp",value:function(){this.__editLevel(1)}},{key:"levelDown",value:function(){this.__editLevel(-1)}},{key:"__editLevel",value:function(plus){if(!this.__free&&!this.paused){if("self"==this.__player&&_gameconst2.default.LOCKTURRET&&plus>0){var gamedata=_playerdata_mgr2.default.getInstance().getMe().getGameData("jcby_"+this.__kindID);if(gamedata&&this.level<10)if(52001==this.__kindID){if(this.level==gamedata.m_Data.score+1)return void this.ShowTip("每开启一次宝箱\n解锁下一级炮!")}else if(52005==this.__kindID&&this.level==gamedata.m_Data.score+1)return void this.ShowTip("每发射500炮\n解锁下一级炮!")}var lev=this.__lev+plus;lev>_settings2.default.cannonSetting.maxRate?lev=_settings2.default.cannonSetting.minRate:lev<_settings2.default.cannonSetting.minRate&&(lev=_settings2.default.cannonSetting.maxRate),this.level=lev,this.onChkLockTurret({nopop:!0}),"self"==this.__player&&_gameconst2.default.LOCKTURRET&&this.ClearTip()}}},{key:"__recalcLevelMark",value:function(){if(!this.__double&&!this.__free&&!this.__drill){var mark=0;this.__gdata&&(_comfunc2.default.isNil(this.__gdata.turrentskin)?this.__gdata.vipdata&&(mark=Math.min(6,_vipmgr2.default.GetVipLv(this.__gdata.vipdata.exp))):mark=Math.min(6,this.__gdata.turrentskin)),this.__resetCannonMark(mark)}}},{key:"__resetCannonMark",value:function(mark){mark!==this.__cannonMarkName&&(this.__cannonMarkName=mark,"double"===mark||"free"===mark||"drill"===mark||(this.base.skin="res-game/jcby/aqua/canon"+mark+"_base.png"),this.__firing||this.idle())}},{key:"activeLaser",value:function(){var layer=this.cannon.getChildByName("laser_point"),head=this.cannon.getChildByName("laser_cover");if(layer.timerOnce(400,this,this.removeLaser,[],!0),!head.visible){var line=layer.getChildAt(0);line.scaleX=0,line.scaleY=17,_motion2.default.to(line,{scaleX:1},300,"backOut"),layer.visible=!0,head.visible=!0}}},{key:"removeLaser",value:function(){var layer=this.cannon.getChildByName("laser_point");this.cannon.getChildByName("laser_cover").visible=!1;var line=layer.getChildAt(0);_motion2.default.to(line,{scaleX:0},100,"sineOut").then(function(){layer.visible=!1})}},{key:"chkLockTurret",value:function(){if("self"===this.__player&&_gameconst2.default.LOCKTURRET){var gamedata=_playerdata_mgr2.default.getInstance().getMe().getGameData("jcby_"+this.__kindID);gamedata&&(this.onChkLockTurret({nopop:!0}),gamedata.addEventListener("eve.DataChg",this,this.onChkLockTurret))}}},{key:"onChkLockTurret",value:function(args){if("self"===this.__player&&_gameconst2.default.LOCKTURRET){var gamedata=_playerdata_mgr2.default.getInstance().getMe().getGameData("jcby_"+this.__kindID);if(gamedata){var downbtn=this.getChildByName("self"+this.__pos).getChildByName("info").getChildByName("btn_down");this.getChildByName("self"+this.__pos).getChildByName("info").getChildByName("btn_up");downbtn.disabled=!1;var poplevel=0;52001!=this.__kindID&&52005!=this.__kindID||(gamedata.m_Data.score<_settings2.default.cannonSetting.maxRate-1&&(1==this.level&&(downbtn.disabled=!0),poplevel=gamedata.m_Data.score+1),gamedata.m_Data.score!=_settings2.default.cannonSetting.maxRate||args.nopop||(poplevel=gamedata.m_Data.score)),!args.nopop&&poplevel>0&&this.ShowTip("您已成功解锁"+poplevel+"倍炮")}}}},{key:"ShowTip",value:function(msg){var _this4=this;this.ClearTip();var tip=this.getChildByName("self"+this.__pos).getChildByName("tip");tip.getChildByName("info").text=msg,tip.visible=!0,_motion2.default.to(tip,{},5e3,"sineOut",0).then(function(){_this4.getChildByName("self"+_this4.__pos).getChildByName("tip").visible=!1})}},{key:"ClearTip",value:function(){var tip=this.getChildByName("self"+this.__pos).getChildByName("tip");tip.visible=!1,_motion2.default.clearAll(tip)}},{key:"OnChgTurrentSkin",value:function(skin){this.__gdata&&(this.__gdata.turrentskin=skin,this.__recalcLevelMark())}},{key:"invent",get:function(){return this.__invent}},{key:"angle",get:function(){var r=this.cannon.rotation;return this.__invent&&(r=180-r),r<-180&&(r+=360),r>180&&(r-=360),r}},{key:"level",get:function(){return this.__lev},set:function(lev){-1!==_settings2.default.cannonSetting.basePoint?lev!==this.__lev&&(this.__lev=lev,this.levelNum.value=lev,this.__recalcLevelMark(),_soundmgr2.default.getInstance().playSound("snd/jcby/cannonswitch.mp3")):this.timerOnce(200,this,function(){this.level=lev})}},{key:"special",get:function(){return{double:this.__double,free:this.__free,drill:this.__drill,laser:this.__laser}}},{key:"laserElapse",get:function(){return this.__laserTimes}},{key:"double",get:function(){return this.__double},set:function(sp){sp!==this.__double&&(this.__double=sp,this.__recalcLevelMark())}},{key:"paused",get:function(){return this.__specialPaused}},{key:"freeball",get:function(){return this.getChildByName(this.__player+this.__pos).getChildByName("free").getChildByName("ball")}},{key:"triple",set:function(v){this.cannon.getChildByName("triple_1").visible=!!v,this.cannon.getChildByName("triple_2").visible=!!v}},{key:"skin",set:function(num){this.__cannonMarkName=num,this.__recalcLevelMark()}}]),Turret_Jcby}();exports.default=Turret_Jcby},{"../../../../app/com/vipmgr":4,"../../../../app/gameconst":5,"../../../../appbase/com/FlyText":52,"../../../../appbase/com/soundmgr":65,"../../../../framework/data/playerdata_mgr":117,"../../../../framework/utils/comfunc":144,"../../../../ui/layaMaxUI":178,"../../meta/settings":156,"../../util/cannon_calc":174,"../../util/handler":175,"../../util/motion":176}],171:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_gameconst2=(_interopRequireDefault(require("../../../app/com/vipmgr")),_interopRequireDefault(require("../../../framework/gamemodel/gamemodelmgr")),_interopRequireDefault(require("../../../app/gameconst"))),_tdf2=_interopRequireDefault(require("../../../framework/utils/tdf"));_interopRequireDefault(require("../../../framework/utils/comfunc"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var QuitSureUI=function(_BaseUI){function QuitSureUI(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,QuitSureUI);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(QuitSureUI.__proto__||Object.getPrototypeOf(QuitSureUI)).call(this));return _this.m_szItemID=[1700001,1700002],_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(QuitSureUI,_BaseUI3.default),_createClass(QuitSureUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(QuitSureUI.prototype.__proto__||Object.getPrototypeOf(QuitSureUI.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.cancelbtn.on(Laya.Event.CLICK,this,this.OnClick),this.uiobj.quitbtn.on(Laya.Event.CLICK,this,this.OnClick);var tdf=_tdf2.default.LoadTDF("data/match/jcby/chargeitem.tdf");if(tdf)for(var i=0;i<this.m_szItemID.length;i++){var item=tdf[this.m_szItemID[i].toString()],btn=this.uiobj["item_"+(i+1)];btn.on(Laya.Event.CLICK,this,this.BuyItem),item&&(btn.getChildByName("value").text=_gameconst2.default.MakeNumberSimple(item["金币"])+"金币",btn.getChildByName("price").text=item["金额"]/100+"元")}}},{key:"OnOpen",value:function(args){1==args.mode?this.uiobj.msg.text="船长，当前探索进程还差"+(100-args.percent)+"%就可发现宝箱，是否现在退出？":2==args.mode?this.uiobj.msg.text="船长，当前探索进程还差"+(100-args.percent)+"%就可召唤陨石，是否现在退出？":this.uiobj.msg.text="船长，是否现在退出？",this.m_BackFun=args.backfun}},{key:"OnClose",value:function(){this.m_BackFun=null}},{key:"BuyItem",value:function(event){for(var i=0;i<this.m_szItemID.length;i++){var btn=this.uiobj["item_"+(i+1)];if(event.target===btn){_UIMgr2.default.getInstance().UIEvent("大厅界面","BuyGemsGold",{mode:1,item:{dataSource:{id:this.m_szItemID[i]}}},!0,!0);break}}_UIMgr2.default.getInstance().CloseUI("退出确认界面"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnClick",value:function(event){event.target===this.uiobj.closebtn||event.target===this.uiobj.cancelbtn?_UIMgr2.default.getInstance().CloseUI("退出确认界面"):event.target===this.uiobj.quitbtn&&this.m_BackFun.method.apply(this.m_BackFun.caller,this.m_BackFun.args),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),QuitSureUI}();exports.default=QuitSureUI},{"../../../app/com/vipmgr":4,"../../../app/gameconst":5,"../../../appbase/com/soundmgr":65,"../../../framework/gamemodel/gamemodelmgr":123,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/comfunc":144,"../../../framework/utils/tdf":148}],172:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_itemkindmgr2=_interopRequireDefault(require("../../../framework/data/item/itemkindmgr")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_tdf2=_interopRequireDefault(require("../../../framework/utils/tdf")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GameShopUI=function(_BaseUI){function GameShopUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GameShopUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(GameShopUI.__proto__||Object.getPrototypeOf(GameShopUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(GameShopUI,_BaseUI3.default),_createClass(GameShopUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(GameShopUI.prototype.__proto__||Object.getPrototypeOf(GameShopUI.prototype),"OnCreate",this).call(this),this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick),this.m_szBtn=[];for(var i=0;i<2;i++){var btn=this.uiobj["btn_"+(i+1)];btn.visible=!1,btn.on(Laya.Event.CLICK,this,this.SelectPage),this.m_szBtn[i]=btn}this.uiobj.listview.renderHandler=Laya.Handler.create(this,this.OnListRander,null,!1);for(var _i=0;_i<this.uiobj.listview.cells.length;_i++){var item=this.uiobj.listview.cells[_i];item.buybtn=item.getChildByName("buybtn"),item.exchangebtn=item.getChildByName("exchangebtn"),item.buybtn.on(Laya.Event.CLICK,this,this.BuyItem),item.exchangebtn.on(Laya.Event.CLICK,this.ExchangeItem)}}},{key:"OnOpen",value:function(){this.OnSelectPage(2)}},{key:"OnClose",value:function(){this.uiobj.listview.array=[]}},{key:"OnListRander",value:function(item,idx){var data=item.dataSource;if(1==this.m_nCurPage)item.exchangebtn.visible=!0,item.buybtn.visible=!1;else{var itemkind=_itemkindmgr2.default.getInstance().Find(data.id);item.getChildByName("itemname").text=itemkind.m_sName,item.buybtn.getChildByName("Text_price").text=data.money/100+"元",_gameconst2.default.SetIconImg(item.getChildByName("itemimage"),itemkind.m_sImg),item.exchangebtn.visible=!1,item.buybtn.visible=!0}}},{key:"RefreshPage",value:function(){var szItem=[];if(2==this.m_nCurPage){var tdf=_tdf2.default.LoadTDF("data/match/jcby/chargeitem.tdf");if(tdf)for(var key in tdf){var value=tdf[key],data={id:value["物品ID"],gold:value["金币"],money:value["金额"]};data.sort=data.id,szItem.push(data)}}this.uiobj.listview.array=szItem}},{key:"OnSelectPage",value:function(idx){this.m_nCurPage=idx;for(var i=0;i<this.m_szBtn.length;i++){var btn=this.m_szBtn[i];btn.mouseEnabled=i!=idx,btn.selected=i==idx}this.RefreshPage()}},{key:"SelectPage",value:function(event){for(var i=0;i<this.m_szBtn.length;i++){if(this.m_szBtn[i]===event.target){this.OnSelectPage(i);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"BuyItem",value:function(event){for(var i=0;i<this.uiobj.listview.cells.length;i++){var item=this.uiobj.listview.cells[i];if(item.buybtn===event.target){_UIMgr2.default.getInstance().UIEvent("大厅界面","BuyGemsGold",{mode:1,item:item},!0,!0);break}}_UIMgr2.default.getInstance().CloseUI("游戏内充值"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"ExchangeItem",value:function(event){}},{key:"OnClick",value:function(event){event.target==this.uiobj.closebtn&&_UIMgr2.default.getInstance().CloseUI("游戏内充值"),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),GameShopUI}();exports.default=GameShopUI},{"../../../app/gameconst":5,"../../../appbase/com/soundmgr":65,"../../../framework/data/item/itemkindmgr":113,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142,"../../../framework/utils/tdf":148}],173:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BaseUI3=_interopRequireDefault(require("../../../framework/ui/BaseUI")),_gameconst2=_interopRequireDefault(require("../../../app/gameconst")),_soundmgr2=_interopRequireDefault(require("../../../appbase/com/soundmgr")),_UIMgr2=_interopRequireDefault(require("../../../framework/ui/UIMgr")),_vipmgr2=_interopRequireDefault(require("../../../app/com/vipmgr")),_gamemodelmgr2=_interopRequireDefault(require("../../../framework/gamemodel/gamemodelmgr"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SkinChgUI=function(_BaseUI){function SkinChgUI(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SkinChgUI),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(SkinChgUI.__proto__||Object.getPrototypeOf(SkinChgUI)).call(this))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(SkinChgUI,_BaseUI3.default),_createClass(SkinChgUI,[{key:"OnCreate",value:function(){(function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0})(SkinChgUI.prototype.__proto__||Object.getPrototypeOf(SkinChgUI.prototype),"OnCreate",this).call(this),this.m_nSelectSkin=0,this.uiobj.closebtn.on(Laya.Event.CLICK,this,this.OnClick);for(var i=0;i<this.uiobj.listview.content._children.length;i++){var item=this.uiobj.listview.content._children[i];item.okbtn=item.getChildByName("okbtn"),item.eqbtn=item.getChildByName("eqbtn"),item.net=item.getChildByName("net"),item.bullet=item.getChildByName("bullet"),item.cannon=item.getChildByName("cannon"),item.light=item.getChildByName("light"),item.bullet.rawy=item.bullet.y,item.viplv=i+1,item.on(Laya.Event.MOUSE_UP,this,this.SelectItem),item.cannon.play(0,!1,"fire"+item.viplv),item.cannon.stop(),_gameconst2.default.SetIconImg(item.getChildByName("cannon_base"),"res-game/jcby/aqua/canon"+(i+1)+"_base.png")}}},{key:"OnOpen",value:function(){}},{key:"OnClose",value:function(){this.ClearTurrenAni(),this.uiobj.listview.scrollTo()}},{key:"SetData",value:function(args){for(var viplv=_vipmgr2.default.GetVipLv(),curskin=args.skin||viplv,i=0;i<this.uiobj.listview.content._children.length;i++){var item=this.uiobj.listview.content._children[i];item.okbtn.visible=item.viplv==curskin,item.eqbtn.visible=item.viplv!=curskin,item.disabled=viplv<item.viplv}this.m_nCurSkin=curskin,viplv>0?this.OnSelectItem(curskin>0?curskin-1:0):this.ClearTurrenAni()}},{key:"ClearTurrenAni",value:function(){for(var i=0;i<this.uiobj.listview.content._children.length;i++){var item=this.uiobj.listview.content._children[i];this.killTween(item.tweenkey),item.net.stop(0),item.bullet.stop(0),item.cannon.stop(0),item.net.visible=!1,item.bullet.visible=!1,item.light.visible=!1,item.eqbtn.visible=!0,item.okbtn.visible=!1,item.tweenkey=null}}},{key:"PlayTurrentAni",value:function(item){var _this2=this;function FlyBulletEnd(){item.bullet.visible=!1,item.net.once(Laya.Event.COMPLETE,this,this.PlayTurrentAni,[item]),item.net.play(0,!1,"net"+item.viplv),item.net.visible=!0}item.cannon.once(Laya.Event.COMPLETE,this,function(){item.bullet.play(0,!1,"bullet"+item.viplv),item.bullet.y=item.bullet.rawy,item.bullet.visible=!0,item.tweenkey=_this2.TweenLite(item.bullet,{y:item.net.y},100,Laya.Ease.sineOut,Laya.Handler.create(_this2,FlyBulletEnd))}),this.killTween(item.tweenkey),item.net.visible=!1,item.bullet.visible=!1,item.net.stop(),item.cannon.play(0,!1,"fire"+item.viplv),item.light.visible=!0}},{key:"ChgSkin",value:function(event){for(var i=0;i<this.uiobj.listview.content._children.length;i++){var item=this.uiobj.listview.content._children[i];if(item.eqbtn===event.target){_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,"CallSvr",{evename:"ChgTurrentSkin",data:{skin:item.viplv}});break}}_UIMgr2.default.getInstance().CloseUI("更换炮台界面")}},{key:"SelectItem",value:function(event){for(var i=0;i<this.uiobj.listview.content._children.length;i++){if(this.uiobj.listview.content._children[i]===event.target){this.OnSelectItem(i);break}}_soundmgr2.default.getInstance().playSound("snd/button.mp3")}},{key:"OnSelectItem",value:function(idx){var item=this.uiobj.listview.content._children[idx];item||(item=this.uiobj.listview.content._children[0]),this.ClearTurrenAni(),this.PlayTurrentAni(item),this.m_nSelectSkin=item.viplv,item.okbtn.visible=!0,item.eqbtn.visible=!1}},{key:"OnClick",value:function(event){event.target==this.uiobj.closebtn&&(this.m_nCurSkin!=this.m_nSelectSkin&&_gamemodelmgr2.default.getInstance().Event(_gameconst2.default.MODELNAME,"CallSvr",{evename:"ChgTurrentSkin",data:{skin:this.m_nSelectSkin}}),_UIMgr2.default.getInstance().CloseUI("更换炮台界面")),_soundmgr2.default.getInstance().playSound("snd/button.mp3")}}]),SkinChgUI}();exports.default=SkinChgUI},{"../../../app/com/vipmgr":4,"../../../app/gameconst":5,"../../../appbase/com/soundmgr":65,"../../../framework/gamemodel/gamemodelmgr":123,"../../../framework/ui/BaseUI":141,"../../../framework/ui/UIMgr":142}],174:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setTurretRate=function(data){_settings2.default.cannonSetting.basePoint=data.base,_settings2.default.cannonSetting.maxRate=data.max,_settings2.default.cannonSetting.minRate=data.min},exports.calcMaxSendBullet=function(quantity,level,gold){var price=level*_settings2.default.cannonSetting.basePoint;return gold>=price*quantity?quantity:Math.floor(gold/price)},exports.calcLevelMark=function(level){var percent=0;level!=_settings2.default.cannonSetting.minRate&&(percent=(level-_settings2.default.cannonSetting.minRate)/(_settings2.default.cannonSetting.maxRate-_settings2.default.cannonSetting.minRate));return Math.round(percent*(_settings2.default.cannonSetting.maxCannonLevelMark-_settings2.default.cannonSetting.minCannonLevelMark))+_settings2.default.cannonSetting.minCannonLevelMark},exports.getFishPathJson=function(){var raw=Laya.loader.getRes("data/match/jcby/path.json.gzip");var json=_pako2.default.ungzip(raw,{to:"string"});var data=JSON.parse(json);exports.getFishPathJson=function(){return data};return data},exports.getDistance=function(pointFrom,pointTo){return Math.hypot(pointFrom.x-pointTo.x,pointFrom.y-pointTo.y)},exports.getIntersect=function(a,b,c,d){var abc2=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x),abd2=(a.x-d.x)*(b.y-d.y)-(a.y-d.y)*(b.x-d.x);if(abc2*abd2>=0)return!1;var cda2=(c.x-a.x)*(d.y-a.y)-(c.y-a.y)*(d.x-a.x);if(cda2*(cda2+abc2-abd2)>=0)return!1;var t=cda2/(abd2-abc2),dx=t*(b.x-a.x),dy=t*(b.y-a.y);return{x:a.x+dx,y:a.y+dy}},exports.quoteIn=function(percent){percent>1&&(percent=1);return Math.pow(percent-1,5)+1},exports.getPointToLineDistance=function(point,lineStartPoint,lineEndPoint){if(lineStartPoint.x-lineEndPoint.x==0)return Math.abs(point.x-lineEndPoint.x);var k=(lineStartPoint.y-lineEndPoint.y)/(lineStartPoint.x-lineEndPoint.x),b=lineStartPoint.y-k*lineStartPoint.x;return Math.abs(k*point.x+b-point.y)/Math.sqrt(1+k*k)};var _settings2=_interopRequireDefault(require("../meta/settings")),_pako2=_interopRequireDefault(require("../../../framework/utils/pako.min"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"../../../framework/utils/pako.min":146,"../meta/settings":156}],175:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var SmallRedHandler=function(){function SmallRedHandler(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SmallRedHandler)}return _createClass(SmallRedHandler,null,[{key:"create",value:function(complete,context){var args=Array.prototype.slice.call(arguments,2),handler=null;return"function"==typeof complete&&(handler=Laya.Handler.create(context,complete,args,!1)),handler}},{key:"once",value:function(complete,context){var args=Array.prototype.slice.call(arguments,2),handler=null;return"function"==typeof complete&&(handler=Laya.Handler.create(context,complete,args,!0)),handler}},{key:"promise",value:function(){var handler=null,promise=new Promise(function(resolve){handler=Laya.Handler.create(null,resolve,[],!0)});return[handler,promise]}}]),SmallRedHandler}();exports.default=SmallRedHandler},{}],176:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_handler=require("./handler"),_handler2=(obj=_handler)&&obj.__esModule?obj:{default:obj};var spriteDestroy=Laya.Sprite.prototype.destroy;Laya.Sprite.prototype.destroy=function(){Motion.clearAll(this);var args=Array.prototype.slice.call(arguments,0);spriteDestroy.apply(this,args)};var Motion=function(){function Motion(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Motion)}return _createClass(Motion,null,[{key:"getTimingFunction",value:function(name){return name in Laya.Ease?Laya.Ease[name]:Laya.Tween.easeNone}},{key:"protoMotion",value:function(data){data instanceof Array&&(data=data[0]);var node=data.node,props=data.props,duration=data.duration,timingFunction=data.timingFunction,delay=data.delay,context=data.context,complete=data.complete,args=data.args,callback=data.callback||_handler2.default.once(complete,context,args),type=data.type||"to",ease=Motion.getTimingFunction(timingFunction);Laya.Tween[type](node,props,duration,ease,callback,delay,!1,!0)}},{key:"clearAll",value:function(node){Laya.Tween.clearAll(node)}},{key:"from",value:function(node,props,duration,timingFunction,delay){var coverBefore=arguments.length>5&&void 0!==arguments[5]&&arguments[5],autoRecover=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],agv=_handler2.default.promise(),callback=agv[0],promise=agv[1],data={node:node,props:props,duration:duration,timingFunction:timingFunction,delay:delay,callback:callback,type:"from",coverBefore:coverBefore,autoRecover:autoRecover};return Motion.protoMotion(data),promise}},{key:"to",value:function(node,props,duration,timingFunction,delay){var coverBefore=arguments.length>5&&void 0!==arguments[5]&&arguments[5],autoRecover=arguments.length>6&&void 0!==arguments[6]&&arguments[6],agv=_handler2.default.promise(),callback=agv[0],promise=agv[1],data={node:node,props:props,duration:duration,timingFunction:timingFunction,delay:delay,callback:callback,coverBefore:coverBefore,autoRecover:autoRecover};return Motion.protoMotion(data),promise}},{key:"sequenceTo",value:function(node,motionList){for(var coverBefore=arguments.length>2&&void 0!==arguments[2]&&arguments[2],proto={},max=motionList.length-1,agv=_handler2.default.promise(),callback=agv[0],promise=agv[1],idx=max;idx>=0;idx--){var props=(agv=motionList[idx])[0],duration=agv[1],timingFunction=agv[2],delay=agv[3],next={complete:Motion.protoMotion,args:[proto]};idx===max&&(next={callback:callback});var data={node:node,props:props,duration:duration,timingFunction:timingFunction,delay:delay,coverBefore:coverBefore};proto=Object.assign(next,data)}return Motion.protoMotion(proto),promise}},{key:"sequenceFrom",value:function(node,motionList){for(var coverBefore=arguments.length>2&&void 0!==arguments[2]&&arguments[2],proto=[],max=motionList.length-1,agv=_handler2.default.promise(),callback=agv[0],promise=agv[1],idx=max;idx>=0;idx--){var props=(agv=motionList[idx])[0],duration=agv[1],timingFunction=agv[2],delay=agv[3],next={complete:Motion.protoMotion,args:[proto]};idx===max&&(next={callback:callback});var data={node:node,props:props,duration:duration,timingFunction:timingFunction,delay:delay,coverBefore:coverBefore,type:"from"};proto=Object.assign(next,data)}return Motion.protoMotion(proto),promise}}]),Motion}();exports.default=Motion},{"./handler":175}],177:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ObjectPool=function ObjectPool(Cls){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ObjectPool),this.cls=Cls,this.metrics={},this._clearMetrics(),this._objpool=[]};exports.default=ObjectPool,ObjectPool.prototype.alloc=function(){var obj;return 0==this._objpool.length?(obj=new this.cls,this.metrics.totalalloc++):(obj=this._objpool.pop(),this.metrics.totalfree--),obj.dispatch&&obj.dispatch("pool_alloc"),obj},ObjectPool.prototype.free=function(obj){obj.dispatch&&obj.dispatch("pool_free"),this._objpool.push(obj),this.metrics.totalfree++},ObjectPool.prototype.collect=function(cls){this._objpool.forEach(function(item){"destroy"in item&&item.destroy()}),this._objpool=[];var inUse=this.metrics.totalalloc-this.metrics.totalfree;this._clearMetrics(inUse)},ObjectPool.prototype._clearMetrics=function(allocated){this.metrics.totalalloc=allocated||0,this.metrics.totalfree=0}},{}],178:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var View=Laya.View,Dialog=Laya.Dialog,Scene=Laya.Scene,REG=Laya.ClassUtils.regClass;REG("ui.effects.jcmy_jinbiyuUI",exports.jcmy_jinbiyuUI=function(_View){function jcmy_jinbiyuUI(){return _classCallCheck(this,jcmy_jinbiyuUI),_possibleConstructorReturn(this,(jcmy_jinbiyuUI.__proto__||Object.getPrototypeOf(jcmy_jinbiyuUI)).call(this))}return _inherits(jcmy_jinbiyuUI,View),_createClass(jcmy_jinbiyuUI,[{key:"createChildren",value:function(){_get(jcmy_jinbiyuUI.prototype.__proto__||Object.getPrototypeOf(jcmy_jinbiyuUI.prototype),"createChildren",this).call(this),this.loadScene("effects/jcmy_jinbiyu")}}]),jcmy_jinbiyuUI}()),REG("ui.effects.mixaniUI",exports.mixaniUI=function(_Scene){function mixaniUI(){return _classCallCheck(this,mixaniUI),_possibleConstructorReturn(this,(mixaniUI.__proto__||Object.getPrototypeOf(mixaniUI)).call(this))}return _inherits(mixaniUI,Scene),_createClass(mixaniUI,[{key:"createChildren",value:function(){_get(mixaniUI.prototype.__proto__||Object.getPrototypeOf(mixaniUI.prototype),"createChildren",this).call(this),this.loadScene("effects/mixani")}}]),mixaniUI}()),REG("ui.elements.dhcgUI",exports.dhcgUI=function(_View2){function dhcgUI(){return _classCallCheck(this,dhcgUI),_possibleConstructorReturn(this,(dhcgUI.__proto__||Object.getPrototypeOf(dhcgUI)).call(this))}return _inherits(dhcgUI,View),_createClass(dhcgUI,[{key:"createChildren",value:function(){_get(dhcgUI.prototype.__proto__||Object.getPrototypeOf(dhcgUI.prototype),"createChildren",this).call(this),this.loadScene("elements/dhcg")}}]),dhcgUI}()),REG("ui.elements.ExchangeItemUI",exports.ExchangeItemUI=function(_View3){function ExchangeItemUI(){return _classCallCheck(this,ExchangeItemUI),_possibleConstructorReturn(this,(ExchangeItemUI.__proto__||Object.getPrototypeOf(ExchangeItemUI)).call(this))}return _inherits(ExchangeItemUI,View),_createClass(ExchangeItemUI,[{key:"createChildren",value:function(){_get(ExchangeItemUI.prototype.__proto__||Object.getPrototypeOf(ExchangeItemUI.prototype),"createChildren",this).call(this),this.loadScene("elements/ExchangeItem")}}]),ExchangeItemUI}()),REG("ui.elements.FlyTextUI",exports.FlyTextUI=function(_View4){function FlyTextUI(){return _classCallCheck(this,FlyTextUI),_possibleConstructorReturn(this,(FlyTextUI.__proto__||Object.getPrototypeOf(FlyTextUI)).call(this))}return _inherits(FlyTextUI,View),_createClass(FlyTextUI,[{key:"createChildren",value:function(){_get(FlyTextUI.prototype.__proto__||Object.getPrototypeOf(FlyTextUI.prototype),"createChildren",this).call(this),this.loadScene("elements/FlyText")}}]),FlyTextUI}()),REG("ui.elements.gzsmUI",exports.gzsmUI=function(_View5){function gzsmUI(){return _classCallCheck(this,gzsmUI),_possibleConstructorReturn(this,(gzsmUI.__proto__||Object.getPrototypeOf(gzsmUI)).call(this))}return _inherits(gzsmUI,View),_createClass(gzsmUI,[{key:"createChildren",value:function(){_get(gzsmUI.prototype.__proto__||Object.getPrototypeOf(gzsmUI.prototype),"createChildren",this).call(this),this.loadScene("elements/gzsm")}}]),gzsmUI}()),REG("ui.elements.HeadUI",exports.HeadUI=function(_View6){function HeadUI(){return _classCallCheck(this,HeadUI),_possibleConstructorReturn(this,(HeadUI.__proto__||Object.getPrototypeOf(HeadUI)).call(this))}return _inherits(HeadUI,View),_createClass(HeadUI,[{key:"createChildren",value:function(){_get(HeadUI.prototype.__proto__||Object.getPrototypeOf(HeadUI.prototype),"createChildren",this).call(this),this.loadScene("elements/Head")}}]),HeadUI}()),REG("ui.elements.HsliderUI",exports.HsliderUI=function(_View7){function HsliderUI(){return _classCallCheck(this,HsliderUI),_possibleConstructorReturn(this,(HsliderUI.__proto__||Object.getPrototypeOf(HsliderUI)).call(this))}return _inherits(HsliderUI,View),_createClass(HsliderUI,[{key:"createChildren",value:function(){_get(HsliderUI.prototype.__proto__||Object.getPrototypeOf(HsliderUI.prototype),"createChildren",this).call(this),this.loadScene("elements/Hslider")}}]),HsliderUI}()),REG("ui.elements.OfflineInfoUI",exports.OfflineInfoUI=function(_View8){function OfflineInfoUI(){return _classCallCheck(this,OfflineInfoUI),_possibleConstructorReturn(this,(OfflineInfoUI.__proto__||Object.getPrototypeOf(OfflineInfoUI)).call(this))}return _inherits(OfflineInfoUI,View),_createClass(OfflineInfoUI,[{key:"createChildren",value:function(){_get(OfflineInfoUI.prototype.__proto__||Object.getPrototypeOf(OfflineInfoUI.prototype),"createChildren",this).call(this),this.loadScene("elements/OfflineInfo")}}]),OfflineInfoUI}()),REG("ui.elements.Panel_AgreementUI",exports.Panel_AgreementUI=function(_View9){function Panel_AgreementUI(){return _classCallCheck(this,Panel_AgreementUI),_possibleConstructorReturn(this,(Panel_AgreementUI.__proto__||Object.getPrototypeOf(Panel_AgreementUI)).call(this))}return _inherits(Panel_AgreementUI,View),_createClass(Panel_AgreementUI,[{key:"createChildren",value:function(){_get(Panel_AgreementUI.prototype.__proto__||Object.getPrototypeOf(Panel_AgreementUI.prototype),"createChildren",this).call(this),this.loadScene("elements/Panel_Agreement")}}]),Panel_AgreementUI}()),REG("ui.elements.Panel_Player_InfoUI",exports.Panel_Player_InfoUI=function(_View10){function Panel_Player_InfoUI(){return _classCallCheck(this,Panel_Player_InfoUI),_possibleConstructorReturn(this,(Panel_Player_InfoUI.__proto__||Object.getPrototypeOf(Panel_Player_InfoUI)).call(this))}return _inherits(Panel_Player_InfoUI,View),_createClass(Panel_Player_InfoUI,[{key:"createChildren",value:function(){_get(Panel_Player_InfoUI.prototype.__proto__||Object.getPrototypeOf(Panel_Player_InfoUI.prototype),"createChildren",this).call(this),this.loadScene("elements/Panel_Player_Info")}}]),Panel_Player_InfoUI}()),REG("ui.elements.PayModeUI",exports.PayModeUI=function(_View11){function PayModeUI(){return _classCallCheck(this,PayModeUI),_possibleConstructorReturn(this,(PayModeUI.__proto__||Object.getPrototypeOf(PayModeUI)).call(this))}return _inherits(PayModeUI,View),_createClass(PayModeUI,[{key:"createChildren",value:function(){_get(PayModeUI.prototype.__proto__||Object.getPrototypeOf(PayModeUI.prototype),"createChildren",this).call(this),this.loadScene("elements/PayMode")}}]),PayModeUI}()),REG("ui.elements.RoomRedInfoUI",exports.RoomRedInfoUI=function(_View12){function RoomRedInfoUI(){return _classCallCheck(this,RoomRedInfoUI),_possibleConstructorReturn(this,(RoomRedInfoUI.__proto__||Object.getPrototypeOf(RoomRedInfoUI)).call(this))}return _inherits(RoomRedInfoUI,View),_createClass(RoomRedInfoUI,[{key:"createChildren",value:function(){_get(RoomRedInfoUI.prototype.__proto__||Object.getPrototypeOf(RoomRedInfoUI.prototype),"createChildren",this).call(this),this.loadScene("elements/RoomRedInfo")}}]),RoomRedInfoUI}()),REG("ui.elements.SCDlgUI",exports.SCDlgUI=function(_View13){function SCDlgUI(){return _classCallCheck(this,SCDlgUI),_possibleConstructorReturn(this,(SCDlgUI.__proto__||Object.getPrototypeOf(SCDlgUI)).call(this))}return _inherits(SCDlgUI,View),_createClass(SCDlgUI,[{key:"createChildren",value:function(){_get(SCDlgUI.prototype.__proto__||Object.getPrototypeOf(SCDlgUI.prototype),"createChildren",this).call(this),this.loadScene("elements/SCDlg")}}]),SCDlgUI}()),REG("ui.elements.SysDlgUI",exports.SysDlgUI=function(_View14){function SysDlgUI(){return _classCallCheck(this,SysDlgUI),_possibleConstructorReturn(this,(SysDlgUI.__proto__||Object.getPrototypeOf(SysDlgUI)).call(this))}return _inherits(SysDlgUI,View),_createClass(SysDlgUI,[{key:"createChildren",value:function(){_get(SysDlgUI.prototype.__proto__||Object.getPrototypeOf(SysDlgUI.prototype),"createChildren",this).call(this),this.loadScene("elements/SysDlg")}}]),SysDlgUI}()),REG("ui.elements.WaitDlgUI",exports.WaitDlgUI=function(_View15){function WaitDlgUI(){return _classCallCheck(this,WaitDlgUI),_possibleConstructorReturn(this,(WaitDlgUI.__proto__||Object.getPrototypeOf(WaitDlgUI)).call(this))}return _inherits(WaitDlgUI,View),_createClass(WaitDlgUI,[{key:"createChildren",value:function(){_get(WaitDlgUI.prototype.__proto__||Object.getPrototypeOf(WaitDlgUI.prototype),"createChildren",this).call(this),this.loadScene("elements/WaitDlg")}}]),WaitDlgUI}()),REG("ui.elements.WeChatDlgUI",exports.WeChatDlgUI=function(_View16){function WeChatDlgUI(){return _classCallCheck(this,WeChatDlgUI),_possibleConstructorReturn(this,(WeChatDlgUI.__proto__||Object.getPrototypeOf(WeChatDlgUI)).call(this))}return _inherits(WeChatDlgUI,View),_createClass(WeChatDlgUI,[{key:"createChildren",value:function(){_get(WeChatDlgUI.prototype.__proto__||Object.getPrototypeOf(WeChatDlgUI.prototype),"createChildren",this).call(this),this.loadScene("elements/WeChatDlg")}}]),WeChatDlgUI}()),REG("ui.jcby.aqua.ani.effect_dragon_wakeupUI",exports.effect_dragon_wakeupUI=function(_View17){function effect_dragon_wakeupUI(){return _classCallCheck(this,effect_dragon_wakeupUI),_possibleConstructorReturn(this,(effect_dragon_wakeupUI.__proto__||Object.getPrototypeOf(effect_dragon_wakeupUI)).call(this))}return _inherits(effect_dragon_wakeupUI,View),_createClass(effect_dragon_wakeupUI,[{key:"createChildren",value:function(){_get(effect_dragon_wakeupUI.prototype.__proto__||Object.getPrototypeOf(effect_dragon_wakeupUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/effect_dragon_wakeup")}}]),effect_dragon_wakeupUI}()),REG("ui.jcby.aqua.ani.effect_goldglow1UI",exports.effect_goldglow1UI=function(_View18){function effect_goldglow1UI(){return _classCallCheck(this,effect_goldglow1UI),_possibleConstructorReturn(this,(effect_goldglow1UI.__proto__||Object.getPrototypeOf(effect_goldglow1UI)).call(this))}return _inherits(effect_goldglow1UI,View),_createClass(effect_goldglow1UI,[{key:"createChildren",value:function(){_get(effect_goldglow1UI.prototype.__proto__||Object.getPrototypeOf(effect_goldglow1UI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/effect_goldglow1")}}]),effect_goldglow1UI}()),REG("ui.jcby.aqua.ani.effect_goldglow2UI",exports.effect_goldglow2UI=function(_View19){function effect_goldglow2UI(){return _classCallCheck(this,effect_goldglow2UI),_possibleConstructorReturn(this,(effect_goldglow2UI.__proto__||Object.getPrototypeOf(effect_goldglow2UI)).call(this))}return _inherits(effect_goldglow2UI,View),_createClass(effect_goldglow2UI,[{key:"createChildren",value:function(){_get(effect_goldglow2UI.prototype.__proto__||Object.getPrototypeOf(effect_goldglow2UI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/effect_goldglow2")}}]),effect_goldglow2UI}()),REG("ui.jcby.aqua.ani.effect_goldglow3UI",exports.effect_goldglow3UI=function(_View20){function effect_goldglow3UI(){return _classCallCheck(this,effect_goldglow3UI),_possibleConstructorReturn(this,(effect_goldglow3UI.__proto__||Object.getPrototypeOf(effect_goldglow3UI)).call(this))}return _inherits(effect_goldglow3UI,View),_createClass(effect_goldglow3UI,[{key:"createChildren",value:function(){_get(effect_goldglow3UI.prototype.__proto__||Object.getPrototypeOf(effect_goldglow3UI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/effect_goldglow3")}}]),effect_goldglow3UI}()),REG("ui.jcby.aqua.ani.firestarUI",exports.firestarUI=function(_View21){function firestarUI(){return _classCallCheck(this,firestarUI),_possibleConstructorReturn(this,(firestarUI.__proto__||Object.getPrototypeOf(firestarUI)).call(this))}return _inherits(firestarUI,View),_createClass(firestarUI,[{key:"createChildren",value:function(){_get(firestarUI.prototype.__proto__||Object.getPrototypeOf(firestarUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/firestar")}}]),firestarUI}()),REG("ui.jcby.aqua.ani.fishmarkUI",exports.fishmarkUI=function(_View22){function fishmarkUI(){return _classCallCheck(this,fishmarkUI),_possibleConstructorReturn(this,(fishmarkUI.__proto__||Object.getPrototypeOf(fishmarkUI)).call(this))}return _inherits(fishmarkUI,View),_createClass(fishmarkUI,[{key:"createChildren",value:function(){_get(fishmarkUI.prototype.__proto__||Object.getPrototypeOf(fishmarkUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/fishmark")}}]),fishmarkUI}()),REG("ui.jcby.aqua.ani.flowerUI",exports.flowerUI=function(_View23){function flowerUI(){return _classCallCheck(this,flowerUI),_possibleConstructorReturn(this,(flowerUI.__proto__||Object.getPrototypeOf(flowerUI)).call(this))}return _inherits(flowerUI,View),_createClass(flowerUI,[{key:"createChildren",value:function(){_get(flowerUI.prototype.__proto__||Object.getPrototypeOf(flowerUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/flower")}}]),flowerUI}()),REG("ui.jcby.aqua.ani.flower46UI",exports.flower46UI=function(_View24){function flower46UI(){return _classCallCheck(this,flower46UI),_possibleConstructorReturn(this,(flower46UI.__proto__||Object.getPrototypeOf(flower46UI)).call(this))}return _inherits(flower46UI,View),_createClass(flower46UI,[{key:"createChildren",value:function(){_get(flower46UI.prototype.__proto__||Object.getPrototypeOf(flower46UI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/flower46")}}]),flower46UI}()),REG("ui.jcby.aqua.ani.lingqujiangliUI",exports.lingqujiangliUI=function(_View25){function lingqujiangliUI(){return _classCallCheck(this,lingqujiangliUI),_possibleConstructorReturn(this,(lingqujiangliUI.__proto__||Object.getPrototypeOf(lingqujiangliUI)).call(this))}return _inherits(lingqujiangliUI,View),_createClass(lingqujiangliUI,[{key:"createChildren",value:function(){_get(lingqujiangliUI.prototype.__proto__||Object.getPrototypeOf(lingqujiangliUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/lingqujiangli")}}]),lingqujiangliUI}()),REG("ui.jcby.aqua.ani.manygoldUI",exports.manygoldUI=function(_View26){function manygoldUI(){return _classCallCheck(this,manygoldUI),_possibleConstructorReturn(this,(manygoldUI.__proto__||Object.getPrototypeOf(manygoldUI)).call(this))}return _inherits(manygoldUI,View),_createClass(manygoldUI,[{key:"createChildren",value:function(){_get(manygoldUI.prototype.__proto__||Object.getPrototypeOf(manygoldUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/manygold")}}]),manygoldUI}()),REG("ui.jcby.aqua.ani.onstageUI",exports.onstageUI=function(_View27){function onstageUI(){return _classCallCheck(this,onstageUI),_possibleConstructorReturn(this,(onstageUI.__proto__||Object.getPrototypeOf(onstageUI)).call(this))}return _inherits(onstageUI,View),_createClass(onstageUI,[{key:"createChildren",value:function(){_get(onstageUI.prototype.__proto__||Object.getPrototypeOf(onstageUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/onstage")}}]),onstageUI}()),REG("ui.jcby.aqua.ani.rouletteUI",exports.rouletteUI=function(_View28){function rouletteUI(){return _classCallCheck(this,rouletteUI),_possibleConstructorReturn(this,(rouletteUI.__proto__||Object.getPrototypeOf(rouletteUI)).call(this))}return _inherits(rouletteUI,View),_createClass(rouletteUI,[{key:"createChildren",value:function(){_get(rouletteUI.prototype.__proto__||Object.getPrototypeOf(rouletteUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/roulette")}}]),rouletteUI}()),REG("ui.jcby.aqua.ani.tidecomingUI",exports.tidecomingUI=function(_View29){function tidecomingUI(){return _classCallCheck(this,tidecomingUI),_possibleConstructorReturn(this,(tidecomingUI.__proto__||Object.getPrototypeOf(tidecomingUI)).call(this))}return _inherits(tidecomingUI,View),_createClass(tidecomingUI,[{key:"createChildren",value:function(){_get(tidecomingUI.prototype.__proto__||Object.getPrototypeOf(tidecomingUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/tidecoming")}}]),tidecomingUI}()),REG("ui.jcby.aqua.ani.torpedo_boomUI",exports.torpedo_boomUI=function(_View30){function torpedo_boomUI(){return _classCallCheck(this,torpedo_boomUI),_possibleConstructorReturn(this,(torpedo_boomUI.__proto__||Object.getPrototypeOf(torpedo_boomUI)).call(this))}return _inherits(torpedo_boomUI,View),_createClass(torpedo_boomUI,[{key:"createChildren",value:function(){_get(torpedo_boomUI.prototype.__proto__||Object.getPrototypeOf(torpedo_boomUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/torpedo_boom")}}]),torpedo_boomUI}()),REG("ui.jcby.aqua.ani.torpedo_flyUI",exports.torpedo_flyUI=function(_View31){function torpedo_flyUI(){return _classCallCheck(this,torpedo_flyUI),_possibleConstructorReturn(this,(torpedo_flyUI.__proto__||Object.getPrototypeOf(torpedo_flyUI)).call(this))}return _inherits(torpedo_flyUI,View),_createClass(torpedo_flyUI,[{key:"createChildren",value:function(){_get(torpedo_flyUI.prototype.__proto__||Object.getPrototypeOf(torpedo_flyUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/torpedo_fly")}}]),torpedo_flyUI}()),REG("ui.jcby.aqua.ani.warningUI",exports.warningUI=function(_View32){function warningUI(){return _classCallCheck(this,warningUI),_possibleConstructorReturn(this,(warningUI.__proto__||Object.getPrototypeOf(warningUI)).call(this))}return _inherits(warningUI,View),_createClass(warningUI,[{key:"createChildren",value:function(){_get(warningUI.prototype.__proto__||Object.getPrototypeOf(warningUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/warning")}}]),warningUI}()),REG("ui.jcby.aqua.ani.warning2UI",exports.warning2UI=function(_View33){function warning2UI(){return _classCallCheck(this,warning2UI),_possibleConstructorReturn(this,(warning2UI.__proto__||Object.getPrototypeOf(warning2UI)).call(this))}return _inherits(warning2UI,View),_createClass(warning2UI,[{key:"createChildren",value:function(){_get(warning2UI.prototype.__proto__||Object.getPrototypeOf(warning2UI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/ani/warning2")}}]),warning2UI}()),REG("ui.jcby.aqua.Aqua_JcbyUI",exports.Aqua_JcbyUI=function(_View34){function Aqua_JcbyUI(){return _classCallCheck(this,Aqua_JcbyUI),_possibleConstructorReturn(this,(Aqua_JcbyUI.__proto__||Object.getPrototypeOf(Aqua_JcbyUI)).call(this))}return _inherits(Aqua_JcbyUI,View),_createClass(Aqua_JcbyUI,[{key:"createChildren",value:function(){_get(Aqua_JcbyUI.prototype.__proto__||Object.getPrototypeOf(Aqua_JcbyUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/Aqua_Jcby")}}]),Aqua_JcbyUI}()),REG("ui.jcby.aqua.help_detailUI",exports.help_detailUI=function(_View35){function help_detailUI(){return _classCallCheck(this,help_detailUI),_possibleConstructorReturn(this,(help_detailUI.__proto__||Object.getPrototypeOf(help_detailUI)).call(this))}return _inherits(help_detailUI,View),_createClass(help_detailUI,[{key:"createChildren",value:function(){_get(help_detailUI.prototype.__proto__||Object.getPrototypeOf(help_detailUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/help_detail")}}]),help_detailUI}()),REG("ui.jcby.aqua.Help_JcbyUI",exports.Help_JcbyUI=function(_Dialog){function Help_JcbyUI(){return _classCallCheck(this,Help_JcbyUI),_possibleConstructorReturn(this,(Help_JcbyUI.__proto__||Object.getPrototypeOf(Help_JcbyUI)).call(this))}return _inherits(Help_JcbyUI,Dialog),_createClass(Help_JcbyUI,[{key:"createChildren",value:function(){_get(Help_JcbyUI.prototype.__proto__||Object.getPrototypeOf(Help_JcbyUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/Help_Jcby")}}]),Help_JcbyUI}()),REG("ui.jcby.aqua.jiujijingUI",exports.jiujijingUI=function(_View36){function jiujijingUI(){return _classCallCheck(this,jiujijingUI),_possibleConstructorReturn(this,(jiujijingUI.__proto__||Object.getPrototypeOf(jiujijingUI)).call(this))}return _inherits(jiujijingUI,View),_createClass(jiujijingUI,[{key:"createChildren",value:function(){_get(jiujijingUI.prototype.__proto__||Object.getPrototypeOf(jiujijingUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/jiujijing")}}]),jiujijingUI}()),REG("ui.jcby.aqua.Panel_kuaichongUI",exports.Panel_kuaichongUI=function(_View37){function Panel_kuaichongUI(){return _classCallCheck(this,Panel_kuaichongUI),_possibleConstructorReturn(this,(Panel_kuaichongUI.__proto__||Object.getPrototypeOf(Panel_kuaichongUI)).call(this))}return _inherits(Panel_kuaichongUI,View),_createClass(Panel_kuaichongUI,[{key:"createChildren",value:function(){_get(Panel_kuaichongUI.prototype.__proto__||Object.getPrototypeOf(Panel_kuaichongUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/Panel_kuaichong")}}]),Panel_kuaichongUI}()),REG("ui.jcby.aqua.Pane_shangchengUI",exports.Pane_shangchengUI=function(_View38){function Pane_shangchengUI(){return _classCallCheck(this,Pane_shangchengUI),_possibleConstructorReturn(this,(Pane_shangchengUI.__proto__||Object.getPrototypeOf(Pane_shangchengUI)).call(this))}return _inherits(Pane_shangchengUI,View),_createClass(Pane_shangchengUI,[{key:"createChildren",value:function(){_get(Pane_shangchengUI.prototype.__proto__||Object.getPrototypeOf(Pane_shangchengUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/Pane_shangcheng")}}]),Pane_shangchengUI}()),REG("ui.jcby.aqua.paotaiUI",exports.paotaiUI=function(_View39){function paotaiUI(){return _classCallCheck(this,paotaiUI),_possibleConstructorReturn(this,(paotaiUI.__proto__||Object.getPrototypeOf(paotaiUI)).call(this))}return _inherits(paotaiUI,View),_createClass(paotaiUI,[{key:"createChildren",value:function(){_get(paotaiUI.prototype.__proto__||Object.getPrototypeOf(paotaiUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/paotai")}}]),paotaiUI}()),REG("ui.jcby.aqua.record_detailUI",exports.record_detailUI=function(_View40){function record_detailUI(){return _classCallCheck(this,record_detailUI),_possibleConstructorReturn(this,(record_detailUI.__proto__||Object.getPrototypeOf(record_detailUI)).call(this))}return _inherits(record_detailUI,View),_createClass(record_detailUI,[{key:"createChildren",value:function(){_get(record_detailUI.prototype.__proto__||Object.getPrototypeOf(record_detailUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/record_detail")}}]),record_detailUI}()),REG("ui.jcby.aqua.Settle_JcbyUI",exports.Settle_JcbyUI=function(_Dialog2){function Settle_JcbyUI(){return _classCallCheck(this,Settle_JcbyUI),_possibleConstructorReturn(this,(Settle_JcbyUI.__proto__||Object.getPrototypeOf(Settle_JcbyUI)).call(this))}return _inherits(Settle_JcbyUI,Dialog),_createClass(Settle_JcbyUI,[{key:"createChildren",value:function(){_get(Settle_JcbyUI.prototype.__proto__||Object.getPrototypeOf(Settle_JcbyUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/Settle_Jcby")}}]),Settle_JcbyUI}()),REG("ui.jcby.aqua.Turret_JcbyUI",exports.Turret_JcbyUI=function(_View41){function Turret_JcbyUI(){return _classCallCheck(this,Turret_JcbyUI),_possibleConstructorReturn(this,(Turret_JcbyUI.__proto__||Object.getPrototypeOf(Turret_JcbyUI)).call(this))}return _inherits(Turret_JcbyUI,View),_createClass(Turret_JcbyUI,[{key:"createChildren",value:function(){_get(Turret_JcbyUI.prototype.__proto__||Object.getPrototypeOf(Turret_JcbyUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/aqua/Turret_Jcby")}}]),Turret_JcbyUI}()),REG("ui.jcby.effects.dice_shakingUI",exports.dice_shakingUI=function(_View42){function dice_shakingUI(){return _classCallCheck(this,dice_shakingUI),_possibleConstructorReturn(this,(dice_shakingUI.__proto__||Object.getPrototypeOf(dice_shakingUI)).call(this))}return _inherits(dice_shakingUI,View),_createClass(dice_shakingUI,[{key:"createChildren",value:function(){_get(dice_shakingUI.prototype.__proto__||Object.getPrototypeOf(dice_shakingUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/effects/dice_shaking")}}]),dice_shakingUI}()),REG("ui.jcby.fish.dicefishUI",exports.dicefishUI=function(_View43){function dicefishUI(){return _classCallCheck(this,dicefishUI),_possibleConstructorReturn(this,(dicefishUI.__proto__||Object.getPrototypeOf(dicefishUI)).call(this))}return _inherits(dicefishUI,View),_createClass(dicefishUI,[{key:"createChildren",value:function(){_get(dicefishUI.prototype.__proto__||Object.getPrototypeOf(dicefishUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/fish/dicefish")}}]),dicefishUI}()),REG("ui.jcby.fish.dragonkingUI",exports.dragonkingUI=function(_View44){function dragonkingUI(){return _classCallCheck(this,dragonkingUI),_possibleConstructorReturn(this,(dragonkingUI.__proto__||Object.getPrototypeOf(dragonkingUI)).call(this))}return _inherits(dragonkingUI,View),_createClass(dragonkingUI,[{key:"createChildren",value:function(){_get(dragonkingUI.prototype.__proto__||Object.getPrototypeOf(dragonkingUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/fish/dragonking")}}]),dragonkingUI}()),REG("ui.jcby.fish.drillkingUI",exports.drillkingUI=function(_View45){function drillkingUI(){return _classCallCheck(this,drillkingUI),_possibleConstructorReturn(this,(drillkingUI.__proto__||Object.getPrototypeOf(drillkingUI)).call(this))}return _inherits(drillkingUI,View),_createClass(drillkingUI,[{key:"createChildren",value:function(){_get(drillkingUI.prototype.__proto__||Object.getPrototypeOf(drillkingUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/fish/drillking")}}]),drillkingUI}()),REG("ui.jcby.fish.frogkingUI",exports.frogkingUI=function(_View46){function frogkingUI(){return _classCallCheck(this,frogkingUI),_possibleConstructorReturn(this,(frogkingUI.__proto__||Object.getPrototypeOf(frogkingUI)).call(this))}return _inherits(frogkingUI,View),_createClass(frogkingUI,[{key:"createChildren",value:function(){_get(frogkingUI.prototype.__proto__||Object.getPrototypeOf(frogkingUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/fish/frogking")}}]),frogkingUI}()),REG("ui.jcby.fish.laserfishUI",exports.laserfishUI=function(_View47){function laserfishUI(){return _classCallCheck(this,laserfishUI),_possibleConstructorReturn(this,(laserfishUI.__proto__||Object.getPrototypeOf(laserfishUI)).call(this))}return _inherits(laserfishUI,View),_createClass(laserfishUI,[{key:"createChildren",value:function(){_get(laserfishUI.prototype.__proto__||Object.getPrototypeOf(laserfishUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/fish/laserfish")}}]),laserfishUI}()),REG("ui.jcby.fish.volcanokingUI",exports.volcanokingUI=function(_View48){function volcanokingUI(){return _classCallCheck(this,volcanokingUI),_possibleConstructorReturn(this,(volcanokingUI.__proto__||Object.getPrototypeOf(volcanokingUI)).call(this))}return _inherits(volcanokingUI,View),_createClass(volcanokingUI,[{key:"createChildren",value:function(){_get(volcanokingUI.prototype.__proto__||Object.getPrototypeOf(volcanokingUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/fish/volcanoking")}}]),volcanokingUI}()),REG("ui.jcby.fish.whalekingUI",exports.whalekingUI=function(_View49){function whalekingUI(){return _classCallCheck(this,whalekingUI),_possibleConstructorReturn(this,(whalekingUI.__proto__||Object.getPrototypeOf(whalekingUI)).call(this))}return _inherits(whalekingUI,View),_createClass(whalekingUI,[{key:"createChildren",value:function(){_get(whalekingUI.prototype.__proto__||Object.getPrototypeOf(whalekingUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/fish/whaleking")}}]),whalekingUI}()),REG("ui.jcby.help.BSUI",exports.BSUI=function(_View50){function BSUI(){return _classCallCheck(this,BSUI),_possibleConstructorReturn(this,(BSUI.__proto__||Object.getPrototypeOf(BSUI)).call(this))}return _inherits(BSUI,View),_createClass(BSUI,[{key:"createChildren",value:function(){_get(BSUI.prototype.__proto__||Object.getPrototypeOf(BSUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/help/BS")}}]),BSUI}()),REG("ui.jcby.help.JJUI",exports.JJUI=function(_View51){function JJUI(){return _classCallCheck(this,JJUI),_possibleConstructorReturn(this,(JJUI.__proto__||Object.getPrototypeOf(JJUI)).call(this))}return _inherits(JJUI,View),_createClass(JJUI,[{key:"createChildren",value:function(){_get(JJUI.prototype.__proto__||Object.getPrototypeOf(JJUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/help/JJ")}}]),JJUI}()),REG("ui.jcby.help.SMUI",exports.SMUI=function(_View52){function SMUI(){return _classCallCheck(this,SMUI),_possibleConstructorReturn(this,(SMUI.__proto__||Object.getPrototypeOf(SMUI)).call(this))}return _inherits(SMUI,View),_createClass(SMUI,[{key:"createChildren",value:function(){_get(SMUI.prototype.__proto__||Object.getPrototypeOf(SMUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/help/SM")}}]),SMUI}()),REG("ui.jcby.record.RecordDetailUI",exports.RecordDetailUI=function(_View53){function RecordDetailUI(){return _classCallCheck(this,RecordDetailUI),_possibleConstructorReturn(this,(RecordDetailUI.__proto__||Object.getPrototypeOf(RecordDetailUI)).call(this))}return _inherits(RecordDetailUI,View),_createClass(RecordDetailUI,[{key:"createChildren",value:function(){_get(RecordDetailUI.prototype.__proto__||Object.getPrototypeOf(RecordDetailUI.prototype),"createChildren",this).call(this),this.loadScene("jcby/record/RecordDetail")}}]),RecordDetailUI}());var LoadingPageUI=exports.LoadingPageUI=function(_View54){function LoadingPageUI(){return _classCallCheck(this,LoadingPageUI),_possibleConstructorReturn(this,(LoadingPageUI.__proto__||Object.getPrototypeOf(LoadingPageUI)).call(this))}return _inherits(LoadingPageUI,View),_createClass(LoadingPageUI,[{key:"createChildren",value:function(){_get(LoadingPageUI.prototype.__proto__||Object.getPrototypeOf(LoadingPageUI.prototype),"createChildren",this).call(this),this.createView(LoadingPageUI.uiView)}}]),LoadingPageUI}();LoadingPageUI.uiView={type:"View",props:{width:1280,height:720},compId:1,child:[{type:"Image",props:{var:"bg",top:0,skin:"loading/bg_day.png",right:0,left:0,bottom:0,anchorY:.5,anchorX:.5},compId:29},{type:"Image",props:{var:"logo",skin:"loading/logo2.png",centerY:-147,centerX:0,anchorY:.5,anchorX:.5},compId:17},{type:"Image",props:{y:254,x:123,visible:!1,skin:"loading/loading_front.png",centerX:-15,bottom:0},compId:39},{type:"Image",props:{top:0,skin:"lobby/lobby_tree2.png",left:0},compId:41},{type:"Image",props:{top:120,skin:"lobby/lobby_tree1.png",left:0},compId:40},{type:"Image",props:{top:0,skin:"lobby/lobby_tree3.png",right:0},compId:42},{type:"Image",props:{skin:"lobby/lobby_lb.png",left:0,bottom:0},compId:32},{type:"Image",props:{top:0,skin:"lobby/lobby_lt.png",left:0},compId:33},{type:"Image",props:{skin:"lobby/lobby_rb.png",right:0,bottom:0},compId:34},{type:"Image",props:{width:501,top:0,skin:"lobby/lobby_rt.png",right:0,height:332},compId:35},{type:"Image",props:{width:558,var:"bar",skin:"loading/loading_base.png",centerX:0,bottom:60,anchorY:.5,anchorX:.5},compId:6,child:[{type:"Image",props:{y:2,x:2,width:554,skin:"loading/loading_bar.png",name:"progress",height:23,anchorY:0},compId:7,child:[{type:"Sprite",props:{width:554,renderType:"mask",height:23},compId:8,child:[{type:"Rect",props:{y:0,x:0,width:554,lineWidth:1,height:23,fillColor:"#ff0000"},compId:9}]}]},{type:"Label",props:{y:14.5,x:275,text:"100%",strokeColor:"#000000",stroke:4,name:"per",fontSize:22,color:"#ffffff",anchorY:.5,anchorX:.5},compId:10},{type:"Label",props:{y:50,x:275,text:"Loading...",strokeColor:"#000000",stroke:4,name:"msg",fontSize:22,color:"#ffffff",anchorY:.5,anchorX:.5},compId:11}]}],loadList:["loading/bg_day.png","loading/logo2.png","loading/loading_front.png","lobby/lobby_tree2.png","lobby/lobby_tree1.png","lobby/lobby_tree3.png","lobby/lobby_lb.png","lobby/lobby_lt.png","lobby/lobby_rb.png","lobby/lobby_rt.png","loading/loading_base.png","loading/loading_bar.png"],loadList3D:[]},REG("ui.loading.LoadingPageUI",LoadingPageUI),REG("ui.lobby.activity.Activity_DailyAwardsUI",exports.Activity_DailyAwardsUI=function(_View55){function Activity_DailyAwardsUI(){return _classCallCheck(this,Activity_DailyAwardsUI),_possibleConstructorReturn(this,(Activity_DailyAwardsUI.__proto__||Object.getPrototypeOf(Activity_DailyAwardsUI)).call(this))}return _inherits(Activity_DailyAwardsUI,View),_createClass(Activity_DailyAwardsUI,[{key:"createChildren",value:function(){_get(Activity_DailyAwardsUI.prototype.__proto__||Object.getPrototypeOf(Activity_DailyAwardsUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/activity/Activity_DailyAwards")}}]),Activity_DailyAwardsUI}()),REG("ui.lobby.activity.Activity_DayAwardsUI",exports.Activity_DayAwardsUI=function(_View56){function Activity_DayAwardsUI(){return _classCallCheck(this,Activity_DayAwardsUI),_possibleConstructorReturn(this,(Activity_DayAwardsUI.__proto__||Object.getPrototypeOf(Activity_DayAwardsUI)).call(this))}return _inherits(Activity_DayAwardsUI,View),_createClass(Activity_DayAwardsUI,[{key:"createChildren",value:function(){_get(Activity_DayAwardsUI.prototype.__proto__||Object.getPrototypeOf(Activity_DayAwardsUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/activity/Activity_DayAwards")}}]),Activity_DayAwardsUI}()),REG("ui.lobby.activity.Activity_DayTimeAwardsUI",exports.Activity_DayTimeAwardsUI=function(_View57){function Activity_DayTimeAwardsUI(){return _classCallCheck(this,Activity_DayTimeAwardsUI),_possibleConstructorReturn(this,(Activity_DayTimeAwardsUI.__proto__||Object.getPrototypeOf(Activity_DayTimeAwardsUI)).call(this))}return _inherits(Activity_DayTimeAwardsUI,View),_createClass(Activity_DayTimeAwardsUI,[{key:"createChildren",value:function(){_get(Activity_DayTimeAwardsUI.prototype.__proto__||Object.getPrototypeOf(Activity_DayTimeAwardsUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/activity/Activity_DayTimeAwards")}}]),Activity_DayTimeAwardsUI}()),REG("ui.lobby.activity.Activity_ExchangecodeUI",exports.Activity_ExchangecodeUI=function(_View58){function Activity_ExchangecodeUI(){return _classCallCheck(this,Activity_ExchangecodeUI),_possibleConstructorReturn(this,(Activity_ExchangecodeUI.__proto__||Object.getPrototypeOf(Activity_ExchangecodeUI)).call(this))}return _inherits(Activity_ExchangecodeUI,View),_createClass(Activity_ExchangecodeUI,[{key:"createChildren",value:function(){_get(Activity_ExchangecodeUI.prototype.__proto__||Object.getPrototypeOf(Activity_ExchangecodeUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/activity/Activity_Exchangecode")}}]),Activity_ExchangecodeUI}()),REG("ui.lobby.activity.Panel_ActivitysUI",exports.Panel_ActivitysUI=function(_View59){function Panel_ActivitysUI(){return _classCallCheck(this,Panel_ActivitysUI),_possibleConstructorReturn(this,(Panel_ActivitysUI.__proto__||Object.getPrototypeOf(Panel_ActivitysUI)).call(this))}return _inherits(Panel_ActivitysUI,View),_createClass(Panel_ActivitysUI,[{key:"createChildren",value:function(){_get(Panel_ActivitysUI.prototype.__proto__||Object.getPrototypeOf(Panel_ActivitysUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/activity/Panel_Activitys")}}]),Panel_ActivitysUI}()),REG("ui.lobby.bag.Panel_BagUI",exports.Panel_BagUI=function(_View60){function Panel_BagUI(){return _classCallCheck(this,Panel_BagUI),_possibleConstructorReturn(this,(Panel_BagUI.__proto__||Object.getPrototypeOf(Panel_BagUI)).call(this))}return _inherits(Panel_BagUI,View),_createClass(Panel_BagUI,[{key:"createChildren",value:function(){_get(Panel_BagUI.prototype.__proto__||Object.getPrototypeOf(Panel_BagUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/bag/Panel_Bag")}}]),Panel_BagUI}()),REG("ui.lobby.bag.Panel_BagzengsongUI",exports.Panel_BagzengsongUI=function(_View61){function Panel_BagzengsongUI(){return _classCallCheck(this,Panel_BagzengsongUI),_possibleConstructorReturn(this,(Panel_BagzengsongUI.__proto__||Object.getPrototypeOf(Panel_BagzengsongUI)).call(this))}return _inherits(Panel_BagzengsongUI,View),_createClass(Panel_BagzengsongUI,[{key:"createChildren",value:function(){_get(Panel_BagzengsongUI.prototype.__proto__||Object.getPrototypeOf(Panel_BagzengsongUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/bag/Panel_Bagzengsong")}}]),Panel_BagzengsongUI}()),REG("ui.lobby.bag.Panel_BagzsUI",exports.Panel_BagzsUI=function(_View62){function Panel_BagzsUI(){return _classCallCheck(this,Panel_BagzsUI),_possibleConstructorReturn(this,(Panel_BagzsUI.__proto__||Object.getPrototypeOf(Panel_BagzsUI)).call(this))}return _inherits(Panel_BagzsUI,View),_createClass(Panel_BagzsUI,[{key:"createChildren",value:function(){_get(Panel_BagzsUI.prototype.__proto__||Object.getPrototypeOf(Panel_BagzsUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/bag/Panel_Bagzs")}}]),Panel_BagzsUI}()),REG("ui.lobby.dropredpacketUI",exports.dropredpacketUI=function(_View63){function dropredpacketUI(){return _classCallCheck(this,dropredpacketUI),_possibleConstructorReturn(this,(dropredpacketUI.__proto__||Object.getPrototypeOf(dropredpacketUI)).call(this))}return _inherits(dropredpacketUI,View),_createClass(dropredpacketUI,[{key:"createChildren",value:function(){_get(dropredpacketUI.prototype.__proto__||Object.getPrototypeOf(dropredpacketUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/dropredpacket")}}]),dropredpacketUI}()),REG("ui.lobby.gongxihuodeUI",exports.gongxihuodeUI=function(_View64){function gongxihuodeUI(){return _classCallCheck(this,gongxihuodeUI),_possibleConstructorReturn(this,(gongxihuodeUI.__proto__||Object.getPrototypeOf(gongxihuodeUI)).call(this))}return _inherits(gongxihuodeUI,View),_createClass(gongxihuodeUI,[{key:"createChildren",value:function(){_get(gongxihuodeUI.prototype.__proto__||Object.getPrototypeOf(gongxihuodeUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/gongxihuode")}}]),gongxihuodeUI}()),REG("ui.lobby.jjc.Help_jjcUI",exports.Help_jjcUI=function(_Dialog3){function Help_jjcUI(){return _classCallCheck(this,Help_jjcUI),_possibleConstructorReturn(this,(Help_jjcUI.__proto__||Object.getPrototypeOf(Help_jjcUI)).call(this))}return _inherits(Help_jjcUI,Dialog),_createClass(Help_jjcUI,[{key:"createChildren",value:function(){_get(Help_jjcUI.prototype.__proto__||Object.getPrototypeOf(Help_jjcUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/jjc/Help_jjc")}}]),Help_jjcUI}()),REG("ui.lobby.jjc.Panel_djsUI",exports.Panel_djsUI=function(_View65){function Panel_djsUI(){return _classCallCheck(this,Panel_djsUI),_possibleConstructorReturn(this,(Panel_djsUI.__proto__||Object.getPrototypeOf(Panel_djsUI)).call(this))}return _inherits(Panel_djsUI,View),_createClass(Panel_djsUI,[{key:"createChildren",value:function(){_get(Panel_djsUI.prototype.__proto__||Object.getPrototypeOf(Panel_djsUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/jjc/Panel_djs")}}]),Panel_djsUI}()),REG("ui.lobby.jjc.Panel_jjcUI",exports.Panel_jjcUI=function(_View66){function Panel_jjcUI(){return _classCallCheck(this,Panel_jjcUI),_possibleConstructorReturn(this,(Panel_jjcUI.__proto__||Object.getPrototypeOf(Panel_jjcUI)).call(this))}return _inherits(Panel_jjcUI,View),_createClass(Panel_jjcUI,[{key:"createChildren",value:function(){_get(Panel_jjcUI.prototype.__proto__||Object.getPrototypeOf(Panel_jjcUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/jjc/Panel_jjc")}}]),Panel_jjcUI}()),REG("ui.lobby.jjc.Panel_jjcphbUI",exports.Panel_jjcphbUI=function(_View67){function Panel_jjcphbUI(){return _classCallCheck(this,Panel_jjcphbUI),_possibleConstructorReturn(this,(Panel_jjcphbUI.__proto__||Object.getPrototypeOf(Panel_jjcphbUI)).call(this))}return _inherits(Panel_jjcphbUI,View),_createClass(Panel_jjcphbUI,[{key:"createChildren",value:function(){_get(Panel_jjcphbUI.prototype.__proto__||Object.getPrototypeOf(Panel_jjcphbUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/jjc/Panel_jjcphb")}}]),Panel_jjcphbUI}()),REG("ui.lobby.jjc.Panel_qmsUI",exports.Panel_qmsUI=function(_View68){function Panel_qmsUI(){return _classCallCheck(this,Panel_qmsUI),_possibleConstructorReturn(this,(Panel_qmsUI.__proto__||Object.getPrototypeOf(Panel_qmsUI)).call(this))}return _inherits(Panel_qmsUI,View),_createClass(Panel_qmsUI,[{key:"createChildren",value:function(){_get(Panel_qmsUI.prototype.__proto__||Object.getPrototypeOf(Panel_qmsUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/jjc/Panel_qms")}}]),Panel_qmsUI}()),REG("ui.lobby.jjc.Panel_tzsUI",exports.Panel_tzsUI=function(_View69){function Panel_tzsUI(){return _classCallCheck(this,Panel_tzsUI),_possibleConstructorReturn(this,(Panel_tzsUI.__proto__||Object.getPrototypeOf(Panel_tzsUI)).call(this))}return _inherits(Panel_tzsUI,View),_createClass(Panel_tzsUI,[{key:"createChildren",value:function(){_get(Panel_tzsUI.prototype.__proto__||Object.getPrototypeOf(Panel_tzsUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/jjc/Panel_tzs")}}]),Panel_tzsUI}()),REG("ui.lobby.LobbyPageUI",exports.LobbyPageUI=function(_View70){function LobbyPageUI(){return _classCallCheck(this,LobbyPageUI),_possibleConstructorReturn(this,(LobbyPageUI.__proto__||Object.getPrototypeOf(LobbyPageUI)).call(this))}return _inherits(LobbyPageUI,View),_createClass(LobbyPageUI,[{key:"createChildren",value:function(){_get(LobbyPageUI.prototype.__proto__||Object.getPrototypeOf(LobbyPageUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/LobbyPage")}}]),LobbyPageUI}()),REG("ui.lobby.mail.MailItemUI",exports.MailItemUI=function(_View71){function MailItemUI(){return _classCallCheck(this,MailItemUI),_possibleConstructorReturn(this,(MailItemUI.__proto__||Object.getPrototypeOf(MailItemUI)).call(this))}return _inherits(MailItemUI,View),_createClass(MailItemUI,[{key:"createChildren",value:function(){_get(MailItemUI.prototype.__proto__||Object.getPrototypeOf(MailItemUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/mail/MailItem")}}]),MailItemUI}()),REG("ui.lobby.mail.Panel_MailDlgUI",exports.Panel_MailDlgUI=function(_View72){function Panel_MailDlgUI(){return _classCallCheck(this,Panel_MailDlgUI),_possibleConstructorReturn(this,(Panel_MailDlgUI.__proto__||Object.getPrototypeOf(Panel_MailDlgUI)).call(this))}return _inherits(Panel_MailDlgUI,View),_createClass(Panel_MailDlgUI,[{key:"createChildren",value:function(){_get(Panel_MailDlgUI.prototype.__proto__||Object.getPrototypeOf(Panel_MailDlgUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/mail/Panel_MailDlg")}}]),Panel_MailDlgUI}()),REG("ui.lobby.Panel_BindRealUI",exports.Panel_BindRealUI=function(_View73){function Panel_BindRealUI(){return _classCallCheck(this,Panel_BindRealUI),_possibleConstructorReturn(this,(Panel_BindRealUI.__proto__||Object.getPrototypeOf(Panel_BindRealUI)).call(this))}return _inherits(Panel_BindRealUI,View),_createClass(Panel_BindRealUI,[{key:"createChildren",value:function(){_get(Panel_BindRealUI.prototype.__proto__||Object.getPrototypeOf(Panel_BindRealUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_BindReal")}}]),Panel_BindRealUI}()),REG("ui.lobby.Panel_BuyConfirmUI",exports.Panel_BuyConfirmUI=function(_View74){function Panel_BuyConfirmUI(){return _classCallCheck(this,Panel_BuyConfirmUI),_possibleConstructorReturn(this,(Panel_BuyConfirmUI.__proto__||Object.getPrototypeOf(Panel_BuyConfirmUI)).call(this))}return _inherits(Panel_BuyConfirmUI,View),_createClass(Panel_BuyConfirmUI,[{key:"createChildren",value:function(){_get(Panel_BuyConfirmUI.prototype.__proto__||Object.getPrototypeOf(Panel_BuyConfirmUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_BuyConfirm")}}]),Panel_BuyConfirmUI}()),REG("ui.lobby.Panel_daysignUI",exports.Panel_daysignUI=function(_View75){function Panel_daysignUI(){return _classCallCheck(this,Panel_daysignUI),_possibleConstructorReturn(this,(Panel_daysignUI.__proto__||Object.getPrototypeOf(Panel_daysignUI)).call(this))}return _inherits(Panel_daysignUI,View),_createClass(Panel_daysignUI,[{key:"createChildren",value:function(){_get(Panel_daysignUI.prototype.__proto__||Object.getPrototypeOf(Panel_daysignUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_daysign")}}]),Panel_daysignUI}()),REG("ui.lobby.Panel_fenxiangUI",exports.Panel_fenxiangUI=function(_View76){function Panel_fenxiangUI(){return _classCallCheck(this,Panel_fenxiangUI),_possibleConstructorReturn(this,(Panel_fenxiangUI.__proto__||Object.getPrototypeOf(Panel_fenxiangUI)).call(this))}return _inherits(Panel_fenxiangUI,View),_createClass(Panel_fenxiangUI,[{key:"createChildren",value:function(){_get(Panel_fenxiangUI.prototype.__proto__||Object.getPrototypeOf(Panel_fenxiangUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_fenxiang")}}]),Panel_fenxiangUI}()),REG("ui.lobby.Panel_FishPageUI",exports.Panel_FishPageUI=function(_View77){function Panel_FishPageUI(){return _classCallCheck(this,Panel_FishPageUI),_possibleConstructorReturn(this,(Panel_FishPageUI.__proto__||Object.getPrototypeOf(Panel_FishPageUI)).call(this))}return _inherits(Panel_FishPageUI,View),_createClass(Panel_FishPageUI,[{key:"createChildren",value:function(){_get(Panel_FishPageUI.prototype.__proto__||Object.getPrototypeOf(Panel_FishPageUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_FishPage")}}]),Panel_FishPageUI}()),REG("ui.lobby.Panel_FishPage1UI",exports.Panel_FishPage1UI=function(_View78){function Panel_FishPage1UI(){return _classCallCheck(this,Panel_FishPage1UI),_possibleConstructorReturn(this,(Panel_FishPage1UI.__proto__||Object.getPrototypeOf(Panel_FishPage1UI)).call(this))}return _inherits(Panel_FishPage1UI,View),_createClass(Panel_FishPage1UI,[{key:"createChildren",value:function(){_get(Panel_FishPage1UI.prototype.__proto__||Object.getPrototypeOf(Panel_FishPage1UI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_FishPage1")}}]),Panel_FishPage1UI}()),REG("ui.lobby.Panel_fruitUI",exports.Panel_fruitUI=function(_View79){function Panel_fruitUI(){return _classCallCheck(this,Panel_fruitUI),_possibleConstructorReturn(this,(Panel_fruitUI.__proto__||Object.getPrototypeOf(Panel_fruitUI)).call(this))}return _inherits(Panel_fruitUI,View),_createClass(Panel_fruitUI,[{key:"createChildren",value:function(){_get(Panel_fruitUI.prototype.__proto__||Object.getPrototypeOf(Panel_fruitUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_fruit")}}]),Panel_fruitUI}()),REG("ui.lobby.Panel_fulilibaoUI",exports.Panel_fulilibaoUI=function(_View80){function Panel_fulilibaoUI(){return _classCallCheck(this,Panel_fulilibaoUI),_possibleConstructorReturn(this,(Panel_fulilibaoUI.__proto__||Object.getPrototypeOf(Panel_fulilibaoUI)).call(this))}return _inherits(Panel_fulilibaoUI,View),_createClass(Panel_fulilibaoUI,[{key:"createChildren",value:function(){_get(Panel_fulilibaoUI.prototype.__proto__||Object.getPrototypeOf(Panel_fulilibaoUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_fulilibao")}}]),Panel_fulilibaoUI}()),REG("ui.lobby.Panel_gunzhuyindaoUI",exports.Panel_gunzhuyindaoUI=function(_View81){function Panel_gunzhuyindaoUI(){return _classCallCheck(this,Panel_gunzhuyindaoUI),_possibleConstructorReturn(this,(Panel_gunzhuyindaoUI.__proto__||Object.getPrototypeOf(Panel_gunzhuyindaoUI)).call(this))}return _inherits(Panel_gunzhuyindaoUI,View),_createClass(Panel_gunzhuyindaoUI,[{key:"createChildren",value:function(){_get(Panel_gunzhuyindaoUI.prototype.__proto__||Object.getPrototypeOf(Panel_gunzhuyindaoUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_gunzhuyindao")}}]),Panel_gunzhuyindaoUI}()),REG("ui.lobby.Panel_hongbaochangUI",exports.Panel_hongbaochangUI=function(_View82){function Panel_hongbaochangUI(){return _classCallCheck(this,Panel_hongbaochangUI),_possibleConstructorReturn(this,(Panel_hongbaochangUI.__proto__||Object.getPrototypeOf(Panel_hongbaochangUI)).call(this))}return _inherits(Panel_hongbaochangUI,View),_createClass(Panel_hongbaochangUI,[{key:"createChildren",value:function(){_get(Panel_hongbaochangUI.prototype.__proto__||Object.getPrototypeOf(Panel_hongbaochangUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_hongbaochang")}}]),Panel_hongbaochangUI}()),REG("ui.lobby.Panel_jinbichangUI",exports.Panel_jinbichangUI=function(_View83){function Panel_jinbichangUI(){return _classCallCheck(this,Panel_jinbichangUI),_possibleConstructorReturn(this,(Panel_jinbichangUI.__proto__||Object.getPrototypeOf(Panel_jinbichangUI)).call(this))}return _inherits(Panel_jinbichangUI,View),_createClass(Panel_jinbichangUI,[{key:"createChildren",value:function(){_get(Panel_jinbichangUI.prototype.__proto__||Object.getPrototypeOf(Panel_jinbichangUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_jinbichang")}}]),Panel_jinbichangUI}()),REG("ui.lobby.Panel_jinjichangUI",exports.Panel_jinjichangUI=function(_View84){function Panel_jinjichangUI(){return _classCallCheck(this,Panel_jinjichangUI),_possibleConstructorReturn(this,(Panel_jinjichangUI.__proto__||Object.getPrototypeOf(Panel_jinjichangUI)).call(this))}return _inherits(Panel_jinjichangUI,View),_createClass(Panel_jinjichangUI,[{key:"createChildren",value:function(){_get(Panel_jinjichangUI.prototype.__proto__||Object.getPrototypeOf(Panel_jinjichangUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_jinjichang")}}]),Panel_jinjichangUI}()),REG("ui.lobby.Panel_paihangbangUI",exports.Panel_paihangbangUI=function(_View85){function Panel_paihangbangUI(){return _classCallCheck(this,Panel_paihangbangUI),_possibleConstructorReturn(this,(Panel_paihangbangUI.__proto__||Object.getPrototypeOf(Panel_paihangbangUI)).call(this))}return _inherits(Panel_paihangbangUI,View),_createClass(Panel_paihangbangUI,[{key:"createChildren",value:function(){_get(Panel_paihangbangUI.prototype.__proto__||Object.getPrototypeOf(Panel_paihangbangUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_paihangbang")}}]),Panel_paihangbangUI}()),REG("ui.lobby.Panel_rewardinfoUI",exports.Panel_rewardinfoUI=function(_View86){function Panel_rewardinfoUI(){return _classCallCheck(this,Panel_rewardinfoUI),_possibleConstructorReturn(this,(Panel_rewardinfoUI.__proto__||Object.getPrototypeOf(Panel_rewardinfoUI)).call(this))}return _inherits(Panel_rewardinfoUI,View),_createClass(Panel_rewardinfoUI,[{key:"createChildren",value:function(){_get(Panel_rewardinfoUI.prototype.__proto__||Object.getPrototypeOf(Panel_rewardinfoUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_rewardinfo")}}]),Panel_rewardinfoUI}()),REG("ui.lobby.Panel_SetingPageUI",exports.Panel_SetingPageUI=function(_View87){function Panel_SetingPageUI(){return _classCallCheck(this,Panel_SetingPageUI),_possibleConstructorReturn(this,(Panel_SetingPageUI.__proto__||Object.getPrototypeOf(Panel_SetingPageUI)).call(this))}return _inherits(Panel_SetingPageUI,View),_createClass(Panel_SetingPageUI,[{key:"createChildren",value:function(){_get(Panel_SetingPageUI.prototype.__proto__||Object.getPrototypeOf(Panel_SetingPageUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_SetingPage")}}]),Panel_SetingPageUI}()),REG("ui.lobby.Panel_ShopUI",exports.Panel_ShopUI=function(_View88){function Panel_ShopUI(){return _classCallCheck(this,Panel_ShopUI),_possibleConstructorReturn(this,(Panel_ShopUI.__proto__||Object.getPrototypeOf(Panel_ShopUI)).call(this))}return _inherits(Panel_ShopUI,View),_createClass(Panel_ShopUI,[{key:"createChildren",value:function(){_get(Panel_ShopUI.prototype.__proto__||Object.getPrototypeOf(Panel_ShopUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_Shop")}}]),Panel_ShopUI}()),REG("ui.lobby.Panel_VIPtequanUI",exports.Panel_VIPtequanUI=function(_View89){function Panel_VIPtequanUI(){return _classCallCheck(this,Panel_VIPtequanUI),_possibleConstructorReturn(this,(Panel_VIPtequanUI.__proto__||Object.getPrototypeOf(Panel_VIPtequanUI)).call(this))}return _inherits(Panel_VIPtequanUI,View),_createClass(Panel_VIPtequanUI,[{key:"createChildren",value:function(){_get(Panel_VIPtequanUI.prototype.__proto__||Object.getPrototypeOf(Panel_VIPtequanUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_VIPtequan")}}]),Panel_VIPtequanUI}()),REG("ui.lobby.Panel_wingoldrankUI",exports.Panel_wingoldrankUI=function(_View90){function Panel_wingoldrankUI(){return _classCallCheck(this,Panel_wingoldrankUI),_possibleConstructorReturn(this,(Panel_wingoldrankUI.__proto__||Object.getPrototypeOf(Panel_wingoldrankUI)).call(this))}return _inherits(Panel_wingoldrankUI,View),_createClass(Panel_wingoldrankUI,[{key:"createChildren",value:function(){_get(Panel_wingoldrankUI.prototype.__proto__||Object.getPrototypeOf(Panel_wingoldrankUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_wingoldrank")}}]),Panel_wingoldrankUI}()),REG("ui.lobby.Panel_wyshlUI",exports.Panel_wyshlUI=function(_View91){function Panel_wyshlUI(){return _classCallCheck(this,Panel_wyshlUI),_possibleConstructorReturn(this,(Panel_wyshlUI.__proto__||Object.getPrototypeOf(Panel_wyshlUI)).call(this))}return _inherits(Panel_wyshlUI,View),_createClass(Panel_wyshlUI,[{key:"createChildren",value:function(){_get(Panel_wyshlUI.prototype.__proto__||Object.getPrototypeOf(Panel_wyshlUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_wyshl")}}]),Panel_wyshlUI}()),REG("ui.lobby.Panel_xingyundazhuanpanUI",exports.Panel_xingyundazhuanpanUI=function(_View92){function Panel_xingyundazhuanpanUI(){return _classCallCheck(this,Panel_xingyundazhuanpanUI),_possibleConstructorReturn(this,(Panel_xingyundazhuanpanUI.__proto__||Object.getPrototypeOf(Panel_xingyundazhuanpanUI)).call(this))}return _inherits(Panel_xingyundazhuanpanUI,View),_createClass(Panel_xingyundazhuanpanUI,[{key:"createChildren",value:function(){_get(Panel_xingyundazhuanpanUI.prototype.__proto__||Object.getPrototypeOf(Panel_xingyundazhuanpanUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/Panel_xingyundazhuanpan")}}]),Panel_xingyundazhuanpanUI}()),REG("ui.lobby.yaoqingyouliUI",exports.yaoqingyouliUI=function(_View93){function yaoqingyouliUI(){return _classCallCheck(this,yaoqingyouliUI),_possibleConstructorReturn(this,(yaoqingyouliUI.__proto__||Object.getPrototypeOf(yaoqingyouliUI)).call(this))}return _inherits(yaoqingyouliUI,View),_createClass(yaoqingyouliUI,[{key:"createChildren",value:function(){_get(yaoqingyouliUI.prototype.__proto__||Object.getPrototypeOf(yaoqingyouliUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/yaoqingyouli")}}]),yaoqingyouliUI}()),REG("ui.lobby.yinhang.Panel_yinhangUI",exports.Panel_yinhangUI=function(_View94){function Panel_yinhangUI(){return _classCallCheck(this,Panel_yinhangUI),_possibleConstructorReturn(this,(Panel_yinhangUI.__proto__||Object.getPrototypeOf(Panel_yinhangUI)).call(this))}return _inherits(Panel_yinhangUI,View),_createClass(Panel_yinhangUI,[{key:"createChildren",value:function(){_get(Panel_yinhangUI.prototype.__proto__||Object.getPrototypeOf(Panel_yinhangUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/yinhang/Panel_yinhang")}}]),Panel_yinhangUI}()),REG("ui.lobby.yinhang.Panel_yinhangejmmUI",exports.Panel_yinhangejmmUI=function(_View95){function Panel_yinhangejmmUI(){return _classCallCheck(this,Panel_yinhangejmmUI),_possibleConstructorReturn(this,(Panel_yinhangejmmUI.__proto__||Object.getPrototypeOf(Panel_yinhangejmmUI)).call(this))}return _inherits(Panel_yinhangejmmUI,View),_createClass(Panel_yinhangejmmUI,[{key:"createChildren",value:function(){_get(Panel_yinhangejmmUI.prototype.__proto__||Object.getPrototypeOf(Panel_yinhangejmmUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/yinhang/Panel_yinhangejmm")}}]),Panel_yinhangejmmUI}()),REG("ui.lobby.yinhang.Panel_yinhangtankuangUI",exports.Panel_yinhangtankuangUI=function(_View96){function Panel_yinhangtankuangUI(){return _classCallCheck(this,Panel_yinhangtankuangUI),_possibleConstructorReturn(this,(Panel_yinhangtankuangUI.__proto__||Object.getPrototypeOf(Panel_yinhangtankuangUI)).call(this))}return _inherits(Panel_yinhangtankuangUI,View),_createClass(Panel_yinhangtankuangUI,[{key:"createChildren",value:function(){_get(Panel_yinhangtankuangUI.prototype.__proto__||Object.getPrototypeOf(Panel_yinhangtankuangUI.prototype),"createChildren",this).call(this),this.loadScene("lobby/yinhang/Panel_yinhangtankuang")}}]),Panel_yinhangtankuangUI}()),REG("ui.login.LoginPageUI",exports.LoginPageUI=function(_View97){function LoginPageUI(){return _classCallCheck(this,LoginPageUI),_possibleConstructorReturn(this,(LoginPageUI.__proto__||Object.getPrototypeOf(LoginPageUI)).call(this))}return _inherits(LoginPageUI,View),_createClass(LoginPageUI,[{key:"createChildren",value:function(){_get(LoginPageUI.prototype.__proto__||Object.getPrototypeOf(LoginPageUI.prototype),"createChildren",this).call(this),this.loadScene("login/LoginPage")}}]),LoginPageUI}())},{}]},{},[1]);